<!DOCTYPE html>
<html>
    <head>
        <title>Deprecation Policy - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="index, follow">
        
        
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?f84ac8"
                        integrity="sha384-dtT0qaUay1UD70LXuFvRIk8t9qiMZIDWIaZu/tJK9mqGkVFFUuc00/U9Y9YlsJNe"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/policies/deprecation.html" />
        <meta property="og:title" content="Deprecation Policy - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?c1fd47" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine-website/edit/master/source/policies/deprecation.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <main role="main" class="container-wrapper container">
                    <div class="section" id="deprecation-policy">
<h1>Deprecation Policy</h1>
<p>The Doctrine team will adhere to this deprecation policy whenever it is reasonably possible.</p>
<div class="section" id="using-65fa5d3dc86c32beee910669f2221bd0013f501d-and-4f490516b1c7bb8c048a94230b9c0fcf840f1a10">
<h2>Using <code>@deprecated</code> and <code>PHPStan Deprecation Rules</code></h2>
<p>The primary and preferred method for deprecating functionality within Doctrine is by using
the <code>@deprecated</code> annotation. To have usages of functionality in your dependencies analyzed
and reported, you must use a tool like PHPStan Deprecation Rules or Psalm Static Analysis.</p>
<p>Here is an example of how this would be used in Doctrine:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e317164bea1243d16fce1a4873a3ed683afc20b5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e317164bea1243d16fce1a4873a3ed683afc20b5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-1" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityManager</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@deprecated</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSomething</span><span class="hljs-params">()</span> : <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-2" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-3" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-4" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-5" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-6" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-7" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-8" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-9" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-10" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-11" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-12" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-13" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-14" class="line-number-anchor" /><a href="#line-number-e317164bea1243d16fce1a4873a3ed683afc20b5-14">14</a></td></tr></table></div></code></pre>
<p>Then, if your code directly depends on <code>doctrine/orm</code> which provides the
<code>Doctrine\ORM\EntityManager</code> class, you will get a warning about it when you run
PHPStan Deprecation Rules or Psalm Static Analysis. Here is an example:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ec8500ca546f0e8f81828399b4cfa1a3c900d6e2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ec8500ca546f0e8f81828399b4cfa1a3c900d6e2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-1" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entities</span>\<span class="hljs-title">User</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityManager</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRegistration</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> EntityManager */</span>
    <span class="hljs-keyword">private</span> $entityManager;

    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(array $userData)</span> : <span class="hljs-title">User</span>
    </span>{
        $something = <span class="hljs-keyword">$this</span>-&gt;entityManager-&gt;getSomething();

        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-2" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-3" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-4" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-5" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-6" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-7" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-8" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-9" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-10" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-11" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-12" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-13" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-14" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-15" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-16" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-17" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-18" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-19" class="line-number-anchor" /><a href="#line-number-ec8500ca546f0e8f81828399b4cfa1a3c900d6e2-19">19</a></td></tr></table></div></code></pre>
</div>
<div class="section" id="using-e344d239f911eca252bd03f1b52c906e5e40cb4a-and-92e02ed458a22ec224b40266b5e014589758dcd7">
<h2>Using <code>trigger_error()</code> and <code>phpunit-bridge</code></h2>
<p>In some cases, you may need to conditionally deprecate functionality. In these cases, it is required
to use the <code>trigger_error()</code> function and a tool like <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> which implements a custom
error handler for you to use to collect and report these warnings. <strong>This method is not recommended
and Doctrine will try to avoid using it if possible.</strong></p>
<p>If you do not wish to use <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> you can implement your own custom error handler using
the <a href="https://secure.php.net/manual/en/function.set-error-handler.php">set_error_handler</a> function.</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>In order for this strategy to work, you have to configure your <a href="https://secure.php.net/manual/en/function.error-reporting.php">error_reporting</a> properly
in both your development and production environments. You don't want errors of type <code>E_USER_DEPRECATED</code>
being reported from PHP.</p>
</td></tr></table></div>
<p>Here is an example of how this would be used in Doctrine:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-1" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityManager</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAnotherThing</span><span class="hljs-params">()</span> : <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;featureFlag) {
            trigger_error(<span class="hljs-string">'This feature has been disabled.'</span>, E_USER_DEPRECATED);
        }

        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-2" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-3" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-4" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-5" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-6" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-7" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-8" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-9" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-10" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-11" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-12" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-13" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-14" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-15" class="line-number-anchor" /><a href="#line-number-4ba5dbb36ee3ca7500c725ee0bc9e67a939194d9-15">15</a></td></tr></table></div></code></pre>
<p>Now in order to get those warnings reported to you in your automation, you need to use a tool like <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a>.</p>
</div>
<div class="section" id="tools">
<h2>Tools</h2>
<p>There are a few tools out there that you can use to integrate deprecation warnings into your
automation.</p>
<div class="section" id="phpstan-deprecation-rules">
<h3>PHPStan Deprecation Rules</h3>
<p>Doctrine uses and recommends <a href="https://github.com/phpstan/phpstan">PHPStan</a> for reporting usages of deprecated functionality in your code.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require --dev phpstan/phpstan
<span class="noselect">$ </span>composer require --dev phpstan/phpstan-deprecation-rules</code></pre></div>
<p>You will need to setup a configuration file in the root of project named <code>phpstan.neon.dist</code></p>
<div class="console"><pre><code class="console">includes:
    - vendor/phpstan/phpstan-phpunit/extension.neon
    - vendor/phpstan/phpstan-strict-rules/rules.neon

parameters:
    level: 0
    paths:
      - lib
      - tests</code></pre></div>
<p>Now you can run the <code>vendor/bin/phpstan</code> command:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpstan analyze</code></pre></div>
</div>
<div class="section" id="psalm-static-analysis">
<h3>Psalm Static Analysis</h3>
<p><a href="https://github.com/vimeo/psalm">Psalm</a> is a static analysis tool for finding errors in PHP applications, built on top of <a href="https://github.com/nikic/php-parser">PHP Parser</a>.</p>
<p>It's able to find a large number of issues, but it can also be configured to only care about a small subset of those.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require vimeo/psalm</code></pre></div>
</div>
<div class="section" id="phpunit-bridge">
<h3>PHPUnit Bridge</h3>
<p>The <a href="https://github.com/symfony/phpunit-bridge">PHPUnit Bridge</a> provides utilities to report legacy tests and usage of deprecated code.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require --dev "symfony/phpunit-bridge:*"</code></pre></div>
</div>
</div>
</div>
            </main>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1a9d6b"
                            integrity="sha384-mQWbfzoqsuNv9t19pugdKwlIwzNVHV6mAB2u7XDg1XmqnDRAIaj9eAjeVhfm7oaq"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
