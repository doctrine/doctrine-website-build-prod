<!DOCTYPE html>
<html>
    <head>
        <title>New Release: Doctrine MongoDB ODM 2.3 with Attributes, JSON Schema Validation, and more - Doctrine: PHP Open Source Project</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is an open-source PHP project that is home to home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="index, follow">
        
        
            <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "NewsArticle",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.doctrine-project.org/2021/12/04/mongodb-odm-2.3.html"
        },
        "headline": "New Release: Doctrine MongoDB ODM 2.3 with Attributes, JSON Schema Validation, and more",
        "image": [
            "https://www.doctrine-project.org/images/og.png"
        ],
        "datePublished": "2021-12-04T00:00:00-05:00",
        "dateModified": "2021-12-04T00:00:00-05:00",
        "author": {
            "@type": "Person",
            "name": "Ion Bazan"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Doctrine",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.doctrine-project.org/images/og.png"
            }
        },
        "description": "We have released a new minor version 2.3 of Doctrine MongoDB ODM, the first version with support for"
    }
    </script>
    <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/prismjs.css?d2443b"
                            integrity="sha384-IcJ7eow//K0xRBscZjnk8kawYxbm2eUAZ9D6Xf/n0yuAi1NCvwOkep1S8XqPNB3E"
                        crossorigin="anonymous"
    />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?74d1a1"
                        integrity="sha384-dAaEn2ZyD87ZE8ZaTOc39tmNlPuZWU7Tvl3K1W/IXH5rtko68QAI5cdG6HLv97IH"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/2021/12/04/mongodb-odm-2.3.html" />
        <meta property="og:title" content="New Release: Doctrine MongoDB ODM 2.3 with Attributes, JSON Schema Validation, and more - Doctrine: PHP Open Source Project" />
        <meta property="og:description" content="The Doctrine Project is an open-source PHP project that is home to home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine-website/edit/master/source/blog/2021-12-04-mongodb-odm-2.3.md" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <main role="main" class="container-wrapper container">
            <article>
        <div class="row">
            <div class="col-lg-8 col-12">
                <header>
                    <h2>New Release: Doctrine MongoDB ODM 2.3 with Attributes, JSON Schema Validation, and more</h2>
                </header>

                <p class="lead">
                    Posted on <date>December 4, 2021</date>
                                            by
                                                    <a href="mailto:ion.bazan@gmail.com">Ion Bazan</a>
                                                            </p>
            </div>

            <div class="col-lg-4 col-12">
                <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>
            </div>
        </div>

        <hr />

        <div>
                
            
                
    <p>We have released a new minor version 2.3 of Doctrine MongoDB ODM, the first version with support for using PHP 8 Attributes as a new driver for mapping documents and several other changes. <a href="https://github.com/doctrine/mongodb-odm/releases/tag/2.3.0">See all changes and contributors in the Changelog</a> on GitHub.</p>

                <h2 class="section-header ">
    <a href="#attributes-mapping-driver">
        Attributes Mapping Driver
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>The following code example shows many of the mappings that are re-using the annotation classes for familiarity:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="441823ce15e0230e6cd7a690a03af0263d27287e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="441823ce15e0230e6cd7a690a03af0263d27287e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-1" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Types</span>\<span class="hljs-title">Type</span>;

<span class="hljs-comment">#[MongoDB\Document(repositoryClass: PostRepository::class)]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span>
</span>{
    <span class="hljs-comment">#[MongoDB\Id]</span>
    <span class="hljs-keyword">private</span> string $id;

    <span class="hljs-comment">#[MongoDB\Field(type: Type::BOOLEAN)]</span>
    <span class="hljs-keyword">private</span> bool $published = <span class="hljs-keyword">false</span>;

    <span class="hljs-comment">#[MongoDB\Field(type: Types::COLLECTION)]</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> $text = [];

    <span class="hljs-comment">#[MongoDB\ReferenceOne(targetDocument: User::class)]</span>
    <span class="hljs-keyword">public</span> $author;

    <span class="hljs-comment">#[MongoDB\ReferenceMany(targetDocument: Tag::class)]</span>
    <span class="hljs-keyword">public</span> Collection $tags;
}
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-2" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-3" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-4" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-5" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-6" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-7" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-8" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-9" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-10" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-11" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-12" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-13" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-14" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-15" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-16" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-17" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-18" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-19" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-20" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-21" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-441823ce15e0230e6cd7a690a03af0263d27287e-22" class="line-number-anchor" /><a href="#line-number-441823ce15e0230e6cd7a690a03af0263d27287e-22">22</a></td></tr></table></div></code></pre>
                
    <p>You may want to use <a href="https://getrector.org/">Rector</a> with <code>DoctrineSetList::DOCTRINE_ODM_23</code> set to convert all your annotation mappings to attributes in seconds!</p>

                <h2 class="section-header ">
    <a href="#json-schema-validation">
        JSON Schema Validation
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>MongoDB â‰¥ 3.6 offers the capability to validate documents during insertions and updates through a JSON schema associated with the collection. <a href="https://docs.mongodb.com/manual/core/schema-validation/">See MongoDB documentation</a>.</p>

                
    <p>Doctrine MongoDB ODM now provides a way to take advantage of this functionality thanks to the new <a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html#validation"><code>#[Validation]</code></a> mapping.</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ca88f150a6f25c27d13b5ecf887c0a60704b7929"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ca88f150a6f25c27d13b5ecf887c0a60704b7929"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-1" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-1">1</a></td><td class="code-line" rowspan="32"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;

<span class="hljs-comment">#[MongoDB\Document]</span>
<span class="hljs-comment">#[MongoDB\Validation(</span>
    validator: SchemaValidated::VALIDATOR,
    action: ClassMetadata::SCHEMA_VALIDATION_ACTION_WARN
)]
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SchemaValidated</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> VALIDATOR = <span class="hljs-string">&lt;&lt;&lt;'EOT'
{
    "<span class="hljs-subst">$jsonSchema</span>": {
        "required": ["name"],
        "properties": {
            "name": {
                "bsonType": "string",
                "description": "must be a string and is required"
            }
        }
    },
    "<span class="hljs-subst">$or</span>": [
        { "phone": { "<span class="hljs-subst">$type</span>": "string" } },
        { "email": { "<span class="hljs-subst">$regex</span>": { "<span class="hljs-subst">$regularExpression</span>" : { "pattern": "@mongodb\\.com$", "options": "" } } } },
        { "status": { "<span class="hljs-subst">$in</span>": [ "Unknown", "Incomplete" ] } }
    ]
}
EOT;</span>
}


</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-2" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-3" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-4" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-5" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-6" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-7" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-8" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-9" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-10" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-11" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-12" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-13" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-14" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-15" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-16" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-17" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-18" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-19" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-20" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-21" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-22" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-23" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-24" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-25" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-26" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-27" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-28" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-29" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-30" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-31" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-32" class="line-number-anchor" /><a href="#line-number-ca88f150a6f25c27d13b5ecf887c0a60704b7929-32">32</a></td></tr></table></div></code></pre>
                
    <p>Once defined, those options will be added to the collection after running the <code>odm:schema:create</code> or <code>odm:schema:update</code> command.</p>

                <h2 class="section-header ">
    <a href="#psalmified-apis">
        Psalmified APIs
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>In-code documentation has been immensely improved to make sure static analysis tools and IDEs know about the right document classes returned from <code>DocumentManager</code>, <code>ClassMetadata</code>, and other public APIs. This includes generics support for your own repositories extending <code>DocumentRepository</code>.</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="0ab79a131bfd12bd9194c8d1ba93345f5627867d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="0ab79a131bfd12bd9194c8d1ba93345f5627867d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-1" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">DocumentRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">User</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@template</span>-extends DocumentRepository&lt;User&gt;
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DocumentRepository</span>
</span>{
}
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-2" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-3" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-4" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-5" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-6" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-7" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-8" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-9" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-10" class="line-number-anchor" /><a href="#line-number-0ab79a131bfd12bd9194c8d1ba93345f5627867d-10">10</a></td></tr></table></div></code></pre>
                <h2 class="section-header ">
    <a href="#deprecations">
        Deprecations
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>Doctrine MongoDB ODM 2.3 introduces several minor deprecations:</p>

                

<ul>
    <li class="dash">The <code>Doctrine\ODM\MongoDB\Proxy\Resolver\ClassNameResolver</code> interface has been deprecated in favor of the <code>Doctrine\Persistence\Mapping\ProxyClassNameResolver</code> interface</li>
    <li class="dash">Annotation classes no longer extend <code>Doctrine\Common\Annotations\Annotation</code> class</li>
    <li class="dash">Annotation arguments switched to <code>@NamedArgumentConstructor</code> for Attribute compatibility</li>
    <li class="dash"><code>@Inheritance</code> annotation has been removed as it was never used</li>
    <li class="dash">Document Namespace Aliases (<code>&#039;MyBundle:User</code>) - use fully qualified class names instead (<code>User::class</code>)</li>
</ul>

                
    <p>Read more in our <a href="https://github.com/doctrine/mongodb-odm/blob/2.3.x/UPGRADE-2.3.md">upgrading</a> document.</p>

                <h2 class="section-header ">
    <a href="#coding-standard-support">
        Coding Standard Support
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>Doctrine MongoDB ODM 2.3 now supports and fully validates against Doctrine Coding Standard version 9.0+. This greatly improves automatic pull request checks as all new violations in a PR get caught and inlined into the PR as comments.</p>

        
    
        </div>
    </article>
    </main>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            <script
            src="https://www.doctrine-project.org/frontend/js/prismjs.js?8aa1bb"
                            integrity="sha384-3EhgfeqnppOxFBVU40g8gS+IVvmh5+wGpe4mG2otPyExrkK9t4aq8uCUy2IDLKkR"
                        crossorigin="anonymous">
    </script>
    </body>
</html>
