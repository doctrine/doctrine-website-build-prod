<!DOCTYPE html>
<html>
    <head>
        <title>MongoDB ODM: Query Builder API - Doctrine: PHP Open Source Project</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is an open-source PHP project that is home to home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="index, follow">
        
        
            <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "NewsArticle",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.doctrine-project.org/2010/07/21/mongodb-odm-query-builder-api.html"
        },
        "headline": "MongoDB ODM: Query Builder API",
        "image": [
            "https://www.doctrine-project.org/images/og.png"
        ],
        "datePublished": "2010-07-21T00:00:00-04:00",
        "dateModified": "2010-07-21T00:00:00-04:00",
        "author": {
            "@type": "Person",
            "name": "jwage"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Doctrine",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.doctrine-project.org/images/og.png"
            }
        },
        "description": "The Doctrine MongoDB Object Document Mapper includes a fluent object oriented API for building queri"
    }
    </script>
    <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/prismjs.css?d2443b"
                            integrity="sha384-IcJ7eow//K0xRBscZjnk8kawYxbm2eUAZ9D6Xf/n0yuAi1NCvwOkep1S8XqPNB3E"
                        crossorigin="anonymous"
    />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?74d1a1"
                        integrity="sha384-dAaEn2ZyD87ZE8ZaTOc39tmNlPuZWU7Tvl3K1W/IXH5rtko68QAI5cdG6HLv97IH"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/2010/07/21/mongodb-odm-query-builder-api.html" />
        <meta property="og:title" content="MongoDB ODM: Query Builder API - Doctrine: PHP Open Source Project" />
        <meta property="og:description" content="The Doctrine Project is an open-source PHP project that is home to home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine-website/edit/master/source/blog/2010-07-21-mongodb-odm-query-builder-api.md" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <main role="main" class="container-wrapper container">
            <article>
        <div class="row">
            <div class="col-lg-8 col-12">
                <header>
                    <h2>MongoDB ODM: Query Builder API</h2>
                </header>

                <p class="lead">
                    Posted on <date>July 21, 2010</date>
                                            by
                                                    jwage
                                                            </p>
            </div>

            <div class="col-lg-4 col-12">
                <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>
            </div>
        </div>

        <hr />

        <div>
                
            
                
    <p>The Doctrine MongoDB Object Document Mapper includes a fluent object oriented API for building queries to execute against MongoDB. Recently some changes were made to the API to simplify it and make it more readable. This blog post aims to demonstrate and introduce the new API to you!</p>

                <h1 class="section-header ">
    <a href="#query-types">
        Query Types
        <i class="fas fa-link"></i>
    </a>
</h1>
                
    <p>The API still supports all the types of queries you would expect:</p>

                

<ul>
    <li class="dash"><a href="#find">find</a></li>
    <li class="dash"><a href="#insert">insert</a></li>
    <li class="dash"><a href="#update">update</a></li>
    <li class="dash"><a href="#delete">delete</a></li>
</ul>

                
    <p>Continue reading to see examples for each of the above types of queries!</p>

                
    <p>## Find</p>

                
    <p>You can easily find documents by just creating a new <code>Query</code> object with the <code>createQuery()</code> method. A new <code>Query</code> object defaults to a <code>find</code> query so you just need to pass the name of the document to query for:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c827dcbdd242bf40382fd1414ca3152bd8344c49"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c827dcbdd242bf40382fd1414ca3152bd8344c49"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-1" class="line-number-anchor" /><a href="#line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q = $dm-&gt;createQuery(<span class="hljs-string">'User'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-2" class="line-number-anchor" /><a href="#line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-3" class="line-number-anchor" /><a href="#line-number-c827dcbdd242bf40382fd1414ca3152bd8344c49-3">3</a></td></tr></table></div></code></pre>
                
    <p>You can change the document being queried for by using the <code>find()</code> method:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fcd96df25a3e61bf51335cb32f2d06c21b6ae97d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fcd96df25a3e61bf51335cb32f2d06c21b6ae97d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-1" class="line-number-anchor" /><a href="#line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;find(<span class="hljs-string">'Project'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-2" class="line-number-anchor" /><a href="#line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-3" class="line-number-anchor" /><a href="#line-number-fcd96df25a3e61bf51335cb32f2d06c21b6ae97d-3">3</a></td></tr></table></div></code></pre>
                <h2 class="section-header ">
    <a href="#conditions">
        Conditions
        <i class="fas fa-link"></i>
    </a>
</h2>
                
    <p>You can limit the returned documents by specifying some conditions:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ef638e29182a744b3f86d4c2737c42793716569f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ef638e29182a744b3f86d4c2737c42793716569f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ef638e29182a744b3f86d4c2737c42793716569f-1" class="line-number-anchor" /><a href="#line-number-ef638e29182a744b3f86d4c2737c42793716569f-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;field(<span class="hljs-string">'title'</span>)-&gt;equals(<span class="hljs-string">'The Doctrine Project'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ef638e29182a744b3f86d4c2737c42793716569f-2" class="line-number-anchor" /><a href="#line-number-ef638e29182a744b3f86d4c2737c42793716569f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ef638e29182a744b3f86d4c2737c42793716569f-3" class="line-number-anchor" /><a href="#line-number-ef638e29182a744b3f86d4c2737c42793716569f-3">3</a></td></tr></table></div></code></pre>
                
    <p>Maybe you want to only return projects created after today:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="eeeaf41574fa75f4728f1d8f424a8b66e9150d6d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="eeeaf41574fa75f4728f1d8f424a8b66e9150d6d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-1" class="line-number-anchor" /><a href="#line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;field(<span class="hljs-string">'createdAt'</span>)-&gt;greaterThan(<span class="hljs-keyword">new</span> MongoDate(time()));
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-2" class="line-number-anchor" /><a href="#line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-3" class="line-number-anchor" /><a href="#line-number-eeeaf41574fa75f4728f1d8f424a8b66e9150d6d-3">3</a></td></tr></table></div></code></pre>
                
    <p>You can even a condition on an embedded document:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-1" class="line-number-anchor" /><a href="#line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;field(<span class="hljs-string">'profile.firstName'</span>)-&gt;equals(<span class="hljs-string">'Jonathan'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-2" class="line-number-anchor" /><a href="#line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-3" class="line-number-anchor" /><a href="#line-number-e128f1f1faeb0ca060bdeb9e74ff33ccd74fa39c-3">3</a></td></tr></table></div></code></pre>
                
    <p>Also, you can add a condition for a referenced document to filter by id:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="93b50deeb6871ca4bc0b812351e8273e720c8f70"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="93b50deeb6871ca4bc0b812351e8273e720c8f70"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-1" class="line-number-anchor" /><a href="#line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;field(<span class="hljs-string">'account.$id'</span>)-&gt;equals($accountId);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-2" class="line-number-anchor" /><a href="#line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-3" class="line-number-anchor" /><a href="#line-number-93b50deeb6871ca4bc0b812351e8273e720c8f70-3">3</a></td></tr></table></div></code></pre>
                
    <p>The <code>field()</code> method specifies the current field to add the conditions to. You can optionally use the magical <code>__call()</code> feature of the <code>Query</code> object to specify the current field as well:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1761a0af8fb6073172093552522ca2c75fe3b1d9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1761a0af8fb6073172093552522ca2c75fe3b1d9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-1" class="line-number-anchor" /><a href="#line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$q-&gt;createdAt()-&gt;greaterThan(<span class="hljs-keyword">new</span> MongoDate(time()));
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-2" class="line-number-anchor" /><a href="#line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-3" class="line-number-anchor" /><a href="#line-number-1761a0af8fb6073172093552522ca2c75fe3b1d9-3">3</a></td></tr></table></div></code></pre>
                
    <p>All the methods you&#039;d expect can be used in combination with the <code>field()</code> method for adding conditions to your query:</p>

                

<ul>
    <li class="dash">equal($value)</li>
    <li class="dash">where($javascript)</li>
    <li class="dash">not($value)</li>
    <li class="dash">in($values)</li>
    <li class="dash">notIn($values)</li>
    <li class="dash">notEqual($value)</li>
    <li class="dash">greaterThan($value)</li>
    <li class="dash">greaterThanOrEq($value)</li>
    <li class="dash">lessThan($value)</li>
    <li class="dash">lessThanOrEq($value)</li>
    <li class="dash">range($start, $end)</li>
    <li class="dash">size($size)</li>
    <li class="dash">exists($bool)</li>
    <li class="dash">type($type)</li>
    <li class="dash">all($values)</li>
    <li class="dash">mod($mod)</li>
</ul>

                
    <p>## Insert</p>

                
    <p>You can easily insert new documents using the <code>Query</code> API as well. Just use the <code>insert()</code> method in combination with <code>field()</code> and <code>set()</code>:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d4c4007d619c5755b90c866ccda4fd44e8abbfdd"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d4c4007d619c5755b90c866ccda4fd44e8abbfdd"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-1" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
$q = $dm-&gt;createQuery(<span class="hljs-string">'User'</span>)
    -&gt;insert()
    -&gt;field(<span class="hljs-string">'username'</span>)-&gt;set(<span class="hljs-string">'jwage'</span>)
    -&gt;field(<span class="hljs-string">'password'</span>)-&gt;set(<span class="hljs-string">'password'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-2" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-3" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-4" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-5" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-6" class="line-number-anchor" /><a href="#line-number-d4c4007d619c5755b90c866ccda4fd44e8abbfdd-6">6</a></td></tr></table></div></code></pre>
                
    <p>If you want to set the new document to insert you can use the <code>setNewObj()</code> method:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="665bb59635cba2477842d9624a04cc01d96ac9f6"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="665bb59635cba2477842d9624a04cc01d96ac9f6"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-1" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>
$q = $dm-&gt;createQuery(<span class="hljs-string">'User'</span>)
    -&gt;insert()
    -&gt;setNewObj(<span class="hljs-keyword">array</span>(
        <span class="hljs-string">'username'</span> =&gt; <span class="hljs-string">'jwage'</span>,
        <span class="hljs-string">'password'</span> =&gt; <span class="hljs-string">'password'</span>
    ));
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-2" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-3" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-4" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-5" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-6" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-7" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-8" class="line-number-anchor" /><a href="#line-number-665bb59635cba2477842d9624a04cc01d96ac9f6-8">8</a></td></tr></table></div></code></pre>
                
    <p>## Update</p>

                
    <p>If you want to update a document you can use the <code>update()</code> method in combination with <code>field()</code>, <code>set()</code> and conditions. Here is an example where we create a query to update a user with the username <code>jwage</code> and give him a new password:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="52b8abcbbeeeabc11a1274a0c08566fe1ca79428"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="52b8abcbbeeeabc11a1274a0c08566fe1ca79428"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-1" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
$q = $dm-&gt;createQuery(<span class="hljs-string">'User'</span>)
    -&gt;update()
    -&gt;field(<span class="hljs-string">'password'</span>)-&gt;set(<span class="hljs-string">'newpassword'</span>)
    -&gt;field(<span class="hljs-string">'username'</span>)-&gt;equals(<span class="hljs-string">'jwage'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-2" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-3" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-4" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-5" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-6" class="line-number-anchor" /><a href="#line-number-52b8abcbbeeeabc11a1274a0c08566fe1ca79428-6">6</a></td></tr></table></div></code></pre>
                
    <p>## Delete</p>

                
    <p>You can delete documents as well by using the <code>delete()</code> method in combination with conditions. Here is an example where we create a query to delete the user document with a username of <code>jwage</code>:</p>

                <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-1" class="line-number-anchor" /><a href="#line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
$q = $dm-&gt;createQuery(<span class="hljs-string">'User'</span>)
    -&gt;delete()
    -&gt;field(<span class="hljs-string">'username'</span>)-&gt;equals(<span class="hljs-string">'jwage'</span>);
</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-2" class="line-number-anchor" /><a href="#line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-3" class="line-number-anchor" /><a href="#line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-4" class="line-number-anchor" /><a href="#line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-5" class="line-number-anchor" /><a href="#line-number-d42d3bb4d0a7adaf8a2ee832edf0175ecadc599e-5">5</a></td></tr></table></div></code></pre>
                
    <p>As you can see the fluent API makes it a bit easier to express queries that are easy to read in the same way you would read english from left to right. We hope to enhance and improve this API even more before we release the stable 1.0 version.</p>

                
    <p>You can read more about the Query Builder API in the <a href="https://www.doctrine-project.org/projects/mongodb_odm/1.0/docs/reference/query-builder-api/en#query-builder-api">documentation</a>.</p>

        
    
        </div>
    </article>
    </main>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            <script
            src="https://www.doctrine-project.org/frontend/js/prismjs.js?8aa1bb"
                            integrity="sha384-3EhgfeqnppOxFBVU40g8gS+IVvmh5+wGpe4mG2otPyExrkK9t4aq8uCUy2IDLKkR"
                        crossorigin="anonymous">
    </script>
    </body>
</html>
