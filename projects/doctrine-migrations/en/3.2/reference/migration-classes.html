<!DOCTYPE html>
<html>
    <head>
        <title>        Migration Classes - Doctrine Migrations
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Migrations Documentation: Migration Classes ">

        <meta name="keywords" content="                    database,migrations,dbal,documentation,migration,classes
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-migrations/en/3.9/reference/migration-classes.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?e935b6"
                        integrity="sha384-0+XwQ7PUNkbj10v4XDjjp7VJzfahtyhEtNyFDNmWQaR7ohGXNow7qYgClWx6rQoS"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-migrations/en/3.2/reference/migration-classes.html" />
        <meta property="og:title" content="        Migration Classes - Doctrine Migrations
    " />
        <meta property="og:description" content="Doctrine Migrations Documentation: Migration Classes " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Migrations",
            "description": "Migration Classes",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/migrations/edit/3.2.x/docs/en/reference/migration-classes.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="introduction.html#introduction">Introduction</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="introduction.html#installation">Installation</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction.html#composer">Composer</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#phar">PHAR</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="configuration.html#configuration">Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="configuration.html#migrations-configuration">Migrations Configuration</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#manually-providing-migrations">Manually Providing Migrations</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="configuration.html#all-or-nothing-transaction">All or Nothing Transaction</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#using-or-not-using-transactions">Using or not using transactions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#from-the-command-line">From the Command Line</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="configuration.html#connection-configuration">Connection Configuration</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#simple">Simple</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#advanced">Advanced</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#migration-classes">Migration Classes</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#methods-to-implement">Methods to Implement</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#istransactional">isTransactional</a>


</li>
            <li class="toc-item">
    <a href="#getdescription">getDescription</a>


</li>
            <li class="toc-item">
    <a href="#preup">preUp</a>


</li>
            <li class="toc-item">
    <a href="#postup">postUp</a>


</li>
            <li class="toc-item">
    <a href="#predown">preDown</a>


</li>
            <li class="toc-item">
    <a href="#postdown">postDown</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#methods-to-call">Methods to Call</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#warnif">warnIf</a>


</li>
            <li class="toc-item">
    <a href="#abortif">abortIf</a>


</li>
            <li class="toc-item">
    <a href="#skipif">skipIf</a>


</li>
            <li class="toc-item">
    <a href="#addsql">addSql</a>


</li>
            <li class="toc-item">
    <a href="#write">write</a>


</li>
            <li class="toc-item">
    <a href="#throwirreversiblemigrationexception">throwIrreversibleMigrationException</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="managing-migrations.html#managing-migrations">Managing Migrations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="managing-migrations.html#status">Status</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#dry-run">Dry Run</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#executing-multiple-migrations">Executing Multiple Migrations</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#executing-single-migrations">Executing Single Migrations</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#no-interaction">No Interaction</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#reverting-migrations">Reverting Migrations</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#version-aliases">Version Aliases</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#writing-migration-sql-files">Writing Migration SQL Files</a>


</li>
            <li class="toc-item">
    <a href="managing-migrations.html#managing-the-version-table">Managing the Version Table</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="generating-migrations.html#generating-migrations">Generating Migrations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="generating-migrations.html#generating-blank-migrations">Generating Blank Migrations</a>


</li>
            <li class="toc-item">
    <a href="generating-migrations.html#diffing-using-the-orm">Diffing Using the ORM</a>


</li>
            <li class="toc-item">
    <a href="generating-migrations.html#diffing-without-the-orm">Diffing Without the ORM</a>


</li>
            <li class="toc-item">
    <a href="generating-migrations.html#formatted-sql">Formatted SQL</a>


</li>
            <li class="toc-item">
    <a href="generating-migrations.html#ignoring-custom-tables">Ignoring Custom Tables</a>


</li>
            <li class="toc-item">
    <a href="generating-migrations.html#merging-historical-migrations">Merging Historical Migrations</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="custom-configuration.html#custom-configuration">Custom Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="custom-configuration.html#custom-migration-template">Custom migration template</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="events.html#migrations-events">Migrations Events</a>


</li>
    <li class="toc-item">
    <a href="version-numbers.html#version-numbers">Version Numbers</a>


</li>
    <li class="toc-item">
    <a href="integrations.html#integrations">Integrations</a>


</li>
    <li class="toc-item">
    <a href="custom-integration.html#custom-integration">Custom Integration</a>


</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Migrations",
            "item": "https://www.doctrine-project.org/projects/migrations.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/3.2/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Migration Classes",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/3.2/reference/migration-classes.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-migrations/en/3.2/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Migration Classes</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-migrations/en/3.2/reference/migration-classes.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        3.2.2
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-migrations/en/4.0/reference/migration-classes.html">
                                                        4.0

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-migrations/en/3.10/reference/migration-classes.html">
                                                        3.10

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-migrations/en/3.9/reference/migration-classes.html">
                                                        3.9.4

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.8/reference/migration-classes.html">3.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.7/reference/migration-classes.html">3.7</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.6/reference/migration-classes.html">3.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.5/reference/migration-classes.html">3.5</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.4/reference/migration-classes.html">3.4</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.3/reference/migration-classes.html">3.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-migrations/en/3.2/reference/migration-classes.html">3.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.1/reference/migration-classes.html">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.0/reference/migration-classes.html">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.3/reference/migration-classes.html">2.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.2/reference/migration-classes.html">2.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.1/reference/migration-classes.html">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.0/reference/migration-classes.html">2.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.7</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                </div>
                            
                            

            <div class="section" id="migration-classes">
            <h1 class="section-header ">
    <a href="#migration-classes">
        Migration Classes
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>Migration classes must extend <code>Doctrine\Migrations\AbstractMigration</code> and at a minimum they must implement the <code>up</code>
and <code>down</code> methods. You can easily generate a blank migration to modify with the following command:</p>

                <pre class="code-block-table" id="648b61670477b2151d0ba1ef04bfdcad4a7e104d"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="648b61670477b2151d0ba1ef04bfdcad4a7e104d"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-sh">$ ./vendor/bin/doctrine-migrations generate</code><code class="line language-sh">Generated new migration class to <span class="hljs-string">"/data/doctrine/migrations-docs-example/lib/MyProject/Migrations/Version20180601193057.php"</span></code><code class="line language-sh"></code><code class="line language-sh">To run just this migration <span class="hljs-keyword">for</span> testing purposes, you can use migrations:execute --up <span class="hljs-string">'MyProject\Migrations\Version20180601193057'</span></code><code class="line language-sh"></code><code class="line language-sh">To revert the migration you can use migrations:execute --down <span class="hljs-string">'MyProject\Migrations\Version20180601193057'</span></code><code class="empty"></code></pre>
            
    <p>The above command will generate a PHP class with the path to it visible like above. Here is what the blank
migration looks like:</p>

                <pre class="code-block-table" id="7702180f279d20946d7de285c63060e375a8c549"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="7702180f279d20946d7de285c63060e375a8c549"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyProject</span>\<span class="hljs-title">Migrations</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">AbstractMigration</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">/**</span></code><code class="line language-php"> * Auto-generated Migration: Please modify to your needs!</code><code class="line language-php"> */</code><code class="line language-php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version20180601193057</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractMigration</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;</code><code class="line language-php">    }</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// this up() migration is auto-generated, please modify it to your needs</span></code><code class="line language-php"></code><code class="line language-php">    }</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// this down() migration is auto-generated, please modify it to your needs</span></code><code class="line language-php"></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            <div class="section" id="methods-to-implement">
            <h2 class="section-header ">
    <a href="#methods-to-implement">
        Methods to Implement
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The <code>AbstractMigration</code> class provides a few methods you can override to define additional behavior for the migration.</p>

            <div class="section" id="istransactional">
            <h3 class="section-header ">
    <a href="#istransactional">
        isTransactional
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Override this method if you want to disable transactions in a migration. It defaults to true.</p>

                <pre class="code-block-table" id="466d0dad6f90cffd05b2c3287b9df0a2b464bc81"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="466d0dad6f90cffd05b2c3287b9df0a2b464bc81"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isTransactional</span><span class="hljs-params">()</span>: <span class="hljs-title">bool</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</code><code class="line language-php">}</code><code class="empty"></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Some database platforms like MySQL or Oracle do not support DDL
statements in transactions and may or may not implicitly commit the
transaction opened by this library as soon as they encounter such a
statement, and before running it. Make sure to read the manual of
your database platform to know what is actually happening.
<code>isTransactional()</code> does not guarantee that statements are wrapped
in a single transaction. To learn more about this, read the
dedicated explanation.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="getdescription">
            <h3 class="section-header ">
    <a href="#getdescription">
        getDescription
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Override this method if you want to provide a description for your migration. The value returned here
will get outputted when you run the <code>./vendor/bin/doctrine-migrations status --show-versions</code> command.</p>

                <pre class="code-block-table" id="f7446d3234dbf017fa44a8f51a9d018209a69ef1"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="f7446d3234dbf017fa44a8f51a9d018209a69ef1"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>: <span class="hljs-title">string</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">return</span> <span class="hljs-string">'The description of my awesome migration!'</span>;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="preup">
            <h3 class="section-header ">
    <a href="#preup">
        preUp
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>This method gets called before the <code>up()</code> is called.</p>

                <pre class="code-block-table" id="caca00a5fb362d24165752e1794966be06922b5c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="caca00a5fb362d24165752e1794966be06922b5c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preUp</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="postup">
            <h3 class="section-header ">
    <a href="#postup">
        postUp
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>This method gets called after the <code>up()</code> is called.</p>

                <pre class="code-block-table" id="f6ada9251355774d17f8dfa0819dbb0c01ebb66c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="f6ada9251355774d17f8dfa0819dbb0c01ebb66c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postUp</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="predown">
            <h3 class="section-header ">
    <a href="#predown">
        preDown
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>This method gets called before the <code>down()</code> is called.</p>

                <pre class="code-block-table" id="3629c7eb65502ca7c0a1cc317c88d158bdb3b93a"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="3629c7eb65502ca7c0a1cc317c88d158bdb3b93a"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preDown</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="postdown">
            <h3 class="section-header ">
    <a href="#postdown">
        postDown
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>This method gets called after the <code>down()</code> is called.</p>

                <pre class="code-block-table" id="8052019a72b555ac2e5b3e0657839f6b0dbecebb"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="8052019a72b555ac2e5b3e0657839f6b0dbecebb"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postDown</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
    </div>
            <div class="section" id="methods-to-call">
            <h2 class="section-header ">
    <a href="#methods-to-call">
        Methods to Call
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The <code>AbstractMigration</code> class provides a few methods you can call in your migrations to perform various functions.</p>

            <div class="section" id="warnif">
            <h3 class="section-header ">
    <a href="#warnif">
        warnIf
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Warn with a message if some condition is met.</p>

                <pre class="code-block-table" id="f6240b17d7110c50df47eae8220f7fe944d65fff"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="f6240b17d7110c50df47eae8220f7fe944d65fff"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">$this</span>-&gt;warnIf(<span class="hljs-keyword">true</span>, <span class="hljs-string">'Something might be going wrong'</span>);</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="abortif">
            <h3 class="section-header ">
    <a href="#abortif">
        abortIf
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Abort the migration if some condition is met:</p>

                <pre class="code-block-table" id="25fb9ec4dbad632f3a78c16c972994b9d1c8c51f"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="25fb9ec4dbad632f3a78c16c972994b9d1c8c51f"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">$this</span>-&gt;abortIf(<span class="hljs-keyword">true</span>, <span class="hljs-string">'Something went wrong. Aborting.'</span>);</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="skipif">
            <h3 class="section-header ">
    <a href="#skipif">
        skipIf
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Skip the migration if some condition is met.</p>

                <pre class="code-block-table" id="3fbc1b5b5955d19c9f5fdc0a7487121b414e6f42"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="3fbc1b5b5955d19c9f5fdc0a7487121b414e6f42"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">$this</span>-&gt;skipIf(<span class="hljs-keyword">true</span>, <span class="hljs-string">'Skipping this migration.'</span>);</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="addsql">
            <h3 class="section-header ">
    <a href="#addsql">
        addSql
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can use the <code>addSql</code> method within the <code>up</code> and <code>down</code> methods. Internally the <code>addSql</code> calls are passed
to the executeQuery method in the DBAL. This means that you can use the power of prepared statements easily and that
you don&#039;t need to copy paste the same query with different parameters. You can just pass those different parameters
to the addSql method as parameters.</p>

                <pre class="code-block-table" id="a628d925b5c109248e0d64fa20a57f26c3adddfb"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="a628d925b5c109248e0d64fa20a57f26c3adddfb"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    $users = [</code><code class="line language-php">        [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'mike'</span>, <span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>],</code><code class="line language-php">        [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'jwage'</span>, <span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">2</span>],</code><code class="line language-php">        [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'ocramius'</span>, <span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">3</span>],</code><code class="line language-php">    ];</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-keyword">foreach</span> ($users <span class="hljs-keyword">as</span> $user) {</code><code class="line language-php">        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'UPDATE user SET happy = true WHERE name = :name AND id = :id'</span>, $user);</code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="write">
            <h3 class="section-header ">
    <a href="#write">
        write
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Write some debug information to the console.</p>

                <pre class="code-block-table" id="18c0dfca9ce467ac8624ea408d9b8d4f31293edc"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="18c0dfca9ce467ac8624ea408d9b8d4f31293edc"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">$this</span>-&gt;write(<span class="hljs-string">'Doing some cool migration!'</span>);</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="throwirreversiblemigrationexception">
            <h3 class="section-header ">
    <a href="#throwirreversiblemigrationexception">
        throwIrreversibleMigrationException
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>If a migration cannot be reversed, you can use this exception in the <code>down</code> method to indicate such.
The <code>throwIrreversibleMigrationException</code> method accepts an optional message to output.</p>

                <pre class="code-block-table" id="8bc4fca2e85cbf2bd570376438ddf3fb98db9322"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="8bc4fca2e85cbf2bd570376438ddf3fb98db9322"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">(Schema $schema)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">$this</span>-&gt;throwIrreversibleMigrationException();</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p><a href="managing-migrations.html#managing-migrations">Next Chapter: Managing Migrations</a></p>

    </div>
    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?4a831b"
                            integrity="sha384-ygNM6vWkqMgvV0Lrk5BeKUupSk4CidmuzVPL3OkdAxEVjZQDo9cgbfC+FXAfoAse"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'migrations';
            var versionSlug = '3.2';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Migrations 3.2'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
