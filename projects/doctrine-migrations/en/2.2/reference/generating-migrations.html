<!DOCTYPE html>
<html>
    <head>
        <title>        Generating Migrations - Doctrine Migrations
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Migrations Documentation: Generating Migrations ">

        <meta name="keywords" content="                    database,migrations,dbal,documentation,generating,migrations
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-migrations/en/3.8/reference/generating-migrations.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?7ed5f2"
                        integrity="sha384-5tK8pAp+O7PVIamh2Zw0CvUiN8GqArCP7G+3+6DICtPdywmEVZnXjUOL5pJhstda"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-migrations/en/2.2/reference/generating-migrations.html" />
        <meta property="og:title" content="        Generating Migrations - Doctrine Migrations
    " />
        <meta property="og:description" content="Doctrine Migrations Documentation: Generating Migrations " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Migrations",
            "description": "Generating Migrations",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/migrations/edit/2.2.x/docs/en/reference/generating-migrations.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="introduction-html" class="toc-item"><a href="introduction.html">Introduction</a><ul><li id="introduction-html-installation" class="toc-item"><a href="introduction.html#installation">Installation</a><ul><li id="introduction-html-composer" class="toc-item"><a href="introduction.html#composer">Composer</a></li><li id="introduction-html-phar" class="toc-item"><a href="introduction.html#phar">PHAR</a></li></ul></li></ul></li><li id="configuration-html" class="toc-item"><a href="configuration.html">Configuration</a><ul><li id="configuration-html-migrations-configuration" class="toc-item"><a href="configuration.html#migrations-configuration">Migrations Configuration</a><ul><li id="configuration-html-manually-providing-migrations" class="toc-item"><a href="configuration.html#manually-providing-migrations">Manually Providing Migrations</a></li></ul></li><li id="configuration-html-all-or-nothing-transaction" class="toc-item"><a href="configuration.html#all-or-nothing-transaction">All or Nothing Transaction</a><ul><li id="configuration-html-from-the-command-line" class="toc-item"><a href="configuration.html#from-the-command-line">From the Command Line</a></li></ul></li><li id="configuration-html-connection-configuration" class="toc-item"><a href="configuration.html#connection-configuration">Connection Configuration</a><ul><li id="configuration-html-simple" class="toc-item"><a href="configuration.html#simple">Simple</a></li><li id="configuration-html-advanced" class="toc-item"><a href="configuration.html#advanced">Advanced</a></li></ul></li></ul></li><li id="migration-classes-html" class="toc-item"><a href="migration-classes.html">Migration Classes</a><ul><li id="migration-classes-html-methods-to-implement" class="toc-item"><a href="migration-classes.html#methods-to-implement">Methods to Implement</a><ul><li id="migration-classes-html-istransactional" class="toc-item"><a href="migration-classes.html#istransactional">isTransactional</a></li><li id="migration-classes-html-getdescription" class="toc-item"><a href="migration-classes.html#getdescription">getDescription</a></li><li id="migration-classes-html-preup" class="toc-item"><a href="migration-classes.html#preup">preUp</a></li><li id="migration-classes-html-postup" class="toc-item"><a href="migration-classes.html#postup">postUp</a></li><li id="migration-classes-html-predown" class="toc-item"><a href="migration-classes.html#predown">preDown</a></li><li id="migration-classes-html-postdown" class="toc-item"><a href="migration-classes.html#postdown">postDown</a></li></ul></li><li id="migration-classes-html-methods-to-call" class="toc-item"><a href="migration-classes.html#methods-to-call">Methods to Call</a><ul><li id="migration-classes-html-warnif" class="toc-item"><a href="migration-classes.html#warnif">warnIf</a></li><li id="migration-classes-html-abortif" class="toc-item"><a href="migration-classes.html#abortif">abortIf</a></li><li id="migration-classes-html-skipif" class="toc-item"><a href="migration-classes.html#skipif">skipIf</a></li><li id="migration-classes-html-addsql" class="toc-item"><a href="migration-classes.html#addsql">addSql</a></li><li id="migration-classes-html-write" class="toc-item"><a href="migration-classes.html#write">write</a></li><li id="migration-classes-html-throwirreversiblemigrationexception" class="toc-item"><a href="migration-classes.html#throwirreversiblemigrationexception">throwIrreversibleMigrationException</a></li></ul></li></ul></li><li id="managing-migrations-html" class="toc-item"><a href="managing-migrations.html">Managing Migrations</a><ul><li id="managing-migrations-html-status" class="toc-item"><a href="managing-migrations.html#status">Status</a></li><li id="managing-migrations-html-dry-run" class="toc-item"><a href="managing-migrations.html#dry-run">Dry Run</a></li><li id="managing-migrations-html-executing-multiple-migrations" class="toc-item"><a href="managing-migrations.html#executing-multiple-migrations">Executing Multiple Migrations</a></li><li id="managing-migrations-html-executing-single-migrations" class="toc-item"><a href="managing-migrations.html#executing-single-migrations">Executing Single Migrations</a></li><li id="managing-migrations-html-no-interaction" class="toc-item"><a href="managing-migrations.html#no-interaction">No Interaction</a></li><li id="managing-migrations-html-reverting-migrations" class="toc-item"><a href="managing-migrations.html#reverting-migrations">Reverting Migrations</a></li><li id="managing-migrations-html-version-aliases" class="toc-item"><a href="managing-migrations.html#version-aliases">Version Aliases</a></li><li id="managing-migrations-html-writing-migration-sql-files" class="toc-item"><a href="managing-migrations.html#writing-migration-sql-files">Writing Migration SQL Files</a></li><li id="managing-migrations-html-managing-the-version-table" class="toc-item"><a href="managing-migrations.html#managing-the-version-table">Managing the Version Table</a></li></ul></li><li id="generating-migrations-html-generating-migrations" class="toc-item"><a href="generating-migrations.html#generating-migrations">Generating Migrations</a><ul><li id="generating-migrations-html-generating-blank-migrations" class="toc-item"><a href="generating-migrations.html#generating-blank-migrations">Generating Blank Migrations</a></li><li id="generating-migrations-html-diffing-using-the-orm" class="toc-item"><a href="generating-migrations.html#diffing-using-the-orm">Diffing Using the ORM</a></li><li id="generating-migrations-html-diffing-without-the-orm" class="toc-item"><a href="generating-migrations.html#diffing-without-the-orm">Diffing Without the ORM</a></li><li id="generating-migrations-html-formatted-sql" class="toc-item"><a href="generating-migrations.html#formatted-sql">Formatted SQL</a></li><li id="generating-migrations-html-ignoring-custom-tables" class="toc-item"><a href="generating-migrations.html#ignoring-custom-tables">Ignoring Custom Tables</a></li></ul></li><li id="custom-configuration-html" class="toc-item"><a href="custom-configuration.html">Custom Configuration</a></li><li id="events-html" class="toc-item"><a href="events.html">Migrations Events</a></li><li id="version-numbers-html" class="toc-item"><a href="version-numbers.html">Version Numbers</a></li><li id="integrations-html" class="toc-item"><a href="integrations.html">Integrations</a></li><li id="custom-integration-html" class="toc-item"><a href="custom-integration.html">Custom Integration</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Migrations",
            "item": "https://www.doctrine-project.org/projects/migrations.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/2.2/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Generating Migrations",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/2.2/reference/generating-migrations.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-migrations/en/2.2/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Generating Migrations</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-migrations/en/2.2/reference/generating-migrations.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.2.1
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-migrations/en/3.9/reference/generating-migrations.html">
                                                        3.9

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-migrations/en/3.8/reference/generating-migrations.html">
                                                        3.8.0

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.7/reference/generating-migrations.html">3.7</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.6/reference/generating-migrations.html">3.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.5/reference/generating-migrations.html">3.5</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.4/reference/generating-migrations.html">3.4</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.3/reference/generating-migrations.html">3.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.2/reference/generating-migrations.html">3.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.1/reference/generating-migrations.html">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/3.0/reference/generating-migrations.html">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.3/reference/generating-migrations.html">2.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-migrations/en/2.2/reference/generating-migrations.html">2.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.1/reference/generating-migrations.html">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-migrations/en/2.0/reference/generating-migrations.html">2.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">1.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">1.7</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="generating-migrations" name="generating-migrations"></a><h1 class="section-header"><a href="#generating-migrations">Generating Migrations<i class="fas fa-link"></i></a></h1>
<p>Doctrine can generate blank migrations for you to modify or it can generate functional migrations for you by comparing
the current state of your database schema to your mapping information.</p>
<div class="section"><a class="section-anchor" id="generating-blank-migrations" name="generating-blank-migrations"></a><h2 class="section-header"><a href="#generating-blank-migrations">Generating Blank Migrations<i class="fas fa-link"></i></a></h2>
<p>To generate a blank migration you can use the <code>generate</code> command:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/doctrine-migrations generate</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="diffing-using-the-orm" name="diffing-using-the-orm"></a><h2 class="section-header"><a href="#diffing-using-the-orm">Diffing Using the ORM<i class="fas fa-link"></i></a></h2>
<p>If you are using the ORM, you can modify your mapping information and have Doctrine generate a migration
for you by comparing the current state of your database schema to the mapping information that is defined by using
the ORM. To test this functionality, create a new <code>User</code> entity located at <code>lib/MyProject/Entities/User.php</code>.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1520b42de0a45ffe979bb1a8b1d01fb187e056f6"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1520b42de0a45ffe979bb1a8b1d01fb187e056f6"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-1" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-1">1</a></td><td class="code-line" rowspan="36"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyProject</span>\<span class="hljs-title">Entities</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Entity</span>
 * <span class="hljs-doctag">@Table</span>(name="users")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@Id</span> <span class="hljs-doctag">@Column</span>(type="integer") <span class="hljs-doctag">@GeneratedValue</span> */</span>
    <span class="hljs-keyword">private</span> $id;

    <span class="hljs-comment">/** <span class="hljs-doctag">@Column</span>(type="string", nullable=true) */</span>
    <span class="hljs-keyword">private</span> $username;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setId</span><span class="hljs-params">(int $id)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;id = $id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> : ?<span class="hljs-title">int</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setUsername</span><span class="hljs-params">(string $username)</span> : <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;username = $username;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUsername</span><span class="hljs-params">()</span> : ?<span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;username;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-2" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-3" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-4" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-5" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-6" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-7" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-8" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-9" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-10" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-11" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-12" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-13" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-14" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-15" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-16" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-17" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-18" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-19" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-20" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-21" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-22" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-23" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-24" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-25" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-26" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-27" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-28" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-29" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-30" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-31" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-32" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-33" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-34" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-35" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-36" class="line-number-anchor" /><a href="#line-number-1520b42de0a45ffe979bb1a8b1d01fb187e056f6-36">36</a></td></tr></table></div></code></pre>
<p>Now when you run the <code>diff</code> command it will generate a migration which will create the <code>users</code> table:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/doctrine-migrations diff
Generated new migration class to "/data/doctrine/migrations-docs-example/lib/MyProject/Migrations/Version20180601215504.php"

To run just this migration for testing purposes, you can use migrations:execute --up 20180601215504

To revert the migration you can use migrations:execute --down 20180601215504</code></pre></div>
<p>Take a look at the generated migration:</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the table named <code>example_table</code> that we created earlier in the <a href="managing-migrations.html">Managing Migrations</a>
chapter is being dropped. This is because the table is not mapped anywhere in the Doctrine ORM and the <code>diff</code> command
detects that and generates the SQL to drop the table. If you want to ignore some tables in your database take a
look at <a href="#ignoring-custom-tables">Ignoring Custom Tables</a> chapter.</p>
</td></tr></table></div>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="743ce2e4c66625cdcc4caceb2b72e6f399c8150b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="743ce2e4c66625cdcc4caceb2b72e6f399c8150b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-1" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-1">1</a></td><td class="code-line" rowspan="37"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyProject</span>\<span class="hljs-title">Migrations</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">AbstractMigration</span>;

<span class="hljs-comment">/**
 * Auto-generated Migration: Please modify to your needs!
 */</span>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version20180601215504</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractMigration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span> : <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span> : <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// this up() migration is auto-generated, please modify it to your needs</span>
        <span class="hljs-keyword">$this</span>-&gt;abortIf(<span class="hljs-keyword">$this</span>-&gt;connection-&gt;getDatabasePlatform()-&gt;getName() !== <span class="hljs-string">'mysql'</span>, <span class="hljs-string">'Migration can only be executed safely on \'mysql\'.'</span>);

        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'CREATE TABLE users (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB'</span>);
        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'DROP TABLE example_table'</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">(Schema $schema)</span> : <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// this down() migration is auto-generated, please modify it to your needs</span>
        <span class="hljs-keyword">$this</span>-&gt;abortIf(<span class="hljs-keyword">$this</span>-&gt;connection-&gt;getDatabasePlatform()-&gt;getName() !== <span class="hljs-string">'mysql'</span>, <span class="hljs-string">'Migration can only be executed safely on \'mysql\'.'</span>);

        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'CREATE TABLE example_table (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) DEFAULT NULL COLLATE latin1_swedish_ci, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB'</span>);
        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'DROP TABLE users'</span>);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-2" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-3" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-4" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-5" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-6" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-7" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-8" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-9" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-10" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-11" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-12" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-13" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-14" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-15" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-16" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-17" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-18" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-19" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-20" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-21" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-22" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-23" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-24" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-25" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-26" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-27" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-28" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-29" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-30" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-31" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-32" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-33" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-34" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-35" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-36" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-37" class="line-number-anchor" /><a href="#line-number-743ce2e4c66625cdcc4caceb2b72e6f399c8150b-37">37</a></td></tr></table></div></code></pre>
<p>Now you are ready to execute your diff migration:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/doctrine-migrations migrate

                    My Project Migrations


WARNING! You are about to execute a database migration that could result in schema changes and data loss. Are you sure you wish to continue? (y/n)y
Migrating up to 20180601215504 from 20180601193057

  ++ migrating 20180601215504

     -> CREATE TABLE users (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB
     -> DROP TABLE example_table

  ++ migrated (took 75.9ms, used 8M memory)

  ------------------------

  ++ finished in 84.3ms
  ++ used 8M memory
  ++ 1 migrations executed
  ++ 1 sql queries</code></pre></div>
<p>The SQL generated here is the exact same SQL that would be executed if you were using the <code>orm:schema-tool</code> command.
This just allows you to capture that SQL and maybe tweak it or add to it and trigger the deployment later across
multiple database servers.</p>
</div>
<div class="section"><a class="section-anchor" id="diffing-without-the-orm" name="diffing-without-the-orm"></a><h2 class="section-header"><a href="#diffing-without-the-orm">Diffing Without the ORM<i class="fas fa-link"></i></a></h2>
<p>Internally the diff command generates a <code>Doctrine\DBAL\Schema\Schema</code> object from your entities metadata using an
implementation of <code>Doctrine\Migrations\Provider\SchemaProviderInterface</code>. To use the Schema representation
directly, without the ORM, you must implement this interface yourself.</p>
<p>The <code>SchemaProviderInterface</code> only has one method named <code>createSchema</code>. This should return a <code>Doctrine\DBAL\Schema\Schema</code>
instance that represents the state to which you'd like to migrate your database.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="038fd4281853ccb839c794d26ff71763174f95cf"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="038fd4281853ccb839c794d26ff71763174f95cf"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-1" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-1">1</a></td><td class="code-line" rowspan="26"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Provider</span>\<span class="hljs-title">SchemaProviderInterface</span>;

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomSchemaProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SchemaProviderInterface</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createSchema</span><span class="hljs-params">()</span>
    </span>{
        $schema = <span class="hljs-keyword">new</span> Schema();

        $table = $schema-&gt;createTable(<span class="hljs-string">'users'</span>);

        $table-&gt;addColumn(<span class="hljs-string">'id'</span>, <span class="hljs-string">'integer'</span>, [
            <span class="hljs-string">'autoincrement'</span> =&gt; <span class="hljs-keyword">true</span>,
        ]);

        $table-&gt;addColumn(<span class="hljs-string">'username'</span>, <span class="hljs-string">'string'</span>, [
            <span class="hljs-string">'notnull'</span> =&gt; <span class="hljs-keyword">false</span>,
        ]);

        $table-&gt;setPrimaryKey(<span class="hljs-keyword">array</span>(<span class="hljs-string">'id'</span>));

        <span class="hljs-keyword">return</span> $schema;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-2" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-3" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-4" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-5" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-6" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-7" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-8" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-9" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-10" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-11" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-12" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-13" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-14" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-15" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-16" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-17" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-18" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-19" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-20" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-21" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-22" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-23" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-24" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-25" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-038fd4281853ccb839c794d26ff71763174f95cf-26" class="line-number-anchor" /><a href="#line-number-038fd4281853ccb839c794d26ff71763174f95cf-26">26</a></td></tr></table></div></code></pre>
<p>The <code>StubSchemaProvider</code> provided with the migrations library is another option.
It simply takes a schema object to its constructor and returns it from <code>createSchema</code>.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e4af78a45030c4812bed6d62c8bdbba466c242af"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e4af78a45030c4812bed6d62c8bdbba466c242af"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-1" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-1">1</a></td><td class="code-line" rowspan="21"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Provider</span>\<span class="hljs-title">StubSchemaProvider</span>;

$schema = <span class="hljs-keyword">new</span> Schema();

$table = $schema-&gt;createTable(<span class="hljs-string">'users'</span>);

$table-&gt;addColumn(<span class="hljs-string">'id'</span>, <span class="hljs-string">'integer'</span>, [
    <span class="hljs-string">'autoincrement'</span> =&gt; <span class="hljs-keyword">true</span>,
]);

$table-&gt;addColumn(<span class="hljs-string">'username'</span>, <span class="hljs-string">'string'</span>, [
    <span class="hljs-string">'notnull'</span> =&gt; <span class="hljs-keyword">false</span>,
]);

$table-&gt;setPrimaryKey(<span class="hljs-keyword">array</span>(<span class="hljs-string">'id'</span>));

$provider = <span class="hljs-keyword">new</span> StubSchemaProvider($schema);
$provider-&gt;createSchema() === $schema; <span class="hljs-comment">// true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-2" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-3" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-4" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-5" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-6" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-7" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-8" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-9" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-10" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-11" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-12" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-13" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-14" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-15" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-16" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-17" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-18" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-19" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-20" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-21" class="line-number-anchor" /><a href="#line-number-e4af78a45030c4812bed6d62c8bdbba466c242af-21">21</a></td></tr></table></div></code></pre>
<p>By default the Doctrine Migrations command line tool will only add the diff command if the ORM is present.
Without the ORM, you'll have to add the diff command to your console application manually, passing in your schema
provider implementation to the diff command's constructor. Take a look at the <a href="custom-integration.html">Custom Integration</a>
chapter for information on how to setup a custom console application.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-1" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Command</span>\<span class="hljs-title">DiffCommand</span>;

$schemaProvider = <span class="hljs-keyword">new</span> CustomSchemaProvider();

<span class="hljs-comment">/** <span class="hljs-doctag">@var</span> Symfony\Component\Console\Application */</span>
$cli-&gt;add(<span class="hljs-keyword">new</span> DiffCommand($schemaProvider));

<span class="hljs-comment">// ...</span>

$cli-&gt;run();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-2" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-3" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-4" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-5" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-6" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-7" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-8" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-9" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-10" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-11" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-12" class="line-number-anchor" /><a href="#line-number-9bb12760a18cd4a28dece2a5cb65db7fb7e3bef0-12">12</a></td></tr></table></div></code></pre>
<p>With the custom provider in place the <code>diff</code> command will compare the current database schema to the one provided by
the <code>SchemaProviderInterface</code> implementation. If there is a mismatch, the differences will be included in the
generated migration just like the ORM examples above.</p>
</div>
<div class="section"><a class="section-anchor" id="formatted-sql" name="formatted-sql"></a><h2 class="section-header"><a href="#formatted-sql">Formatted SQL<i class="fas fa-link"></i></a></h2>
<p>You can optionally pass the <code>--formatted</code> option if you want the dumped SQL to be formatted. This option uses
the <code>jdorn/sql-formatter</code> package so you will need to install this package for it to work:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>composer require jdorn/sql-formatter</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="ignoring-custom-tables" name="ignoring-custom-tables"></a><h2 class="section-header"><a href="#ignoring-custom-tables">Ignoring Custom Tables<i class="fas fa-link"></i></a></h2>
<p>If you have custom tables which are not managed by Doctrine you will need to tell Doctrine to ignore these tables.
Otherwise, everytime you run the <code>diff</code> command, Doctrine will try to drop those tables. You can configure Doctrine
with a schema filter.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9ec124cfeee895ce9da286b8b30a18706ba4aa7b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9ec124cfeee895ce9da286b8b30a18706ba4aa7b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9ec124cfeee895ce9da286b8b30a18706ba4aa7b-1" class="line-number-anchor" /><a href="#line-number-9ec124cfeee895ce9da286b8b30a18706ba4aa7b-1">1</a></td><td class="code-line" rowspan="1">$connection-&gt;getConfiguration()-&gt;setFilterSchemaAssetsExpression(<span class="hljs-string">"~^(?!t_)~"</span>);</td></tr></table></div></code></pre>
<p>With this expression all tables prefixed with t will ignored by the schema tool.</p>
<p>If you use the DoctrineBundle with Symfony you can set the <code>schema_filter</code> option
in your configuration. You can find more information in the documentation of the
DoctrineMigrationsBundle.</p>
<p><a href="custom-configuration.html">Next Chapter: Custom Configuration</a></p>

</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?5364f3"
                            integrity="sha384-yT1xut8dmITuccyh+MOljcF0MzMJFhaP227UZREURvpogyieLsqm9J/duGcSbb6q"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'migrations';
            var versionSlug = '2.2';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Migrations 2.2'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
