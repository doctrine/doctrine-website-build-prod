<!DOCTYPE html>
<html>
    <head>
        <title>Generating Migrations - Migrations - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Migrations Documentation: Generating Migrations ">

        <meta name="keywords" content="php,database,migrations,dbal,documentation,generating,migrations">

                    <meta name="robots" content="index, follow">
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/reference/generating_migrations.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"
            integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/css/style.css?31b16e"
            integrity="sha384-6D5mkroLnxrM96aFx3ZzHDWenPO1pEo9vHWZ/hCITj1SeSVLnEAHQJ3KHvJkmmcm"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"
            integrity="sha384-3pqpjew6zqJsw9mdIpd6FVJvuFuacqOpSXwAifQ9iHE4keUyghetuuJDGFoTNhfn"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"
            integrity="sha384-VzUGdSDk+HLoSg+ptudZxGZyaFVN7q7Eqh7QaUU19cWL2fK0kyz1belH38z7MbcZ"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/css/railscasts.css?62eb49"
            integrity="sha384-K7nnw0wrUNTkBLTS8aN3AOx/e095lEJ1g60EJX7ash3cfsHTpQV6kWKoCPxPc9AJ"
            crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/reference/generating_migrations.html" />
        <meta property="og:title" content="Generating Migrations - Migrations - Doctrine" />
        <meta property="og:description" content="Doctrine Migrations Documentation: Generating Migrations " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Migrations",
            "description": "Generating Migrations",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://www.doctrine-project.org/"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?6c0dab" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/reflection.html">Reflection</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://www.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/contribute/" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/website/">Contribute to Website</a>
                                <a class="dropdown-item" href="https://www.doctrine-project.org/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank">GitHub</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/migrations/edit/1.7/docs/en/reference/generating_migrations.rst" class="btn btn-light" target="_blank">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="introduction-html-introduction" class="toc-item"><a href="introduction.html#introduction">Introduction</a></li><ul><li id="introduction-html-installation" class="toc-item"><a href="introduction.html#installation">Installation</a></li><ul><li id="introduction-html-use-as-supplement" class="toc-item"><a href="introduction.html#use-as-supplement">Use as Supplement</a></li><li id="introduction-html-register-console-commands" class="toc-item"><a href="introduction.html#register-console-commands">Register Console Commands</a></li><li id="introduction-html-php-binary-phar" class="toc-item"><a href="introduction.html#php-binary-phar">PHP Binary / PHAR</a></li></ul><li id="introduction-html-configuration" class="toc-item"><a href="introduction.html#configuration">Configuration</a></li></ul><li id="installation-html-installation" class="toc-item"><a href="installation.html#installation">Installation</a></li><ul><li id="installation-html-composer" class="toc-item"><a href="installation.html#composer">Composer</a></li><li id="installation-html-php-binary-phar" class="toc-item"><a href="installation.html#php-binary-phar">PHP Binary / PHAR</a></li><ul><li id="installation-html-configuration" class="toc-item"><a href="installation.html#configuration">Configuration</a></li></ul></ul><li id="integration-html-integrations" class="toc-item"><a href="integration.html#integrations">Integrations</a></li><li id="building_framework_specific_integration-html-custom-integration" class="toc-item"><a href="building_framework_specific_integration.html#custom-integration">Custom Integration</a></li><ul><li id="building_framework_specific_integration-html-installation" class="toc-item"><a href="building_framework_specific_integration.html#installation">Installation</a></li><li id="building_framework_specific_integration-html-register-console-commands" class="toc-item"><a href="building_framework_specific_integration.html#register-console-commands">Register Console Commands</a></li><li id="building_framework_specific_integration-html-register-console-helpers" class="toc-item"><a href="building_framework_specific_integration.html#register-console-helpers">Register Console helpers</a></li></ul><li id="migration_classes-html-migration-classes" class="toc-item"><a href="migration_classes.html#migration-classes">Migration Classes</a></li><li id="managing_migrations-html-managing-migrations" class="toc-item"><a href="managing_migrations.html#managing-migrations">Managing Migrations</a></li><ul><li id="managing_migrations-html-reverting-migrations" class="toc-item"><a href="managing_migrations.html#reverting-migrations">Reverting Migrations</a></li><li id="managing_migrations-html-aliases" class="toc-item"><a href="managing_migrations.html#aliases">Aliases</a></li><li id="managing_migrations-html-writing-migration-sql-files" class="toc-item"><a href="managing_migrations.html#writing-migration-sql-files">Writing Migration SQL Files</a></li><li id="managing_migrations-html-managing-the-version-table" class="toc-item"><a href="managing_migrations.html#managing-the-version-table">Managing the Version Table</a></li></ul><li id="generating_migrations-html-generating-migrations" class="toc-item"><a href="generating_migrations.html#generating-migrations">Generating Migrations</a></li><ul><li id="generating_migrations-html-using-the-orm" class="toc-item"><a href="generating_migrations.html#using-the-orm">Using the ORM</a></li><li id="generating_migrations-html-without-the-orm" class="toc-item"><a href="generating_migrations.html#without-the-orm">Without the ORM</a></li><li id="generating_migrations-html-ignoring-custom-tables" class="toc-item"><a href="generating_migrations.html#ignoring-custom-tables">Ignoring Custom Tables</a></li><li id="generating_migrations-html-creating-empty-migrations" class="toc-item"><a href="generating_migrations.html#creating-empty-migrations">Creating Empty Migrations</a></li></ul><li id="custom_configuration-html-custom-configuration" class="toc-item"><a href="custom_configuration.html#custom-configuration">Custom Configuration</a></li><li id="input_output_customization-html-input-output-customization" class="toc-item"><a href="input_output_customization.html#input-output-customization">Input - Output Customization</a></li><li id="events-html-migrations-events" class="toc-item"><a href="events.html#migrations-events">Migrations Events</a></li><li id="version_numbers-html-version-numbers" class="toc-item"><a href="version_numbers.html#version-numbers">Version Numbers</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Generating Migrations</li>
                            </ol>
                        </nav>
                                    </div>

                
                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-migrations/en/1.7/reference/generating_migrations.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        1.7
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="">
                                                    2.0

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-migrations/en/1.7/reference/generating_migrations.html">
                                                    1.7

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                            </div>
                                </div>
                            
                            
<p></p>
<a class="section-anchor" id="generating-migrations" name="generating-migrations"></a><h1 class="section-header"><a href="#generating-migrations">Generating Migrations<i class="fas fa-link"></i></a></h1>
<p>Migrations can be created for you if you're using the Doctrine 2 ORM or the DBAL
<a href="http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/schema-representation.html">Schema Representation</a>.
Empty migration classes can also be created.</p>
<p>Favor the tools described here over manually created migration files as the library
has some <a href="version_numbers.html">requirements around migration version numbers</a>.</p>
<a class="section-anchor" id="using-the-orm" name="using-the-orm"></a><h2 class="section-header"><a href="#using-the-orm">Using the ORM<i class="fas fa-link"></i></a></h2>
<p>If you are using the Doctrine 2 ORM you can easily generate a migration class
by modifying your mapping information and running the diff task to compare it
to your current database schema.</p>
<p>If you are using the sandbox you can modify the provided `yaml/Entities.User.dcm.yml`
and add a new column:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-1" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-string">Entities\User:</span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-attr">  fields:</span>
    <span class="hljs-comment"># ...</span>
<span class="hljs-attr">    test:</span>
<span class="hljs-attr">      type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">      length:</span> <span class="hljs-number">255</span>
  <span class="hljs-comment"># ...</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-2" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-3" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-4" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-5" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-6" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-7" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-8" class="line-number-anchor" /><a href="#line-number-c0534777f3bbf9cfc6c1780650ba8b1abf78a9fa-8">8</a></td></tr></table></div></code></pre>
<p>Be sure that you add the property to the `Entities/User.php` file:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-1" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Entities</span>;

<span class="hljs-comment">/** <span class="hljs-doctag">@Entity</span> <span class="hljs-doctag">@Table</span>(name="users") */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> string $test
     */</span>
    <span class="hljs-keyword">private</span> $test;

    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-2" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-3" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-4" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-5" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-6" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-7" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-8" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-9" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-10" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-11" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-12" class="line-number-anchor" /><a href="#line-number-db66d198ef3e90d2c8e1d5b1dafdf3ad2a2ed31a-12">12</a></td></tr></table></div></code></pre>
<p>Now if you run the diff task you will get a nicely generated migration with the
changes required to update your database!</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:diff
Generated new migration class to "/path/to/migrations/DoctrineMigrations/Version20100416130459.php" from schema differences.</code></pre></div>
<p>The migration class that is generated contains the SQL statements required to
update your database:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-1" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-keyword">namespace</span> <span class="hljs-title">DoctrineMigrations</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">AbstractMigration</span>,
    <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version20100416130459</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractMigration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'ALTER TABLE users ADD test VARCHAR(255) NOT NULL'</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">(Schema $schema)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">'ALTER TABLE users DROP test'</span>);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-2" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-3" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-4" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-5" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-6" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-7" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-8" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-9" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-10" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-11" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-12" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-13" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-14" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-15" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-16" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-17" class="line-number-anchor" /><a href="#line-number-ffa633a5d93574e30cb7a3bad9c4a5adf9eb91e1-17">17</a></td></tr></table></div></code></pre>
<p>The SQL generated here is the exact same SQL that would be executed if you were
using the `orm:schema-tool` task and the `--update` option. This just allows you to
capture that SQL and maybe tweak it or add to it and trigger the deployment
later across multiple database servers.</p>
<a class="section-anchor" id="without-the-orm" name="without-the-orm"></a><h2 class="section-header"><a href="#without-the-orm">Without the ORM<i class="fas fa-link"></i></a></h2>
<p>Internally the diff command generates a <code>Doctrine\DBAL\Schema\Schema</code> object
from your entity's metadata using an implementation of
<code>Doctrine\DBAL\Migrations\Provider\SchemaProvider</code>. To use the Schema representation
directly, without the ORM, you must implement this interface yourself.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-1" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-1">1</a></td><td class="code-line" rowspan="26"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Provider</span>\<span class="hljs-title">SchemaProvider</span>;

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomSchemaProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SchemaProvider</span>
</span>{
    <span class="hljs-comment">/**
     * The schema provider only has one method: `createSchema`. This should
     * return an Schema object that represents the state to which you'd like
     * to migrate your database.
     * {<span class="hljs-doctag">@inheritdoc</span>}
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createSchema</span><span class="hljs-params">()</span>
    </span>{
        $schema = <span class="hljs-keyword">new</span> Schema();

        $table = $schema-&gt;createTable(<span class="hljs-string">'foo'</span>);
        $table-&gt;addColumn(<span class="hljs-string">'id'</span>, <span class="hljs-string">'integer'</span>, <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'autoincrement'</span> =&gt; <span class="hljs-keyword">true</span>,
        ));
        $table-&gt;setPrimaryKey(<span class="hljs-keyword">array</span>(<span class="hljs-string">'id'</span>));

        <span class="hljs-keyword">return</span> $schema;
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-2" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-3" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-4" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-5" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-6" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-7" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-8" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-9" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-10" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-11" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-12" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-13" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-14" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-15" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-16" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-17" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-18" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-19" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-20" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-21" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-22" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-23" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-24" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-25" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-26" class="line-number-anchor" /><a href="#line-number-3ed09395ec4bc9fbd0e5049717d382c3ae2dfdef-26">26</a></td></tr></table></div></code></pre>
<p>The <code>StubSchemaProvider</code> provided with the migrations library is another option.
It simply takes a schema object to its constructor and returns it from <code>createSchema</code>.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f2dfc92f7962ca607c9fa5d0591c52b717e61f89"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f2dfc92f7962ca607c9fa5d0591c52b717e61f89"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-1" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Provider</span>\<span class="hljs-title">StubSchemaProvider</span>;

$schema = <span class="hljs-keyword">new</span> Schema();

$table = $schema-&gt;createTable(<span class="hljs-string">'foo'</span>);
$table-&gt;addColumn(<span class="hljs-string">'id'</span>, <span class="hljs-string">'integer'</span>, <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'autoincrement'</span> =&gt; <span class="hljs-keyword">true</span>,
));
$table-&gt;setPrimaryKey(<span class="hljs-keyword">array</span>(<span class="hljs-string">'id'</span>));

$provider = <span class="hljs-keyword">new</span> StubSchemaProvider($schema);
$provider-&gt;createSchema() === $schema; <span class="hljs-comment">// true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-2" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-3" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-4" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-5" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-6" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-7" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-8" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-9" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-10" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-11" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-12" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-13" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-14" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-15" class="line-number-anchor" /><a href="#line-number-f2dfc92f7962ca607c9fa5d0591c52b717e61f89-15">15</a></td></tr></table></div></code></pre>
<p>By default the <code>doctrine-migrations</code> command line tool will only add the diff
command if the ORM is present. Without the ORM, you'll have to add the diff command
to your <a href="http://symfony.com/doc/current/components/console/introduction.html">console application</a>
manually, passing in your schema provider implementation to the diff command's constructor.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4d62c3a6164aca2054ac76361efa875009917cc1"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4d62c3a6164aca2054ac76361efa875009917cc1"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-1" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">Tools</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Command</span>\<span class="hljs-title">DiffCommand</span>;

$schemaProvider = <span class="hljs-keyword">new</span> CustomSchemaProvider();

<span class="hljs-comment">/** <span class="hljs-doctag">@var</span> Symfony\Component\Console\Application */</span>
$app-&gt;add(<span class="hljs-keyword">new</span> DiffCommand($schemaProvider));

<span class="hljs-comment">// ...</span>

$app-&gt;run();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-2" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-3" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-4" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-5" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-6" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-7" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-8" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-9" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-10" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-11" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4d62c3a6164aca2054ac76361efa875009917cc1-12" class="line-number-anchor" /><a href="#line-number-4d62c3a6164aca2054ac76361efa875009917cc1-12">12</a></td></tr></table></div></code></pre>
<p>With the custom provider in place the diff command will compare the current database
state to the one provided. If there's a mismatch, the differences will be put
into the generated migration just like the ORM examples above.</p>
<a class="section-anchor" id="ignoring-custom-tables" name="ignoring-custom-tables"></a><h2 class="section-header"><a href="#ignoring-custom-tables">Ignoring Custom Tables<i class="fas fa-link"></i></a></h2>
<p>If you have custom tables which are not managed by doctrine you might face the situation
that with every diff task you are executing you get the remove statements for those tables
added to the migration class.</p>
<p>Therefore you can configure doctrine with a schema filter.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9ec124cfeee895ce9da286b8b30a18706ba4aa7b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9ec124cfeee895ce9da286b8b30a18706ba4aa7b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9ec124cfeee895ce9da286b8b30a18706ba4aa7b-1" class="line-number-anchor" /><a href="#line-number-9ec124cfeee895ce9da286b8b30a18706ba4aa7b-1">1</a></td><td class="code-line" rowspan="1">$connection-&gt;getConfiguration()-&gt;setFilterSchemaAssetsExpression(<span class="hljs-string">"~^(?!t_)~"</span>);</td></tr></table></div></code></pre>
<p>With this expression all tables prefixed with <a href="#t">t</a> will ignored by the schema tool.</p>
<p>If you use the DoctrineBundle with Symfony2 you can set the schema_filter option
in your configuration. You can find more information in the documentation of the
DoctrineMigationsBundle.</p>
<a class="section-anchor" id="creating-empty-migrations" name="creating-empty-migrations"></a><h2 class="section-header"><a href="#creating-empty-migrations">Creating Empty Migrations<i class="fas fa-link"></i></a></h2>
<p>Use the <code>migrations:generate</code> command to create an empty migration class.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:generate
Generated new migration class to /path/to/migrations/DoctrineMigrations/Version20180107080000.php</code></pre></div>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT"
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous">
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"
            integrity="sha384-EtEQyqoKtrBSat8+V0eTyycfmdkEHHzKesnWrc2VPnKAcD8PJw8HKAWKsK/QnGT+"
            crossorigin="anonymous">
        </script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://cdn.ravenjs.com/3.24.2/raven.min.js"
            integrity="sha384-HwE7dFvrH8iD9R5VYUqNwjIhxDycip+e4DjP5nEhXrJtACG8AdNXjvP+AfJWxhJh"
            crossorigin="anonymous">
        </script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script
            src="https://www.doctrine-project.org/js/main.js?4138a7"
            integrity="sha384-4PtbMmuLWIQQORdH5aYanVqX4PRToNwwYq7k6PdX/mrXBJ/PFQOkEcgxBw6MW1Gw"
            crossorigin="anonymous">
        </script>

        <script
            src="https://www.doctrine-project.org/js/search.js?493399"
            integrity="sha384-vH1McEYqOv8hsr8UjcB2ZrQs9UHtvoyJcCGg/a6+3I7aiwLSXSz/swbGBPXIZMFL"
            crossorigin="anonymous">
        </script>

        
                            
        
        <script type="text/javascript">
            var projectSlug = 'migrations';
            var versionSlug = '1.7';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Migrations 1.7'
            };

            new Main();

            new Search(projectSlug, versionSlug, searchBoxSettings);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script
            type="text/javascript"
            src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
            async>
        </script>

            <script
        src="https://www.doctrine-project.org/js/sidebar.js?70a0ba"
        integrity="sha384-WssgVD8YsN07ueQpdg7Bu0T12VTnGRVzHXE5FbCSXI/RMTZvOHvOsn0BHzkQfGLw"
        crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        new Sidebar();
    </script>

                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
