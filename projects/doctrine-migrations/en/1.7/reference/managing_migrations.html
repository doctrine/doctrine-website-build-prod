<!DOCTYPE html>
<html>
    <head>
        <title>Managing Migrations - Doctrine Migrations</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Migrations Documentation: Managing Migrations ">

        <meta name="keywords" content="php,database,migrations,dbal,documentation,managing,migrations">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?c1efb2"
                        integrity="sha384-Zc/W6EUYrfpNOrWDVlBgNIkUNbFFUczRwdu72czwaAnyDn1alk6zqQO1PnwimsNN"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/reference/managing_migrations.html" />
        <meta property="og:title" content="Managing Migrations - Doctrine Migrations" />
        <meta property="og:description" content="Doctrine Migrations Documentation: Managing Migrations " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Migrations",
            "description": "Managing Migrations",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?c1fd47" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/migrations/edit/1.7/docs/en/reference/managing_migrations.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="introduction-html-introduction" class="toc-item"><a href="introduction.html#introduction">Introduction</a><ul><li id="introduction-html-installation" class="toc-item"><a href="introduction.html#installation">Installation</a><ul><li id="introduction-html-use-as-supplement" class="toc-item"><a href="introduction.html#use-as-supplement">Use as Supplement</a></li><li id="introduction-html-register-console-commands" class="toc-item"><a href="introduction.html#register-console-commands">Register Console Commands</a></li><li id="introduction-html-php-binary-phar" class="toc-item"><a href="introduction.html#php-binary-phar">PHP Binary / PHAR</a></li></ul></li><li id="introduction-html-configuration" class="toc-item"><a href="introduction.html#configuration">Configuration</a></li></ul></li><li id="installation-html-installation" class="toc-item"><a href="installation.html#installation">Installation</a><ul><li id="installation-html-composer" class="toc-item"><a href="installation.html#composer">Composer</a></li><li id="installation-html-php-binary-phar" class="toc-item"><a href="installation.html#php-binary-phar">PHP Binary / PHAR</a><ul><li id="installation-html-configuration" class="toc-item"><a href="installation.html#configuration">Configuration</a></li></ul></li></ul></li><li id="integration-html-integrations" class="toc-item"><a href="integration.html#integrations">Integrations</a></li><li id="building-framework-specific-integration-html-custom-integration" class="toc-item"><a href="building_framework_specific_integration.html#custom-integration">Custom Integration</a><ul><li id="building-framework-specific-integration-html-installation" class="toc-item"><a href="building_framework_specific_integration.html#installation">Installation</a></li><li id="building-framework-specific-integration-html-register-console-commands" class="toc-item"><a href="building_framework_specific_integration.html#register-console-commands">Register Console Commands</a></li><li id="building-framework-specific-integration-html-register-console-helpers" class="toc-item"><a href="building_framework_specific_integration.html#register-console-helpers">Register Console helpers</a></li></ul></li><li id="migration-classes-html-migration-classes" class="toc-item"><a href="migration_classes.html#migration-classes">Migration Classes</a></li><li id="managing-migrations-html-managing-migrations" class="toc-item"><a href="managing_migrations.html#managing-migrations">Managing Migrations</a><ul><li id="managing-migrations-html-reverting-migrations" class="toc-item"><a href="managing_migrations.html#reverting-migrations">Reverting Migrations</a></li><li id="managing-migrations-html-aliases" class="toc-item"><a href="managing_migrations.html#aliases">Aliases</a></li><li id="managing-migrations-html-writing-migration-sql-files" class="toc-item"><a href="managing_migrations.html#writing-migration-sql-files">Writing Migration SQL Files</a></li><li id="managing-migrations-html-managing-the-version-table" class="toc-item"><a href="managing_migrations.html#managing-the-version-table">Managing the Version Table</a></li></ul></li><li id="generating-migrations-html-generating-migrations" class="toc-item"><a href="generating_migrations.html#generating-migrations">Generating Migrations</a><ul><li id="generating-migrations-html-using-the-orm" class="toc-item"><a href="generating_migrations.html#using-the-orm">Using the ORM</a></li><li id="generating-migrations-html-without-the-orm" class="toc-item"><a href="generating_migrations.html#without-the-orm">Without the ORM</a></li><li id="generating-migrations-html-ignoring-custom-tables" class="toc-item"><a href="generating_migrations.html#ignoring-custom-tables">Ignoring Custom Tables</a></li><li id="generating-migrations-html-creating-empty-migrations" class="toc-item"><a href="generating_migrations.html#creating-empty-migrations">Creating Empty Migrations</a></li></ul></li><li id="custom-configuration-html-custom-configuration" class="toc-item"><a href="custom_configuration.html#custom-configuration">Custom Configuration</a></li><li id="input-output-customization-html-input-output-customization" class="toc-item"><a href="input_output_customization.html#input-output-customization">Input - Output Customization</a></li><li id="events-html-migrations-events" class="toc-item"><a href="events.html#migrations-events">Migrations Events</a></li><li id="version-numbers-html-version-numbers" class="toc-item"><a href="version_numbers.html#version-numbers">Version Numbers</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Migrations",
            "item": "https://www.doctrine-project.org/projects/migrations.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Managing Migrations",
            "item": "https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/reference/managing_migrations.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-migrations/en/1.7/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Managing Migrations</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-migrations/en/1.7/reference/managing_migrations.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        1.7.2
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="">
                                                    3.0

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="">
                                                    2.3

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="">
                                                    2.2.1

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="">2.1</a>
                                                                                            
                                                <a class="dropdown-item" href="">2.0</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-migrations/en/1.8/reference/managing_migrations.html">1.8</a>
                                                                                            
                                                <a class="dropdown-item active" href="/projects/doctrine-migrations/en/1.7/reference/managing_migrations.html">1.7</a>
                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="managing-migrations" name="managing-migrations"></a><h1 class="section-header"><a href="#managing-migrations">Managing Migrations<i class="fas fa-link"></i></a></h1>
<p>Now that we have a new migration class present, lets run the status task to see
if it is there:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:status

 == Configuration

    >> Name:                                               Doctrine Sandbox Migrations
    >> Database Driver:                                    pdo_mysql
    >> Database Name:                                      testdb
    >> Configuration Source:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/migrations.xml
    >> Version Table Name:                                 doctrine_migration_versions
    >> Migrations Namespace:                               DoctrineMigrations
    >> Migrations Directory:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/DoctrineMigrations
    >> Current Version:                                    2010-04-16 13:04:22 (20100416130422)
    >> Latest Version:                                     2010-04-16 13:04:22 (20100416130422)
    >> Executed Migrations:                                0
    >> Available Migrations:                               1
    >> New Migrations:                                     1

 == Migration Versions

    >> 2010-04-16 13:04:01 (20100416130401)                not migrated</code></pre></div>
<p>As you can see we have a new version present and it is ready to be executed. The
problem is it does not have anything in it so nothing would be executed! Let's
add some code to it and add a new table:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5e2a56ff39b88e3fc23b6380d0c290f20c44c87a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5e2a56ff39b88e3fc23b6380d0c290f20c44c87a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-1" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-1">1</a></td><td class="code-line" rowspan="19"><span class="hljs-keyword">namespace</span> <span class="hljs-title">DoctrineMigrations</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">AbstractMigration</span>,
    <span class="hljs-title">Doctrine</span>\<span class="hljs-title">DBAL</span>\<span class="hljs-title">Schema</span>\<span class="hljs-title">Schema</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version20100416130401</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractMigration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span>
    </span>{
        $table = $schema-&gt;createTable(<span class="hljs-string">'users'</span>);
        $table-&gt;addColumn(<span class="hljs-string">'username'</span>, <span class="hljs-string">'string'</span>);
        $table-&gt;addColumn(<span class="hljs-string">'password'</span>, <span class="hljs-string">'string'</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span><span class="hljs-params">(Schema $schema)</span>
    </span>{
        $schema-&gt;dropTable(<span class="hljs-string">'users'</span>);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-2" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-3" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-4" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-5" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-6" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-7" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-8" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-9" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-10" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-11" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-12" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-13" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-14" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-15" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-16" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-17" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-18" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-19" class="line-number-anchor" /><a href="#line-number-5e2a56ff39b88e3fc23b6380d0c290f20c44c87a-19">19</a></td></tr></table></div></code></pre>
<p>Now we are ready to give it a test! First lets just do a dry-run to make sure
it produces the SQL we expect:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate --dry-run
Are you sure you wish to continue?
y
Executing dry run of migration up to 20100416130452 from 0

  >> migrating 20100416130452

     -> CREATE TABLE users (username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL) ENGINE = InnoDB</code></pre></div>
<p>Everything looks good so we can remove the <em>--dry-run</em> option and actually execute
the migration:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate
Are you sure you wish to continue?
y
Migrating up to 20100416130452 from 0

  >> migrating 20100416130452

     -> CREATE TABLE users (username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL) ENGINE = InnoDB

  >> migrated</code></pre></div>
<p>Alternately, if you wish to run the migrations in an unattended mode, we can add the <em>--no--interaction</em> option and then
execute the migrations without any extra prompting from Doctrine.</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate --no-interaction
Migrating up to 20100416130452 from 0

  >> migrating 20100416130452

     -> CREATE TABLE users (username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL) ENGINE = InnoDB

  >> migrated</code></pre></div>
<p>By checking the status again after using either method you will see everything is updated:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:status

 == Configuration

    >> Name:                                               Doctrine Sandbox Migrations
    >> Database Driver:                                    pdo_mysql
    >> Database Name:                                      testdb
    >> Configuration Source:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/migrations.xml
    >> Version Table Name:                                 doctrine_migration_versions
    >> Migrations Namespace:                               DoctrineMigrations
    >> Migrations Directory:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/DoctrineMigrations
    >> Current Version:                                    2010-04-16 13:04:52 (20100416130452)
    >> Latest Version:                                     2010-04-16 13:04:52 (20100416130452)
    >> Executed Migrations:                                1
    >> Available Migrations:                               1
    >> New Migrations:                                     0

 == Migration Versions

    >> 2010-04-16 13:04:01 (20100416130452)                migrated</code></pre></div>
<div class="section"><a class="section-anchor" id="reverting-migrations" name="reverting-migrations"></a><h2 class="section-header"><a href="#reverting-migrations">Reverting Migrations<i class="fas fa-link"></i></a></h2>
<p>You maybe noticed in the last example that we defined a <em>down()</em> method which
drops the users table that we created. This method allows us to easily revert
changes the schema has been migrated to. The <em>migrate</em> command takes a <em>version</em>
argument which you can use to roll back your schema to a specific version of
your migrations:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate first
Are you sure you wish to continue?
y
Migrating down to 0 from 20100416130422

  -- reverting 20100416130422

     -> DROP TABLE addresses

  -- reverted

  -- reverting 20100416130401

     -> DROP TABLE users

  -- reverted</code></pre></div>
<p>Now our database is back to where we originally started. Give it a check with
the status command:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:status

 == Configuration

    >> Name:                                               Doctrine Sandbox Migrations
    >> Database Driver:                                    pdo_mysql
    >> Database Name:                                      testdb
    >> Configuration Source:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/migrations.xml
    >> Version Table Name:                                 doctrine_migration_versions
    >> Migrations Namespace:                               DoctrineMigrations
    >> Migrations Directory:                               /Users/jwage/Sites/doctrine2git/tools/sandbox/DoctrineMigrations
    >> Current Version:                                    0
    >> Latest Version:                                     2010-04-16 13:04:22 (20100416130422)
    >> Executed Migrations:                                0
    >> Available Migrations:                               2
    >> New Migrations:                                     2

 == Migration Versions

    >> 2010-04-16 13:04:01 (20100416130401)                not migrated
    >> 2010-04-16 13:04:22 (20100416130422)                not migrated</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="aliases" name="aliases"></a><h2 class="section-header"><a href="#aliases">Aliases<i class="fas fa-link"></i></a></h2>
<p>There are some shortcut for convenience (first, prev, next, latest).
So that you don't have to know the name of the migration.
You can just call</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate prev</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="writing-migration-sql-files" name="writing-migration-sql-files"></a><h2 class="section-header"><a href="#writing-migration-sql-files">Writing Migration SQL Files<i class="fas fa-link"></i></a></h2>
<p>You can optionally choose to not execute a migration directly on a database and
instead output all the SQL statements to a file. This is possible by using the
<em>--write-sql</em> option of the <em>migrate</em> command:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:migrate --write-sql
Executing dry run of migration up to 20100416130422 from 0

  >> migrating 20100416130401

     -> CREATE TABLE users (username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL) ENGINE = InnoDB

  >> migrating 20100416130422

     -> CREATE TABLE addresses (id INT NOT NULL, street VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB

Writing migration file to "/path/to/sandbox/doctrine_migration_20100416130405.sql"</code></pre></div>
<p>Now if you have a look at the <em>doctrine_migration_20100416130405.sql</em> file you will see the would be
executed SQL outputted in a nice format:</p>
<div class="console"><pre><code class="console"># Doctrine Migration File Generated on 2010-04-16 13:04:05
# Migrating from 0 to 20100416130422

# Version 20100416130401
CREATE TABLE users (username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL) ENGINE = InnoDB;

# Version 20100416130422
CREATE TABLE addresses (id INT NOT NULL, street VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;</code></pre></div>
<a id="managing-versions-table"></a>
</div>
<div class="section"><a class="section-anchor" id="managing-the-version-table" name="managing-the-version-table"></a><h2 class="section-header"><a href="#managing-the-version-table">Managing the Version Table<i class="fas fa-link"></i></a></h2>
<p>Sometimes you may need to manually change something in the database table which
manages the versions for some migrations. For this you can use the version task.
You can easily add a version like this:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:version YYYYMMDDHHMMSS --add</code></pre></div>
<p>Or you can delete that version:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./doctrine migrations:version YYYYMMDDHHMMSS --delete</code></pre></div>
<p>The command does not execute any migrations code, it simply adds the specified
version to the database.</p>

</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?8325dc"
                            integrity="sha384-N4iB8uuyA7tob2BupWHocizx3ZEw2scumdnfVnZFWIeNVlKULTHzFxbz5xOxnwU5"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'migrations';
            var versionSlug = '1.7';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Migrations 1.7'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
