<!DOCTYPE html>
<html>
    <head>
        <title>Association Mapping - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://www.doctrine-project.org/css/style.css?369e38" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://www.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://www.doctrine-project.org/"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/lexer/">Lexer</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <div class="container-wrapper container-fluid">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="association-mapping-html-title-1" class="toc-item"><a href="association-mapping.html#title.1">Association Mapping</a></li><ul><li id="association-mapping-html-title-1-1" class="toc-item"><a href="association-mapping.html#title.1.1">Graph Traversal and Identity Map</a></li><li id="association-mapping-html-title-1-2" class="toc-item"><a href="association-mapping.html#title.1.2">Different Association Mappings</a></li><ul><li id="association-mapping-html-title-1-2-1" class="toc-item"><a href="association-mapping.html#title.1.2.1">ReferenceOne</a></li><li id="association-mapping-html-title-1-2-2" class="toc-item"><a href="association-mapping.html#title.1.2.2">ReferenceMany</a></li><li id="association-mapping-html-title-1-2-3" class="toc-item"><a href="association-mapping.html#title.1.2.3">Inverse ReferenceMany</a></li><li id="association-mapping-html-title-1-2-4" class="toc-item"><a href="association-mapping.html#title.1.2.4">EmbedOne</a></li><li id="association-mapping-html-title-1-2-5" class="toc-item"><a href="association-mapping.html#title.1.2.5">EmbedMany</a></li></ul></ul><li id="attachments-html-title-1" class="toc-item"><a href="attachments.html#title.1">Attachments</a></li><li id="basic-mapping-html-title-1" class="toc-item"><a href="basic-mapping.html#title.1">Basic Mapping</a></li><ul><li id="basic-mapping-html-title-1-1" class="toc-item"><a href="basic-mapping.html#title.1.1">Introduction to Docblock Annotations</a></li><li id="basic-mapping-html-title-1-2" class="toc-item"><a href="basic-mapping.html#title.1.2">Persistent classes</a></li><li id="basic-mapping-html-title-1-3" class="toc-item"><a href="basic-mapping.html#title.1.3">Doctrine Mapping Types</a></li><li id="basic-mapping-html-title-1-4" class="toc-item"><a href="basic-mapping.html#title.1.4">Field Mapping</a></li><ul><li id="basic-mapping-html-title-1-4-1" class="toc-item"><a href="basic-mapping.html#title.1.4.1">Indexing Fields</a></li><li id="basic-mapping-html-title-1-4-2" class="toc-item"><a href="basic-mapping.html#title.1.4.2">Json Names</a></li></ul><li id="basic-mapping-html-title-1-5" class="toc-item"><a href="basic-mapping.html#title.1.5">Id Mapping</a></li><ul><li id="basic-mapping-html-title-1-5-1" class="toc-item"><a href="basic-mapping.html#title.1.5.1">Id Generation Strategies</a></li></ul><li id="basic-mapping-html-title-1-6" class="toc-item"><a href="basic-mapping.html#title.1.6">Attachments</a></li><li id="basic-mapping-html-title-1-7" class="toc-item"><a href="basic-mapping.html#title.1.7">Document Repositories</a></li></ul><li id="configuration-html-title-1" class="toc-item"><a href="configuration.html#title.1">Configuration</a></li><ul><li id="configuration-html-title-1-1" class="toc-item"><a href="configuration.html#title.1.1">Obtaining the DocumentManager</a></li><li id="configuration-html-title-1-2" class="toc-item"><a href="configuration.html#title.1.2">CouchDBClient</a></li><ul><li id="configuration-html-title-1-2-1" class="toc-item"><a href="configuration.html#title.1.2.1">HTTP Client (<strong><em>REQUIRED</strong></em>)</a></li></ul><li id="configuration-html-title-1-3" class="toc-item"><a href="configuration.html#title.1.3">Configuration Options</a></li><ul><li id="configuration-html-title-1-3-1" class="toc-item"><a href="configuration.html#title.1.3.1">Proxy Directory (<strong><em>REQUIRED</strong></em>)</a></li><li id="configuration-html-title-1-3-2" class="toc-item"><a href="configuration.html#title.1.3.2">Proxy Namespace (<strong><em>OPTIONAL</strong></em>)</a></li><li id="configuration-html-title-1-3-3" class="toc-item"><a href="configuration.html#title.1.3.3">Metadata Driver (<strong><em>REQUIRED</strong></em>)</a></li><li id="configuration-html-title-1-3-4" class="toc-item"><a href="configuration.html#title.1.3.4">Metadata Cache (<strong><em>RECOMMENDED</strong></em>)</a></li><li id="configuration-html-title-1-3-5" class="toc-item"><a href="configuration.html#title.1.3.5">Lucene Handler Name (<strong><em>OPTIONAL</strong></em>)</a></li></ul><li id="configuration-html-title-1-4" class="toc-item"><a href="configuration.html#title.1.4">Proxy Objects</a></li><ul><li id="configuration-html-title-1-4-1" class="toc-item"><a href="configuration.html#title.1.4.1">Reference Proxies</a></li><li id="configuration-html-title-1-4-2" class="toc-item"><a href="configuration.html#title.1.4.2">Association proxies</a></li></ul></ul><li id="inheritance-mapping-html-title-1" class="toc-item"><a href="inheritance-mapping.html#title.1">Inheritance Mapping</a></li><li id="installation-html-title-1" class="toc-item"><a href="installation.html#title.1">Installation</a></li><ul><li id="installation-html-title-1-1" class="toc-item"><a href="installation.html#title.1.1">PEAR</a></li><li id="installation-html-title-1-2" class="toc-item"><a href="installation.html#title.1.2">Download</a></li><li id="installation-html-title-1-3" class="toc-item"><a href="installation.html#title.1.3">Git/Github</a></li></ul><li id="introduction-html-title-1" class="toc-item"><a href="introduction.html#title.1">Introduction</a></li><ul><li id="introduction-html-title-1-1" class="toc-item"><a href="introduction.html#title.1.1">Features</a></li><li id="introduction-html-title-1-2" class="toc-item"><a href="introduction.html#title.1.2">Architecture</a></li><ul><li id="introduction-html-title-1-2-1" class="toc-item"><a href="introduction.html#title.1.2.1">Write-Behind</a></li><li id="introduction-html-title-1-2-2" class="toc-item"><a href="introduction.html#title.1.2.2">Querying</a></li><li id="introduction-html-title-1-2-3" class="toc-item"><a href="introduction.html#title.1.2.3">Object-Graph Traversal</a></li></ul><li id="introduction-html-title-1-3" class="toc-item"><a href="introduction.html#title.1.3">Why NoSQL?</a></li><li id="introduction-html-title-1-4" class="toc-item"><a href="introduction.html#title.1.4">CouchDB Document Structure</a></li><ul><li id="introduction-html-title-1-4-1" class="toc-item"><a href="introduction.html#title.1.4.1">Document Type</a></li><li id="introduction-html-title-1-4-2" class="toc-item"><a href="introduction.html#title.1.4.2">Associations</a></li><li id="introduction-html-title-1-4-3" class="toc-item"><a href="introduction.html#title.1.4.3">Indexes</a></li></ul></ul><li id="lucene-queries-html-title-1" class="toc-item"><a href="lucene-queries.html#title.1">CouchDB Lucene Queries</a></li><li id="map-reduce-queries-html-title-1" class="toc-item"><a href="map-reduce-queries.html#title.1">Views and Map-Reduce Queries</a></li><ul><li id="map-reduce-queries-html-title-1-1" class="toc-item"><a href="map-reduce-queries.html#title.1.1">Creating and Managing Views</a></li><li id="map-reduce-queries-html-title-1-2" class="toc-item"><a href="map-reduce-queries.html#title.1.2">Querying Views</a></li><li id="map-reduce-queries-html-title-1-3" class="toc-item"><a href="map-reduce-queries.html#title.1.3">View Results</a></li></ul><li id="tools-html-title-1" class="toc-item"><a href="tools.html#title.1">Tools and Maintenance</a></li><ul><li id="tools-html-title-1-1" class="toc-item"><a href="tools.html#title.1.1">couchdb:migrate</a></li><li id="tools-html-title-1-2" class="toc-item"><a href="tools.html#title.1.2">couchdb:maintenance:compact-database</a></li><li id="tools-html-title-1-3" class="toc-item"><a href="tools.html#title.1.3">couchdb:maintenance:compact-view</a></li><li id="tools-html-title-1-4" class="toc-item"><a href="tools.html#title.1.4">couchdb:maintenance:view-cleanup</a></li><li id="tools-html-title-1-5" class="toc-item"><a href="tools.html#title.1.5">couchdb:odm:update-design-doc</a></li></ul><li id="working-with-objects-html-title-1" class="toc-item"><a href="working-with-objects.html#title.1">Working with Objects</a></li><ul><li id="working-with-objects-html-title-1-1" class="toc-item"><a href="working-with-objects.html#title.1.1">Understanding</a></li><ul><li id="working-with-objects-html-title-1-1-1" class="toc-item"><a href="working-with-objects.html#title.1.1.1">The size of a Unit of Work</a></li><li id="working-with-objects-html-title-1-1-2" class="toc-item"><a href="working-with-objects.html#title.1.1.2">The cost of flush()</a></li><li id="working-with-objects-html-title-1-1-3" class="toc-item"><a href="working-with-objects.html#title.1.1.3">Direct access to a Unit of Work</a></li></ul><li id="working-with-objects-html-title-1-2" class="toc-item"><a href="working-with-objects.html#title.1.2">Persisting documents</a></li><li id="working-with-objects-html-title-1-3" class="toc-item"><a href="working-with-objects.html#title.1.3">Removing documents</a></li><li id="working-with-objects-html-title-1-4" class="toc-item"><a href="working-with-objects.html#title.1.4">Detaching documents</a></li><li id="working-with-objects-html-title-1-5" class="toc-item"><a href="working-with-objects.html#title.1.5">Merging documents</a></li><li id="working-with-objects-html-title-1-6" class="toc-item"><a href="working-with-objects.html#title.1.6">References</a></li><li id="working-with-objects-html-title-1-7" class="toc-item"><a href="working-with-objects.html#title.1.7">Establishing References</a></li><li id="working-with-objects-html-title-1-8" class="toc-item"><a href="working-with-objects.html#title.1.8">Removing References</a></li><li id="working-with-objects-html-title-1-9" class="toc-item"><a href="working-with-objects.html#title.1.9">Transitive persistence</a></li><li id="working-with-objects-html-title-1-10" class="toc-item"><a href="working-with-objects.html#title.1.10">Querying</a></li><ul><li id="working-with-objects-html-title-1-10-1" class="toc-item"><a href="working-with-objects.html#title.1.10.1">By Primary Key</a></li><li id="working-with-objects-html-title-1-10-2" class="toc-item"><a href="working-with-objects.html#title.1.10.2">By Simple Conditions</a></li><li id="working-with-objects-html-title-1-10-3" class="toc-item"><a href="working-with-objects.html#title.1.10.3">By Lazy Loading</a></li><li id="working-with-objects-html-title-1-10-4" class="toc-item"><a href="working-with-objects.html#title.1.10.4">By Query Objects</a></li><li id="working-with-objects-html-title-1-10-5" class="toc-item"><a href="working-with-objects.html#title.1.10.5">Custom Repositories</a></li></ul></ul></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                                                
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-couchdb-odm/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Association Mapping</li>
                            </ol>
                        </nav>
                                    </div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            <ul class="list-inline">
                                                                            <li class="list-inline-item mr-0">
                                            <a href="/projects/doctrine-couchdb-odm/en/latest/reference/association-mapping.html" class="project-version-switcher badge badge-warning">master</a>
                                        </li>
                                    
                                    
                                    <li class="list-inline-item ml-2"><a href="https://github.com/doctrine/couchdb-odm/edit/master/docs/en/reference/association-mapping.rst" class="badge badge-primary">Edit</a></li>

                                </ul>
                            
                            
<a class="section-anchor" id="title.1" name="title.1"></a><h1 class="section-header"><a href="#title.1">Association Mapping<i class="fas fa-link"></i></a></h1>
<a class="section-anchor" id="title.1.1" name="title.1.1"></a><h2 class="section-header"><a href="#title.1.1">Graph Traversal and Identity Map<i class="fas fa-link"></i></a></h2>
<p>Doctrine CouchDB offers you a fluent experience with your CouchDB documents. All relationships are fully
traversable through lazy loading. You essentially need to query only one document explicitly and can
then access all the others that are related by traversing the references in the objects.</p>
<p>A document manager contains an identity map, it will never return you different instances of PHP objects
for the document with the same ID.</p>
<a class="section-anchor" id="title.1.2" name="title.1.2"></a><h2 class="section-header"><a href="#title.1.2">Different Association Mappings<i class="fas fa-link"></i></a></h2>
<p>Doctrine CouchDB offers several different mechanisms to manage relations between documents:</p>
<ul><li class="dash">  Reference one document through its document-id</li>
<li class="dash">  Reference many documents by saving all the document-ids in an array</li>
<li class="dash">  Finding all documents that have a reference many relationship to the current document (inverse reference many/one)</li>
<li class="dash">  Embedding a single document</li>
<li class="dash">  Embedding an array of documents</li>
</ul>

<a class="section-anchor" id="title.1.2.1" name="title.1.2.1"></a><h3 class="section-header"><a href="#title.1.2.1">ReferenceOne<i class="fas fa-link"></i></a></h3>
<p>You can have a reference between two documents by a reference one relationship in the following way:</p>
<pre><code class="php">&lt;?php
/** @Document */
class Article
{
    /** @Id */
    private $id;

    /** @ReferenceOne(targetDocument=&quot;User&quot;) */
    private $author;
}
</code></pre>
<p>This mapping definition would save the author id or null in the CouchDB document but let
you work with a Author object in PHP.</p>
<p>In CouchDB two documents with this relationship will look like:</p>
<pre><code class="javascript">{
    &quot;_id&quot;: &quot;1234&quot;,
    &quot;doctrine_metadata&quot;:
    {
        &quot;associations&quot;:
        {
            &quot;author&quot;: &quot;54321&quot;
        }
    },
    &quot;title&quot;: &quot;An article&quot;,
    &quot;type&quot;: &quot;Article&quot;
}

{
    &quot;_id&quot;: &quot;54321&quot;,
    &quot;name&quot;: &quot;Benjamin&quot;,
    &quot;type&quot;: &quot;User&quot;
}
</code></pre>
<a class="section-anchor" id="title.1.2.2" name="title.1.2.2"></a><h3 class="section-header"><a href="#title.1.2.2">ReferenceMany<i class="fas fa-link"></i></a></h3>
<p>You can have a reference between a document and a set of related documents in the following way</p>
<pre><code class="php">&lt;?php
/**
 * @Document
 */
class Article
{
    /** @Id */
    private $id;

    /** @ReferenceMany(targetDocument=&quot;Comment&quot;) */
    private $comments;
}
</code></pre>
<p>This mapping definition will save an array of comment ids in every article document and
will present you with a <code>Doctrine\Common\Collections\Collection</code> containing Comment instances
in PHP.</p>
<p>In CouchDB documents with this relationship will look like:</p>
<pre><code class="javascript">{
    &quot;_id&quot;: &quot;1234&quot;,
    &quot;comments&quot;: [&quot;55555&quot;, &quot;44444&quot;],
    &quot;doctrine_metadata&quot;:
    {
        &quot;associations&quot;: [&quot;comments&quot;]
    },
    &quot;title&quot;: &quot;An article&quot;,
    &quot;type&quot;: &quot;Article&quot;
}

{
    &quot;_id&quot;: &quot;55555&quot;,
    &quot;text&quot;: &quot;Thank you!&quot;,
    &quot;type&quot;: &quot;Comment&quot;
}

{
    &quot;_id&quot;: &quot;44444&quot;,
    &quot;text&quot;: &quot;Very informative!&quot;,
    &quot;type&quot;: &quot;Comment&quot;
}
</code></pre>
<a class="section-anchor" id="title.1.2.3" name="title.1.2.3"></a><h3 class="section-header"><a href="#title.1.2.3">Inverse ReferenceMany<i class="fas fa-link"></i></a></h3>
<p>You can define the inverse side of a reference one or reference many association, which will
use a view to access which owning side documents point to the current document by holding
a reference to their id:</p>
<pre><code class="php">&lt;?php
/** @Document */
class User
{
    /** @Id */
    private $id;

    /**
     * @ReferenceMany(targetDocument=&quot;Article&quot;, mappedBy=&quot;author&quot;)
     */
    private $articles;
}
</code></pre>
<p>See the difference between the previous reference many definition by using the mappedBy attribute.
This specifies which association on the target document contains the id reference.</p>
<p>In CouchDB documents with this relationship will look like:</p>
<pre><code class="javascript">{
    &quot;_id&quot;: &quot;54321&quot;,
    &quot;name&quot;: &quot;Benjamin&quot;,
    &quot;type&quot;: &quot;User&quot;
}
</code></pre>
<p>A view is used to lookup the related articles. The view emits type, all
associations and their ids.</p>
<a class="section-anchor" id="title.1.2.4" name="title.1.2.4"></a><h3 class="section-header"><a href="#title.1.2.4">EmbedOne<i class="fas fa-link"></i></a></h3>
<p>You can embed a class into a document. Both will be saved in the same CouchDB document:</p>
<pre><code class="php">&lt;?php
/** @Document */
class User
{
    /** @Id */
    private $id;

    /** @EmbedOne */
    private $address;
}
</code></pre>
<p>The embed one mapping definition does not necessarily need a &quot;targetDocument&quot; attribute,
it can detect and save this automatically.</p>
<p>In CouchDB documents with this relationship will look like:</p>
<pre><code class="javascript">{
    &quot;_id&quot;: &quot;1234&quot;,
    &quot;address&quot;:
    {
        &quot;zipcode&quot;: &quot;12345&quot;,
        &quot;city&quot;: &quot;Berlin&quot;
    }
}
</code></pre>
<a class="section-anchor" id="title.1.2.5" name="title.1.2.5"></a><h3 class="section-header"><a href="#title.1.2.5">EmbedMany<i class="fas fa-link"></i></a></h3>
<p>You can embed an array of classes into a document.</p>
<pre><code class="php">&lt;?php
/** @Document */
class User
{
    /** @Id */
    private $id;

    /** @EmbedMany */
    private $phonenumbers;
}
</code></pre>
<p>In CouchDB documents with this relationship will look like:</p>
<pre><code class="javascript">{
    &quot;_id&quot;: &quot;1234&quot;,
    &quot;phonenumbers&quot;:
    [
        {&quot;number&quot;: &quot;+1234567890&quot;},
        {&quot;number&quot;: &quot;+1234567891&quot;}
    ]
}
</code></pre>
                                            </div>
                </div>
            </main>
        </div>
    </div>

                            
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://www.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://www.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://www.doctrine-project.org/js/search.js?36322d"></script>

        <script type="text/javascript">
            var projectSlug = 'couchdb-odm';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

            <script src="https://www.doctrine-project.org/js/sidebar.js?cd221a"></script>

    <script type="text/javascript">
        new Sidebar();
    </script>

                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
