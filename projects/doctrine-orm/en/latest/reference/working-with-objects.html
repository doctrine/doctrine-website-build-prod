<!DOCTYPE html>
<html>
    <head>
        <title>        Working with Objects - Doctrine Object Relational Mapper (ORM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Object Relational Mapper Documentation: Working with Objects ">

        <meta name="keywords" content="                    orm,database,documentation,working,with,objects
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-orm/en/3.4/reference/working-with-objects.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?74d1a1"
                        integrity="sha384-dAaEn2ZyD87ZE8ZaTOc39tmNlPuZWU7Tvl3K1W/IXH5rtko68QAI5cdG6HLv97IH"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html" />
        <meta property="og:title" content="        Working with Objects - Doctrine Object Relational Mapper (ORM)
    " />
        <meta property="og:description" content="Doctrine Object Relational Mapper Documentation: Working with Objects " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Object Relational Mapper",
            "description": "Working with Objects",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/orm/edit/4.0.x/docs/en/reference/working-with-objects.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
            <p class="caption">Tutorials</p>
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../tutorials/getting-started.html#getting-started-with-doctrine">Getting Started with Doctrine</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#guide-assumptions">Guide Assumptions</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#what-is-doctrine">What is Doctrine?</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#what-are-entities">What are Entities?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#an-example-model-bug-tracker">An Example Model: Bug Tracker</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#project-setup">Project Setup</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#obtaining-the-entitymanager">Obtaining the EntityManager</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#generating-the-database-schema">Generating the Database Schema</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#starting-with-the-product-entity">Starting with the Product Entity</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#adding-behavior-to-entities">Adding behavior to Entities</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#adding-bug-and-user-entities">Adding Bug and User Entities</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#implementing-more-requirements">Implementing more Requirements</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#queries-for-application-use-cases">Queries for Application Use-Cases</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#list-of-bugs">List of Bugs</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#array-hydration-of-the-bug-list">Array Hydration of the Bug List</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#find-by-primary-key">Find by Primary Key</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#dashboard-of-the-user">Dashboard of the User</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#number-of-bugs">Number of Bugs</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#updating-entities">Updating Entities</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#entity-repositories">Entity Repositories</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/getting-started.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-database.html#getting-started-database-first">Getting Started: Database First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/getting-started-models.html#getting-started-model-first">Getting Started: Model First</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#working-with-indexed-associations">Working with Indexed Associations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#mapping-indexed-associations">Mapping Indexed Associations</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#querying-indexed-associations">Querying indexed associations</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/working-with-indexed-associations.html#outlook-into-the-future">Outlook into the Future</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../tutorials/extra-lazy-associations.html#extra-lazy-associations">Extra Lazy Associations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../tutorials/extra-lazy-associations.html#enabling-extra-lazy-associations">Enabling Extra-Lazy Associations</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#composite-and-foreign-keys-as-primary-key">Composite and Foreign Keys as Primary Key</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#general-considerations">General Considerations</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#primitive-types-only">Primitive Types only</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#identity-through-foreign-entities">Identity through foreign Entities</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#use-case-1-dynamic-attributes">Use-Case 1: Dynamic Attributes</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#use-case-2-simple-derived-identity">Use-Case 2: Simple Derived Identity</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#use-case-3-join-table-with-metadata">Use-Case 3: Join-Table with Metadata</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/composite-primary-keys.html#performance-considerations">Performance Considerations</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../tutorials/ordered-associations.html#ordering-to-many-associations">Ordering To-Many Associations</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/override-field-association-mappings-in-subclasses.html#override-field-association-mappings-in-subclasses">Override Field Association Mappings In Subclasses</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="../tutorials/embeddables.html#separating-concerns-using-embeddables">Separating Concerns using Embeddables</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../tutorials/embeddables.html#initializing-embeddables">Initializing embeddables</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/embeddables.html#column-prefixing">Column Prefixing</a>


</li>
            <li class="toc-item">
    <a href="../tutorials/embeddables.html#dql">DQL</a>


</li>
                    </ul>
</li>
    </ul>
</div><div class="toc">
            <p class="caption">Reference</p>
    <ul class="menu-level">
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="architecture.html#using-an-object-relational-mapper">Using an Object-Relational Mapper</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#requirements">Requirements</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#doctrine-orm-packages">Doctrine ORM Packages</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="architecture.html#collection-event-manager-and-persistence">Collection, Event Manager and Persistence</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#the-dbal-package">The DBAL Package</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#the-orm-package">The ORM Package</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="architecture.html#terminology">Terminology</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="architecture.html#entities">Entities</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#mapped-superclasses">Mapped Superclasses</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#transient-classes">Transient Classes</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#entity-states">Entity states</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#persistent-fields">Persistent fields</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#serializing-entities">Serializing entities</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#the-entitymanager">The EntityManager</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#transactional-write-behind">Transactional write-behind</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#the-unit-of-work">The Unit of Work</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="configuration.html#installation-and-configuration">Installation and Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="configuration.html#class-loading">Class loading</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#obtaining-an-entitymanager">Obtaining an EntityManager</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#setting-up-the-commandline-tool">Setting up the Commandline Tool</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="faq.html#frequently-asked-questions">Frequently Asked Questions</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="faq.html#database-schema">Database Schema</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#how-do-i-set-the-charset-and-collation-for-mysql-tables">How do I set the charset and collation for MySQL tables?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#entity-classes">Entity Classes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#how-can-i-add-default-values-to-a-column">How can I add default values to a column?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#mapping">Mapping</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#why-do-i-get-exceptions-about-unique-constraint-failures-during-em-flush">Why do I get exceptions about unique constraint failures during $em-&gt;flush()?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#associations">Associations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#what-is-wrong-when-i-get-an-invalidargumentexception-a-new-entity-was-found-through-the-relationship">What is wrong when I get an InvalidArgumentException &quot;A new entity was found through the relationship..&quot;?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#how-can-i-filter-an-association">How can I filter an association?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#i-call-clear-on-a-one-to-many-collection-but-the-entities-are-not-deleted">I call clear() on a One-To-Many collection but the entities are not deleted</a>


</li>
            <li class="toc-item">
    <a href="faq.html#how-can-i-add-columns-to-a-many-to-many-table">How can I add columns to a many-to-many table?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#how-can-i-paginate-fetch-joined-collections">How can i paginate fetch-joined collections?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#why-does-pagination-not-work-correctly-with-fetch-joins">Why does pagination not work correctly with fetch joins?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#inheritance">Inheritance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#can-i-use-inheritance-with-doctrine-orm">Can I use Inheritance with Doctrine ORM?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#why-does-doctrine-not-create-proxy-objects-for-my-inheritance-hierarchy">Why does Doctrine not create proxy objects for my inheritance hierarchy?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#entitygenerator">EntityGenerator</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#why-does-the-entitygenerator-not-do-x">Why does the EntityGenerator not do X?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#why-does-the-entitygenerator-not-generate-inheritance-correctly">Why does the EntityGenerator not generate inheritance correctly?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#performance">Performance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#why-is-an-extra-sql-query-executed-every-time-i-fetch-an-entity-with-a-one-to-one-relation">Why is an extra SQL query executed every time I fetch an entity with a one-to-one relation?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#doctrine-query-language">Doctrine Query Language</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="faq.html#what-is-dql">What is DQL?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#can-i-sort-by-a-function-for-example-order-by-rand-in-dql">Can I sort by a function (for example ORDER BY RAND()) in DQL?</a>


</li>
            <li class="toc-item">
    <a href="faq.html#is-it-better-to-write-dql-or-to-generate-it-with-the-query-builder">Is it better to write DQL or to generate it with the query builder?</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="faq.html#a-query-fails-how-can-i-debug-it">A Query fails, how can I debug it?</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="basic-mapping.html#creating-classes-for-the-database">Creating Classes for the Database</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#property-mapping">Property Mapping</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#php-types-mapping">PHP Types Mapping</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#property-hooks">Property Hooks</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#doctrine-mapping-types">Doctrine Mapping Types</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#identifiers-primary-keys">Identifiers / Primary Keys</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#identifier-generation-strategies">Identifier Generation Strategies</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#sequence-generator">Sequence Generator</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#composite-keys">Composite Keys</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#quoting-reserved-words">Quoting Reserved Words</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="association-mapping.html#association-mapping">Association Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="association-mapping.html#many-to-one-unidirectional">Many-To-One, Unidirectional</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-one-unidirectional">One-To-One, Unidirectional</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-one-bidirectional">One-To-One, Bidirectional</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-one-self-referencing">One-To-One, Self-referencing</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-many-bidirectional">One-To-Many, Bidirectional</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-many-unidirectional-with-join-table">One-To-Many, Unidirectional with Join Table</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#one-to-many-self-referencing">One-To-Many, Self-referencing</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#many-to-many-unidirectional">Many-To-Many, Unidirectional</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#many-to-many-bidirectional">Many-To-Many, Bidirectional</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="association-mapping.html#owning-and-inverse-side-on-a-manytomany-association">Owning and Inverse Side on a ManyToMany Association</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="association-mapping.html#many-to-many-self-referencing">Many-To-Many, Self-referencing</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#mapping-defaults">Mapping Defaults</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#collections">Collections</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#initializing-collections">Initializing Collections</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="inheritance-mapping.html#mapped-superclasses">Mapped Superclasses</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#entity-inheritance">Entity Inheritance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="inheritance-mapping.html#performance-impact-on-to-one-associations">Performance impact on to-one associations</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#single-table-inheritance">Single Table Inheritance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="inheritance-mapping.html#design-time-considerations">Design-time considerations</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#performance-impact">Performance impact</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#sql-schema-considerations">SQL Schema considerations</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#class-table-inheritance">Class Table Inheritance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="inheritance-mapping.html#design-time-considerations">Design-time considerations</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#performance-impact">Performance impact</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#sql-schema-considerations">SQL Schema considerations</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#overrides">Overrides</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="inheritance-mapping.html#association-override">Association Override</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#attribute-override">Attribute Override</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#query-the-type">Query the Type</a>


</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#working-with-objects">Working with Objects</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#entities-and-the-identity-map">Entities and the Identity Map</a>


</li>
            <li class="toc-item">
    <a href="#entity-object-graph-traversal">Entity Object Graph Traversal</a>


</li>
            <li class="toc-item">
    <a href="#persisting-entities">Persisting entities</a>


</li>
            <li class="toc-item">
    <a href="#removing-entities">Removing entities</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#join-table-management-when-removing-from-many-to-many-collections">Join-table management when removing from many-to-many collections</a>


</li>
            <li class="toc-item">
    <a href="#performance-of-different-deletion-strategies">Performance of different deletion strategies</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#detaching-entities">Detaching entities</a>


</li>
            <li class="toc-item">
    <a href="#synchronization-with-the-database">Synchronization with the Database</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#effects-of-database-and-unitofwork-being-out-of-sync">Effects of Database and UnitOfWork being Out-Of-Sync</a>


</li>
            <li class="toc-item">
    <a href="#synchronizing-new-and-managed-entities">Synchronizing New and Managed Entities</a>


</li>
            <li class="toc-item">
    <a href="#synchronizing-removed-entities">Synchronizing Removed Entities</a>


</li>
            <li class="toc-item">
    <a href="#the-size-of-a-unit-of-work">The size of a Unit of Work</a>


</li>
            <li class="toc-item">
    <a href="#the-cost-of-flushing">The cost of flushing</a>


</li>
            <li class="toc-item">
    <a href="#direct-access-to-a-unit-of-work">Direct access to a Unit of Work</a>


</li>
            <li class="toc-item">
    <a href="#entity-state">Entity State</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#querying">Querying</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#by-primary-key">By Primary Key</a>


</li>
            <li class="toc-item">
    <a href="#by-simple-conditions">By Simple Conditions</a>


</li>
            <li class="toc-item">
    <a href="#by-criteria">By Criteria</a>


</li>
            <li class="toc-item">
    <a href="#by-eager-loading">By Eager Loading</a>


</li>
            <li class="toc-item">
    <a href="#by-lazy-loading">By Lazy Loading</a>


</li>
            <li class="toc-item">
    <a href="#by-dql">By DQL</a>


</li>
            <li class="toc-item">
    <a href="#by-native-queries">By Native Queries</a>


</li>
            <li class="toc-item">
    <a href="#custom-repositories">Custom Repositories</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="working-with-associations.html#working-with-associations">Working with Associations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="working-with-associations.html#association-example-entities">Association Example Entities</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#establishing-associations">Establishing Associations</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#removing-associations">Removing Associations</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#association-management-methods">Association Management Methods</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#synchronizing-bidirectional-collections">Synchronizing Bidirectional Collections</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#transitive-persistence-cascade-operations">Transitive persistence / Cascade Operations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-associations.html#persistence-by-reachability-cascade-persist">Persistence by Reachability: Cascade Persist</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-associations.html#orphan-removal">Orphan Removal</a>


</li>
            <li class="toc-item">
    <a href="working-with-associations.html#filtering-collections">Filtering Collections</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="typedfieldmapper.html#implementing-a-typedfieldmapper">Implementing a TypedFieldMapper</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="typedfieldmapper.html#defaulttypedfieldmapper">DefaultTypedFieldMapper</a>


</li>
            <li class="toc-item">
    <a href="typedfieldmapper.html#typedfieldmapper-interface">TypedFieldMapper interface</a>


</li>
            <li class="toc-item">
    <a href="typedfieldmapper.html#chaintypedfieldmapper">ChainTypedFieldMapper</a>


</li>
            <li class="toc-item">
    <a href="typedfieldmapper.html#implementing-a-typedfieldmapper">Implementing a TypedFieldMapper</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="events.html#the-event-system">The Event System</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#registering-event-handlers">Registering Event Handlers</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="events.html#events-overview">Events Overview</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#naming-convention">Naming convention</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="events.html#lifecycle-callbacks">Lifecycle Callbacks</a>


</li>
            <li class="toc-item">
    <a href="events.html#lifecycle-callbacks-event-argument">Lifecycle Callbacks Event Argument</a>


</li>
            <li class="toc-item">
    <a href="events.html#listening-and-subscribing-to-lifecycle-events">Listening and subscribing to Lifecycle Events</a>


</li>
            <li class="toc-item">
    <a href="events.html#implementing-event-listeners">Implementing Event Listeners</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#prepersist">prePersist</a>


</li>
            <li class="toc-item">
    <a href="events.html#preremove">preRemove</a>


</li>
            <li class="toc-item">
    <a href="events.html#preflush">preFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#onflush">onFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#postflush">postFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#preupdate">preUpdate</a>


</li>
            <li class="toc-item">
    <a href="events.html#postupdate-postremove-postpersist">postUpdate, postRemove, postPersist</a>


</li>
            <li class="toc-item">
    <a href="events.html#postload">postLoad</a>


</li>
            <li class="toc-item">
    <a href="events.html#onclear">onClear</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="events.html#entity-listeners">Entity listeners</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#entity-listeners-class">Entity listeners class</a>


</li>
            <li class="toc-item">
    <a href="events.html#entity-listeners-resolver">Entity listeners resolver</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="events.html#load-classmetadata-event">Load ClassMetadata Event</a>


</li>
            <li class="toc-item">
    <a href="events.html#schematool-events">SchemaTool Events</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#postgenerateschematable">postGenerateSchemaTable</a>


</li>
            <li class="toc-item">
    <a href="events.html#postgenerateschema">postGenerateSchema</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="unitofwork.html#doctrine-internals-explained">Doctrine Internals explained</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="unitofwork.html#how-doctrine-keeps-track-of-objects">How Doctrine keeps track of Objects</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#how-doctrine-detects-changes">How Doctrine Detects Changes</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#query-internals">Query Internals</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#the-different-orm-layers">The different ORM Layers</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="unitofwork.html#hydration">Hydration</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#persisters">Persisters</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#unitofwork">UnitOfWork</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#resultsetmapping">ResultSetMapping</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#dql-parser">DQL Parser</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#sqlwalker">SQLWalker</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#entitymanager">EntityManager</a>


</li>
            <li class="toc-item">
    <a href="unitofwork.html#classmetadatafactory">ClassMetadataFactory</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="unitofwork-associations.html#association-updates-owning-side-and-inverse-side">Association Updates: Owning Side and Inverse Side</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="unitofwork-associations.html#bidirectional-associations">Bidirectional Associations</a>


</li>
            <li class="toc-item">
    <a href="unitofwork-associations.html#important-concepts">Important concepts</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="transactions-and-concurrency.html#transactions-and-concurrency">Transactions and Concurrency</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#transaction-demarcation">Transaction Demarcation</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#approach-1-implicitly">Approach 1: Implicitly</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#approach-2-explicitly">Approach 2: Explicitly</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#exception-handling">Exception Handling</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#locking-support">Locking Support</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#optimistic-locking">Optimistic Locking</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#important-implementation-notes">Important Implementation Notes</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#pessimistic-locking">Pessimistic Locking</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="batch-processing.html#batch-processing">Batch Processing</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="batch-processing.html#bulk-inserts">Bulk Inserts</a>


</li>
            <li class="toc-item">
    <a href="batch-processing.html#bulk-updates">Bulk Updates</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="batch-processing.html#dql-update">DQL UPDATE</a>


</li>
            <li class="toc-item">
    <a href="batch-processing.html#iterating-results">Iterating results</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="batch-processing.html#bulk-deletes">Bulk Deletes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="batch-processing.html#dql-delete">DQL DELETE</a>


</li>
            <li class="toc-item">
    <a href="batch-processing.html#iterating-results">Iterating results</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="batch-processing.html#iterating-large-results-for-data-processing">Iterating Large Results for Data-Processing</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="dql-doctrine-query-language.html#doctrine-query-language">Doctrine Query Language</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#types-of-dql-queries">Types of DQL queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#select-queries">SELECT queries</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#dql-select-clause">DQL SELECT clause</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#result-format">Result format</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#joins">Joins</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#named-and-positional-parameters">Named and Positional Parameters</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#dql-select-examples">DQL SELECT Examples</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#partial-hydration-syntax">Partial Hydration Syntax</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#new-operator-syntax">&quot;NEW&quot; Operator Syntax</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#using-index-by">Using INDEX BY</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#update-queries">UPDATE queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#delete-queries">DELETE queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#comments-in-queries">Comments in queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#functions-operators-aggregates">Functions, Operators, Aggregates</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#dql-functions">DQL Functions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#arithmetic-operators">Arithmetic operators</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#aggregate-functions">Aggregate Functions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#other-expressions">Other Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#adding-your-own-functions-to-the-dql-language">Adding your own functions to the DQL language</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#querying-inherited-classes">Querying Inherited Classes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#single-table">Single Table</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#class-table-inheritance">Class Table Inheritance</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#the-query-class">The Query class</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#query-result-formats-hydration-modes">Query Result Formats (Hydration Modes)</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getresult">getResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getarrayresult">getArrayResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getscalarresult">getScalarResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getsinglescalarresult">getSingleScalarResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getsinglecolumnresult">getSingleColumnResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getsingleresult">getSingleResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#getoneornullresult">getOneOrNullResult()</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#custom-hydration-modes">Custom Hydration Modes</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#pure-and-mixed-results">Pure and Mixed Results</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#fetching-multiple-from-entities">Fetching Multiple FROM Entities</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#iterating-large-result-sets">Iterating Large Result Sets</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#functions">Functions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#parameters">Parameters</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#cache-related-api">Cache related API</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#query-hints">Query Hints</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#query-cache-dql-query-only">Query Cache (DQL Query Only)</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only">First and Max Result Items (DQL Query Only)</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#temporarily-change-fetch-mode-in-dql">Temporarily change fetch mode in DQL</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#ebnf">EBNF</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#document-syntax">Document syntax:</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#terminals">Terminals</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#query-language">Query Language</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#statements">Statements</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#identifiers">Identifiers</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#path-expressions">Path Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#clauses">Clauses</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#items">Items</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#from-join-and-index-by">From, Join and Index by</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#select-expressions">Select Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#conditional-expressions">Conditional Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#collection-expressions">Collection Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#literal-values">Literal Values</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#input-parameter">Input Parameter</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#arithmetic-expressions">Arithmetic Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#scalar-and-type-expressions">Scalar and Type Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#aggregate-expressions">Aggregate Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#case-expressions">Case Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#other-expressions">Other Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#functions">Functions</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="query-builder.html#the-querybuilder">The QueryBuilder</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="query-builder.html#constructing-a-new-querybuilder-object">Constructing a new QueryBuilder object</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#working-with-querybuilder">Working with QueryBuilder</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#high-level-api-methods">High level API methods</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#binding-parameters-to-your-query">Binding parameters to your query</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#limiting-the-result">Limiting the Result</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#executing-a-query">Executing a Query</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#the-expr-class">The Expr class</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#adding-a-criteria-to-a-query">Adding a Criteria to a Query</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#low-level-api">Low Level API</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#expr-classes">Expr* classes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#binding-parameters-to-placeholders">Binding Parameters to Placeholders</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="native-sql.html#native-sql">Native SQL</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="native-sql.html#the-nativequery-class">The NativeQuery class</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#resultsetmappingbuilder">ResultSetMappingBuilder</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#the-resultsetmapping">The ResultSetMapping</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="native-sql.html#entity-results">Entity results</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#joined-entity-results">Joined entity results</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#field-results">Field results</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#scalar-results">Scalar results</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="native-sql.html#special-case-dtos">Special case: DTOs</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="native-sql.html#meta-results">Meta results</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#discriminator-column">Discriminator Column</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#examples">Examples</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="change-tracking-policies.html#deferred-implicit">Deferred Implicit</a>


</li>
            <li class="toc-item">
    <a href="change-tracking-policies.html#deferred-explicit">Deferred Explicit</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="partial-hydration.html#partial-hydration">Partial Hydration</a>


</li>
    <li class="toc-item">
    <a href="partial-objects.html#partial-objects">Partial Objects</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="partial-objects.html#what-is-the-problem">What is the problem?</a>


</li>
            <li class="toc-item">
    <a href="partial-objects.html#when-should-i-force-partial-objects">When should I force partial objects?</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="attributes-reference.html#attributes-reference">Attributes Reference</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="attributes-reference.html#index">Index</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#reference">Reference</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-reference.html#associationoverride">#[AssociationOverride]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#attributeoverride">#[AttributeOverride]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#column">#[Column]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#cache">#[Cache]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#changetrackingpolicy">#[ChangeTrackingPolicy]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#customidgenerator">#[CustomIdGenerator]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#discriminatorcolumn">#[DiscriminatorColumn]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#discriminatormap">#[DiscriminatorMap]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#embeddable">#[Embeddable]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#embedded">#[Embedded]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#entity">#[Entity]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#generatedvalue">#[GeneratedValue]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#haslifecyclecallbacks">#[HasLifecycleCallbacks]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#index">#[Index]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#id">#[Id]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#inheritancetype">#[InheritanceType]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#joincolumn-inversejoincolumn">#[JoinColumn], #[InverseJoinColumn]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#jointable">#[JoinTable]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#manytoone">#[ManyToOne]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#manytomany">#[ManyToMany]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#mappedsuperclass">#[MappedSuperclass]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#onetoone">#[OneToOne]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#onetomany">#[OneToMany]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#orderby">#[OrderBy]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#postload">#[PostLoad]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#postpersist">#[PostPersist]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#postremove">#[PostRemove]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#postupdate">#[PostUpdate]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#prepersist">#[PrePersist]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#preremove">#[PreRemove]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#preupdate">#[PreUpdate]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#sequencegenerator">#[SequenceGenerator]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#table">#[Table]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#uniqueconstraint">#[UniqueConstraint]</a>


</li>
            <li class="toc-item">
    <a href="attributes-reference.html#version">#[Version]</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="xml-mapping.html#simplified-xml-driver">Simplified XML Driver</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="xml-mapping.html#example">Example</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#xml-element-reference">XML-Element Reference</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-an-entity">Defining an Entity</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-fields">Defining Fields</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-identity-and-generator-strategies">Defining Identity and Generator Strategies</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-a-mapped-superclass">Defining a Mapped Superclass</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-inheritance-mappings">Defining Inheritance Mappings</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-lifecycle-callbacks">Defining Lifecycle Callbacks</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-one-to-one-relations">Defining One-To-One Relations</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-many-to-one-associations">Defining Many-To-One Associations</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-one-to-many-associations">Defining One-To-Many Associations</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-many-to-many-associations">Defining Many-To-Many Associations</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#cascade-element">Cascade Element</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#join-column-element">Join Column Element</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-order-of-to-many-associations">Defining Order of To-Many Associations</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#defining-indexes-or-unique-constraints">Defining Indexes or Unique Constraints</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#derived-entities-id-syntax">Derived Entities ID syntax</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="php-mapping.html#php-mapping">PHP Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="php-mapping.html#static-function">Static Function</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#classmetadatabuilder">ClassMetadataBuilder</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#classmetadata-api">ClassMetadata API</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="php-mapping.html#general-setters">General Setters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#inheritance-setters">Inheritance Setters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#field-mapping-setters">Field Mapping Setters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#lifecycle-callback-setters">Lifecycle Callback Setters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#versioning-setters">Versioning Setters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#general-getters">General Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#identifier-getters">Identifier Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#inheritance-getters">Inheritance Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#change-tracking-getters">Change Tracking Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#field-association-getters">Field &amp; Association Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#lifecycle-callback-getters">Lifecycle Callback Getters</a>


</li>
            <li class="toc-item">
    <a href="php-mapping.html#runtime-reflection-methods">Runtime reflection methods</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="caching.html#caching">Caching</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="caching.html#types-of-caches">Types of Caches</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="caching.html#query-cache">Query Cache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#result-cache">Result Cache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#metadata-cache">Metadata Cache</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="caching.html#clearing-the-cache">Clearing the Cache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#cache-chaining">Cache Chaining</a>


</li>
            <li class="toc-item">
    <a href="caching.html#cache-slams">Cache Slams</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="improving-performance.html#improving-performance">Improving Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="improving-performance.html#bytecode-cache">Bytecode Cache</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#metadata-and-query-caches">Metadata and Query caches</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#alternative-query-result-formats">Alternative Query Result Formats</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#read-only-entities">Read-Only Entities</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#extra-lazy-collections">Extra-Lazy Collections</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#temporarily-change-fetch-mode-in-dql">Temporarily change fetch mode in DQL</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#apply-best-practices">Apply Best Practices</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#change-tracking-policies">Change Tracking policies</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="tools.html#tools">Tools</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="tools.html#doctrine-console">Doctrine Console</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="tools.html#setting-up-the-console">Setting Up the Console</a>


</li>
            <li class="toc-item">
    <a href="tools.html#display-help-information">Display Help Information</a>


</li>
            <li class="toc-item">
    <a href="tools.html#command-overview">Command Overview</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="tools.html#database-schema-generation">Database Schema Generation</a>


</li>
            <li class="toc-item">
    <a href="tools.html#runtime-vs-development-mapping-validation">Runtime vs Development Mapping Validation</a>


</li>
            <li class="toc-item">
    <a href="tools.html#adding-own-commands">Adding own commands</a>


</li>
            <li class="toc-item">
    <a href="tools.html#re-use-console-application">Re-use console application</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="metadata-drivers.html#core-metadata-drivers">Core Metadata Drivers</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#implementing-metadata-drivers">Implementing Metadata Drivers</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#classmetadata">ClassMetadata</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#getting-classmetadata-instances">Getting ClassMetadata Instances</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="best-practices.html#constrain-relationships-as-much-as-possible">Constrain relationships as much as possible</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#avoid-composite-keys">Avoid composite keys</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#use-events-judiciously">Use events judiciously</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#use-cascades-judiciously">Use cascades judiciously</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#don-t-use-special-characters">Don&#039;t use special characters</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#don-t-use-identifier-quoting">Don&#039;t use identifier quoting</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#initialize-collections-in-the-constructor">Initialize collections in the constructor</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#don-t-map-foreign-keys-to-fields-in-an-entity">Don&#039;t map foreign keys to fields in an entity</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#use-explicit-transaction-demarcation">Use explicit transaction demarcation</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="limitations-and-known-issues.html#limitations-and-known-issues">Limitations and Known Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#current-limitations">Current Limitations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#join-columns-with-non-primary-keys">Join-Columns with non-primary keys</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#mapping-arrays-to-a-join-table">Mapping Arrays to a Join Table</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#custom-persisters">Custom Persisters</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#persist-keys-of-collections">Persist Keys of Collections</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#mapping-many-tables-to-one-entity">Mapping many tables to one entity</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#behaviors">Behaviors</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#nested-set">Nested Set</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#using-traits-in-entity-classes">Using Traits in Entity Classes</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#mapping-multiple-private-fields-of-the-same-name">Mapping multiple private fields of the same name</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#known-issues">Known Issues</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#identifier-quoting-and-legacy-databases">Identifier Quoting and Legacy Databases</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#microsoft-sql-server-and-doctrine-datetime">Microsoft SQL Server and Doctrine &quot;datetime&quot;</a>


</li>
            <li class="toc-item">
    <a href="limitations-and-known-issues.html#mysql-with-myisam-tables">MySQL with MyISAM tables</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../tutorials/pagination.html#pagination">Pagination</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters">Filters</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="filters.html#example-filter-class">Example filter class</a>


</li>
            <li class="toc-item">
    <a href="filters.html#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="filters.html#disabling-enabling-filters-and-setting-parameters">Disabling/Enabling Filters and Setting Parameters</a>


</li>
            <li class="toc-item">
    <a href="filters.html#suspending-restoring-filters">Suspending/Restoring Filters</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="namingstrategy.html#implementing-a-namingstrategy">Implementing a NamingStrategy</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="namingstrategy.html#configuring-a-naming-strategy">Configuring a naming strategy</a>


</li>
            <li class="toc-item">
    <a href="namingstrategy.html#underscore-naming-strategy">Underscore naming strategy</a>


</li>
            <li class="toc-item">
    <a href="namingstrategy.html#naming-strategy-interface">Naming strategy interface</a>


</li>
            <li class="toc-item">
    <a href="namingstrategy.html#implementing-a-naming-strategy">Implementing a naming strategy</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="advanced-configuration.html#advanced-configuration">Advanced Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="advanced-configuration.html#doctrine-and-caching">Doctrine and Caching</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#configuration-options">Configuration Options</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="advanced-configuration.html#native-lazy-objects-optional">Native Lazy Objects (OPTIONAL)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#proxy-directory">Proxy Directory</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#proxy-namespace">Proxy Namespace</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#metadata-driver-required">Metadata Driver (REQUIRED)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#metadata-cache-recommended">Metadata Cache (RECOMMENDED)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#query-cache-recommended">Query Cache (RECOMMENDED)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#sql-logger-optional">SQL Logger (Optional)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#auto-generating-proxy-classes-optional">Auto-generating Proxy Classes (OPTIONAL)</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#development-vs-production-configuration">Development vs Production Configuration</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#connection">Connection</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#proxy-objects">Proxy Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="advanced-configuration.html#reference-proxies">Reference Proxies</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#association-proxies">Association proxies</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#generating-proxy-classes">Generating Proxy classes</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#autoloading-proxies">Autoloading Proxies</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#multiple-metadata-sources">Multiple Metadata Sources</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#default-repository-optional">Default Repository (OPTIONAL)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#ignoring-entities-optional">Ignoring entities (OPTIONAL)</a>


</li>
            <li class="toc-item">
    <a href="advanced-configuration.html#setting-up-the-console">Setting up the Console</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="second-level-cache.html#the-second-level-cache">The Second Level Cache</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="second-level-cache.html#caching-regions">Caching Regions</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#cache-regions">Cache Regions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#cache-region">Cache region</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#concurrent-cache-region">Concurrent cache region</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#timestamp-region">Timestamp region</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="second-level-cache.html#caching-mode">Caching mode</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#built-in-cached-persisters">Built-in cached persisters</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="second-level-cache.html#configuration">Configuration</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#enable-second-level-cache">Enable Second Level Cache</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#cache-factory">Cache Factory</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#region-lifetime">Region Lifetime</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#cache-log">Cache Log</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="second-level-cache.html#entity-cache-definition">Entity cache definition</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#association-cache-definition">Association cache definition</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#cache-usage">Cache usage</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="second-level-cache.html#using-the-query-cache">Using the query cache</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#cache-mode">Cache mode</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#delete-update-queries">DELETE / UPDATE queries</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="second-level-cache.html#using-the-repository-query-cache">Using the repository query cache</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#cache-api">Cache API</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#limitations">Limitations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="second-level-cache.html#composite-primary-key">Composite primary key</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#distributed-environments">Distributed environments</a>


</li>
            <li class="toc-item">
    <a href="second-level-cache.html#paginator">Paginator</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="security.html#security">Security</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="security.html#user-input-and-doctrine-orm">User input and Doctrine ORM</a>


</li>
            <li class="toc-item">
    <a href="security.html#preventing-mass-assignment-vulnerabilities">Preventing Mass Assignment Vulnerabilities</a>


</li>
                    </ul>
</li>
    </ul>
</div><div class="toc">
            <p class="caption">Cookbook</p>
    <ul class="menu-level">
    <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#aggregate-fields">Aggregate Fields</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#an-example-model">An example model</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#using-dql">Using DQL</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#using-your-domain-model">Using your Domain Model</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#using-an-aggregate-field">Using an Aggregate Field</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#tackling-race-conditions-with-aggregate-fields">Tackling Race Conditions with Aggregate Fields</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#keeping-updates-and-deletes-in-sync">Keeping Updates and Deletes in Sync</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/aggregate-fields.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#persisting-the-decorator-pattern">Persisting the Decorator Pattern</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#component">Component</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#concretecomponent">ConcreteComponent</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#decorator">Decorator</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#concretedecorator">ConcreteDecorator</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/decorator-pattern.html#examples">Examples</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#extending-dql-in-doctrine-orm-custom-ast-walkers">Extending DQL in Doctrine ORM: Custom AST Walkers</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#generic-count-query-for-pagination">Generic count query for pagination</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/dql-custom-walkers.html#modify-the-output-walker-to-generate-vendor-specific-sql">Modify the Output Walker to generate Vendor specific SQL</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#dql-user-defined-functions">DQL User Defined Functions</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#registering-your-own-dql-functions">Registering your own DQL functions</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#date-diff">Date Diff</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#date-add">Date Add</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#typed-functions">Typed functions</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/dql-user-defined-functions.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/generated-columns.html#generated-columns">Generated Columns</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/generated-columns.html#declaring-a-generated-column">Declaring a generated column</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/generated-columns.html#advanced-example-extracting-a-value-from-a-json-structure">Advanced example: Extracting a value from a JSON structure</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#option-1">Option 1</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#option-2">Option 2</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/implementing-arrayaccess-for-domain-objects.html#read-only">Read-only</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#keeping-your-modules-independent">Keeping your Modules independent</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#background">Background</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#set-up">Set up</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/resolve-target-entity-listener.html#final-thoughts">Final Thoughts</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#sql-table-prefixes">SQL-Table Prefixes</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#implementing-the-listener">Implementing the listener</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/sql-table-prefixes.html#telling-the-entitymanager-about-our-listener">Telling the EntityManager about our listener</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#strategy-pattern">Strategy-Pattern</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#scenario-problem">Scenario / Problem</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/strategy-cookbook-introduction.html#solution">Solution</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/validation-of-entities.html#validation-of-entities">Validation of Entities</a>


</li>
    <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#working-with-datetime-instances">Working with DateTime Instances</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#datetime-changes-are-detected-by-reference">DateTime changes are detected by Reference</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#default-timezone-gotcha">Default Timezone Gotcha</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/working-with-datetime.html#handling-different-timezones-with-the-datetime-type">Handling different Timezones with the DateTime Type</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#mysql-enums">Mysql Enums</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#solution-1-mapping-to-varchars">Solution 1: Mapping to Varchars</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/mysql-enums.html#solution-2-defining-a-type">Solution 2: Defining a Type</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#advanced-field-value-conversion-using-custom-mapping-types">Advanced field value conversion using custom mapping types</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#the-entity">The entity</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#the-mapping-type">The mapping type</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/advanced-field-value-conversion-using-custom-mapping-types.html#example-usage">Example usage</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#entities-in-the-session">Entities in the Session</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#updating-an-entity">Updating an entity</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#working-with-scalars">Working with scalars</a>


</li>
            <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#working-with-custom-data-transfer-objects">Working with custom data transfer objects</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="../cookbook/entities-in-session.html#serializing-entity-into-the-session">Serializing entity into the session</a>


</li>
                    </ul>
</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "ORM",
            "item": "https://www.doctrine-project.org/projects/orm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-orm/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Working with Objects",
            "item": "https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/orm.html">ORM</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-orm/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Working with Objects</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that has not yet been released.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-orm/en/latest/reference/working-with-objects.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        4.0
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-orm/en/latest/reference/working-with-objects.html">
                                                        4.0

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.5/reference/working-with-objects.html">
                                                        3.5

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/3.4/reference/working-with-objects.html">
                                                        3.4.1

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.21/reference/working-with-objects.html">
                                                        2.21

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-orm/en/2.20/reference/working-with-objects.html">
                                                        2.20.4

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.3/reference/working-with-objects.html">3.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.2/reference/working-with-objects.html">3.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.1/reference/working-with-objects.html">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/3.0/reference/working-with-objects.html">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.19/reference/working-with-objects.html">2.19</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.18/reference/working-with-objects.html">2.18</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.17/reference/working-with-objects.html">2.17</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.16/reference/working-with-objects.html">2.16</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.15/reference/working-with-objects.html">2.15</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.14/reference/working-with-objects.html">2.14</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.13/reference/working-with-objects.html">2.13</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.12/reference/working-with-objects.html">2.12</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.11/reference/working-with-objects.html">2.11</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-orm/en/2.10/reference/working-with-objects.html">2.10</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            

            <div class="section" id="working-with-objects">
            <h1 class="section-header ">
    <a href="#working-with-objects">
        Working with Objects
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>In this chapter we will help you understand the <code>EntityManager</code>
and the <code>UnitOfWork</code>. A Unit of Work is similar to an
object-level transaction. A new Unit of Work is implicitly started
when an EntityManager is initially created or after
<code>EntityManager#flush()</code> has been invoked. A Unit of Work is
committed (and a new one started) by invoking
<code>EntityManager#flush()</code>.</p>

            
    <p>A Unit of Work can be manually closed by calling
EntityManager#close(). Any changes to objects within this Unit of
Work that have not yet been persisted are lost.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>It is very important to understand that only
<code>EntityManager#flush()</code> ever causes write operations against the
database to be executed. Any other methods such as
<code>EntityManager#persist($entity)</code> or
<code>EntityManager#remove($entity)</code> only notify the UnitOfWork to
perform these operations during flush.</p>

    <p>Not calling <code>EntityManager#flush()</code> will lead to all changes
during that request being lost.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Doctrine NEVER touches the public API of methods in your entity
classes (like getters and setters) nor the constructor method.
Instead, it uses reflection to get/set data from/to your entity objects.
When Doctrine fetches data from DB and saves it back,
any code put in your get/set methods won&#039;t be implicitly taken into account.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            <div class="section" id="entities-and-the-identity-map">
            <h2 class="section-header ">
    <a href="#entities-and-the-identity-map">
        Entities and the Identity Map
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Entities are objects with identity. Their identity has a conceptual
meaning inside your domain. In a CMS application each article has a
unique id. You can uniquely identify each article by that id.</p>

            
    <p>Take the following example, where you find an article with the
headline &quot;Hello World&quot; with the ID 1234:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ae64be6c60b551421afe78cd145074d4e4583057"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ae64be6c60b551421afe78cd145074d4e4583057"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-1" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
$article = $entityManager-&gt;find(<span class="hljs-string">'CMS\Article'</span>, <span class="hljs-number">1234</span>);
$article-&gt;setHeadline(<span class="hljs-string">'Hello World dude!'</span>);

$article2 = $entityManager-&gt;find(<span class="hljs-string">'CMS\Article'</span>, <span class="hljs-number">1234</span>);
<span class="hljs-keyword">echo</span> $article2-&gt;getHeadline();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-2" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-3" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-4" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-5" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae64be6c60b551421afe78cd145074d4e4583057-6" class="line-number-anchor" /><a href="#line-number-ae64be6c60b551421afe78cd145074d4e4583057-6">6</a></td></tr></table></div></code></pre>
            
    <p>In this case the Article is accessed from the entity manager twice,
but modified in between. Doctrine ORM realizes this and will only
ever give you access to one instance of the Article with ID 1234,
no matter how often do you retrieve it from the EntityManager and
even no matter what kind of Query method you are using (find,
Repository Finder or DQL). This is called &quot;Identity Map&quot; pattern,
which means Doctrine keeps a map of each entity and ids that have
been retrieved per PHP request and keeps returning you the same
instances.</p>

            
    <p>In the previous example the echo prints &quot;Hello World dude!&quot; to the
screen. You can even verify that <code>$article</code> and <code>$article2</code> are
indeed pointing to the same instance by running the following
code:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="0254b97daa5f4590cd43aa76b90fc2d80a00bbcf"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="0254b97daa5f4590cd43aa76b90fc2d80a00bbcf"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-1" class="line-number-anchor" /><a href="#line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-1">1</a></td><td class="code-line" rowspan="4"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">if</span> ($article === $article2) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Yes we are the same!"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-2" class="line-number-anchor" /><a href="#line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-3" class="line-number-anchor" /><a href="#line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-4" class="line-number-anchor" /><a href="#line-number-0254b97daa5f4590cd43aa76b90fc2d80a00bbcf-4">4</a></td></tr></table></div></code></pre>
            
    <p>Sometimes you want to clear the identity map of an EntityManager to
start over. We use this regularly in our unit-tests to enforce
loading objects from the database again instead of serving them
from the identity map. You can call <code>EntityManager#clear()</code> to
achieve this result.</p>

    </div>
            <div class="section" id="entity-object-graph-traversal">
            <h2 class="section-header ">
    <a href="#entity-object-graph-traversal">
        Entity Object Graph Traversal
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Although Doctrine allows for a complete separation of your domain
model (Entity classes) there will never be a situation where
objects are &quot;missing&quot; when traversing associations. You can walk
all the associations inside your entity models as deep as you
want.</p>

            
    <p>Take the following example of a single <code>Article</code> entity fetched
from newly opened EntityManager.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="cc16f39cd9078a6b3d201f3ce70f04da859461ba"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="cc16f39cd9078a6b3d201f3ce70f04da859461ba"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-1" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-1">1</a></td><td class="code-line" rowspan="27"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">#[Entity]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span>
</span>{
    <span class="hljs-comment">#[Id, Column(type: 'integer'), GeneratedValue]</span>
    <span class="hljs-keyword">private</span> int|<span class="hljs-keyword">null</span> $id = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">#[Column(type: 'string')]</span>
    <span class="hljs-keyword">private</span> string $headline;

    <span class="hljs-comment">#[ManyToOne(targetEntity: User::class)]</span>
    <span class="hljs-keyword">private</span> User|<span class="hljs-keyword">null</span> $author = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> Collection&lt;int, Comment&gt; */</span>
    <span class="hljs-comment">#[OneToMany(targetEntity: Comment::class, mappedBy: 'article')]</span>
    <span class="hljs-keyword">private</span> Collection $comments;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;comments = <span class="hljs-keyword">new</span> ArrayCollection();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAuthor</span><span class="hljs-params">()</span>: <span class="hljs-title">User</span>|<span class="hljs-title">null</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;author; }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getComments</span><span class="hljs-params">()</span>: <span class="hljs-title">Collection</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;comments; }
}

$article = $em-&gt;find(<span class="hljs-string">'Article'</span>, <span class="hljs-number">1</span>);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-2" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-3" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-4" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-5" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-6" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-7" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-8" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-9" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-10" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-11" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-12" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-13" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-14" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-15" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-16" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-17" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-18" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-19" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-20" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-21" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-22" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-23" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-24" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-25" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-26" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-27" class="line-number-anchor" /><a href="#line-number-cc16f39cd9078a6b3d201f3ce70f04da859461ba-27">27</a></td></tr></table></div></code></pre>
            
    <p>This code only retrieves the <code>Article</code> instance with id 1 executing
a single SELECT statement against the articles table in the database.
You can still access the associated properties author and comments
and the associated objects they contain.</p>

            
    <p>This works by utilizing the lazy loading pattern. Instead of
passing you back a real Author instance and a collection of
comments Doctrine will create proxy instances for you. Only if you
access these proxies for the first time they will go through the
EntityManager and load their state from the database.</p>

            
    <p>This lazy-loading process happens behind the scenes, hidden from
your code. See the following code:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="103d6f06dd5b493b3868e875b06170d6dee32c50"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="103d6f06dd5b493b3868e875b06170d6dee32c50"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-1" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-1">1</a></td><td class="code-line" rowspan="23"><span class="hljs-meta">&lt;?php</span>
$article = $em-&gt;find(<span class="hljs-string">'Article'</span>, <span class="hljs-number">1</span>);

<span class="hljs-comment">// accessing a method of the user instance triggers the lazy-load</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"Author: "</span> . $article-&gt;getAuthor()-&gt;getName() . <span class="hljs-string">"\n"</span>;

<span class="hljs-comment">// Lazy Loading Proxies pass instanceof tests:</span>
<span class="hljs-keyword">if</span> ($article-&gt;getAuthor() <span class="hljs-keyword">instanceof</span> User) {
    <span class="hljs-comment">// a User Proxy is a generated "UserProxy" class</span>
}

<span class="hljs-comment">// accessing the comments as an iterator triggers the lazy-load</span>
<span class="hljs-comment">// retrieving ALL the comments of this article from the database</span>
<span class="hljs-comment">// using a single SELECT statement</span>
<span class="hljs-keyword">foreach</span> ($article-&gt;getComments() <span class="hljs-keyword">as</span> $comment) {
    <span class="hljs-keyword">echo</span> $comment-&gt;getText() . <span class="hljs-string">"\n\n"</span>;
}

<span class="hljs-comment">// Article::$comments passes instanceof tests for the Collection interface</span>
<span class="hljs-comment">// But it will NOT pass for the ArrayCollection interface</span>
<span class="hljs-keyword">if</span> ($article-&gt;getComments() <span class="hljs-keyword">instanceof</span> \Doctrine\Common\Collections\Collection) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"This will always be true!"</span>;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-2" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-3" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-4" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-5" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-6" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-7" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-8" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-9" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-10" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-11" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-12" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-13" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-14" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-15" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-16" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-17" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-18" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-19" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-20" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-21" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-22" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-23" class="line-number-anchor" /><a href="#line-number-103d6f06dd5b493b3868e875b06170d6dee32c50-23">23</a></td></tr></table></div></code></pre>
                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>Traversing the object graph for parts that are lazy-loaded will
easily trigger lots of SQL queries and will perform badly if used
too heavily. Make sure to use DQL to fetch-join all the parts of the
object-graph that you need as efficiently as possible.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="persisting-entities">
            <h2 class="section-header ">
    <a href="#persisting-entities">
        Persisting entities
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>An entity can be made persistent by passing it to the
<code>EntityManager#persist($entity)</code> method. By applying the persist
operation on some entity, that entity becomes MANAGED, which means
that its persistence is from now on managed by an EntityManager. As
a result the persistent state of such an entity will subsequently
be properly synchronized with the database when
<code>EntityManager#flush()</code> is invoked.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Invoking the <code>persist</code> method on an entity does NOT
cause an immediate SQL INSERT to be issued on the database.
Doctrine applies a strategy called &quot;transactional write-behind&quot;,
which means that it will delay most SQL commands until
<code>EntityManager#flush()</code> is invoked which will then issue all
necessary SQL statements to synchronize your objects with the
database in the most efficient way and a single, short transaction,
taking care of maintaining referential integrity.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Do not make any assumptions in your code about the number of queries
it takes to flush changes, about the ordering of <code>INSERT</code>, <code>UPDATE</code>
and <code>DELETE</code> queries or the order in which entities will be processed.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Example:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d302a61ad0cb51b07786df52203ef397ea7561fe"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d302a61ad0cb51b07786df52203ef397ea7561fe"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-1" class="line-number-anchor" /><a href="#line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-1">1</a></td><td class="code-line" rowspan="5"><span class="hljs-meta">&lt;?php</span>
$user = <span class="hljs-keyword">new</span> User;
$user-&gt;setName(<span class="hljs-string">'Mr.Right'</span>);
$em-&gt;persist($user);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-2" class="line-number-anchor" /><a href="#line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-3" class="line-number-anchor" /><a href="#line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-4" class="line-number-anchor" /><a href="#line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-5" class="line-number-anchor" /><a href="#line-number-d302a61ad0cb51b07786df52203ef397ea7561fe-5">5</a></td></tr></table></div></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Generated entity identifiers / primary keys are
guaranteed to be available after the next successful flush
operation that involves the entity in question. You can not rely on
a generated identifier to be available directly after invoking
<code>persist</code>. The inverse is also true. You can not rely on a
generated identifier being not available after a failed flush
operation.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>The semantics of the persist operation, applied on an entity X, are
as follows:</p>

            

<ul>
    <li class="dash">If X is a new entity, it becomes managed. The entity X will be
entered into the database as a result of the flush operation.</li>
    <li class="dash">If X is a preexisting managed entity, it is ignored by the
persist operation. However, the persist operation is cascaded to
entities referenced by X, if the relationships from X to these
other entities are mapped with cascade=PERSIST or cascade=ALL (see
&quot;<a href="working-with-associations.html#transitive-persistence">Transitive persistence / Cascade Operations</a>&quot;).</li>
    <li class="dash">If X is a removed entity, it becomes managed.</li>
    <li class="dash">If X is a detached entity, an exception will be thrown on
flush.</li>
</ul>

                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>Do not pass detached entities to the persist operation. The persist operation always
considers entities that are not yet known to the <code>EntityManager</code> as new entities
(refer to the <code>STATE_NEW</code> constant inside the <code>UnitOfWork</code>).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="removing-entities">
            <h2 class="section-header ">
    <a href="#removing-entities">
        Removing entities
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>An entity can be removed from persistent storage by passing it to
the <code>EntityManager#remove($entity)</code> method. By applying the
<code>remove</code> operation on some entity, that entity becomes REMOVED,
which means that its persistent state will be deleted once
<code>EntityManager#flush()</code> is invoked.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Just like <code>persist</code>, invoking <code>remove</code> on an entity
does NOT cause an immediate SQL DELETE to be issued on the
database. The entity will be deleted on the next invocation of
<code>EntityManager#flush()</code> that involves that entity. This
means that entities scheduled for removal can still be queried
for and appear in query and collection results. See
the section on <a href="#workingobjects_database_uow_outofsync">Database and UnitOfWork Out-Of-Sync</a>
for more information.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Example:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-1" class="line-number-anchor" /><a href="#line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$em-&gt;remove($user);
$em-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-2" class="line-number-anchor" /><a href="#line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-3" class="line-number-anchor" /><a href="#line-number-367cd3ea0ae1ae8f42c05f2960ff76632d2ce72f-3">3</a></td></tr></table></div></code></pre>
            
    <p>The semantics of the remove operation, applied to an entity X are
as follows:</p>

            

<ul>
    <li class="dash">If X is a new entity, it is ignored by the remove operation.
However, the remove operation is cascaded to entities referenced by
X, if the relationship from X to these other entities is mapped
with cascade=REMOVE or cascade=ALL (see &quot;<a href="working-with-associations.html#transitive-persistence">Transitive persistence / Cascade Operations</a>&quot;).</li>
    <li class="dash">If X is a managed entity, the remove operation causes it to
become removed. The remove operation is cascaded to entities
referenced by X, if the relationships from X to these other
entities is mapped with cascade=REMOVE or cascade=ALL (see
&quot;<a href="working-with-associations.html#transitive-persistence">Transitive persistence / Cascade Operations</a>&quot;).</li>
    <li class="dash">If X is a detached entity, an InvalidArgumentException will be
thrown.</li>
    <li class="dash">If X is a removed entity, it is ignored by the remove operation.</li>
    <li class="dash">A removed entity X will be removed from the database as a result
of the flush operation.</li>
</ul>

            
    <p>After an entity has been removed, its in-memory state is the same as
before the removal, except for generated identifiers.</p>

            
    <p>During the <code>EntityManager#flush()</code> operation, the removed entity
will also be removed from all collections in entities currently
loaded into memory.</p>

            <div class="section" id="join-table-management-when-removing-from-many-to-many-collections">
            <a id="remove_object_many_to_many_join_tables"></a>
            <h3 class="section-header ">
    <a href="#join-table-management-when-removing-from-many-to-many-collections">
        Join-table management when removing from many-to-many collections
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Regarding existing rows in many-to-many join tables that refer to
an entity being removed, the following applies.</p>

            
    <p>When the entity being removed does not declare the many-to-many association
itself (that is, the many-to-many association is unidirectional and
the entity is on the inverse side), the ORM has no reasonable way to
detect associations targeting the entity&#039;s class. Thus, no ORM-level handling
of join-table rows is attempted and database-level constraints apply.
In case of database-level <code>ON DELETE RESTRICT</code> constraints, the
<code>EntityManager#flush()</code> operation may abort and a <code>ConstraintViolationException</code>
may be thrown. No in-memory collections will be modified in this case.
With <code>ON DELETE CASCADE</code>, the RDBMS will take care of removing rows
from join tables.</p>

            
    <p>When the entity being removed is part of bi-directional many-to-many
association, either as the owning or inverse side, the ORM will
delete rows from join tables before removing the entity itself. That means
database-level <code>ON DELETE RESTRICT</code> constraints on join tables are not
effective, since the join table rows are removed first. Removal of join table
rows happens through specialized methods in entity and collection persister
classes and take one query per entity and join table. In case the association
uses a <code>@JoinColumn</code> configuration with <code>onDelete=&quot;CASCADE&quot;</code>, instead
of using a dedicated <code>DELETE</code> query the database-level operation will be
relied upon.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>In case you rely on database-level <code>ON DELETE RESTRICT</code> constraints,
be aware that by making many-to-many associations bidirectional the
assumed protection may be lost.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="performance-of-different-deletion-strategies">
            <h3 class="section-header ">
    <a href="#performance-of-different-deletion-strategies">
        Performance of different deletion strategies
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Deleting an object with all its associated objects can be achieved
in multiple ways with very different performance impacts.</p>

            
    
<ol start="1" type="1">
    <li value="1">If an association is marked as <code>CASCADE=REMOVE</code> Doctrine ORM will
fetch this association. If it&#039;s a Single association it will pass
this entity to <code>EntityManager#remove()</code>. If the association is a
collection, Doctrine will loop over all its elements and pass them to
<code>EntityManager#remove()</code>.
In both cases the cascade remove semantics are applied recursively.
For large object graphs this removal strategy can be very costly.</li>
    <li value="2">Using a DQL <code>DELETE</code> statement allows you to delete multiple
entities of a type with a single command and without hydrating
these entities. This can be very efficient to delete large object
graphs from the database.</li>
    <li value="3">Using foreign key semantics <code>onDelete=&quot;CASCADE&quot;</code> can force the
database to remove all associated objects internally. This strategy
is a bit tricky to get right but can be very powerful and fast. You
should be aware however that using strategy 1 (<code>CASCADE=REMOVE</code>)
completely by-passes any foreign key <code>onDelete=CASCADE</code> option,
because Doctrine will fetch and remove all associated entities
explicitly nevertheless.</li>
</ol>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Calling <code>remove</code> on an entity will remove the object from the identity
map and therefore detach it. Querying the same entity again, for example
via a lazy loaded relation, will return a new object.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
            <div class="section" id="detaching-entities">
            <h2 class="section-header ">
    <a href="#detaching-entities">
        Detaching entities
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>An entity is detached from an EntityManager and thus no longer
managed by invoking the <code>EntityManager#detach($entity)</code> method on
it or by cascading the detach operation to it. Changes made to the
detached entity, if any (including removal of the entity), will not
be synchronized to the database after the entity has been
detached.</p>

            
    <p>Doctrine will not hold on to any references to a detached entity.</p>

            
    <p>Example:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fe72b67844d7168afd7278669564f5ec6973ce8f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fe72b67844d7168afd7278669564f5ec6973ce8f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fe72b67844d7168afd7278669564f5ec6973ce8f-1" class="line-number-anchor" /><a href="#line-number-fe72b67844d7168afd7278669564f5ec6973ce8f-1">1</a></td><td class="code-line" rowspan="2"><span class="hljs-meta">&lt;?php</span>
$em-&gt;detach($entity);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-fe72b67844d7168afd7278669564f5ec6973ce8f-2" class="line-number-anchor" /><a href="#line-number-fe72b67844d7168afd7278669564f5ec6973ce8f-2">2</a></td></tr></table></div></code></pre>
            
    <p>The semantics of the detach operation, applied to an entity X are
as follows:</p>

            

<ul>
    <li class="dash">If X is a managed entity, the detach operation causes it to
become detached. The detach operation is cascaded to entities
referenced by X, if the relationships from X to these other
entities is mapped with cascade=DETACH or cascade=ALL (see
&quot;<a href="working-with-associations.html#transitive-persistence">Transitive persistence / Cascade Operations</a>&quot;). Entities which previously referenced X
will continue to reference X.</li>
    <li class="dash">If X is a new or detached entity, it is ignored by the detach
operation.</li>
    <li class="dash">If X is a removed entity, the detach operation is cascaded to
entities referenced by X, if the relationships from X to these
other entities is mapped with cascade=DETACH or cascade=ALL (see
&quot;<a href="working-with-associations.html#transitive-persistence">Transitive persistence / Cascade Operations</a>&quot;). Entities which previously referenced X
will continue to reference X.</li>
</ul>

            
    <p>There are several situations in which an entity is detached
automatically without invoking the <code>detach</code> method:</p>

            

<ul>
    <li class="dash">When <code>EntityManager#clear()</code> is invoked, all entities that are
currently managed by the EntityManager instance become detached.</li>
    <li class="dash">When serializing an entity. The entity retrieved upon subsequent
unserialization will be detached (This is the case for all entities
that are serialized and stored in some cache).</li>
</ul>

            
    <p>The <code>detach</code> operation is usually not as frequently needed and
used as <code>persist</code> and <code>remove</code>.</p>

    </div>
            <div class="section" id="synchronization-with-the-database">
            <h2 class="section-header ">
    <a href="#synchronization-with-the-database">
        Synchronization with the Database
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The state of persistent entities is synchronized with the database
on flush of an <code>EntityManager</code> which commits the underlying
<code>UnitOfWork</code>. The synchronization involves writing any updates to
persistent entities and their relationships to the database.
Thereby bidirectional relationships are persisted based on the
references held by the owning side of the relationship as explained
in the Association Mapping chapter.</p>

            
    <p>When <code>EntityManager#flush()</code> is called, Doctrine inspects all
managed, new and removed entities and will perform the following
operations.</p>

            <div class="section" id="effects-of-database-and-unitofwork-being-out-of-sync">
            <a id="workingobjects_database_uow_outofsync"></a>
            <h3 class="section-header ">
    <a href="#effects-of-database-and-unitofwork-being-out-of-sync">
        Effects of Database and UnitOfWork being Out-Of-Sync
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>As soon as you begin to change the state of entities, call persist or remove the
contents of the UnitOfWork and the database will drive out of sync. They can
only be synchronized by calling <code>EntityManager#flush()</code>. This section
describes the effects of database and UnitOfWork being out of sync.</p>

            

<ul>
    <li class="dash">Entities that are scheduled for removal can still be queried from the database.
They are returned from DQL and Repository queries and are visible in collections.</li>
    <li class="dash">Entities that are passed to <code>EntityManager#persist</code> do not turn up in query
results.</li>
    <li class="dash">Entities that have changed will not be overwritten with the state from the database.
This is because the identity map will detect the construction of an already existing
entity and assumes its the most up to date version.</li>
</ul>

            
    <p><code>EntityManager#flush()</code> is never called implicitly by Doctrine. You always have to trigger it manually.</p>

    </div>
            <div class="section" id="synchronizing-new-and-managed-entities">
            <h3 class="section-header ">
    <a href="#synchronizing-new-and-managed-entities">
        Synchronizing New and Managed Entities
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The flush operation applies to a managed entity with the following
semantics:</p>

            

<ul>
    <li class="dash">The entity itself is synchronized to the database using a SQL
UPDATE statement, only if at least one persistent field has
changed.</li>
    <li class="dash">No SQL updates are executed if the entity did not change.</li>
</ul>

            
    <p>The flush operation applies to a new entity with the following
semantics:</p>

            

<ul>
    <li class="dash">The entity itself is synchronized to the database using a SQL
INSERT statement.</li>
</ul>

            
    <p>For all (initialized) relationships of the new or managed entity
the following semantics apply to each associated entity X:</p>

            

<ul>
    <li class="dash">If X is new and persist operations are configured to cascade on
the relationship, X will be persisted.</li>
    <li class="dash">If X is new and no persist operations are configured to cascade
on the relationship, an exception will be thrown as this indicates
a programming error.</li>
    <li class="dash">If X is removed and persist operations are configured to cascade
on the relationship, an exception will be thrown as this indicates
a programming error (X would be re-persisted by the cascade).</li>
    <li class="dash">If X is detached and persist operations are configured to
cascade on the relationship, an exception will be thrown (This is
semantically the same as passing X to persist()).</li>
</ul>

    </div>
            <div class="section" id="synchronizing-removed-entities">
            <h3 class="section-header ">
    <a href="#synchronizing-removed-entities">
        Synchronizing Removed Entities
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The flush operation applies to a removed entity by deleting its
persistent state from the database. No cascade options are relevant
for removed entities on flush, the cascade remove option is already
executed during <code>EntityManager#remove($entity)</code>.</p>

    </div>
            <div class="section" id="the-size-of-a-unit-of-work">
            <h3 class="section-header ">
    <a href="#the-size-of-a-unit-of-work">
        The size of a Unit of Work
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The size of a Unit of Work mainly refers to the number of managed
entities at a particular point in time.</p>

    </div>
            <div class="section" id="the-cost-of-flushing">
            <h3 class="section-header ">
    <a href="#the-cost-of-flushing">
        The cost of flushing
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>How costly a flush operation is, mainly depends on two factors:</p>

            

<ul>
    <li class="dash">The size of the EntityManager&#039;s current UnitOfWork.</li>
    <li class="dash">The configured change tracking policies</li>
</ul>

            
    <p>You can get the size of a UnitOfWork as follows:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="307120643e2fdbc784fd30f77dfa4593b5cdcad9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="307120643e2fdbc784fd30f77dfa4593b5cdcad9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-307120643e2fdbc784fd30f77dfa4593b5cdcad9-1" class="line-number-anchor" /><a href="#line-number-307120643e2fdbc784fd30f77dfa4593b5cdcad9-1">1</a></td><td class="code-line" rowspan="2"><span class="hljs-meta">&lt;?php</span>
$uowSize = $em-&gt;getUnitOfWork()-&gt;size();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-307120643e2fdbc784fd30f77dfa4593b5cdcad9-2" class="line-number-anchor" /><a href="#line-number-307120643e2fdbc784fd30f77dfa4593b5cdcad9-2">2</a></td></tr></table></div></code></pre>
            
    <p>The size represents the number of managed entities in the Unit of
Work. This size affects the performance of flush() operations due
to change tracking (see &quot;Change Tracking Policies&quot;) and, of course,
memory consumption, so you may want to check it from time to time
during development.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Do not invoke <code>flush</code> after every change to an entity
or every single invocation of persist/remove/... This is an
anti-pattern and unnecessarily reduces the performance of your
application. Instead, form units of work that operate on your
objects and call <code>flush</code> when you are done. While serving a
single HTTP request there should be usually no need for invoking
<code>flush</code> more than 0-2 times.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="direct-access-to-a-unit-of-work">
            <h3 class="section-header ">
    <a href="#direct-access-to-a-unit-of-work">
        Direct access to a Unit of Work
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can get direct access to the Unit of Work by calling
<code>EntityManager#getUnitOfWork()</code>. This will return the UnitOfWork
instance the EntityManager is currently using.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="930c7de93fdaf7a64744c94f3174584cbf5014a4"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="930c7de93fdaf7a64744c94f3174584cbf5014a4"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-930c7de93fdaf7a64744c94f3174584cbf5014a4-1" class="line-number-anchor" /><a href="#line-number-930c7de93fdaf7a64744c94f3174584cbf5014a4-1">1</a></td><td class="code-line" rowspan="2"><span class="hljs-meta">&lt;?php</span>
$uow = $em-&gt;getUnitOfWork();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-930c7de93fdaf7a64744c94f3174584cbf5014a4-2" class="line-number-anchor" /><a href="#line-number-930c7de93fdaf7a64744c94f3174584cbf5014a4-2">2</a></td></tr></table></div></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Directly manipulating a UnitOfWork is not recommended.
When working directly with the UnitOfWork API, respect methods
marked as INTERNAL by not using them and carefully read the API
documentation.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="entity-state">
            <h3 class="section-header ">
    <a href="#entity-state">
        Entity State
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>As outlined in the architecture overview an entity can be in one of
four possible states: NEW, MANAGED, REMOVED, DETACHED. If you
explicitly need to find out what the current state of an entity is
in the context of a certain <code>EntityManager</code> you can ask the
underlying <code>UnitOfWork</code>:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b74dcee6cab04bbfd841526cb727b82082f67403"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b74dcee6cab04bbfd841526cb727b82082f67403"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-1" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">switch</span> ($em-&gt;getUnitOfWork()-&gt;getEntityState($entity)) {
    <span class="hljs-keyword">case</span> UnitOfWork::STATE_MANAGED:
        ...
    <span class="hljs-keyword">case</span> UnitOfWork::STATE_REMOVED:
        ...
    <span class="hljs-keyword">case</span> UnitOfWork::STATE_DETACHED:
        ...
    <span class="hljs-keyword">case</span> UnitOfWork::STATE_NEW:
        ...
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-2" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-3" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-4" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-5" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-6" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-7" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-8" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-9" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-10" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b74dcee6cab04bbfd841526cb727b82082f67403-11" class="line-number-anchor" /><a href="#line-number-b74dcee6cab04bbfd841526cb727b82082f67403-11">11</a></td></tr></table></div></code></pre>
            
    <p>An entity is in MANAGED state if it is associated with an
<code>EntityManager</code> and it is not REMOVED.</p>

            
    <p>An entity is in REMOVED state after it has been passed to
<code>EntityManager#remove()</code> until the next flush operation of the
same EntityManager. A REMOVED entity is still associated with an
<code>EntityManager</code> until the next flush operation.</p>

            
    <p>An entity is in DETACHED state if it has persistent state and
identity but is currently not associated with an
<code>EntityManager</code>.</p>

            
    <p>An entity is in NEW state if has no persistent state and identity
and is not associated with an <code>EntityManager</code> (for example those
just created via the &quot;new&quot; operator).</p>

    </div>
    </div>
            <div class="section" id="querying">
            <h2 class="section-header ">
    <a href="#querying">
        Querying
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine ORM provides the following ways, in increasing level of
power and flexibility, to query for persistent objects. You should
always start with the simplest one that suits your needs.</p>

            <div class="section" id="by-primary-key">
            <h3 class="section-header ">
    <a href="#by-primary-key">
        By Primary Key
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The most basic way to query for a persistent object is by its
identifier / primary key using the
<code>EntityManager#find($entityName, $id)</code> method. Here is an
example:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ef9d94d149c3d61dcf9dae84c5174b90df7154b2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ef9d94d149c3d61dcf9dae84c5174b90df7154b2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-1" class="line-number-anchor" /><a href="#line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>
$user = $em-&gt;find(<span class="hljs-string">'MyProject\Domain\User'</span>, $id);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-2" class="line-number-anchor" /><a href="#line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-3" class="line-number-anchor" /><a href="#line-number-ef9d94d149c3d61dcf9dae84c5174b90df7154b2-3">3</a></td></tr></table></div></code></pre>
            
    <p>The return value is either the found entity instance or null if no
instance could be found with the given identifier.</p>

            
    <p>Essentially, <code>EntityManager#find()</code> is just a shortcut for the
following:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="99cd6a9b27746ad06a88873fd0f42fd462ee4ace"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="99cd6a9b27746ad06a88873fd0f42fd462ee4ace"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-1" class="line-number-anchor" /><a href="#line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>
$user = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;find($id);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-2" class="line-number-anchor" /><a href="#line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-3" class="line-number-anchor" /><a href="#line-number-99cd6a9b27746ad06a88873fd0f42fd462ee4ace-3">3</a></td></tr></table></div></code></pre>
            
    <p><code>EntityManager#getRepository($entityName)</code> returns a repository
object which provides many ways to retrieve entities of the
specified type. By default, the repository instance is of type
<code>Doctrine\ORM\EntityRepository</code>. You can also use custom
repository classes as shown later.</p>

    </div>
            <div class="section" id="by-simple-conditions">
            <h3 class="section-header ">
    <a href="#by-simple-conditions">
        By Simple Conditions
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>To query for one or more entities based on several conditions that
form a logical conjunction, use the <code>findBy</code> and <code>findOneBy</code>
methods on a repository as follows:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-1" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>

<span class="hljs-comment">// All users that are 20 years old</span>
$users = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'age'</span> =&gt; <span class="hljs-number">20</span>));

<span class="hljs-comment">// All users that are 20 years old and have a surname of 'Miller'</span>
$users = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'age'</span> =&gt; <span class="hljs-number">20</span>, <span class="hljs-string">'surname'</span> =&gt; <span class="hljs-string">'Miller'</span>));

<span class="hljs-comment">// A single user by its nickname</span>
$user = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findOneBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'nickname'</span> =&gt; <span class="hljs-string">'romanb'</span>));</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-2" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-3" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-4" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-5" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-6" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-7" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-8" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-9" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-10" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-11" class="line-number-anchor" /><a href="#line-number-5f3a1b5ddfa1a3fd19bd751c770f6947c38f0cfc-11">11</a></td></tr></table></div></code></pre>
            
    <p>You can also load by owning side associations through the repository:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-1" class="line-number-anchor" /><a href="#line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$number = $em-&gt;find(<span class="hljs-string">'MyProject\Domain\Phonenumber'</span>, <span class="hljs-number">1234</span>);
$user = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findOneBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'phone'</span> =&gt; $number-&gt;getId()));</td></tr>
<tr><td class="line-number noselect"><a name="line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-2" class="line-number-anchor" /><a href="#line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-3" class="line-number-anchor" /><a href="#line-number-e9ba524d8a6cca67fc311b1c43ccc5ea5a9d38d5-3">3</a></td></tr></table></div></code></pre>
            
    <p>The <code>EntityRepository#findBy()</code> method additionally accepts orderings, limit and offset as second to fourth parameters:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1e7324516c35b4ab92f682bc2f367f4e36d9bf8f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1e7324516c35b4ab92f682bc2f367f4e36d9bf8f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1e7324516c35b4ab92f682bc2f367f4e36d9bf8f-1" class="line-number-anchor" /><a href="#line-number-1e7324516c35b4ab92f682bc2f367f4e36d9bf8f-1">1</a></td><td class="code-line" rowspan="2"><span class="hljs-meta">&lt;?php</span>
$tenUsers = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'age'</span> =&gt; <span class="hljs-number">20</span>), <span class="hljs-keyword">array</span>(<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'ASC'</span>), <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e7324516c35b4ab92f682bc2f367f4e36d9bf8f-2" class="line-number-anchor" /><a href="#line-number-1e7324516c35b4ab92f682bc2f367f4e36d9bf8f-2">2</a></td></tr></table></div></code></pre>
            
    <p>If you pass an array of values Doctrine will convert the query into a WHERE field IN (..) query automatically:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="8e2c763e604ae682aa98c9b4e650515a57cb1da9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="8e2c763e604ae682aa98c9b4e650515a57cb1da9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-1" class="line-number-anchor" /><a href="#line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
$users = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'age'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>)));
<span class="hljs-comment">// translates roughly to: SELECT * FROM users WHERE age IN (20, 30, 40)</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-2" class="line-number-anchor" /><a href="#line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-3" class="line-number-anchor" /><a href="#line-number-8e2c763e604ae682aa98c9b4e650515a57cb1da9-3">3</a></td></tr></table></div></code></pre>
            
    <p>An EntityRepository also provides a mechanism for more concise
calls through its use of <code>__call</code>. Thus, the following two
examples are equivalent:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1e418c276745c36c59ce4a14ed190b24968b2578"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1e418c276745c36c59ce4a14ed190b24968b2578"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-1" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// A single user by its nickname</span>
$user = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findOneBy(<span class="hljs-keyword">array</span>(<span class="hljs-string">'nickname'</span> =&gt; <span class="hljs-string">'romanb'</span>));

<span class="hljs-comment">// A single user by its nickname (__call magic)</span>
$user = $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;findOneByNickname(<span class="hljs-string">'romanb'</span>);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-2" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-3" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-4" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-5" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e418c276745c36c59ce4a14ed190b24968b2578-6" class="line-number-anchor" /><a href="#line-number-1e418c276745c36c59ce4a14ed190b24968b2578-6">6</a></td></tr></table></div></code></pre>
            
    <p>Additionally, you can just count the result of the provided conditions when you don&#039;t really need the data:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="cd0c0b99f918c8672ec7dae0366c4c207608d9f2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="cd0c0b99f918c8672ec7dae0366c4c207608d9f2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-1" class="line-number-anchor" /><a href="#line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-1">1</a></td><td class="code-line" rowspan="3"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// Check there is no user with nickname</span>
$availableNickname = <span class="hljs-number">0</span> === $em-&gt;getRepository(<span class="hljs-string">'MyProject\Domain\User'</span>)-&gt;count([<span class="hljs-string">'nickname'</span> =&gt; <span class="hljs-string">'nonexistent'</span>]);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-2" class="line-number-anchor" /><a href="#line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-3" class="line-number-anchor" /><a href="#line-number-cd0c0b99f918c8672ec7dae0366c4c207608d9f2-3">3</a></td></tr></table></div></code></pre>
    </div>
            <div class="section" id="by-criteria">
            <h3 class="section-header ">
    <a href="#by-criteria">
        By Criteria
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The Repository implement the <code>Doctrine\Common\Collections\Selectable</code>
interface. That means you can build <code>Doctrine\Common\Collections\Criteria</code>
and pass them to the <code>matching($criteria)</code> method.</p>

            
    <p>See section <code>Filtering collections</code> of chapter <a href="working-with-associations.html">Working with Associations</a></p>

    </div>
            <div class="section" id="by-eager-loading">
            <h3 class="section-header ">
    <a href="#by-eager-loading">
        By Eager Loading
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Whenever you query for an entity that has persistent associations
and these associations are mapped as EAGER, they will automatically
be loaded together with the entity being queried and is thus
immediately available to your application.</p>

            
    <p>Eager Loading can also be configured at runtime through
<code>AbstractQuery::setFetchMode</code> in DQL or Native Queries.</p>

            
    <p>Eager loading for many-to-one and one-to-one associations is using either a
LEFT JOIN or a second query for fetching the related entity eagerly.</p>

            
    <p>Eager loading for many-to-one associations uses a second query to load
the collections for several entities at the same time.</p>

            
    <p>When many-to-many, one-to-one or one-to-many associations are eagerly loaded,
then the global batch size configuration is used to avoid IN(?) queries with
too many arguments. The default batch size is 100 and can be changed with
<code>Configuration::setEagerFetchBatchSize()</code>.</p>

            
    <p>For eagerly loaded Many-To-Many associations one query has to be made for each
collection.</p>

    </div>
            <div class="section" id="by-lazy-loading">
            <h3 class="section-header ">
    <a href="#by-lazy-loading">
        By Lazy Loading
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Whenever you have a managed entity instance at hand, you can
traverse and use any associations of that entity that are
configured LAZY as if they were in-memory already. Doctrine will
automatically load the associated objects on demand through the
concept of lazy-loading.</p>

    </div>
            <div class="section" id="by-dql">
            <h3 class="section-header ">
    <a href="#by-dql">
        By DQL
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The most powerful and flexible method to query for persistent
objects is the Doctrine Query Language, an object query language.
DQL enables you to query for persistent objects in the language of
objects. DQL understands classes, fields, inheritance and
associations. DQL is syntactically very similar to the familiar SQL
but <em>it is not SQL</em>.</p>

            
    <p>A DQL query is represented by an instance of the
<code>Doctrine\ORM\Query</code> class. You create a query using
<code>EntityManager#createQuery($dql)</code>. Here is a simple example:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="bcd5091cf060ac2ba675edb2846c5c98c69aed97"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="bcd5091cf060ac2ba675edb2846c5c98c69aed97"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-1" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>

<span class="hljs-comment">// All users with an age between 20 and 30 (inclusive).</span>
$q = $em-&gt;createQuery(<span class="hljs-string">"select u from MyDomain\Model\User u where u.age &gt;= 20 and u.age &lt;= 30"</span>);
$users = $q-&gt;getResult();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-2" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-3" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-4" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-5" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-6" class="line-number-anchor" /><a href="#line-number-bcd5091cf060ac2ba675edb2846c5c98c69aed97-6">6</a></td></tr></table></div></code></pre>
            
    <p>Note that this query contains no knowledge about the relational
schema, only about the object model. DQL supports positional as
well as named parameters, many functions, (fetch) joins,
aggregates, subqueries and much more. Detailed information about
DQL and its syntax as well as the Doctrine class can be found in
<a href="dql-doctrine-query-language.html">the dedicated chapter</a>.
For programmatically building up queries based on conditions that
are only known at runtime, Doctrine provides the special
<code>Doctrine\ORM\QueryBuilder</code> class. While this a powerful tool,
it also brings more complexity to your code compared to plain DQL,
so you should only use it when you need it. More information on
constructing queries with a QueryBuilder can be found
<a href="query-builder.html">in Query Builder chapter</a>.</p>

    </div>
            <div class="section" id="by-native-queries">
            <h3 class="section-header ">
    <a href="#by-native-queries">
        By Native Queries
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>As an alternative to DQL or as a fallback for special SQL
statements native queries can be used. Native queries are built by
using a hand-crafted SQL query and a ResultSetMapping that
describes how the SQL result set should be transformed by Doctrine.
More information about native queries can be found in
<a href="native-sql.html">the dedicated chapter</a>.</p>

    </div>
            <div class="section" id="custom-repositories">
            <h3 class="section-header ">
    <a href="#custom-repositories">
        Custom Repositories
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>By default the EntityManager returns a default implementation of
<code>Doctrine\ORM\EntityRepository</code> when you call
<code>EntityManager#getRepository($entityClass)</code>. You can overwrite
this behaviour by specifying the class name of your own Entity
Repository in the Attribute or XML metadata. In large
applications that require lots of specialized DQL queries using a
custom repository is one recommended way of grouping these queries
in a central location.</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b01f2d7fa868c986d5f886e73bca6b35e976a942"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b01f2d7fa868c986d5f886e73bca6b35e976a942"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-1" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-1">1</a></td><td class="code-line" rowspan="22"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyDomain</span>\<span class="hljs-title">Model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">MyDomain</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">UserRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">as</span> <span class="hljs-title">ORM</span>;

<span class="hljs-comment">#[ORM\Entity(repositoryClass: UserRepository::class)]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{

}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">EntityRepository</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> Collection&lt;User&gt; */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllAdminUsers</span><span class="hljs-params">()</span>: <span class="hljs-title">Collection</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_em-&gt;createQuery(<span class="hljs-string">'SELECT u FROM MyDomain\Model\User u WHERE u.status = "admin"'</span>)
                         -&gt;getResult();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-2" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-3" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-4" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-5" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-6" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-7" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-8" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-9" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-10" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-11" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-12" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-13" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-14" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-15" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-16" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-17" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-18" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-19" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-20" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-21" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-22" class="line-number-anchor" /><a href="#line-number-b01f2d7fa868c986d5f886e73bca6b35e976a942-22">22</a></td></tr></table></div></code></pre>
            
    <p>You can access your repository now by calling:</p>

            <pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="87b2f5745476bebfb8e4874924ddc9eb5ca714da"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="87b2f5745476bebfb8e4874924ddc9eb5ca714da"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-1" class="line-number-anchor" /><a href="#line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-1">1</a></td><td class="code-line" rowspan="4"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">// $em instanceof EntityManager</span>

$admins = $em-&gt;getRepository(<span class="hljs-string">'MyDomain\Model\User'</span>)-&gt;getAllAdminUsers();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-2" class="line-number-anchor" /><a href="#line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-3" class="line-number-anchor" /><a href="#line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-4" class="line-number-anchor" /><a href="#line-number-87b2f5745476bebfb8e4874924ddc9eb5ca714da-4">4</a></td></tr></table></div></code></pre>
    </div>
    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'orm';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search ORM 4.0'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
