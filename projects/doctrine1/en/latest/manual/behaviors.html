<!DOCTYPE html>
<html>
    <head>
        <title>Behaviors - Doctrine Doctrine1 ORM (Doctrine1)</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine1 ORM Documentation: Behaviors ">

        <meta name="keywords" content="php,doctrine1,orm,database,documentation,behaviors">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/behaviors.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?7cb9d0"
                        integrity="sha384-nxGUJXUxior08a7B+7RLYZmO9f7nZClX2cu7nPRfdMT2k0taLFXD69g0WWzMyAIG"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/behaviors.html" />
        <meta property="og:title" content="Behaviors - Doctrine Doctrine1 ORM (Doctrine1)" />
        <meta property="og:description" content="Doctrine Doctrine1 ORM Documentation: Behaviors " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Behaviors",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine1/edit/master/docs/en/manual/behaviors.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="getting-started-html-getting-started" class="toc-item"><a href="getting-started.html#getting-started">Getting Started</a><ul><li id="getting-started-html-checking-requirements" class="toc-item"><a href="getting-started.html#checking-requirements">Checking Requirements</a></li><li id="getting-started-html-installing" class="toc-item"><a href="getting-started.html#installing">Installing</a><ul><li id="getting-started-html-sandbox" class="toc-item"><a href="getting-started.html#sandbox">Sandbox</a></li><li id="getting-started-html-svn" class="toc-item"><a href="getting-started.html#svn">SVN</a></li><li id="getting-started-html-svn-externals" class="toc-item"><a href="getting-started.html#svn-externals">SVN Externals</a></li><li id="getting-started-html-pear-installer" class="toc-item"><a href="getting-started.html#pear-installer">PEAR Installer</a></li><li id="getting-started-html-download-pear-package" class="toc-item"><a href="getting-started.html#download-pear-package">Download Pear Package</a></li></ul></li><li id="getting-started-html-implementing" class="toc-item"><a href="getting-started.html#implementing">Implementing</a><ul><li id="getting-started-html-including-doctrine-libraries" class="toc-item"><a href="getting-started.html#including-doctrine-libraries">Including Doctrine Libraries</a></li><li id="getting-started-html-require-doctrine-base-class" class="toc-item"><a href="getting-started.html#require-doctrine-base-class">Require Doctrine Base Class</a></li><li id="getting-started-html-register-autoloader" class="toc-item"><a href="getting-started.html#register-autoloader">Register Autoloader</a></li><li id="getting-started-html-bootstrap-file" class="toc-item"><a href="getting-started.html#bootstrap-file">Bootstrap File</a></li><li id="getting-started-html-test-script" class="toc-item"><a href="getting-started.html#test-script">Test Script</a></li></ul></li><li id="getting-started-html-conclusion" class="toc-item"><a href="getting-started.html#conclusion">Conclusion</a></li></ul></li><li id="about-sensio-html-about-sensio" class="toc-item"><a href="about-sensio.html#about-sensio">About Sensio</a></li><li id="database-abstraction-layer-html-database-abstraction-layer" class="toc-item"><a href="database-abstraction-layer.html#database-abstraction-layer">Database Abstraction Layer</a><ul><li id="database-abstraction-layer-html-export" class="toc-item"><a href="database-abstraction-layer.html#export">Export</a><ul><li id="database-abstraction-layer-html-introduction" class="toc-item"><a href="database-abstraction-layer.html#introduction">Introduction</a></li><li id="database-abstraction-layer-html-creating-databases" class="toc-item"><a href="database-abstraction-layer.html#creating-databases">Creating Databases</a></li><li id="database-abstraction-layer-html-creating-tables" class="toc-item"><a href="database-abstraction-layer.html#creating-tables">Creating Tables</a></li><li id="database-abstraction-layer-html-creating-foreign-keys" class="toc-item"><a href="database-abstraction-layer.html#creating-foreign-keys">Creating Foreign Keys</a></li><li id="database-abstraction-layer-html-altering-table" class="toc-item"><a href="database-abstraction-layer.html#altering-table">Altering table</a></li><li id="database-abstraction-layer-html-creating-indexes" class="toc-item"><a href="database-abstraction-layer.html#creating-indexes">Creating Indexes</a></li><li id="database-abstraction-layer-html-deleting-database-elements" class="toc-item"><a href="database-abstraction-layer.html#deleting-database-elements">Deleting database elements</a></li></ul></li><li id="database-abstraction-layer-html-import" class="toc-item"><a href="database-abstraction-layer.html#import">Import</a><ul><li id="database-abstraction-layer-html-introduction" class="toc-item"><a href="database-abstraction-layer.html#introduction">Introduction</a></li><li id="database-abstraction-layer-html-listing-databases" class="toc-item"><a href="database-abstraction-layer.html#listing-databases">Listing Databases</a></li><li id="database-abstraction-layer-html-listing-sequences" class="toc-item"><a href="database-abstraction-layer.html#listing-sequences">Listing Sequences</a></li><li id="database-abstraction-layer-html-listing-constraints" class="toc-item"><a href="database-abstraction-layer.html#listing-constraints">Listing Constraints</a></li><li id="database-abstraction-layer-html-listing-table-columns" class="toc-item"><a href="database-abstraction-layer.html#listing-table-columns">Listing Table Columns</a></li><li id="database-abstraction-layer-html-listing-table-indexes" class="toc-item"><a href="database-abstraction-layer.html#listing-table-indexes">Listing Table Indexes</a></li><li id="database-abstraction-layer-html-listing-tables" class="toc-item"><a href="database-abstraction-layer.html#listing-tables">Listing Tables</a></li><li id="database-abstraction-layer-html-listing-views" class="toc-item"><a href="database-abstraction-layer.html#listing-views">Listing Views</a></li></ul></li><li id="database-abstraction-layer-html-datadict" class="toc-item"><a href="database-abstraction-layer.html#datadict">DataDict</a><ul><li id="database-abstraction-layer-html-introduction" class="toc-item"><a href="database-abstraction-layer.html#introduction">Introduction</a></li><li id="database-abstraction-layer-html-getting-portable-declaration" class="toc-item"><a href="database-abstraction-layer.html#getting-portable-declaration">Getting portable declaration</a></li><li id="database-abstraction-layer-html-getting-native-declaration" class="toc-item"><a href="database-abstraction-layer.html#getting-native-declaration">Getting Native Declaration</a></li></ul></li><li id="database-abstraction-layer-html-drivers" class="toc-item"><a href="database-abstraction-layer.html#drivers">Drivers</a><ul><li id="database-abstraction-layer-html-mysql" class="toc-item"><a href="database-abstraction-layer.html#mysql">Mysql</a></li></ul></li><li id="database-abstraction-layer-html-conclusion" class="toc-item"><a href="database-abstraction-layer.html#conclusion">Conclusion</a></li></ul></li><li id="about-author-html-about-the-author" class="toc-item"><a href="about-author.html#about-the-author">About the Author</a></li><li id="extensions-html-extensions" class="toc-item"><a href="extensions.html#extensions">Extensions</a></li><li id="technology-html-technology" class="toc-item"><a href="technology.html#technology">Technology</a><ul><li id="technology-html-introduction" class="toc-item"><a href="technology.html#introduction">Introduction</a></li><li id="technology-html-architecture" class="toc-item"><a href="technology.html#architecture">Architecture</a><ul><li id="technology-html-doctrine-core" class="toc-item"><a href="technology.html#doctrine-core">Doctrine CORE</a></li><li id="technology-html-doctrine-dbal" class="toc-item"><a href="technology.html#doctrine-dbal">Doctrine DBAL</a></li><li id="technology-html-doctrine-orm" class="toc-item"><a href="technology.html#doctrine-orm">Doctrine ORM</a></li></ul></li><li id="technology-html-design-patterns-used" class="toc-item"><a href="technology.html#design-patterns-used">Design Patterns Used</a></li><li id="technology-html-speed" class="toc-item"><a href="technology.html#speed">Speed</a></li><li id="technology-html-conclusion" class="toc-item"><a href="technology.html#conclusion">Conclusion</a></li></ul></li><li id="utilities-html-utilities" class="toc-item"><a href="utilities.html#utilities">Utilities</a><ul><li id="utilities-html-pagination" class="toc-item"><a href="utilities.html#pagination">Pagination</a><ul><li id="utilities-html-introduction" class="toc-item"><a href="utilities.html#introduction">Introduction</a></li><li id="utilities-html-working-with-pager" class="toc-item"><a href="utilities.html#working-with-pager">Working with Pager</a></li><li id="utilities-html-controlling-range-styles" class="toc-item"><a href="utilities.html#controlling-range-styles">Controlling Range Styles</a></li><li id="utilities-html-advanced-layouts-with-pager" class="toc-item"><a href="utilities.html#advanced-layouts-with-pager">Advanced layouts with pager</a></li><li id="utilities-html-customizing-pager-layout" class="toc-item"><a href="utilities.html#customizing-pager-layout">Customizing pager layout</a></li></ul></li><li id="utilities-html-facade" class="toc-item"><a href="utilities.html#facade">Facade</a><ul><li id="utilities-html-creating-dropping-databases" class="toc-item"><a href="utilities.html#creating-dropping-databases">Creating & Dropping Databases</a></li><li id="utilities-html-convenience-methods" class="toc-item"><a href="utilities.html#convenience-methods">Convenience Methods</a></li><li id="utilities-html-tasks" class="toc-item"><a href="utilities.html#tasks">Tasks</a></li></ul></li><li id="utilities-html-command-line-interface" class="toc-item"><a href="utilities.html#command-line-interface">Command Line Interface</a><ul><li id="utilities-html-introduction-the-doctrine-cli-is-a-collection-of-tasks-that-help-you" class="toc-item"><a href="utilities.html#introduction-the-doctrine-cli-is-a-collection-of-tasks-that-help-you">Introduction The Doctrine Cli is a collection of tasks that help you</a></li><li id="utilities-html-tasks" class="toc-item"><a href="utilities.html#tasks">Tasks</a></li><li id="utilities-html-usage" class="toc-item"><a href="utilities.html#usage">Usage</a></li></ul></li><li id="utilities-html-sandbox" class="toc-item"><a href="utilities.html#sandbox">Sandbox</a><ul><li id="utilities-html-installation" class="toc-item"><a href="utilities.html#installation">Installation</a></li></ul></li><li id="utilities-html-conclusion" class="toc-item"><a href="utilities.html#conclusion">Conclusion</a></li></ul></li><li id="imprint-html-imprint" class="toc-item"><a href="imprint.html#imprint">Imprint</a></li><li id="caching-html-caching" class="toc-item"><a href="caching.html#caching">Caching</a><ul><li id="caching-html-introduction" class="toc-item"><a href="caching.html#introduction">Introduction</a></li><li id="caching-html-drivers" class="toc-item"><a href="caching.html#drivers">Drivers</a><ul><li id="caching-html-memcache" class="toc-item"><a href="caching.html#memcache">Memcache</a></li><li id="caching-html-apc" class="toc-item"><a href="caching.html#apc">APC</a></li><li id="caching-html-db" class="toc-item"><a href="caching.html#db">Db</a></li></ul></li><li id="caching-html-query-cache-result-cache" class="toc-item"><a href="caching.html#query-cache-result-cache">Query Cache & Result Cache</a><ul><li id="caching-html-introduction" class="toc-item"><a href="caching.html#introduction">Introduction</a></li><li id="caching-html-query-cache" class="toc-item"><a href="caching.html#query-cache">Query Cache</a></li><li id="caching-html-result-cache" class="toc-item"><a href="caching.html#result-cache">Result Cache</a></li></ul></li><li id="caching-html-conclusion" class="toc-item"><a href="caching.html#conclusion">Conclusion</a></li></ul></li><li id="connections-html-connections" class="toc-item"><a href="connections.html#connections">Connections</a><ul><li id="connections-html-introduction" class="toc-item"><a href="connections.html#introduction">Introduction</a></li><li id="connections-html-opening-connections" class="toc-item"><a href="connections.html#opening-connections">Opening Connections</a></li><li id="connections-html-retrieve-connections" class="toc-item"><a href="connections.html#retrieve-connections">Retrieve Connections</a></li><li id="connections-html-current-connection" class="toc-item"><a href="connections.html#current-connection">Current Connection</a></li><li id="connections-html-change-current-connection" class="toc-item"><a href="connections.html#change-current-connection">Change Current Connection</a></li><li id="connections-html-iterating-connections" class="toc-item"><a href="connections.html#iterating-connections">Iterating Connections</a></li><li id="connections-html-get-connection-name" class="toc-item"><a href="connections.html#get-connection-name">Get Connection Name</a></li><li id="connections-html-close-connection" class="toc-item"><a href="connections.html#close-connection">Close Connection</a></li><li id="connections-html-get-all-connections" class="toc-item"><a href="connections.html#get-all-connections">Get All Connections</a></li><li id="connections-html-count-connections" class="toc-item"><a href="connections.html#count-connections">Count Connections</a></li><li id="connections-html-creating-and-dropping-database" class="toc-item"><a href="connections.html#creating-and-dropping-database">Creating and Dropping Database</a><ul><li id="connections-html-for-a-specific-connection" class="toc-item"><a href="connections.html#for-a-specific-connection">For a Specific Connection</a></li></ul></li><li id="connections-html-writing-custom-connections" class="toc-item"><a href="connections.html#writing-custom-connections">Writing Custom Connections</a></li><li id="connections-html-conclusion" class="toc-item"><a href="connections.html#conclusion">Conclusion</a></li></ul></li><li id="data-validation-html-data-validation" class="toc-item"><a href="data-validation.html#data-validation">Data Validation</a><ul><li id="data-validation-html-introduction" class="toc-item"><a href="data-validation.html#introduction">Introduction</a></li><li id="data-validation-html-examples" class="toc-item"><a href="data-validation.html#examples">Examples</a></li><li id="data-validation-html-conclusion" class="toc-item"><a href="data-validation.html#conclusion">Conclusion</a></li></ul></li><li id="introduction-to-connections-html-introduction-to-connections" class="toc-item"><a href="introduction-to-connections.html#introduction-to-connections">Introduction to Connections</a><ul><li id="introduction-to-connections-html-dsn-the-data-source-name" class="toc-item"><a href="introduction-to-connections.html#dsn-the-data-source-name">DSN, the Data Source Name</a><ul><li id="introduction-to-connections-html-main-parts" class="toc-item"><a href="introduction-to-connections.html#main-parts">Main Parts</a></li><li id="introduction-to-connections-html-providing-the-dsn" class="toc-item"><a href="introduction-to-connections.html#providing-the-dsn">Providing the DSN</a></li><li id="introduction-to-connections-html-examples" class="toc-item"><a href="introduction-to-connections.html#examples">Examples</a></li></ul></li><li id="introduction-to-connections-html-opening-new-connections" class="toc-item"><a href="introduction-to-connections.html#opening-new-connections">Opening New Connections</a></li><li id="introduction-to-connections-html-lazy-database-connecting" class="toc-item"><a href="introduction-to-connections.html#lazy-database-connecting">Lazy Database Connecting</a></li><li id="introduction-to-connections-html-testing-your-connection" class="toc-item"><a href="introduction-to-connections.html#testing-your-connection">Testing your Connection</a></li><li id="introduction-to-connections-html-conclusion" class="toc-item"><a href="introduction-to-connections.html#conclusion">Conclusion</a></li></ul></li><li id="real-world-examples-html-real-world-examples" class="toc-item"><a href="real-world-examples.html#real-world-examples">Real World Examples</a><ul><li id="real-world-examples-html-user-management-system" class="toc-item"><a href="real-world-examples.html#user-management-system">User Management System</a></li><li id="real-world-examples-html-forum-application" class="toc-item"><a href="real-world-examples.html#forum-application">Forum Application</a></li><li id="real-world-examples-html-conclusion" class="toc-item"><a href="real-world-examples.html#conclusion">Conclusion</a></li></ul></li><li id="behaviors-html-behaviors" class="toc-item"><a href="behaviors.html#behaviors">Behaviors</a><ul><li id="behaviors-html-introduction" class="toc-item"><a href="behaviors.html#introduction">Introduction</a></li><li id="behaviors-html-simple-templates" class="toc-item"><a href="behaviors.html#simple-templates">Simple Templates</a></li><li id="behaviors-html-templates-with-relations" class="toc-item"><a href="behaviors.html#templates-with-relations">Templates with Relations</a></li><li id="behaviors-html-delegate-methods" class="toc-item"><a href="behaviors.html#delegate-methods">Delegate Methods</a></li><li id="behaviors-html-creating-behaviors" class="toc-item"><a href="behaviors.html#creating-behaviors">Creating Behaviors</a></li><li id="behaviors-html-core-behaviors" class="toc-item"><a href="behaviors.html#core-behaviors">Core Behaviors</a><ul><li id="behaviors-html-introduction" class="toc-item"><a href="behaviors.html#introduction">Introduction</a></li><li id="behaviors-html-versionable" class="toc-item"><a href="behaviors.html#versionable">Versionable</a></li><li id="behaviors-html-timestampable" class="toc-item"><a href="behaviors.html#timestampable">Timestampable</a></li><li id="behaviors-html-sluggable" class="toc-item"><a href="behaviors.html#sluggable">Sluggable</a></li><li id="behaviors-html-i18n" class="toc-item"><a href="behaviors.html#i18n">I18n</a></li><li id="behaviors-html-nestedset" class="toc-item"><a href="behaviors.html#nestedset">NestedSet</a></li><li id="behaviors-html-searchable" class="toc-item"><a href="behaviors.html#searchable">Searchable</a></li><li id="behaviors-html-geographical" class="toc-item"><a href="behaviors.html#geographical">Geographical</a></li><li id="behaviors-html-softdelete" class="toc-item"><a href="behaviors.html#softdelete">SoftDelete</a></li></ul></li><li id="behaviors-html-nesting-behaviors" class="toc-item"><a href="behaviors.html#nesting-behaviors">Nesting Behaviors</a></li><li id="behaviors-html-generating-files" class="toc-item"><a href="behaviors.html#generating-files">Generating Files</a></li><li id="behaviors-html-querying-generated-classes" class="toc-item"><a href="behaviors.html#querying-generated-classes">Querying Generated Classes</a></li><li id="behaviors-html-conclusion" class="toc-item"><a href="behaviors.html#conclusion">Conclusion</a></li></ul></li><li id="introduction-to-models-html-introduction-to-models" class="toc-item"><a href="introduction-to-models.html#introduction-to-models">Introduction to Models</a><ul><li id="introduction-to-models-html-introduction" class="toc-item"><a href="introduction-to-models.html#introduction">Introduction</a></li><li id="introduction-to-models-html-generating-models" class="toc-item"><a href="introduction-to-models.html#generating-models">Generating Models</a><ul><li id="introduction-to-models-html-existing-databases" class="toc-item"><a href="introduction-to-models.html#existing-databases">Existing Databases</a></li><li id="introduction-to-models-html-schema-files" class="toc-item"><a href="introduction-to-models.html#schema-files">Schema Files</a></li></ul></li><li id="introduction-to-models-html-manually-writing-models" class="toc-item"><a href="introduction-to-models.html#manually-writing-models">Manually Writing Models</a></li><li id="introduction-to-models-html-autoloading-models" class="toc-item"><a href="introduction-to-models.html#autoloading-models">Autoloading Models</a><ul><li id="introduction-to-models-html-conservative" class="toc-item"><a href="introduction-to-models.html#conservative">Conservative</a></li><li id="introduction-to-models-html-aggressive" class="toc-item"><a href="introduction-to-models.html#aggressive">Aggressive</a></li></ul></li><li id="introduction-to-models-html-conclusion" class="toc-item"><a href="introduction-to-models.html#conclusion">Conclusion</a></li></ul></li><li id="unit-testing-html-unit-testing" class="toc-item"><a href="unit-testing.html#unit-testing">Unit Testing</a><ul><li id="unit-testing-html-running-tests" class="toc-item"><a href="unit-testing.html#running-tests">Running tests</a><ul><li id="unit-testing-html-cli" class="toc-item"><a href="unit-testing.html#cli">CLI</a></li><li id="unit-testing-html-browser" class="toc-item"><a href="unit-testing.html#browser">Browser</a></li></ul></li><li id="unit-testing-html-writing-tests" class="toc-item"><a href="unit-testing.html#writing-tests">Writing Tests</a><ul><li id="unit-testing-html-ticket-tests" class="toc-item"><a href="unit-testing.html#ticket-tests">Ticket Tests</a></li><li id="unit-testing-html-methods-for-testing" class="toc-item"><a href="unit-testing.html#methods-for-testing">Methods for testing</a></li><li id="unit-testing-html-mock-drivers" class="toc-item"><a href="unit-testing.html#mock-drivers">Mock Drivers</a></li><li id="unit-testing-html-test-class-guidelines" class="toc-item"><a href="unit-testing.html#test-class-guidelines">Test Class Guidelines</a></li><li id="unit-testing-html-test-method-guidelines" class="toc-item"><a href="unit-testing.html#test-method-guidelines">Test Method Guidelines</a></li></ul></li><li id="unit-testing-html-conclusion" class="toc-item"><a href="unit-testing.html#conclusion">Conclusion</a></li></ul></li><li id="license-html-attribution-share-alike-3-0-unported-license" class="toc-item"><a href="license.html#attribution-share-alike-3-0-unported-license">Attribution-Share Alike 3.0 Unported License</a></li><li id="transactions-html-transactions" class="toc-item"><a href="transactions.html#transactions">Transactions</a><ul><li id="transactions-html-introduction" class="toc-item"><a href="transactions.html#introduction">Introduction</a></li><li id="transactions-html-nesting" class="toc-item"><a href="transactions.html#nesting">Nesting</a></li><li id="transactions-html-savepoints" class="toc-item"><a href="transactions.html#savepoints">Savepoints</a></li><li id="transactions-html-isolation-levels" class="toc-item"><a href="transactions.html#isolation-levels">Isolation Levels</a></li><li id="transactions-html-conclusion" class="toc-item"><a href="transactions.html#conclusion">Conclusion</a></li></ul></li><li id="inheritance-html-inheritance" class="toc-item"><a href="inheritance.html#inheritance">Inheritance</a><ul><li id="inheritance-html-simple" class="toc-item"><a href="inheritance.html#simple">Simple</a></li><li id="inheritance-html-concrete" class="toc-item"><a href="inheritance.html#concrete">Concrete</a></li><li id="inheritance-html-column-aggregation" class="toc-item"><a href="inheritance.html#column-aggregation">Column Aggregation</a></li><li id="inheritance-html-conclusion" class="toc-item"><a href="inheritance.html#conclusion">Conclusion</a></li></ul></li><li id="migrations-html-migrations" class="toc-item"><a href="migrations.html#migrations">Migrations</a><ul><li id="migrations-html-performing-migrations" class="toc-item"><a href="migrations.html#performing-migrations">Performing Migrations</a></li><li id="migrations-html-implement" class="toc-item"><a href="migrations.html#implement">Implement</a></li><li id="migrations-html-writing-migration-classes" class="toc-item"><a href="migrations.html#writing-migration-classes">Writing Migration Classes</a></li><li id="migrations-html-conclusion" class="toc-item"><a href="migrations.html#conclusion">Conclusion</a></li></ul></li><li id="event-listeners-html-event-listeners" class="toc-item"><a href="event-listeners.html#event-listeners">Event Listeners</a><ul><li id="event-listeners-html-introduction" class="toc-item"><a href="event-listeners.html#introduction">Introduction</a></li><li id="event-listeners-html-connection-listeners" class="toc-item"><a href="event-listeners.html#connection-listeners">Connection Listeners</a><ul><li id="event-listeners-html-creating-a-new-listener" class="toc-item"><a href="event-listeners.html#creating-a-new-listener">Creating a New Listener</a></li><li id="event-listeners-html-attaching-listeners" class="toc-item"><a href="event-listeners.html#attaching-listeners">Attaching listeners</a></li><li id="event-listeners-html-pre-and-post-connect" class="toc-item"><a href="event-listeners.html#pre-and-post-connect">Pre and Post Connect</a></li><li id="event-listeners-html-transaction-listeners" class="toc-item"><a href="event-listeners.html#transaction-listeners">Transaction Listeners</a></li><li id="event-listeners-html-query-execution-listeners" class="toc-item"><a href="event-listeners.html#query-execution-listeners">Query Execution Listeners</a></li></ul></li><li id="event-listeners-html-hydration-listeners" class="toc-item"><a href="event-listeners.html#hydration-listeners">Hydration Listeners</a></li><li id="event-listeners-html-record-listeners" class="toc-item"><a href="event-listeners.html#record-listeners">Record Listeners</a></li><li id="event-listeners-html-record-hooks" class="toc-item"><a href="event-listeners.html#record-hooks">Record Hooks</a></li><li id="event-listeners-html-dql-hooks" class="toc-item"><a href="event-listeners.html#dql-hooks">DQL Hooks</a></li><li id="event-listeners-html-chaining-listeners" class="toc-item"><a href="event-listeners.html#chaining-listeners">Chaining Listeners</a></li><li id="event-listeners-html-the-event-object" class="toc-item"><a href="event-listeners.html#the-event-object">The Event object</a><ul><li id="event-listeners-html-getting-the-invoker" class="toc-item"><a href="event-listeners.html#getting-the-invoker">Getting the Invoker</a></li><li id="event-listeners-html-event-codes" class="toc-item"><a href="event-listeners.html#event-codes">Event Codes</a></li><li id="event-listeners-html-getting-the-invoker" class="toc-item"><a href="event-listeners.html#getting-the-invoker">Getting the Invoker</a></li><li id="event-listeners-html-skip-next-operation" class="toc-item"><a href="event-listeners.html#skip-next-operation">Skip Next Operation</a></li><li id="event-listeners-html-skip-next-listener" class="toc-item"><a href="event-listeners.html#skip-next-listener">Skip Next Listener</a></li></ul></li><li id="event-listeners-html-conclusion" class="toc-item"><a href="event-listeners.html#conclusion">Conclusion</a></li></ul></li><li id="dql-doctrine-query-language-html-dql-doctrine-query-language" class="toc-item"><a href="dql-doctrine-query-language.html#dql-doctrine-query-language">DQL: Doctrine Query Language</a><ul><li id="dql-doctrine-query-language-html-introduction" class="toc-item"><a href="dql-doctrine-query-language.html#introduction">Introduction</a></li><li id="dql-doctrine-query-language-html-select-queries" class="toc-item"><a href="dql-doctrine-query-language.html#select-queries">SELECT queries</a></li><li id="dql-doctrine-query-language-html-update-queries" class="toc-item"><a href="dql-doctrine-query-language.html#update-queries">UPDATE queries</a></li><li id="dql-doctrine-query-language-html-delete-queries" class="toc-item"><a href="dql-doctrine-query-language.html#delete-queries">DELETE Queries</a></li><li id="dql-doctrine-query-language-html-from-clause" class="toc-item"><a href="dql-doctrine-query-language.html#from-clause">FROM clause</a></li><li id="dql-doctrine-query-language-html-join-syntax" class="toc-item"><a href="dql-doctrine-query-language.html#join-syntax">JOIN syntax</a></li><li id="dql-doctrine-query-language-html-indexby-keyword" class="toc-item"><a href="dql-doctrine-query-language.html#indexby-keyword">INDEXBY keyword</a></li><li id="dql-doctrine-query-language-html-where-clause" class="toc-item"><a href="dql-doctrine-query-language.html#where-clause">WHERE clause</a></li><li id="dql-doctrine-query-language-html-conditional-expressions" class="toc-item"><a href="dql-doctrine-query-language.html#conditional-expressions">Conditional expressions</a></li><li id="dql-doctrine-query-language-html-functional-expressions" class="toc-item"><a href="dql-doctrine-query-language.html#functional-expressions">Functional Expressions</a></li><li id="dql-doctrine-query-language-html-subqueries" class="toc-item"><a href="dql-doctrine-query-language.html#subqueries">Subqueries</a></li><li id="dql-doctrine-query-language-html-group-by-having-clauses" class="toc-item"><a href="dql-doctrine-query-language.html#group-by-having-clauses">GROUP BY, HAVING clauses</a></li><li id="dql-doctrine-query-language-html-order-by-clause" class="toc-item"><a href="dql-doctrine-query-language.html#order-by-clause">ORDER BY clause</a></li><li id="dql-doctrine-query-language-html-limit-and-offset-clauses" class="toc-item"><a href="dql-doctrine-query-language.html#limit-and-offset-clauses">LIMIT and OFFSET clauses</a></li><li id="dql-doctrine-query-language-html-named-queries" class="toc-item"><a href="dql-doctrine-query-language.html#named-queries">Named Queries</a></li><li id="dql-doctrine-query-language-html-bnf" class="toc-item"><a href="dql-doctrine-query-language.html#bnf">BNF</a></li><li id="dql-doctrine-query-language-html-magic-finders" class="toc-item"><a href="dql-doctrine-query-language.html#magic-finders">Magic Finders</a></li><li id="dql-doctrine-query-language-html-debugging-queries" class="toc-item"><a href="dql-doctrine-query-language.html#debugging-queries">Debugging Queries</a></li><li id="dql-doctrine-query-language-html-conclusion" class="toc-item"><a href="dql-doctrine-query-language.html#conclusion">Conclusion</a></li></ul></li><li id="hierarchical-data-html-hierarchical-data" class="toc-item"><a href="hierarchical-data.html#hierarchical-data">Hierarchical Data</a><ul><li id="hierarchical-data-html-introduction" class="toc-item"><a href="hierarchical-data.html#introduction">Introduction</a></li><li id="hierarchical-data-html-nested-set" class="toc-item"><a href="hierarchical-data.html#nested-set">Nested Set</a><ul><li id="hierarchical-data-html-introduction" class="toc-item"><a href="hierarchical-data.html#introduction">Introduction</a></li><li id="hierarchical-data-html-setting-up" class="toc-item"><a href="hierarchical-data.html#setting-up">Setting Up</a></li><li id="hierarchical-data-html-multiple-trees" class="toc-item"><a href="hierarchical-data.html#multiple-trees">Multiple Trees</a></li><li id="hierarchical-data-html-working-with-trees" class="toc-item"><a href="hierarchical-data.html#working-with-trees">Working with Trees</a></li><li id="hierarchical-data-html-advanced-usage" class="toc-item"><a href="hierarchical-data.html#advanced-usage">Advanced Usage</a></li><li id="hierarchical-data-html-rendering-with-indention" class="toc-item"><a href="hierarchical-data.html#rendering-with-indention">Rendering with Indention</a></li></ul></li><li id="hierarchical-data-html-conclusion" class="toc-item"><a href="hierarchical-data.html#conclusion">Conclusion</a></li></ul></li><li id="yaml-schema-files-html-yaml-schema-files" class="toc-item"><a href="yaml-schema-files.html#yaml-schema-files">YAML Schema Files</a><ul><li id="yaml-schema-files-html-introduction" class="toc-item"><a href="yaml-schema-files.html#introduction">Introduction</a></li><li id="yaml-schema-files-html-abbreviated-syntax" class="toc-item"><a href="yaml-schema-files.html#abbreviated-syntax">Abbreviated Syntax</a></li><li id="yaml-schema-files-html-verbose-syntax" class="toc-item"><a href="yaml-schema-files.html#verbose-syntax">Verbose Syntax</a></li><li id="yaml-schema-files-html-relationships" class="toc-item"><a href="yaml-schema-files.html#relationships">Relationships</a><ul><li id="yaml-schema-files-html-detect-relations" class="toc-item"><a href="yaml-schema-files.html#detect-relations">Detect Relations</a></li><li id="yaml-schema-files-html-customizing-relationships" class="toc-item"><a href="yaml-schema-files.html#customizing-relationships">Customizing Relationships</a></li><li id="yaml-schema-files-html-one-to-one" class="toc-item"><a href="yaml-schema-files.html#one-to-one">One to One</a></li><li id="yaml-schema-files-html-one-to-many" class="toc-item"><a href="yaml-schema-files.html#one-to-many">One to Many</a></li><li id="yaml-schema-files-html-many-to-many" class="toc-item"><a href="yaml-schema-files.html#many-to-many">Many to Many</a></li></ul></li><li id="yaml-schema-files-html-features-examples" class="toc-item"><a href="yaml-schema-files.html#features-examples">Features & Examples</a><ul><li id="yaml-schema-files-html-connection-binding" class="toc-item"><a href="yaml-schema-files.html#connection-binding">Connection Binding</a></li><li id="yaml-schema-files-html-attributes" class="toc-item"><a href="yaml-schema-files.html#attributes">Attributes</a></li><li id="yaml-schema-files-html-enums" class="toc-item"><a href="yaml-schema-files.html#enums">Enums</a></li><li id="yaml-schema-files-html-actas-behaviors" class="toc-item"><a href="yaml-schema-files.html#actas-behaviors">ActAs Behaviors</a></li><li id="yaml-schema-files-html-listeners" class="toc-item"><a href="yaml-schema-files.html#listeners">Listeners</a></li><li id="yaml-schema-files-html-options" class="toc-item"><a href="yaml-schema-files.html#options">Options</a></li><li id="yaml-schema-files-html-indexes" class="toc-item"><a href="yaml-schema-files.html#indexes">Indexes</a></li><li id="yaml-schema-files-html-inheritance" class="toc-item"><a href="yaml-schema-files.html#inheritance">Inheritance</a></li><li id="yaml-schema-files-html-column-aliases" class="toc-item"><a href="yaml-schema-files.html#column-aliases">Column Aliases</a></li><li id="yaml-schema-files-html-packages" class="toc-item"><a href="yaml-schema-files.html#packages">Packages</a></li><li id="yaml-schema-files-html-global-schema-information" class="toc-item"><a href="yaml-schema-files.html#global-schema-information">Global Schema Information</a></li></ul></li><li id="yaml-schema-files-html-using-schema-files" class="toc-item"><a href="yaml-schema-files.html#using-schema-files">Using Schema Files</a></li><li id="yaml-schema-files-html-conclusion" class="toc-item"><a href="yaml-schema-files.html#conclusion">Conclusion</a></li></ul></li><li id="acknowledgements-html-acknowledgements-and-contributors" class="toc-item"><a href="acknowledgements.html#acknowledgements-and-contributors">Acknowledgements and Contributors</a><ul><li id="acknowledgements-html-contributors" class="toc-item"><a href="acknowledgements.html#contributors">Contributors</a><ul><li id="acknowledgements-html-roman-s-borschel" class="toc-item"><a href="acknowledgements.html#roman-s-borschel">Roman S. Borschel</a></li><li id="acknowledgements-html-guilherme-blanco" class="toc-item"><a href="acknowledgements.html#guilherme-blanco">Guilherme Blanco</a></li><li id="acknowledgements-html-konsta-vesterinen" class="toc-item"><a href="acknowledgements.html#konsta-vesterinen">Konsta Vesterinen</a></li></ul></li><li id="acknowledgements-html-companies" class="toc-item"><a href="acknowledgements.html#companies">Companies</a><ul><li id="acknowledgements-html-centre-source" class="toc-item"><a href="acknowledgements.html#centre-source">centre{source}</a></li><li id="acknowledgements-html-sensio-labs" class="toc-item"><a href="acknowledgements.html#sensio-labs">Sensio Labs</a></li></ul></li><li id="acknowledgements-html-other-contributors" class="toc-item"><a href="acknowledgements.html#other-contributors">Other Contributors</a></li></ul></li><li id="configuration-html-configuration" class="toc-item"><a href="configuration.html#configuration">Configuration</a><ul><li id="configuration-html-levels-of-configuration" class="toc-item"><a href="configuration.html#levels-of-configuration">Levels of Configuration</a></li><li id="configuration-html-default-attributes" class="toc-item"><a href="configuration.html#default-attributes">Default Attributes</a><ul><li id="configuration-html-default-column-options" class="toc-item"><a href="configuration.html#default-column-options">Default Column Options</a></li><li id="configuration-html-default-added-auto-id" class="toc-item"><a href="configuration.html#default-added-auto-id">Default Added Auto Id</a></li></ul></li><li id="configuration-html-portability" class="toc-item"><a href="configuration.html#portability">Portability</a><ul><li id="configuration-html-portability-mode-attributes" class="toc-item"><a href="configuration.html#portability-mode-attributes">Portability Mode Attributes</a></li><li id="configuration-html-examples" class="toc-item"><a href="configuration.html#examples">Examples</a></li></ul></li><li id="configuration-html-identifier-quoting" class="toc-item"><a href="configuration.html#identifier-quoting">Identifier quoting</a></li><li id="configuration-html-hydration-overwriting" class="toc-item"><a href="configuration.html#hydration-overwriting">Hydration Overwriting</a></li><li id="configuration-html-configure-table-class" class="toc-item"><a href="configuration.html#configure-table-class">Configure Table Class</a></li><li id="configuration-html-configure-query-class" class="toc-item"><a href="configuration.html#configure-query-class">Configure Query Class</a></li><li id="configuration-html-configure-collection-class" class="toc-item"><a href="configuration.html#configure-collection-class">Configure Collection Class</a></li><li id="configuration-html-disabling-cascading-saves" class="toc-item"><a href="configuration.html#disabling-cascading-saves">Disabling Cascading Saves</a></li><li id="configuration-html-exporting" class="toc-item"><a href="configuration.html#exporting">Exporting</a></li><li id="configuration-html-naming-convention-attributes" class="toc-item"><a href="configuration.html#naming-convention-attributes">Naming convention attributes</a><ul><li id="configuration-html-index-name-format" class="toc-item"><a href="configuration.html#index-name-format">Index name format</a></li><li id="configuration-html-sequence-name-format" class="toc-item"><a href="configuration.html#sequence-name-format">Sequence name format</a></li><li id="configuration-html-table-name-format" class="toc-item"><a href="configuration.html#table-name-format">Table name format</a></li><li id="configuration-html-database-name-format" class="toc-item"><a href="configuration.html#database-name-format">Database name format</a></li><li id="configuration-html-validation-attributes" class="toc-item"><a href="configuration.html#validation-attributes">Validation attributes</a></li><li id="configuration-html-validation-mode-constants" class="toc-item"><a href="configuration.html#validation-mode-constants">Validation mode constants</a></li><li id="configuration-html-examples" class="toc-item"><a href="configuration.html#examples">Examples</a></li></ul></li><li id="configuration-html-conclusion" class="toc-item"><a href="configuration.html#conclusion">Conclusion</a></li></ul></li><li id="introduction-html-introduction" class="toc-item"><a href="introduction.html#introduction">Introduction</a><ul><li id="introduction-html-about-this-version" class="toc-item"><a href="introduction.html#about-this-version">About this Version</a></li><li id="introduction-html-how-to-contribute" class="toc-item"><a href="introduction.html#how-to-contribute">How to Contribute</a></li><li id="introduction-html-what-is-doctrine" class="toc-item"><a href="introduction.html#what-is-doctrine">What is Doctrine?</a></li><li id="introduction-html-what-is-an-orm" class="toc-item"><a href="introduction.html#what-is-an-orm">What is an ORM?</a></li><li id="introduction-html-what-is-the-problem" class="toc-item"><a href="introduction.html#what-is-the-problem">What is the Problem?</a></li><li id="introduction-html-minimum-requirements" class="toc-item"><a href="introduction.html#minimum-requirements">Minimum Requirements</a></li><li id="introduction-html-basic-overview" class="toc-item"><a href="introduction.html#basic-overview">Basic Overview</a></li><li id="introduction-html-doctrine-explained" class="toc-item"><a href="introduction.html#doctrine-explained">Doctrine Explained</a></li><li id="introduction-html-key-concepts" class="toc-item"><a href="introduction.html#key-concepts">Key Concepts</a></li><li id="introduction-html-further-reading" class="toc-item"><a href="introduction.html#further-reading">Further Reading</a></li><li id="introduction-html-conclusion" class="toc-item"><a href="introduction.html#conclusion">Conclusion</a></li></ul></li><li id="working-with-models-html-working-with-models" class="toc-item"><a href="working-with-models.html#working-with-models">Working with Models</a><ul><li id="working-with-models-html-define-test-schema" class="toc-item"><a href="working-with-models.html#define-test-schema">Define Test Schema</a></li><li id="working-with-models-html-dealing-with-relations" class="toc-item"><a href="working-with-models.html#dealing-with-relations">Dealing with Relations</a><ul><li id="working-with-models-html-creating-related-records" class="toc-item"><a href="working-with-models.html#creating-related-records">Creating Related Records</a></li><li id="working-with-models-html-retrieving-related-records" class="toc-item"><a href="working-with-models.html#retrieving-related-records">Retrieving Related Records</a></li><li id="working-with-models-html-updating-related-records" class="toc-item"><a href="working-with-models.html#updating-related-records">Updating Related Records</a></li><li id="working-with-models-html-clearing-related-records" class="toc-item"><a href="working-with-models.html#clearing-related-records">Clearing Related Records</a></li><li id="working-with-models-html-deleting-related-records" class="toc-item"><a href="working-with-models.html#deleting-related-records">Deleting Related Records</a></li><li id="working-with-models-html-working-with-related-records" class="toc-item"><a href="working-with-models.html#working-with-related-records">Working with Related Records</a></li></ul></li><li id="working-with-models-html-many-to-many-relations" class="toc-item"><a href="working-with-models.html#many-to-many-relations">Many-to-Many Relations</a><ul><li id="working-with-models-html-creating-a-new-link" class="toc-item"><a href="working-with-models.html#creating-a-new-link">Creating a New Link</a></li><li id="working-with-models-html-deleting-a-link" class="toc-item"><a href="working-with-models.html#deleting-a-link">Deleting a Link</a></li></ul></li><li id="working-with-models-html-fetching-objects" class="toc-item"><a href="working-with-models.html#fetching-objects">Fetching Objects</a><ul><li id="working-with-models-html-sample-queries" class="toc-item"><a href="working-with-models.html#sample-queries">Sample Queries</a></li><li id="working-with-models-html-field-lazy-loading" class="toc-item"><a href="working-with-models.html#field-lazy-loading">Field Lazy Loading</a></li></ul></li><li id="working-with-models-html-arrays-and-objects" class="toc-item"><a href="working-with-models.html#arrays-and-objects">Arrays and Objects</a><ul><li id="working-with-models-html-to-array" class="toc-item"><a href="working-with-models.html#to-array">To Array</a></li><li id="working-with-models-html-from-array" class="toc-item"><a href="working-with-models.html#from-array">From Array</a></li><li id="working-with-models-html-synchronize-with-array" class="toc-item"><a href="working-with-models.html#synchronize-with-array">Synchronize With Array</a></li></ul></li><li id="working-with-models-html-overriding-the-constructor" class="toc-item"><a href="working-with-models.html#overriding-the-constructor">Overriding the Constructor</a></li><li id="working-with-models-html-conclusion" class="toc-item"><a href="working-with-models.html#conclusion">Conclusion</a></li></ul></li><li id="defining-models-html-defining-models" class="toc-item"><a href="defining-models.html#defining-models">Defining Models</a><ul><li id="defining-models-html-columns" class="toc-item"><a href="defining-models.html#columns">Columns</a><ul><li id="defining-models-html-column-lengths" class="toc-item"><a href="defining-models.html#column-lengths">Column Lengths</a></li><li id="defining-models-html-column-aliases" class="toc-item"><a href="defining-models.html#column-aliases">Column Aliases</a></li><li id="defining-models-html-default-values" class="toc-item"><a href="defining-models.html#default-values">Default values</a></li><li id="defining-models-html-data-types" class="toc-item"><a href="defining-models.html#data-types">Data types</a></li><li id="defining-models-html-examples" class="toc-item"><a href="defining-models.html#examples">Examples</a></li></ul></li><li id="defining-models-html-relationships" class="toc-item"><a href="defining-models.html#relationships">Relationships</a><ul><li id="defining-models-html-introduction" class="toc-item"><a href="defining-models.html#introduction">Introduction</a></li><li id="defining-models-html-foreign-key-associations" class="toc-item"><a href="defining-models.html#foreign-key-associations">Foreign Key Associations</a></li><li id="defining-models-html-join-table-associations" class="toc-item"><a href="defining-models.html#join-table-associations">Join Table Associations</a></li><li id="defining-models-html-foreign-key-constraints" class="toc-item"><a href="defining-models.html#foreign-key-constraints">Foreign Key Constraints</a></li></ul></li><li id="defining-models-html-indexes" class="toc-item"><a href="defining-models.html#indexes">Indexes</a><ul><li id="defining-models-html-introduction" class="toc-item"><a href="defining-models.html#introduction">Introduction</a></li><li id="defining-models-html-adding-indexes" class="toc-item"><a href="defining-models.html#adding-indexes">Adding indexes</a></li><li id="defining-models-html-index-options" class="toc-item"><a href="defining-models.html#index-options">Index options</a></li><li id="defining-models-html-special-indexes" class="toc-item"><a href="defining-models.html#special-indexes">Special indexes</a></li></ul></li><li id="defining-models-html-checks" class="toc-item"><a href="defining-models.html#checks">Checks</a></li><li id="defining-models-html-table-options" class="toc-item"><a href="defining-models.html#table-options">Table Options</a></li><li id="defining-models-html-record-filters" class="toc-item"><a href="defining-models.html#record-filters">Record Filters</a></li><li id="defining-models-html-transitive-persistence" class="toc-item"><a href="defining-models.html#transitive-persistence">Transitive Persistence</a><ul><li id="defining-models-html-application-level-cascades" class="toc-item"><a href="defining-models.html#application-level-cascades">Application-Level Cascades</a></li><li id="defining-models-html-database-level-cascades" class="toc-item"><a href="defining-models.html#database-level-cascades">Database-Level Cascades</a></li></ul></li><li id="defining-models-html-conclusion" class="toc-item"><a href="defining-models.html#conclusion">Conclusion</a></li></ul></li><li id="data-hydrators-html-data-hydrators" class="toc-item"><a href="data-hydrators.html#data-hydrators">Data Hydrators</a><ul><li id="data-hydrators-html-core-hydration-methods" class="toc-item"><a href="data-hydrators.html#core-hydration-methods">Core Hydration Methods</a><ul><li id="data-hydrators-html-record" class="toc-item"><a href="data-hydrators.html#record">Record</a></li><li id="data-hydrators-html-array" class="toc-item"><a href="data-hydrators.html#array">Array</a></li><li id="data-hydrators-html-scalar" class="toc-item"><a href="data-hydrators.html#scalar">Scalar</a></li><li id="data-hydrators-html-single-scalar" class="toc-item"><a href="data-hydrators.html#single-scalar">Single Scalar</a></li><li id="data-hydrators-html-on-demand" class="toc-item"><a href="data-hydrators.html#on-demand">On Demand</a></li><li id="data-hydrators-html-nested-set-record-hierarchy" class="toc-item"><a href="data-hydrators.html#nested-set-record-hierarchy">Nested Set Record Hierarchy</a></li><li id="data-hydrators-html-nested-set-array-hierarchy" class="toc-item"><a href="data-hydrators.html#nested-set-array-hierarchy">Nested Set Array Hierarchy</a></li></ul></li><li id="data-hydrators-html-writing-hydration-method" class="toc-item"><a href="data-hydrators.html#writing-hydration-method">Writing Hydration Method</a></li></ul></li><li id="improving-performance-html-improving-performance" class="toc-item"><a href="improving-performance.html#improving-performance">Improving Performance</a><ul><li id="improving-performance-html-introduction" class="toc-item"><a href="improving-performance.html#introduction">Introduction</a></li><li id="improving-performance-html-compile" class="toc-item"><a href="improving-performance.html#compile">Compile</a></li><li id="improving-performance-html-conservative-fetching" class="toc-item"><a href="improving-performance.html#conservative-fetching">Conservative Fetching</a></li><li id="improving-performance-html-bundle-your-class-files" class="toc-item"><a href="improving-performance.html#bundle-your-class-files">Bundle your Class Files</a></li><li id="improving-performance-html-use-a-bytecode-cache" class="toc-item"><a href="improving-performance.html#use-a-bytecode-cache">Use a Bytecode Cache</a></li><li id="improving-performance-html-free-objects" class="toc-item"><a href="improving-performance.html#free-objects">Free Objects</a></li><li id="improving-performance-html-other-tips" class="toc-item"><a href="improving-performance.html#other-tips">Other Tips</a></li><li id="improving-performance-html-conclusion" class="toc-item"><a href="improving-performance.html#conclusion">Conclusion</a></li></ul></li><li id="component-overview-html-component-overview" class="toc-item"><a href="component-overview.html#component-overview">Component Overview</a><ul><li id="component-overview-html-manager" class="toc-item"><a href="component-overview.html#manager">Manager</a><ul><li id="component-overview-html-retrieving-connections" class="toc-item"><a href="component-overview.html#retrieving-connections">Retrieving Connections</a></li></ul></li><li id="component-overview-html-connection" class="toc-item"><a href="component-overview.html#connection">Connection</a><ul><li id="component-overview-html-available-drivers" class="toc-item"><a href="component-overview.html#available-drivers">Available Drivers</a></li><li id="component-overview-html-creating-connections" class="toc-item"><a href="component-overview.html#creating-connections">Creating Connections</a></li><li id="component-overview-html-flushing-the-connection" class="toc-item"><a href="component-overview.html#flushing-the-connection">Flushing the Connection</a></li></ul></li><li id="component-overview-html-table" class="toc-item"><a href="component-overview.html#table">Table</a><ul><li id="component-overview-html-getting-a-table-object" class="toc-item"><a href="component-overview.html#getting-a-table-object">Getting a Table Object</a></li><li id="component-overview-html-getting-column-information" class="toc-item"><a href="component-overview.html#getting-column-information">Getting Column Information</a></li><li id="component-overview-html-getting-relation-information" class="toc-item"><a href="component-overview.html#getting-relation-information">Getting Relation Information</a></li><li id="component-overview-html-finder-methods" class="toc-item"><a href="component-overview.html#finder-methods">Finder Methods</a></li><li id="component-overview-html-custom-finders" class="toc-item"><a href="component-overview.html#custom-finders">Custom Finders</a></li></ul></li><li id="component-overview-html-record" class="toc-item"><a href="component-overview.html#record">Record</a><ul><li id="component-overview-html-properties" class="toc-item"><a href="component-overview.html#properties">Properties</a></li><li id="component-overview-html-updating-records" class="toc-item"><a href="component-overview.html#updating-records">Updating Records</a></li><li id="component-overview-html-replacing-records" class="toc-item"><a href="component-overview.html#replacing-records">Replacing Records</a></li><li id="component-overview-html-refreshing-records" class="toc-item"><a href="component-overview.html#refreshing-records">Refreshing Records</a></li><li id="component-overview-html-refreshing-relationships" class="toc-item"><a href="component-overview.html#refreshing-relationships">Refreshing relationships</a></li><li id="component-overview-html-deleting-records" class="toc-item"><a href="component-overview.html#deleting-records">Deleting Records</a></li><li id="component-overview-html-using-expression-values" class="toc-item"><a href="component-overview.html#using-expression-values">Using Expression Values</a></li><li id="component-overview-html-getting-record-state" class="toc-item"><a href="component-overview.html#getting-record-state">Getting Record State</a></li><li id="component-overview-html-getting-object-copy" class="toc-item"><a href="component-overview.html#getting-object-copy">Getting Object Copy</a></li><li id="component-overview-html-saving-a-blank-record" class="toc-item"><a href="component-overview.html#saving-a-blank-record">Saving a Blank Record</a></li><li id="component-overview-html-mapping-custom-values" class="toc-item"><a href="component-overview.html#mapping-custom-values">Mapping Custom Values</a></li><li id="component-overview-html-serializing" class="toc-item"><a href="component-overview.html#serializing">Serializing</a></li><li id="component-overview-html-checking-existence" class="toc-item"><a href="component-overview.html#checking-existence">Checking Existence</a></li><li id="component-overview-html-function-callbacks-for-columns" class="toc-item"><a href="component-overview.html#function-callbacks-for-columns">Function Callbacks for Columns</a></li></ul></li><li id="component-overview-html-collection" class="toc-item"><a href="component-overview.html#collection">Collection</a><ul><li id="component-overview-html-accessing-elements" class="toc-item"><a href="component-overview.html#accessing-elements">Accessing Elements</a></li><li id="component-overview-html-adding-new-elements" class="toc-item"><a href="component-overview.html#adding-new-elements">Adding new Elements</a></li><li id="component-overview-html-getting-collection-count" class="toc-item"><a href="component-overview.html#getting-collection-count">Getting Collection Count</a></li><li id="component-overview-html-saving-the-collection" class="toc-item"><a href="component-overview.html#saving-the-collection">Saving the Collection</a></li><li id="component-overview-html-deleting-the-collection" class="toc-item"><a href="component-overview.html#deleting-the-collection">Deleting the Collection</a></li><li id="component-overview-html-key-mapping" class="toc-item"><a href="component-overview.html#key-mapping">Key Mapping</a></li><li id="component-overview-html-loading-related-records" class="toc-item"><a href="component-overview.html#loading-related-records">Loading Related Records</a></li></ul></li><li id="component-overview-html-validator" class="toc-item"><a href="component-overview.html#validator">Validator</a><ul><li id="component-overview-html-more-validation" class="toc-item"><a href="component-overview.html#more-validation">More Validation</a></li><li id="component-overview-html-valid-or-not-valid" class="toc-item"><a href="component-overview.html#valid-or-not-valid">Valid or Not Valid</a></li></ul></li><li id="component-overview-html-profiler" class="toc-item"><a href="component-overview.html#profiler">Profiler</a><ul><li id="component-overview-html-basic-usage" class="toc-item"><a href="component-overview.html#basic-usage">Basic Usage</a></li></ul></li><li id="component-overview-html-locking-manager" class="toc-item"><a href="component-overview.html#locking-manager">Locking Manager</a><ul><li id="component-overview-html-optimistic-locking" class="toc-item"><a href="component-overview.html#optimistic-locking">Optimistic Locking</a></li><li id="component-overview-html-pessimistic-locking" class="toc-item"><a href="component-overview.html#pessimistic-locking">Pessimistic Locking</a></li><li id="component-overview-html-examples" class="toc-item"><a href="component-overview.html#examples">Examples</a></li><li id="component-overview-html-technical-details" class="toc-item"><a href="component-overview.html#technical-details">Technical Details</a></li></ul></li><li id="component-overview-html-views" class="toc-item"><a href="component-overview.html#views">Views</a><ul><li id="component-overview-html-using-views" class="toc-item"><a href="component-overview.html#using-views">Using Views</a></li></ul></li><li id="component-overview-html-conclusion" class="toc-item"><a href="component-overview.html#conclusion">Conclusion</a></li></ul></li><li id="index-html-doctrine-version-orm-manual" class="toc-item"><a href="index.html#doctrine-version-orm-manual">Doctrine |version| ORM Manual</a></li><li id="data-fixtures-html-data-fixtures" class="toc-item"><a href="data-fixtures.html#data-fixtures">Data Fixtures</a><ul><li id="data-fixtures-html-importing" class="toc-item"><a href="data-fixtures.html#importing">Importing</a></li><li id="data-fixtures-html-dumping" class="toc-item"><a href="data-fixtures.html#dumping">Dumping</a></li><li id="data-fixtures-html-implement" class="toc-item"><a href="data-fixtures.html#implement">Implement</a></li><li id="data-fixtures-html-writing" class="toc-item"><a href="data-fixtures.html#writing">Writing</a></li><li id="data-fixtures-html-fixtures-for-nested-sets" class="toc-item"><a href="data-fixtures.html#fixtures-for-nested-sets">Fixtures For Nested Sets</a></li><li id="data-fixtures-html-fixtures-for-i18n" class="toc-item"><a href="data-fixtures.html#fixtures-for-i18n">Fixtures For I18n</a></li><li id="data-fixtures-html-conclusion" class="toc-item"><a href="data-fixtures.html#conclusion">Conclusion</a></li></ul></li><li id="searching-html-searching" class="toc-item"><a href="searching.html#searching">Searching</a><ul><li id="searching-html-introduction" class="toc-item"><a href="searching.html#introduction">Introduction</a></li><li id="searching-html-index-structure" class="toc-item"><a href="searching.html#index-structure">Index structure</a></li><li id="searching-html-index-building" class="toc-item"><a href="searching.html#index-building">Index Building</a></li><li id="searching-html-text-analyzers" class="toc-item"><a href="searching.html#text-analyzers">Text Analyzers</a></li><li id="searching-html-query-language" class="toc-item"><a href="searching.html#query-language">Query language</a></li><li id="searching-html-performing-searches" class="toc-item"><a href="searching.html#performing-searches">Performing Searches</a></li><li id="searching-html-file-searches" class="toc-item"><a href="searching.html#file-searches">File searches</a></li><li id="searching-html-conclusion" class="toc-item"><a href="searching.html#conclusion">Conclusion</a></li></ul></li><li id="coding-standards-html-coding-standards" class="toc-item"><a href="coding-standards.html#coding-standards">Coding Standards</a><ul><li id="coding-standards-html-php-file-formatting" class="toc-item"><a href="coding-standards.html#php-file-formatting">PHP File Formatting</a><ul><li id="coding-standards-html-general" class="toc-item"><a href="coding-standards.html#general">General</a></li><li id="coding-standards-html-indentation" class="toc-item"><a href="coding-standards.html#indentation">Indentation</a></li><li id="coding-standards-html-maximum-line-length" class="toc-item"><a href="coding-standards.html#maximum-line-length">Maximum Line Length</a></li><li id="coding-standards-html-line-termination" class="toc-item"><a href="coding-standards.html#line-termination">Line Termination</a></li></ul></li><li id="coding-standards-html-naming-conventions" class="toc-item"><a href="coding-standards.html#naming-conventions">Naming Conventions</a><ul><li id="coding-standards-html-classes" class="toc-item"><a href="coding-standards.html#classes">Classes</a></li><li id="coding-standards-html-interfaces" class="toc-item"><a href="coding-standards.html#interfaces">Interfaces</a></li><li id="coding-standards-html-filenames" class="toc-item"><a href="coding-standards.html#filenames">Filenames</a></li><li id="coding-standards-html-functions-and-methods" class="toc-item"><a href="coding-standards.html#functions-and-methods">Functions and Methods</a></li><li id="coding-standards-html-variables" class="toc-item"><a href="coding-standards.html#variables">Variables</a></li><li id="coding-standards-html-constants" class="toc-item"><a href="coding-standards.html#constants">Constants</a></li><li id="coding-standards-html-record-columns" class="toc-item"><a href="coding-standards.html#record-columns">Record Columns</a></li></ul></li><li id="coding-standards-html-coding-style" class="toc-item"><a href="coding-standards.html#coding-style">Coding Style</a><ul><li id="coding-standards-html-php-code-demarcation" class="toc-item"><a href="coding-standards.html#php-code-demarcation">PHP Code Demarcation</a></li><li id="coding-standards-html-strings" class="toc-item"><a href="coding-standards.html#strings">Strings</a></li><li id="coding-standards-html-arrays" class="toc-item"><a href="coding-standards.html#arrays">Arrays</a></li><li id="coding-standards-html-classes" class="toc-item"><a href="coding-standards.html#classes">Classes</a></li><li id="coding-standards-html-functions-and-methods" class="toc-item"><a href="coding-standards.html#functions-and-methods">Functions and Methods</a></li><li id="coding-standards-html-control-statements" class="toc-item"><a href="coding-standards.html#control-statements">Control Statements</a></li><li id="coding-standards-html-inline-documentation" class="toc-item"><a href="coding-standards.html#inline-documentation">Inline Documentation</a></li></ul></li><li id="coding-standards-html-conclusion" class="toc-item"><a href="coding-standards.html#conclusion">Conclusion</a></li></ul></li><li id="exceptions-and-warnings-html-exceptions-and-warnings" class="toc-item"><a href="exceptions-and-warnings.html#exceptions-and-warnings">Exceptions and Warnings</a><ul><li id="exceptions-and-warnings-html-manager-exceptions" class="toc-item"><a href="exceptions-and-warnings.html#manager-exceptions">Manager exceptions</a></li><li id="exceptions-and-warnings-html-relation-exceptions" class="toc-item"><a href="exceptions-and-warnings.html#relation-exceptions">Relation exceptions</a></li><li id="exceptions-and-warnings-html-connection-exceptions" class="toc-item"><a href="exceptions-and-warnings.html#connection-exceptions">Connection exceptions</a></li><li id="exceptions-and-warnings-html-query-exceptions" class="toc-item"><a href="exceptions-and-warnings.html#query-exceptions">Query exceptions</a></li><li id="exceptions-and-warnings-html-conclusion" class="toc-item"><a href="exceptions-and-warnings.html#conclusion">Conclusion</a></li></ul></li><li id="native-sql-html-native-sql" class="toc-item"><a href="native-sql.html#native-sql">Native SQL</a><ul><li id="native-sql-html-introduction" class="toc-item"><a href="native-sql.html#introduction">Introduction</a></li><li id="native-sql-html-component-queries" class="toc-item"><a href="native-sql.html#component-queries">Component Queries</a></li><li id="native-sql-html-fetching-from-multiple-components" class="toc-item"><a href="native-sql.html#fetching-from-multiple-components">Fetching from Multiple Components</a></li><li id="native-sql-html-conclusion" class="toc-item"><a href="native-sql.html#conclusion">Conclusion</a></li></ul></li><li id="cookbook-creating-a-unit-of-work-using-doctrine-html-writing-a-unit-of-work-in-php-doctrine" class="toc-item"><a href="../cookbook/creating-a-unit-of-work-using-doctrine.html#writing-a-unit-of-work-in-php-doctrine">Writing a Unit of Work in PHP Doctrine</a></li><li id="cookbook-record-based-retrieval-security-template-html-record-based-retrieval-security-template" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#record-based-retrieval-security-template">Record-based Retrieval Security Template</a><ul><li id="cookbook-record-based-retrieval-security-template-html-introduction" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#introduction">Introduction</a></li><li id="cookbook-record-based-retrieval-security-template-html-template" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#template">Template</a></li><li id="cookbook-record-based-retrieval-security-template-html-yaml-schema-syntax" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#yaml-schema-syntax">YAML schema syntax</a></li><li id="cookbook-record-based-retrieval-security-template-html-using-the-template" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#using-the-template">Using the template</a></li><li id="cookbook-record-based-retrieval-security-template-html-user-setup" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#user-setup">User setup</a></li><li id="cookbook-record-based-retrieval-security-template-html-querying" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#querying">Querying</a></li><li id="cookbook-record-based-retrieval-security-template-html-restrictions" class="toc-item"><a href="../cookbook/record-based-retrieval-security-template.html#restrictions">Restrictions</a></li></ul></li><li id="cookbook-master-and-slave-connections-html-master-and-slave-connections" class="toc-item"><a href="../cookbook/master-and-slave-connections.html#master-and-slave-connections">Master and Slave Connections</a></li><li id="cookbook-taking-advantage-of-column-aggregation-inheritance-html-taking-advantage-of-column-aggregation-inheritance" class="toc-item"><a href="../cookbook/taking-advantage-of-column-aggregation-inheritance.html#taking-advantage-of-column-aggregation-inheritance">Taking Advantage of Column Aggregation Inheritance</a></li><li id="cookbook-code-igniter-and-doctrine-html-codeigniter-and-doctrine" class="toc-item"><a href="../cookbook/code-igniter-and-doctrine.html#codeigniter-and-doctrine">CodeIgniter and Doctrine</a><ul><li id="cookbook-code-igniter-and-doctrine-html-download-doctrine" class="toc-item"><a href="../cookbook/code-igniter-and-doctrine.html#download-doctrine">Download Doctrine</a></li><li id="cookbook-code-igniter-and-doctrine-html-setup-doctrine" class="toc-item"><a href="../cookbook/code-igniter-and-doctrine.html#setup-doctrine">Setup Doctrine</a></li><li id="cookbook-code-igniter-and-doctrine-html-setup-command-line-interface" class="toc-item"><a href="../cookbook/code-igniter-and-doctrine.html#setup-command-line-interface">Setup Command Line Interface</a></li><li id="cookbook-code-igniter-and-doctrine-html-start-using-doctrine" class="toc-item"><a href="../cookbook/code-igniter-and-doctrine.html#start-using-doctrine">Start Using Doctrine</a></li></ul></li><li id="cookbook-index-html-cookbook" class="toc-item"><a href="../cookbook/index.html#cookbook">Cookbook</a></li><li id="cookbook-my-first-project-html-introduction" class="toc-item"><a href="../cookbook/my-first-project.html#introduction">Introduction</a></li><li id="cookbook-my-first-project-html-download" class="toc-item"><a href="../cookbook/my-first-project.html#download">Download</a><ul><li id="cookbook-my-first-project-html-package-contents" class="toc-item"><a href="../cookbook/my-first-project.html#package-contents">Package Contents</a></li></ul></li><li id="cookbook-my-first-project-html-running-the-cli" class="toc-item"><a href="../cookbook/my-first-project.html#running-the-cli">Running the CLI</a></li><li id="cookbook-my-first-project-html-defining-schema" class="toc-item"><a href="../cookbook/my-first-project.html#defining-schema">Defining Schema</a></li><li id="cookbook-my-first-project-html-test-data-fixtures" class="toc-item"><a href="../cookbook/my-first-project.html#test-data-fixtures">Test Data Fixtures</a></li><li id="cookbook-my-first-project-html-building-everything-now-that-you-have-written-your-schema-files-and" class="toc-item"><a href="../cookbook/my-first-project.html#building-everything-now-that-you-have-written-your-schema-files-and">Building Everything Now that you have written your schema files and</a></li><li id="cookbook-my-first-project-html-running-tests" class="toc-item"><a href="../cookbook/my-first-project.html#running-tests">Running Tests</a><ul><li id="cookbook-my-first-project-html-user-crud" class="toc-item"><a href="../cookbook/my-first-project.html#user-crud">User CRUD</a></li></ul></li><li id="cookbook-plug-and-play-schema-information-with-templates-html-plug-and-play-schema-information-with-templates" class="toc-item"><a href="../cookbook/plug-and-play-schema-information-with-templates.html#plug-and-play-schema-information-with-templates">Plug and Play Schema Information with Templates</a></li><li id="index-html-english-documentation" class="toc-item"><a href="../index.html#english-documentation">English Documentation</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Doctrine1",
            "item": "https://www.doctrine-project.org/projects/doctrine1.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine1/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Behaviors",
            "item": "https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/behaviors.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Behaviors</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>This project is no longer maintained and has been archived.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine1/en/latest/manual/behaviors.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine1/en/latest/manual/behaviors.html">
                                                    master

                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                        </div>
                                </div>
                            
                            
<hr />
<div class="section"><a class="section-anchor" id="behaviors" name="behaviors"></a><h1 class="section-header"><a href="#behaviors">Behaviors<i class="fas fa-link"></i></a></h1>
<hr />
<div class="section"><a class="section-anchor" id="introduction" name="introduction"></a><h2 class="section-header"><a href="#introduction">Introduction<i class="fas fa-link"></i></a></h2>
<p>Many times you may find classes having similar things within your
models. These things may contain anything related to the schema of the
component itself (relations, column definitions, index definitions
etc.). One obvious way of re-factoring the code is having a base class
with some classes extending it.</p>
<p>However inheritance solves only a fraction of things. The following
sections show how using Doctrine_Template is much more powerful and
flexible than using inheritance.</p>
<p>Doctrine_Template is a class template system. Templates are
basically ready-to-use little components that your Record classes can
load. When a template is being loaded its <code>setTableDefinition()</code> and
<code>setUp()</code> methods are being invoked and the method calls inside them
are being directed into the class in question.</p>
<p>This chapter describes the usage of various behaviors available for
Doctrine. You'll also learn how to create your own behaviors. In order
to grasp the concepts of this chapter you should be familiar with the
theory behind Doctrine_Template and
Doctrine_Record_Generator. We will explain what these classes are
shortly.</p>
<p>When referring to behaviors we refer to class packages that use
templates, generators and listeners extensively. All the introduced
components in this chapter can be considered <code>core</code> behaviors, that
means they reside at the Doctrine main repository.</p>
<p>Usually behaviors use generators side-to-side with template classes
(classes that extend Doctrine_Template). The common workflow is:</p>
<ul><li> A new template is being initialized</li>
<li> The template creates the generator and calls <code>initialize()</code> method</li>
<li> The template is attached to given class</li>
</ul>

<p>As you may already know templates are used for adding common definitions
and options to record classes. The purpose of generators is much more
complex. Usually they are being used for creating generic record classes
dynamically. The definitions of these generic classes usually depend on
the owner class. For example the columns of the <code>AuditLog</code> versioning
class are the columns of the parent class with all the sequence and
autoincrement definitions removed.</p>
<hr />
</div>
<div class="section"><a class="section-anchor" id="simple-templates" name="simple-templates"></a><h2 class="section-header"><a href="#simple-templates">Simple Templates<i class="fas fa-link"></i></a></h2>
<p>In the following example we define a template called
<code>TimestampBehavior</code>. Basically the purpose of this template is to add
date columns 'created' and 'updated' to the record class that loads this
template. Additionally this template uses a listener called Timestamp
listener which updates these fields based on record actions.</p>
<div class="console"><pre><code class="console">// models/TimestampListener.php
class TimestampListener extends Doctrine_Record_Listener
{
    public function preInsert(Doctrine_Event $event)
    {
        $event->getInvoker()->created = date('Y-m-d', time());
        $event->getInvoker()->updated = date('Y-m-d', time());
    }

    public function preUpdate(Doctrine_Event $event)
    {
        $event->getInvoker()->updated = date('Y-m-d', time());
    }
}</code></pre></div>
<p>Now lets create a child Doctrine_Template named
<code>TimestampTemplate</code> so we can attach it to our models with the
<code>actAs()</code> method:</p>
<div class="console"><pre><code class="console">// models/TimestampBehavior.php
ss TimestampTemplate extends Doctrine_Template

 public function setTableDefinition()
 {
     $this->hasColumn('created', 'date');
     $this->hasColumn('updated', 'date');

     $this->addListener(new TimestampListener());
 }</code></pre></div>
<p>Lets say we have a class called <code>BlogPost</code> that needs the timestamp
functionality. All we need to do is to add <code>actAs()</code> call in the class
definition.</p>
<div class="console"><pre><code class="console">class BlogPost extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('title', 'string', 200);
        $this->hasColumn('body', 'clob');
    }

    public function setUp()
    {
        $this->actAs('TimestampBehavior');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="54018b5ffb958e0c60fbd764b741baa57436ef10"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="54018b5ffb958e0c60fbd764b741baa57436ef10"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-1" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">---</span>
<span class="hljs-attr">BlogPost:</span>
  <span class="hljs-attr">actAs:</span> <span class="hljs-string">[TimestampBehavior]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(200)</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">clob</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-2" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-3" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-4" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-5" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-6" class="line-number-anchor" /><a href="#line-number-54018b5ffb958e0c60fbd764b741baa57436ef10-6">6</a></td></tr></table></div></code></pre>
<p>Now when we try and utilize the <code>BlogPost</code> model you will notice that
the <code>created</code> and <code>updated</code> columns were added for you and
automatically set when saved:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>blogPost        = new BlogPost();
<span class="noselect">$ </span>blogPost->title = 'Test';
<span class="noselect">$ </span>blogPost->body  = 'test';
<span class="noselect">$ </span>blogPost->save();

print_r($blogPost->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [title] => Test
    [body] => test
    [created] => 2009-01-22
    [updated] => 2009-01-22
)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The above described functionality is available via the
<code>Timestampable</code> behavior that we have already talked about. You
can go back and read more about it in the  section of this
chapter.</p>
</td></tr></table></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="templates-with-relations" name="templates-with-relations"></a><h2 class="section-header"><a href="#templates-with-relations">Templates with Relations<i class="fas fa-link"></i></a></h2>
<p>Many times the situations tend to be much more complex than the
situation in the previous chapter. You may have model classes with
relations to other model classes and you may want to replace given class
with some extended class.</p>
<p>Consider we have two classes, <code>User</code> and <code>Email</code>, with the following
definitions:</p>
<div class="console"><pre><code class="console">class User extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('username', 'string', 255);
        $this->hasColumn('password', 'string', 255);
    }

    public function setUp()
    {
        $this->hasMany('Email', array(
                'local' => 'id',
                'foreign' => 'user_id'
            )
        );
    }
}

class Email extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('address', 'string');
        $this->hasColumn('user_id', 'integer');
    }

    public function setUp()
    {
        $this->hasOne('User', array(
                'local' => 'user_id',
                'foreign' => 'id'
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="6455e14f5050a3027eede38849a96b3afa4cba5c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="6455e14f5050a3027eede38849a96b3afa4cba5c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-1" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">---</span>
<span class="hljs-attr">User:</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">string(255)</span>

<span class="hljs-attr">Email:</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">address:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">user_id:</span> <span class="hljs-string">integer</span>
  <span class="hljs-attr">relations:</span>
    <span class="hljs-attr">User:</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-2" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-3" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-4" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-5" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-6" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-7" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-8" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-9" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-10" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-11" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-12" class="line-number-anchor" /><a href="#line-number-6455e14f5050a3027eede38849a96b3afa4cba5c-12">12</a></td></tr></table></div></code></pre>
<p>Now if we extend the <code>User</code> and <code>Email</code> classes and create, for
example, classes <code>ExtendedUser</code> and <code>ExtendedEmail</code>, the
<code>ExtendedUser</code> will still have a relation to the <code>Email</code> class and
not the <code>ExtendedEmail</code> class. We could of course override the
<code>setUp()</code> method of the <code>User</code> class and define relation to the
<code>ExtendedEmail</code> class, but then we lose the whole point of
inheritance. Doctrine_Template can solve this problem elegantly
with its dependency injection solution.</p>
<p>In the following example we'll define two templates, <code>UserTemplate</code>
and <code>EmailTemplate</code>, with almost identical definitions as the <code>User</code>
and <code>Email</code> class had.</p>
<div class="console"><pre><code class="console">// models/UserTemplate.php
class UserTemplate extends Doctrine_Template
{
    public function setTableDefinition()
    {
        $this->hasColumn('username', 'string', 255);
        $this->hasColumn('password', 'string', 255);
    }

    public function setUp()
    {
        $this->hasMany('EmailTemplate as Emails', array(
                'local' => 'id',
                'foreign' => 'user_id'
            )
        );
    }
}</code></pre></div>
<p>Now lets define the <code>EmailTemplate</code>:</p>
<div class="console"><pre><code class="console">// models/EmailTemplate.php
class EmailTemplate extends Doctrine_Template
{
    public function setTableDefinition()
    {
        $this->hasColumn('address', 'string');
        $this->hasColumn('user_id', 'integer');
    }

    public function setUp()
    {
        $this->hasOne('UserTemplate as User', array(
                'local' => 'user_id',
                'foreign' => 'id'
            )
        );
    }
}</code></pre></div>
<p>Notice how we set the relations. We are not pointing to concrete Record
classes, rather we are setting the relations to templates. This tells
Doctrine that it should try to find concrete Record classes for those
templates. If Doctrine can't find these concrete implementations the
relation parser will throw an exception, but before we go ahead of
things, here are the actual record classes:</p>
<div class="console"><pre><code class="console">class User extends Doctrine_Record
{
    public function setUp()
    {
        $this->actAs('UserTemplate');
    }
}

class Email extends Doctrine_Record
{
    public function setUp()
    {
        $this->actAs('EmailTemplate');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="bd3a96ca1048c34b9e11f8f86a4c83f56144c224"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="bd3a96ca1048c34b9e11f8f86a4c83f56144c224"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-1" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-meta">---</span>
<span class="hljs-attr">User:</span>
  <span class="hljs-attr">actAs:</span> <span class="hljs-string">[UserTemplate]</span>

<span class="hljs-attr">Email:</span>
  <span class="hljs-attr">actAs:</span> <span class="hljs-string">[EmailTemplate]</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-2" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-3" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-4" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-5" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-6" class="line-number-anchor" /><a href="#line-number-bd3a96ca1048c34b9e11f8f86a4c83f56144c224-6">6</a></td></tr></table></div></code></pre>
<p>Now consider the following code snippet. This does NOT work since we
haven't yet set any concrete implementations for the templates.</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>user = new User();
<span class="noselect">$ </span>user->Emails; // throws an exception</code></pre></div>
<p>The following version works. Notice how we set the concrete
implementations for the templates globally using Doctrine_Manager:</p>
<div class="console"><pre><code class="console">// bootstrap.php

// ...
<span class="noselect">$ </span>manager->setImpl('UserTemplate', 'User')
        ->setImpl('EmailTemplate', 'Email');</code></pre></div>
<p>Now this code will work and won't throw an exception like it did before:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>user                     = new User();
<span class="noselect">$ </span>user->Emails[0]->address = 'jonwage@gmail.com';
<span class="noselect">$ </span>user->save();

print_r($user->toArray(true));</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [username] =>
    [password] =>
    [Emails] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [address] => jonwage@gmail.com
                    [user_id] => 1
                )
        )
)</code></pre></div>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>The implementations for the templates can be set at manager,
connection and even at the table level.</p>
</td></tr></table></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="delegate-methods" name="delegate-methods"></a><h2 class="section-header"><a href="#delegate-methods">Delegate Methods<i class="fas fa-link"></i></a></h2>
<p>Besides from acting as a full table definition delegate system,
Doctrine_Template allows the delegation of method calls. This means
that every method within the loaded templates is available in the record
that loaded the templates. Internally the implementation uses magic
method called <code>__call()</code> to achieve this functionality.</p>
<p>Lets add to our previous example and add some custom methods to the
<code>UserTemplate</code>:</p>
<div class="console"><pre><code class="console">// models/UserTemplate.php
class UserTemplate extends Doctrine_Template
{
    // ...
    public function authenticate($username, $password)
    {
        $invoker = $this->getInvoker();
        if ($invoker->username == $username && $invoker->password == $password)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
}</code></pre></div>
<p>Now take a look at the following code and how we can use it:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>user           = new User();
<span class="noselect">$ </span>user->username = 'jwage';
<span class="noselect">$ </span>user->password = 'changeme';

if ($user->authenticate('jwage', 'changemte'))
{
    echo 'Authenticated successfully!';
}
else
{
    echo 'Could not authenticate user!';
}</code></pre></div>
<p>You can also delegate methods to Doctrine_Table classes just as
easily. But, to avoid naming collisions the methods for table classes
must have the string <code>TableProxy</code> appended to the end of the method
name.</p>
<p>Here is an example where we add a new finder method:</p>
<div class="console"><pre><code class="console">// models/UserTemplate.php
class UserTemplate extends Doctrine_Template
{
    // ...
    public function findUsersWithEmailTableProxy()
    {
        return Doctrine_Query::create()
            ->select('u.username')
            ->from('User u')
            ->innerJoin('u.Emails e')
            ->execute();
    }
}</code></pre></div>
<p>Now we can access that function from the Doctrine_Table object for
the <code>User</code> model:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>userTable = Doctrine_Core::getTable('User');
<span class="noselect">$ </span>users = $userTable->findUsersWithEmail();</code></pre></div>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>Each class can consists of multiple templates. If the
templates contain similar definitions the most recently loaded
template always overrides the former.</p>
</td></tr></table></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="creating-behaviors" name="creating-behaviors"></a><h2 class="section-header"><a href="#creating-behaviors">Creating Behaviors<i class="fas fa-link"></i></a></h2>
<p>This subchapter provides you the means for creating your own behaviors.
Lets say we have various different Record classes that need to have
one-to-many emails. We achieve this functionality by creating a generic
behavior which creates Email classes on the fly.</p>
<p>We start this task by creating a behavior called <code>EmailBehavior</code> with
a <code>setTableDefinition()</code> method. Inside the <code>setTableDefinition()</code>
method various helper methods can be used for easily creating the
dynamic record definition. Commonly the following methods are being
used:</p>
<div class="console"><pre><code class="console">public function initOptions()
public function buildLocalRelation()
public function buildForeignKeys(Doctrine_Table $table)
public function buildForeignRelation($alias = null)
public function buildRelation() // calls buildForeignRelation() and buildLocalRelation()</code></pre></div>
<div class="console"><pre><code class="console">class EmailBehavior extends Doctrine_Record_Generator
{
    public function initOptions()
    {
        $this->setOption('className', '%CLASS%Email');

        // Some other options
        // $this->setOption('appLevelDelete', true);
        // $this->setOption('cascadeDelete', false);
    }

    public function buildRelation()
    {
        $this->buildForeignRelation('Emails');
        $this->buildLocalRelation();
    }

    public function setTableDefinition()
    {
        $this->hasColumn('address', 'string', 255, array(
                'email'  => true,
                'primary' => true
            )
        );
    }
}</code></pre></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="core-behaviors" name="core-behaviors"></a><h2 class="section-header"><a href="#core-behaviors">Core Behaviors<i class="fas fa-link"></i></a></h2>
<p>For the next several examples using the core behaviors lets delete all
our existing schemas and models from our test environment we created and
have been using in the earlier chapters:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>rm schema.yml
<span class="noselect">$ </span>touch schema.yml
<span class="noselect">$ </span>rm -rf models/*</code></pre></div>
<hr />
<div class="section"><a class="section-anchor" id="introduction" name="introduction"></a><h3 class="section-header"><a href="#introduction">Introduction<i class="fas fa-link"></i></a></h3>
<p>Doctrine comes bundled with some templates that offer out of the box
functionality for your models. You can enable these templates in your
models very easily. You can do it directly in your Doctrine_Records
or you can specify them in your YAML schema if you are managing your
models with YAML.</p>
<p>In the next several examples we will demonstrate some of the behaviors
that come bundled with Doctrine.</p>
<a id="behaviors-core-behaviors-versionable"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="versionable" name="versionable"></a><h3 class="section-header"><a href="#versionable">Versionable<i class="fas fa-link"></i></a></h3>
<p>Lets create a <code>BlogPost</code> model that we want to have the ability to
have versions:</p>
<div class="console"><pre><code class="console">// models/BlogPost.php
class BlogPost extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('title', 'string', 255);
        $this->hasColumn('body', 'clob');
    }

    public function setUp()
    {
        $this->actAs('Versionable', array(
                'versionColumn' => 'version',
                'className' => '%CLASS%Version',
                'auditLog' => true
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d8c64de1debc79198a2b6d5a80615b9d42c3ed4c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d8c64de1debc79198a2b6d5a80615b9d42c3ed4c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-1" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">---</span>
<span class="hljs-attr">BlogPost:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">Versionable:</span>
      <span class="hljs-attr">versionColumn:</span> <span class="hljs-string">version</span>
      <span class="hljs-attr">className:</span> <span class="hljs-string">%CLASS%Version</span>
      <span class="hljs-attr">auditLog:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">clob</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-2" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-3" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-4" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-5" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-6" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-7" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-8" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-9" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-10" class="line-number-anchor" /><a href="#line-number-d8c64de1debc79198a2b6d5a80615b9d42c3ed4c-10">10</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The <code>auditLog</code> option can be used to turn off the audit
log history. This is when you want to maintain a version number but
not maintain the data at each version.</p>
</td></tr></table></div>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('BlogPost'));
echo $sql[0] . "\n";
echo $sql[1];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE blog_post_version (id BIGINT,
title VARCHAR(255),
body LONGTEXT,
version BIGINT,
PRIMARY KEY(id,
version)) ENGINE = INNODB
CREATE TABLE blog_post (id BIGINT AUTO_INCREMENT,
title VARCHAR(255),
body LONGTEXT,
version BIGINT,
PRIMARY KEY(id)) ENGINE = INNODB
ALTER TABLE blog_post_version ADD FOREIGN KEY (id) REFERENCES blog_post(id) ON UPDATE CASCADE ON DELETE CASCADE</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how we have 2 additional statements we probably
didn't expect to see. The behavior automatically created a
<code>blog_post_version</code> table and related it to <code>blog_post</code>.</p>
</td></tr></table></div>
<p>Now when we insert or update a <code>BlogPost</code> the version table will store
all the old versions of the record and allow you to revert back at
anytime. When you instantiate a <code>BlogPost</code> for the first time this is
what is happening internally:</p>
<ul><li class="dash"> It creates a class called <code>BlogPostVersion</code> on-the-fly, the table
   this record is pointing at is <code>blog_post_version</code></li>
<li class="dash"> Everytime a <code>BlogPost</code> object is deleted / updated the previous
   version is stored into <code>blog_post_version</code></li>
<li class="dash"> Everytime a <code>BlogPost</code> object is updated its version number is
   increased.</li>
</ul>

<p>Now lets play around with the <code>BlogPost</code> model:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>blogPost        = new BlogPost();
<span class="noselect">$ </span>blogPost->title = 'Test blog post';
<span class="noselect">$ </span>blogPost->body  = 'test';
<span class="noselect">$ </span>blogPost->save();

<span class="noselect">$ </span>blogPost->title = 'Modified blog post title';
<span class="noselect">$ </span>blogPost->save();

print_r($blogPost->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [title] => Modified blog post title
    [body] => test
    [version] => 2
)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the value of the <code>version</code> column is <code>2</code>.
This is because we have saved 2 versions of the <code>BlogPost</code> model.
We can easily revert to another version by using the <code>revert()</code>
method that the behavior includes.</p>
</td></tr></table></div>
<p>Lets revert back to the first version:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>blogPost->revert(1);
print_r($blogPost->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 2
    [title] => Test blog post
    [body] => test
    [version] => 1
)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the value of the <code>version</code> column is set to 1
and the <code>title</code> is back to the original value was set it to when
creating the <code>BlogPost</code>.</p>
</td></tr></table></div>
<a id="behaviors-core-behaviors-timestampable"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="timestampable" name="timestampable"></a><h3 class="section-header"><a href="#timestampable">Timestampable<i class="fas fa-link"></i></a></h3>
<p>The Timestampable behavior will automatically add a <code>created_at</code> and
<code>updated_at</code> column and automatically set the values when a record is
inserted and updated.</p>
<p>Since it is common to want to know the date a post is made lets expand
our <code>BlogPost</code> model and add the <code>Timestampable</code> behavior to
automatically set these dates for us.</p>
<div class="console"><pre><code class="console">// models/BlogPost.php
class BlogPost extends Doctrine_Record
{
    // ...
    public function setUp()
    {
        $this->actAs('Timestampable');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="9b51e22b3bca53f1cdc8914ad16f7500bcb0311d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="9b51e22b3bca53f1cdc8914ad16f7500bcb0311d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-1" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-1">1</a></td><td class="code-line" rowspan="9"><span class="hljs-meta">---</span>
<span class="hljs-comment"># schema.yml</span>

<span class="hljs-comment"># ...</span>
<span class="hljs-attr">BlogPost:</span>
  <span class="hljs-attr">actAs:</span>
<span class="hljs-comment"># ...</span>
    <span class="hljs-attr">Timestampable:</span>
<span class="hljs-comment"># ...</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-2" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-3" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-4" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-5" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-6" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-7" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-8" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-9" class="line-number-anchor" /><a href="#line-number-9b51e22b3bca53f1cdc8914ad16f7500bcb0311d-9">9</a></td></tr></table></div></code></pre>
<p>If you are only interested in using only one of the columns, such as a
<code>created_at</code> timestamp, but not a an <code>updated_at</code> field, set the
<code>disabled</code> to true for either of the fields as in the example below.</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="80ac87f1d38fd8282e9a0992d02a4f69c50e71f6"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="80ac87f1d38fd8282e9a0992d02a4f69c50e71f6"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-1" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">---</span>
<span class="hljs-attr">BlogPost:</span>
  <span class="hljs-attr">actAs:</span>
<span class="hljs-comment"># ...</span>
    <span class="hljs-attr">Timestampable:</span>
      <span class="hljs-attr">created:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">created_at</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">timestamp</span>
        <span class="hljs-attr">format:</span> <span class="hljs-string">Y-m-d</span> <span class="hljs-string">H:i:s</span>
      <span class="hljs-attr">updated:</span>
        <span class="hljs-attr">disabled:</span> <span class="hljs-literal">true</span>
<span class="hljs-comment"># ...</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-2" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-3" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-4" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-5" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-6" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-7" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-8" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-9" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-10" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-11" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-12" class="line-number-anchor" /><a href="#line-number-80ac87f1d38fd8282e9a0992d02a4f69c50e71f6-12">12</a></td></tr></table></div></code></pre>
<p>Now look what happens when we create a new post:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>blogPost        = new BlogPost();
<span class="noselect">$ </span>blogPost->title = 'Test blog post';
<span class="noselect">$ </span>blogPost->body  = 'test';
<span class="noselect">$ </span>blogPost->save();

print_r($blogPost->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [title] => Test blog post
    [body] => test
    [version] => 1
    [created_at] => 2009-01-21 17:54:23
    [updated_at] => 2009-01-21 17:54:23
)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Look how the <code>created_at</code> and <code>updated_at</code> values
were automatically set for you!</p>
</td></tr></table></div>
<p>Here is a list of all the options you can use with the <code>Timestampable</code>
behavior on the created side of the behavior:</p>
<table>
            <thead>
            <tr>
                                    <th>Name</th>
                                    <th>Default</th>
                                    <th>Description</th>
                            </tr>
        </thead>
    
    <tbody>
                    <tr>
                                    <td><code>name</code></td>
                                    <td><code>created_at</code></td>
                                    <td>The name of the column.</td>
                            </tr>
                    <tr>
                                    <td><code>type</code></td>
                                    <td><code>timestamp</code></td>
                                    <td>The column type.</td>
                            </tr>
                    <tr>
                                    <td><code>options</code></td>
                                    <td><code>array()</code></td>
                                    <td>Any additional options for the column.</td>
                            </tr>
                    <tr>
                                    <td><code>format</code></td>
                                    <td><code>Y-m-d H:i:s</code></td>
                                    <td>The format of the timestamp if you don't use the timestamp column type. The date is built using PHP's <a href="http://www.php.net/date">date()</a> function.</td>
                            </tr>
                    <tr>
                                    <td><code>disabled</code></td>
                                    <td><code>false</code></td>
                                    <td>Whether or not to disable the created date.</td>
                            </tr>
                    <tr>
                                    <td><code>expression</code></td>
                                    <td><code>NOW()</code></td>
                                    <td>Expression to use to set the column value.</td>
                            </tr>
            </tbody>
</table>
<p>Here is a list of all the options you can use with the <code>Timestampable</code>
behavior on the updated side of the behavior that are not possible on
the created side:</p>
<table>
            <thead>
            <tr>
                                    <th>Name</th>
                                    <th>Default</th>
                                    <th>Description</th>
                            </tr>
        </thead>
    
    <tbody>
                    <tr>
                                    <td><code>onInsert</code></td>
                                    <td><code>true</code></td>
                                    <td>Whether or not to set the updated date when the record is first inserted.</td>
                            </tr>
            </tbody>
</table>
<a id="behaviors-core-behaviors-sluggable"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="sluggable" name="sluggable"></a><h3 class="section-header"><a href="#sluggable">Sluggable<i class="fas fa-link"></i></a></h3>
<p>The <code>Sluggable</code> behavior is a nice piece of functionality that will
automatically add a column to your model for storing a unique human
readable identifier that can be created from columns like title,
subject, etc. These values can be used for search engine friendly urls.</p>
<p>Lets expand our <code>BlogPost</code> model to use the <code>Sluggable</code> behavior
because we will want to have nice URLs for our posts:</p>
<div class="console"><pre><code class="console">// models/BlogPost.php
class BlogPost extends Doctrine_Record
{
    // ...
    public function setUp()
    {
        // ...
        $this->actAs('Sluggable', array(
                'unique'    => true,
                'fields'    => array('title'),
                'canUpdate' => true
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="87df57fa32bd087f7f422b19776cb831db8d476b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="87df57fa32bd087f7f422b19776cb831db8d476b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-1" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">---</span>
<span class="hljs-comment"># schema.yml</span>

<span class="hljs-comment"># ...</span>
<span class="hljs-attr">BlogPost:</span>
  <span class="hljs-attr">actAs:</span>
<span class="hljs-comment"># ...</span>
    <span class="hljs-attr">Sluggable:</span>
      <span class="hljs-attr">unique:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">fields:</span> <span class="hljs-string">[title]</span>
      <span class="hljs-attr">canUpdate:</span> <span class="hljs-literal">true</span>
<span class="hljs-comment"># ...</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-2" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-3" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-4" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-5" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-6" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-7" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-8" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-9" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-10" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-11" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-87df57fa32bd087f7f422b19776cb831db8d476b-12" class="line-number-anchor" /><a href="#line-number-87df57fa32bd087f7f422b19776cb831db8d476b-12">12</a></td></tr></table></div></code></pre>
<p>Now look what happens when we create a new post. The slug column will
automatically be set for us:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>blogPost        = new BlogPost();
<span class="noselect">$ </span>blogPost->title = 'Test blog post';
<span class="noselect">$ </span>blogPost->body  = 'test';
<span class="noselect">$ </span>blogPost->save();

print_r($blogPost->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [title] => Test blog post
    [body] => test
    [version] => 1
    [created_at] => 2009-01-21 17:57:05
    [updated_at] => 2009-01-21 17:57:05
    [slug] => test-blog-post
)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the value of the <code>slug</code> column was
automatically set based on the value of the <code>title</code> column. When a
slug is created, by default it is <code>urlized</code> which means all
non-url-friendly characters are removed and white space is replaced
with hyphens(-).</p>
</td></tr></table></div>
<p>The unique flag will enforce that the slug created is unique. If it is
not unique an auto incremented integer will be appended to the slug
before saving to database.</p>
<p>The <code>canUpdate</code> flag will allow the users to manually set the slug
value to be used when building the url friendly slug.</p>
<p>Here is a list of all the options you can use on the <code>Sluggable</code>
behavior:</p>
<table>
            <thead>
            <tr>
                                    <th>Name</th>
                                    <th>Default</th>
                                    <th>Description</th>
                            </tr>
        </thead>
    
    <tbody>
                    <tr>
                                    <td><code>name</code></td>
                                    <td><code>slug</code></td>
                                    <td>The name of the slug column.</td>
                            </tr>
                    <tr>
                                    <td><code>alias</code></td>
                                    <td><code>null</code></td>
                                    <td>The alias of the slug column.</td>
                            </tr>
                    <tr>
                                    <td><code>type</code></td>
                                    <td><code>string</code></td>
                                    <td>The type of the slug column.</td>
                            </tr>
                    <tr>
                                    <td><code>length</code></td>
                                    <td><code>255</code></td>
                                    <td>The length of the slug column.</td>
                            </tr>
                    <tr>
                                    <td><code>unique</code></td>
                                    <td><code>true</code></td>
                                    <td>Whether or not unique slug values are enforced.</td>
                            </tr>
                    <tr>
                                    <td><code>options</code></td>
                                    <td><code>array()</code></td>
                                    <td>Any other options for the slug column.</td>
                            </tr>
                    <tr>
                                    <td><code>fields</code></td>
                                    <td><code>array()</code></td>
                                    <td>The fields that are used to build slug value.</td>
                            </tr>
                    <tr>
                                    <td><code>uniqueBy</code></td>
                                    <td><code>array()</code></td>
                                    <td>The fields that make determine a unique slug.</td>
                            </tr>
                    <tr>
                                    <td><code>uniqueIndex</code></td>
                                    <td><code>true</code></td>
                                    <td>Whether or not to create a unique index.</td>
                            </tr>
                    <tr>
                                    <td><code>canUpdate</code></td>
                                    <td><code>false</code></td>
                                    <td>Whether or not the slug can be updated.</td>
                            </tr>
                    <tr>
                                    <td><code>builder</code></td>
                                    <td><code>array('Doctrine_Inflector', 'urlize')</code></td>
                                    <td>The <code>Class::method()</code> used to build the slug.</td>
                            </tr>
                    <tr>
                                    <td><code>indexName</code></td>
                                    <td><code>sluggable</code></td>
                                    <td>The name of the index to create.</td>
                            </tr>
            </tbody>
</table>
<a id="behaviors-core-behaviors-i18n"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="i18n" name="i18n"></a><h3 class="section-header"><a href="#i18n">I18n<i class="fas fa-link"></i></a></h3>
<p>Doctrine_I18n package is a behavior for Doctrine that provides
internationalization support for record classes. In the following
example we have a <code>NewsItem</code> class with two fields <code>title</code> and
<code>content</code>. We want to have the field <code>title</code> with different
languages support. This can be achieved as follows:</p>
<div class="console"><pre><code class="console">class NewsItem extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('title', 'string', 255);
        $this->hasColumn('body', 'blog');
    }

    public function setUp()
    {
        $this->actAs('I18n', array(
                'fields' => array('title', 'body')
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="8f58d7c22a50928cc16e91a7e06678b769991b39"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="8f58d7c22a50928cc16e91a7e06678b769991b39"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-1" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">---</span>
<span class="hljs-attr">NewsItem:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">I18n:</span>
      <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">body]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">clob</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-2" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-3" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-4" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-5" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-6" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-7" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-8" class="line-number-anchor" /><a href="#line-number-8f58d7c22a50928cc16e91a7e06678b769991b39-8">8</a></td></tr></table></div></code></pre>
<p>Below is a list of all the options you can use with the <code>I18n</code>
behavior:</p>
<table>
            <thead>
            <tr>
                                    <th>Name</th>
                                    <th>Default</th>
                                    <th>Description</th>
                            </tr>
        </thead>
    
    <tbody>
                    <tr>
                                    <td><code>className</code></td>
                                    <td><code>%CLASS%Translation</code></td>
                                    <td>The name pattern to use for generated class.</td>
                            </tr>
                    <tr>
                                    <td><code>fields</code></td>
                                    <td><code>array()</code></td>
                                    <td>The fields to internationalize.</td>
                            </tr>
                    <tr>
                                    <td><code>type</code></td>
                                    <td><code>string</code></td>
                                    <td>The type of <code>lang</code> column.</td>
                            </tr>
                    <tr>
                                    <td><code>length</code></td>
                                    <td><code>2</code></td>
                                    <td>The length of the <code>lang</code> column.</td>
                            </tr>
                    <tr>
                                    <td><code>options</code></td>
                                    <td><code>array()</code></td>
                                    <td>Other options for the <code>lang</code> column.</td>
                            </tr>
            </tbody>
</table>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('NewsItem'));
echo $sql[0] . "";
echo $sql[1];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE news_item_translation (id BIGINT,
title VARCHAR(255),
body LONGTEXT,
lang CHAR(2),
PRIMARY KEY(id,
lang)) ENGINE = INNODB
CREATE TABLE news_item (id BIGINT AUTO_INCREMENT,
PRIMARY KEY(id)) ENGINE = INNODB</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the field <code>title</code> is not present in the
<code>news_item</code> table. Since its present in the translation table it
would be a waste of resources to have that same field in the main
table. Basically Doctrine always automatically removes all
translated fields from the main table.</p>
</td></tr></table></div>
<p>Now the first time you initialize a new <code>NewsItem</code> record Doctrine
initializes the behavior that builds the followings things:</p>
<ol><li>Record class called <code>NewsItemTranslation</code></li>
<li>Bi-directional relations between <code>NewsItemTranslation</code> and
   <code>NewsItem</code></li>
</ol>

<p>Lets take a look at how we can manipulate the translations of the
<code>NewsItem</code>:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>newsItem = new NewsItem();
<span class="noselect">$ </span>newsItem->Translation['en']->title = 'some title';
<span class="noselect">$ </span>newsItem->Translation['en']->body  = 'test';
<span class="noselect">$ </span>newsItem->Translation['fi']->title = 'joku otsikko';
<span class="noselect">$ </span>newsItem->Translation['fi']->body  = 'test'; $newsItem->save();

print_r($newsItem->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [id] => 1
    [Translation] => Array
        (
            [en] => Array
                (
                    [id] => 1
                    [title] => some title
                    [body] => test
                    [lang] => en
                )
            [fi] => Array
                (
                    [id] => 1
                    [title] => joku otsikko
                    [body] => test
                    [lang] => fi
                )
        )
)</code></pre></div>
<p>How do we retrieve the translated data now? This is easy! Lets find all
items and their Finnish translations:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>newsItems = Doctrine_Query::create()
    ->from('NewsItem n')
    ->leftJoin('n.Translation t')
    ->where('t.lang = ?')
    ->execute(array('fi'));

echo $newsItems[0]->Translation['fi']->title;</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
joku otsikko</code></pre></div>
<a id="behaviors-core-behaviors-nestedset"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="nestedset" name="nestedset"></a><h3 class="section-header"><a href="#nestedset">NestedSet<i class="fas fa-link"></i></a></h3>
<p>The <code>NestedSet</code> behavior allows you to turn your models in to a nested
set tree structure where the entire tree structure can be retrieved in
one efficient query. It also provided a nice interface for manipulating
the data in your trees.</p>
<p>Lets take a <code>Category</code> model for example where the categories need to
be organized in a hierarchical tree structure:</p>
<div class="console"><pre><code class="console">// models/Category.php
class Category extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('name', 'string', 255);
    }

    public function setUp()
    {
        $this->actAs('NestedSet', array(
                'hasManyRoots' => true,
                'rootColumnName' => 'root_id'
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-1" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">---</span>
<span class="hljs-comment"># schema.yml</span>

<span class="hljs-comment"># ...</span>
<span class="hljs-attr">Category:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">NestedSet:</span>
      <span class="hljs-attr">hasManyRoots:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">rootColumnName:</span> <span class="hljs-string">root_id</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">string(255)</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-2" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-3" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-4" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-5" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-6" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-7" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-8" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-9" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-10" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-11" class="line-number-anchor" /><a href="#line-number-57d79c4f9ed3ee55ead2517ec0f45852dbdbc1bf-11">11</a></td></tr></table></div></code></pre>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('Category'));
echo $sql[0];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE category (id BIGINT AUTO_INCREMENT,
name VARCHAR(255),
root_id INT,
lft INT,
rgt INT,
level SMALLINT,
PRIMARY KEY(id)) ENGINE = INNODB</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the <code>root_id</code>, <code>lft</code>, <code>rgt</code> and <code>level</code>
columns are automatically added. These columns are used to organize
the tree structure and are handled automatically for you internally.</p>
</td></tr></table></div>
<p>We won't discuss the <code>NestedSet</code> behavior in 100% detail here. It is a
very large behavior so it has its own <a href="hierarchical-data.html">Hierarchical Data</a>.</p>
<a id="behaviors-core-behaviors-searchable"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="searchable" name="searchable"></a><h3 class="section-header"><a href="#searchable">Searchable<i class="fas fa-link"></i></a></h3>
<p>The <code>Searchable</code> behavior is a fulltext indexing and searching tool.
It can be used for indexing and searching both database and files.</p>
<p>Imagine we have a <code>Job</code> model for job postings and we want it to be
easily searchable:</p>
<div class="console"><pre><code class="console">// models/Job.php
class Job extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('title', 'string', 255);
        $this->hasColumn('description', 'clob');
    }

    public function setUp()
    {
        $this->actAs('Searchable', array(
                'fields' => array('title', 'content')
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a1123b038df2d82db023b507e8e3b2300fe16be1"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a1123b038df2d82db023b507e8e3b2300fe16be1"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-1" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">---</span>
<span class="hljs-attr">Job:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">Searchable:</span>
      <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">description]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">clob</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-2" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-3" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-4" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-5" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-6" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-7" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-8" class="line-number-anchor" /><a href="#line-number-a1123b038df2d82db023b507e8e3b2300fe16be1-8">8</a></td></tr></table></div></code></pre>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('Job'));
echo $sql[0] . "";
echo $sql[1] . "";
echo $sql[2];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE job_index (id BIGINT,
keyword VARCHAR(200),
field VARCHAR(50),
position BIGINT,
PRIMARY KEY(id,
keyword,
field,
position)) ENGINE = INNODB
CREATE TABLE job (id BIGINT AUTO_INCREMENT,
title VARCHAR(255),
description LONGTEXT,
PRIMARY KEY(id)) ENGINE = INNODB
ALTER TABLE job_index ADD FOREIGN KEY (id) REFERENCES job(id) ON UPDATE CASCADE ON DELETE CASCADE</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the <code>job_index</code> table is automatically
created for you and a foreign key between <code>job</code> and <code>job_index</code>
was automatically created.</p>
</td></tr></table></div>
<p>Because the <code>Searchable</code> behavior is such a large topic, we have more
information on this that can be found in the <a href="searching.html">Searching</a>
chapter.</p>
<a id="behaviors-core-behaviors-geographical"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="geographical" name="geographical"></a><h3 class="section-header"><a href="#geographical">Geographical<i class="fas fa-link"></i></a></h3>
<p>The below is only a demo. The Geographical behavior can be used with any
data record for determining the number of miles or kilometers between 2
records.</p>
<div class="console"><pre><code class="console">// models/Zipcode.php
class Zipcode extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('zipcode', 'string', 255);
        $this->hasColumn('city', 'string', 255);
        $this->hasColumn('state', 'string', 2);
        $this->hasColumn('county', 'string', 255);
        $this->hasColumn('zip_class', 'string', 255);
    }

    public function setUp()
    {
        $this->actAs('Geographical');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b6a9d1c17579f28a75e3bd4c17c610202f91bc74"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b6a9d1c17579f28a75e3bd4c17c610202f91bc74"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-1" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-meta">---</span>
<span class="hljs-comment"># schema.yml</span>

<span class="hljs-comment"># ...</span>
<span class="hljs-attr">Zipcode:</span>
  <span class="hljs-attr">actAs:</span> <span class="hljs-string">[Geographical]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">zipcode:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">city:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">state:</span> <span class="hljs-string">string(2)</span>
    <span class="hljs-attr">county:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">zip_class:</span> <span class="hljs-string">string(255)</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-2" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-3" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-4" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-5" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-6" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-7" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-8" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-9" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-10" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-11" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-12" class="line-number-anchor" /><a href="#line-number-b6a9d1c17579f28a75e3bd4c17c610202f91bc74-12">12</a></td></tr></table></div></code></pre>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('Zipcode'));
echo $sql[0];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE zipcode (id BIGINT AUTO_INCREMENT,
zipcode VARCHAR(255),
city VARCHAR(255),
state VARCHAR(2),
county VARCHAR(255),
zip_class VARCHAR(255),
latitude DOUBLE,
longitude DOUBLE,
PRIMARY KEY(id)) ENGINE = INNODB</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the Geographical behavior automatically adds the
<code>latitude</code> and <code>longitude</code> columns to the records used for
calculating distance between two records. Below you will find some
example usage.</p>
</td></tr></table></div>
<p>First lets retrieve two different zipcode records:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>zipcode1 = Doctrine_Core::getTable('Zipcode')->findOneByZipcode('37209');
<span class="noselect">$ </span>zipcode2 = Doctrine_Core::getTable('Zipcode')->findOneByZipcode('37388');</code></pre></div>
<p>Now we can get the distance between those two records by using the
<code>getDistance()</code> method that the behavior provides:</p>
<div class="console"><pre><code class="console">// test.php

// ...
echo $zipcode1->getDistance($zipcode2, $kilometers = false);</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The 2nd argument of the <code>getDistance()</code> method is whether
or not to return the distance in kilometers. The default is false.</p>
</td></tr></table></div>
<p>Now lets get the 50 closest zipcodes that are not in the same city:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>q = $zipcode1->getDistanceQuery();

<span class="noselect">$ </span>q->orderby('miles asc')
    ->addWhere($q->getRootAlias() . '.city != ?', $zipcode1->city)
    ->limit(50);

echo $q->getSqlQuery();</code></pre></div>
<p>The above call to <code>getSql()</code> would output the following SQL query:</p>
<div class="console"><pre><code class="console">SELECT
z.id AS z**id,
z.zipcode AS z**zipcode,
z.city AS z**city,
z.state AS z**state,
z.county AS z**county,
z.zip_class AS z**zip_class,
z.latitude AS z**latitude,
z.longitude AS z**longitude,
((ACOS(SIN(* PI() / 180) * SIN(z.latitude * PI() / 180) + COS(* PI() / 180) * COS(z.latitude * PI() / 180) * COS((- z.longitude) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS z**0,
((ACOS(SIN(* PI() / 180) * SIN(z.latitude * PI() / 180) + COS(* PI() / 180) * COS(z.latitude * PI() / 180) * COS((- z.longitude) * PI() / 180)) * 180 / PI()) * 60 * 1.1515 * 1.609344) AS z**1
FROM zipcode z
WHERE z.city != ?
ORDER BY z__0 asc
LIMIT 50</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the above SQL query includes a bunch of SQL that
we did not write. This was automatically added by the behavior to
calculate the number of miles between records.</p>
</td></tr></table></div>
<p>Now we can execute the query and use the calculated number of miles
values:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>result = $q->execute();

foreach ($result as $zipcode) {
    echo $zipcode->city . " - " . $zipcode->miles . "";
    // You could also access $zipcode->kilometers
}</code></pre></div>
<p>Get some sample zip code data to test this</p>
<p><a href="http://www.populardata.com/zip_codes.zip">http://www.populardata.com/zip_codes.zip</a></p>
<p>Download and import the csv file with the following function:</p>
<div class="console"><pre><code class="console">// test.php

// ...
function parseCsvFile($file, $columnheadings = false, $delimiter = ',', $enclosure = "\"")
{
    $row    = 1;
    $rows   = array();
    $handle = fopen($file, 'r');

    while (($data = fgetcsv($handle, 1000, $delimiter, $enclosure)) !== FALSE) {

        if (!($columnheadings == false) && ($row == 1)) {
            $headingTexts = $data;
        } elseif (!($columnheadings == false)) {
            foreach ($data as $key => $value) {
                unset($data[$key]);
                $data[$headingTexts[$key]] = $value;
            }
            $rows[] = $data;
        } else {
            $rows[] = $data;
        }
        $row++;
    }

    fclose($handle);
    return $rows;
}

<span class="noselect">$ </span>array = parseCsvFile('zipcodes.csv', false);

foreach ($array as $key => $value) {
    $zipcode = new Zipcode();
    $zipcode->fromArray($value);
    $zipcode->save();
}</code></pre></div>
<a id="behaviors-core-behaviors-softdelete"></a>
<hr />
</div>
<div class="section"><a class="section-anchor" id="softdelete" name="softdelete"></a><h3 class="section-header"><a href="#softdelete">SoftDelete<i class="fas fa-link"></i></a></h3>
<p>The <code>SoftDelete</code> behavior is a very simple yet highly desired model
behavior which overrides the <code>delete()</code> functionality and adds a
<code>deleted_at</code> column. When <code>delete()</code> is called, instead of deleting
the record from the database, a delete_at date is set. Below is an
example of how to create a model with the <code>SoftDelete</code> behavior being
used.</p>
<div class="console"><pre><code class="console">// models/SoftDeleteTest.php
class SoftDeleteTest extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('name', 'string', null, array(
                'primary' => true
            )
        );
    }

    public function setUp()
    {
        $this->actAs('SoftDelete');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="78fc14798733c192b37081fd5fa6e3db3b34f97a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="78fc14798733c192b37081fd5fa6e3db3b34f97a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-1" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-meta">---</span>
<span class="hljs-comment"># schema.yml</span>

<span class="hljs-comment"># ...</span>
<span class="hljs-attr">SoftDeleteTest:</span>
  <span class="hljs-attr">actAs:</span> <span class="hljs-string">[SoftDelete]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">name:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string(255)</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-literal">true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-2" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-3" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-4" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-5" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-6" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-7" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-8" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-9" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-10" class="line-number-anchor" /><a href="#line-number-78fc14798733c192b37081fd5fa6e3db3b34f97a-10">10</a></td></tr></table></div></code></pre>
<p>Lets check the SQL that is generated by the above models:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>sql = Doctrine_Core::generateSqlFromArray(array('SoftDeleteTest'));
echo $sql[0];</code></pre></div>
<p>The above code would output the following SQL query:</p>
<div class="console"><pre><code class="console">CREATE TABLE soft_delete_test (name VARCHAR(255),
deleted_at DATETIME DEFAULT NULL,
PRIMARY KEY(name)) ENGINE = INNODB</code></pre></div>
<p>Now lets put the behavior in action.</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>You are required to enable DQL callbacks in order for all
executed queries to have the dql callbacks executed on them. In the
SoftDelete behavior they are used to filter the select statements to
exclude all records where the deleted\_at flag is set with an
additional WHERE condition.</p>
</td></tr></table></div>
<p><strong>Enable DQL Callbacks</strong></p>
<div class="console"><pre><code class="console">// bootstrap.php

// ...
<span class="noselect">$ </span>manager->setAttribute(Doctrine_Core::ATTR_USE_DQL_CALLBACKS, true);</code></pre></div>
<p>Now save a new record so we can test the <code>SoftDelete</code> functionality:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>record       = new SoftDeleteTest();
<span class="noselect">$ </span>record->name = 'new record';
<span class="noselect">$ </span>record->save();</code></pre></div>
<p>Now when we call <code>delete()</code> the <code>deleted_at</code> flag will be set to
true:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>record->delete();

print_r($record->toArray());</code></pre></div>
<p>The above example would produce the following output:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php test.php
Array
(
    [name] => new record
    [deleted_at] => 2009-09-01 00:59:01
)</code></pre></div>
<p>Also, when we select some data the query is modified for you:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>q = Doctrine_Query::create()
    ->from('SoftDeleteTest t');

echo $q->getSqlQuery();</code></pre></div>
<p>The above call to <code>getSql()</code> would output the following SQL query:</p>
<div class="console"><pre><code class="console">SELECT
s.name AS s**name,
s.deleted_at AS s**deleted_at
FROM soft_delete_test s
WHERE (s.deleted_at IS NULL)</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Notice how the where condition is automatically added to
only return the records that have not been deleted.</p>
</td></tr></table></div>
<p>Now if we execute the query:</p>
<div class="console"><pre><code class="console">// test.php

// ...
<span class="noselect">$ </span>count = $q->count();
echo $count;</code></pre></div>
<p>The above would be echo 0 because it would exclude the record saved
above because the delete flag was set.</p>
<hr />
</div>
</div>
</div>
<div class="section"><a class="section-anchor" id="nesting-behaviors" name="nesting-behaviors"></a><h2 class="section-header"><a href="#nesting-behaviors">Nesting Behaviors<i class="fas fa-link"></i></a></h2>
<p>Below is an example of several behaviors to give a complete wiki
database that is versionable, searchable, sluggable, and full I18n.</p>
<div class="console"><pre><code class="console">class Wiki extends Doctrine_Record
{
    public function setTableDefinition()
    {
        $this->hasColumn('title', 'string', 255);
        $this->hasColumn('content', 'string');
    }

    public function setUp()
    {
        $options  = array('fields' => array('title', 'content'));
        $auditLog = new Doctrine_Template_Versionable($options);
        $search   = new Doctrine_Template_Searchable($options);
        $slug     = new Doctrine_Template_Sluggable(array(
                'fields' => array('title')
            )
        );
        $i18n = new Doctrine_Template_I18n($options);

        $i18n->addChild($auditLog)
            ->addChild($search)
            ->addChild($slug);

        $this->actAs($i18n);

        $this->actAs('Timestampable');
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="80af68b28121c1a616f1da21eec3bcebd99ded7f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="80af68b28121c1a616f1da21eec3bcebd99ded7f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-1" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-meta">---</span>
<span class="hljs-attr">WikiTest:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">I18n:</span>
      <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">content]</span>
      <span class="hljs-attr">actAs:</span>
        <span class="hljs-attr">Versionable:</span>
          <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">content]</span>
        <span class="hljs-attr">Searchable:</span>
          <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">content]</span>
        <span class="hljs-attr">Sluggable:</span>
          <span class="hljs-attr">fields:</span> <span class="hljs-string">[title]</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">content:</span> <span class="hljs-string">string</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-2" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-3" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-4" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-5" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-6" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-7" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-8" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-9" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-10" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-11" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-12" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-13" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-14" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-15" class="line-number-anchor" /><a href="#line-number-80af68b28121c1a616f1da21eec3bcebd99ded7f-15">15</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The above example of nesting behaviors is currently broken
in Doctrine. We are working furiously to come up with a backwards
compatible fix. We will announce when the fix is ready and update
the documentation accordingly.</p>
</td></tr></table></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="generating-files" name="generating-files"></a><h2 class="section-header"><a href="#generating-files">Generating Files<i class="fas fa-link"></i></a></h2>
<p>By default with behaviors the classes which are generated are evaluated
at run-time and no files containing the classes are ever written to
disk. This can be changed with a configuration option. Below is an
example of how to configure the I18n behavior to generate the classes
and write them to files instead of evaluating them at run-time.</p>
<div class="console"><pre><code class="console">class NewsArticle extends Doctrine_Record
{
    public function setTableDefinition() {
        $this->hasColumn('title', 'string', 255);
        $this->hasColumn('body', 'string', 255); $this->hasColumn('author', 'string', 255);
    }

    public function setUp()
    {
        $this->actAs('I18n', array(
                'fields'          => array('title', 'body'),
                'generateFiles'   => true,
                'generatePath'    => '/path/to/generate'
            )
        );
    }
}</code></pre></div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="dfd654f3293ce3e238b5b117ccfab32a2da45d2a"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="dfd654f3293ce3e238b5b117ccfab32a2da45d2a"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-1" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-meta">---</span>
<span class="hljs-attr">NewsArticle:</span>
  <span class="hljs-attr">actAs:</span>
    <span class="hljs-attr">I18n:</span>
      <span class="hljs-attr">fields:</span> <span class="hljs-string">[title,</span> <span class="hljs-string">body]</span>
      <span class="hljs-attr">generateFiles:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">generatePath:</span> <span class="hljs-string">/path/to/generate</span>
  <span class="hljs-attr">columns:</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">body:</span> <span class="hljs-string">string(255)</span>
    <span class="hljs-attr">author:</span> <span class="hljs-string">string(255)</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-2" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-3" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-4" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-5" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-6" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-7" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-8" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-9" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-10" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-11" class="line-number-anchor" /><a href="#line-number-dfd654f3293ce3e238b5b117ccfab32a2da45d2a-11">11</a></td></tr></table></div></code></pre>
<p>Now the behavior will generate a file instead of generating the code and
using <a href="http://www.php.net/eval">eval()</a> to evaluate it at runtime.</p>
<hr />
</div>
<div class="section"><a class="section-anchor" id="querying-generated-classes" name="querying-generated-classes"></a><h2 class="section-header"><a href="#querying-generated-classes">Querying Generated Classes<i class="fas fa-link"></i></a></h2>
<p>If you want to query the auto generated models you will need to make
sure the model with the behavior attached is loaded and initialized. You
can do this by using the static <code>Doctrine_Core::initializeModels()</code>
method.</p>
<p>For example if you want to query the translation table for a
<code>BlogPost</code> model you will need to run the following code:</p>
<div class="console"><pre><code class="console">Doctrine_Core::initializeModels(array('BlogPost'));

<span class="noselect">$ </span>q = Doctrine_Query::create()
    ->from('BlogPostTranslation t')
    ->where('t.id = ? AND t.lang = ?', array(1, 'en'));

<span class="noselect">$ </span>translations = $q->execute();</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>This is required because the behaviors are not instantiated
until the model is instantiated for the first time. The above
<code>initializeModels()</code> method instantiates the passed models and
makes sure the information is properly loaded in to the array of
loaded models.</p>
</td></tr></table></div>
<hr />
</div>
<div class="section"><a class="section-anchor" id="conclusion" name="conclusion"></a><h2 class="section-header"><a href="#conclusion">Conclusion<i class="fas fa-link"></i></a></h2>
<p>By now we should know a lot about Doctrine behaviors. We should know how
to write our own for our models as well as how to use all the great
behaviors that come bundled with Doctrine.</p>
<p>Now we are ready to move on to discuss the <a href="searching.html">Searching</a>
behavior in more detail in the <a href="searching.html">Searching</a> chapter. As it is a
large topic we have devoted an entire chapter to it.</p>

</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?5b3818"
                            integrity="sha384-fyrn6RNWHQbvjdZgboYZiPqKrNVycvMxvrO82FIf25RgB+5BeS7O7XJQuvJOJH3O"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine1 master'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
