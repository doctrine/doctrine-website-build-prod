<!DOCTYPE html>
<html>
    <head>
        <title>Component Overview - Doctrine1 ORM (Doctrine1)</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
">

        <meta name="keywords" content="php,doctrine1,orm">

                    <meta name="robots" content="index, follow">
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/component-overview.html" />
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://www.doctrine-project.org/css/style.css?3625e4" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://www.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/component-overview.html" />
        <meta property="og:title" content="Component Overview - Doctrine1 ORM (Doctrine1)" />
        <meta property="og:description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Component Overview",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://www.doctrine-project.org/"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/projects.html" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://www.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <div class="container-wrapper container-fluid">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="about-author-html-title-1" class="toc-item"><a href="about-author.html#title.1">About the Author</a></li><li id="about-sensio-html-title-1" class="toc-item"><a href="about-sensio.html#title.1">About Sensio</a></li><li id="acknowledgements-html-title-1" class="toc-item"><a href="acknowledgements.html#title.1">Acknowledgements and Contributors</a></li><ul><li id="acknowledgements-html-title-1-1" class="toc-item"><a href="acknowledgements.html#title.1.1">Contributors</a></li><ul><li id="acknowledgements-html-title-1-1-1" class="toc-item"><a href="acknowledgements.html#title.1.1.1">Roman S. Borschel</a></li><li id="acknowledgements-html-title-1-1-2" class="toc-item"><a href="acknowledgements.html#title.1.1.2">Guilherme Blanco</a></li><li id="acknowledgements-html-title-1-1-3" class="toc-item"><a href="acknowledgements.html#title.1.1.3">Konsta Vesterinen</a></li></ul><li id="acknowledgements-html-title-1-2" class="toc-item"><a href="acknowledgements.html#title.1.2">Companies</a></li><ul><li id="acknowledgements-html-title-1-2-1" class="toc-item"><a href="acknowledgements.html#title.1.2.1">centre{source}</a></li><li id="acknowledgements-html-title-1-2-2" class="toc-item"><a href="acknowledgements.html#title.1.2.2">Sensio Labs</a></li></ul><li id="acknowledgements-html-title-1-3" class="toc-item"><a href="acknowledgements.html#title.1.3">Other Contributors</a></li></ul><li id="behaviors-html-title-1" class="toc-item"><a href="behaviors.html#title.1">Behaviors</a></li><ul><li id="behaviors-html-title-1-1" class="toc-item"><a href="behaviors.html#title.1.1">Introduction</a></li><li id="behaviors-html-title-1-2" class="toc-item"><a href="behaviors.html#title.1.2">Simple Templates</a></li><li id="behaviors-html-title-1-3" class="toc-item"><a href="behaviors.html#title.1.3">Templates with Relations</a></li><li id="behaviors-html-title-1-4" class="toc-item"><a href="behaviors.html#title.1.4">Delegate Methods</a></li><li id="behaviors-html-title-1-5" class="toc-item"><a href="behaviors.html#title.1.5">Creating Behaviors</a></li><li id="behaviors-html-title-1-6" class="toc-item"><a href="behaviors.html#title.1.6">Core Behaviors</a></li><ul><li id="behaviors-html-title-1-6-1" class="toc-item"><a href="behaviors.html#title.1.6.1">Introduction</a></li><li id="behaviors-html-title-1-6-2" class="toc-item"><a href="behaviors.html#title.1.6.2">Versionable</a></li><li id="behaviors-html-title-1-6-3" class="toc-item"><a href="behaviors.html#title.1.6.3">Timestampable</a></li><li id="behaviors-html-title-1-6-4" class="toc-item"><a href="behaviors.html#title.1.6.4">Sluggable</a></li><li id="behaviors-html-title-1-6-5" class="toc-item"><a href="behaviors.html#title.1.6.5">I18n</a></li><li id="behaviors-html-title-1-6-6" class="toc-item"><a href="behaviors.html#title.1.6.6">NestedSet</a></li><li id="behaviors-html-title-1-6-7" class="toc-item"><a href="behaviors.html#title.1.6.7">Searchable</a></li><li id="behaviors-html-title-1-6-8" class="toc-item"><a href="behaviors.html#title.1.6.8">Geographical</a></li><li id="behaviors-html-title-1-6-9" class="toc-item"><a href="behaviors.html#title.1.6.9">SoftDelete</a></li></ul><li id="behaviors-html-title-1-7" class="toc-item"><a href="behaviors.html#title.1.7">Nesting Behaviors</a></li><li id="behaviors-html-title-1-8" class="toc-item"><a href="behaviors.html#title.1.8">Generating Files</a></li><li id="behaviors-html-title-1-9" class="toc-item"><a href="behaviors.html#title.1.9">Querying Generated Classes</a></li><li id="behaviors-html-title-1-10" class="toc-item"><a href="behaviors.html#title.1.10">Conclusion</a></li></ul><li id="caching-html-title-1" class="toc-item"><a href="caching.html#title.1">Caching</a></li><ul><li id="caching-html-title-1-1" class="toc-item"><a href="caching.html#title.1.1">Introduction</a></li><li id="caching-html-title-1-2" class="toc-item"><a href="caching.html#title.1.2">Drivers</a></li><ul><li id="caching-html-title-1-2-1" class="toc-item"><a href="caching.html#title.1.2.1">Memcache</a></li><li id="caching-html-title-1-2-2" class="toc-item"><a href="caching.html#title.1.2.2">APC</a></li></ul><li id="caching-html-title-1-3" class="toc-item"><a href="caching.html#title.1.3">Query Cache &amp; Result Cache</a></li><ul><li id="caching-html-title-1-3-1" class="toc-item"><a href="caching.html#title.1.3.1">Introduction</a></li><li id="caching-html-title-1-3-2" class="toc-item"><a href="caching.html#title.1.3.2">Query Cache</a></li><ul></ul><li id="caching-html-title-1-3-3" class="toc-item"><a href="caching.html#title.1.3.3">Result Cache</a></li><ul></ul></ul><li id="caching-html-title-1-4" class="toc-item"><a href="caching.html#title.1.4">Conclusion</a></li></ul><li id="coding-standards-html-title-1" class="toc-item"><a href="coding-standards.html#title.1">Coding Standards</a></li><ul><li id="coding-standards-html-title-1-1" class="toc-item"><a href="coding-standards.html#title.1.1">PHP File Formatting</a></li><ul><li id="coding-standards-html-title-1-1-1" class="toc-item"><a href="coding-standards.html#title.1.1.1">General</a></li><li id="coding-standards-html-title-1-1-2" class="toc-item"><a href="coding-standards.html#title.1.1.2">Indentation</a></li><li id="coding-standards-html-title-1-1-3" class="toc-item"><a href="coding-standards.html#title.1.1.3">Maximum Line Length</a></li><li id="coding-standards-html-title-1-1-4" class="toc-item"><a href="coding-standards.html#title.1.1.4">Line Termination</a></li></ul><li id="coding-standards-html-title-1-2" class="toc-item"><a href="coding-standards.html#title.1.2">Naming Conventions</a></li><ul><li id="coding-standards-html-title-1-2-1" class="toc-item"><a href="coding-standards.html#title.1.2.1">Classes</a></li><li id="coding-standards-html-title-1-2-2" class="toc-item"><a href="coding-standards.html#title.1.2.2">Interfaces</a></li><li id="coding-standards-html-title-1-2-3" class="toc-item"><a href="coding-standards.html#title.1.2.3">Filenames</a></li><li id="coding-standards-html-title-1-2-4" class="toc-item"><a href="coding-standards.html#title.1.2.4">Functions and Methods</a></li><li id="coding-standards-html-title-1-2-5" class="toc-item"><a href="coding-standards.html#title.1.2.5">Variables</a></li><li id="coding-standards-html-title-1-2-6" class="toc-item"><a href="coding-standards.html#title.1.2.6">Constants</a></li><li id="coding-standards-html-title-1-2-7" class="toc-item"><a href="coding-standards.html#title.1.2.7">Record Columns</a></li></ul><li id="coding-standards-html-title-1-3" class="toc-item"><a href="coding-standards.html#title.1.3">Coding Style</a></li><ul><li id="coding-standards-html-title-1-3-1" class="toc-item"><a href="coding-standards.html#title.1.3.1">PHP Code Demarcation</a></li><li id="coding-standards-html-title-1-3-2" class="toc-item"><a href="coding-standards.html#title.1.3.2">Strings</a></li><ul></ul><li id="coding-standards-html-title-1-3-3" class="toc-item"><a href="coding-standards.html#title.1.3.3">Arrays</a></li><li id="coding-standards-html-title-1-3-4" class="toc-item"><a href="coding-standards.html#title.1.3.4">Classes</a></li><li id="coding-standards-html-title-1-3-5" class="toc-item"><a href="coding-standards.html#title.1.3.5">Functions and Methods</a></li><li id="coding-standards-html-title-1-3-6" class="toc-item"><a href="coding-standards.html#title.1.3.6">Control Statements</a></li><li id="coding-standards-html-title-1-3-7" class="toc-item"><a href="coding-standards.html#title.1.3.7">Inline Documentation</a></li></ul><li id="coding-standards-html-title-1-4" class="toc-item"><a href="coding-standards.html#title.1.4">Conclusion</a></li></ul><li id="component-overview-html-title-1" class="toc-item"><a href="component-overview.html#title.1">Component Overview</a></li><ul><li id="component-overview-html-title-1-1" class="toc-item"><a href="component-overview.html#title.1.1">Manager</a></li><ul><li id="component-overview-html-title-1-1-1" class="toc-item"><a href="component-overview.html#title.1.1.1">Retrieving Connections</a></li></ul><li id="component-overview-html-title-1-2" class="toc-item"><a href="component-overview.html#title.1.2">Connection</a></li><ul><li id="component-overview-html-title-1-2-1" class="toc-item"><a href="component-overview.html#title.1.2.1">Available Drivers</a></li><li id="component-overview-html-title-1-2-2" class="toc-item"><a href="component-overview.html#title.1.2.2">Creating Connections</a></li><li id="component-overview-html-title-1-2-3" class="toc-item"><a href="component-overview.html#title.1.2.3">Flushing the Connection</a></li></ul><li id="component-overview-html-title-1-3" class="toc-item"><a href="component-overview.html#title.1.3">Table</a></li><ul><li id="component-overview-html-title-1-3-1" class="toc-item"><a href="component-overview.html#title.1.3.1">Getting a Table Object</a></li><li id="component-overview-html-title-1-3-2" class="toc-item"><a href="component-overview.html#title.1.3.2">Getting Column Information</a></li><li id="component-overview-html-title-1-3-3" class="toc-item"><a href="component-overview.html#title.1.3.3">Getting Relation Information</a></li><li id="component-overview-html-title-1-3-4" class="toc-item"><a href="component-overview.html#title.1.3.4">Finder Methods</a></li><ul></ul><li id="component-overview-html-title-1-3-5" class="toc-item"><a href="component-overview.html#title.1.3.5">Custom Finders</a></li></ul><li id="component-overview-html-title-1-4" class="toc-item"><a href="component-overview.html#title.1.4">Record</a></li><ul><li id="component-overview-html-title-1-4-1" class="toc-item"><a href="component-overview.html#title.1.4.1">Properties</a></li><li id="component-overview-html-title-1-4-2" class="toc-item"><a href="component-overview.html#title.1.4.2">Updating Records</a></li><li id="component-overview-html-title-1-4-3" class="toc-item"><a href="component-overview.html#title.1.4.3">Replacing Records</a></li><li id="component-overview-html-title-1-4-4" class="toc-item"><a href="component-overview.html#title.1.4.4">Refreshing Records</a></li><li id="component-overview-html-title-1-4-5" class="toc-item"><a href="component-overview.html#title.1.4.5">Refreshing relationships</a></li><li id="component-overview-html-title-1-4-6" class="toc-item"><a href="component-overview.html#title.1.4.6">Deleting Records</a></li><li id="component-overview-html-title-1-4-7" class="toc-item"><a href="component-overview.html#title.1.4.7">Using Expression Values</a></li><li id="component-overview-html-title-1-4-8" class="toc-item"><a href="component-overview.html#title.1.4.8">Getting Record State</a></li><li id="component-overview-html-title-1-4-9" class="toc-item"><a href="component-overview.html#title.1.4.9">Getting Object Copy</a></li><li id="component-overview-html-title-1-4-10" class="toc-item"><a href="component-overview.html#title.1.4.10">Saving a Blank Record</a></li><li id="component-overview-html-title-1-4-11" class="toc-item"><a href="component-overview.html#title.1.4.11">Mapping Custom Values</a></li><li id="component-overview-html-title-1-4-12" class="toc-item"><a href="component-overview.html#title.1.4.12">Serializing</a></li><li id="component-overview-html-title-1-4-13" class="toc-item"><a href="component-overview.html#title.1.4.13">Checking Existence</a></li><li id="component-overview-html-title-1-4-14" class="toc-item"><a href="component-overview.html#title.1.4.14">Function Callbacks for Columns</a></li></ul><li id="component-overview-html-title-1-5" class="toc-item"><a href="component-overview.html#title.1.5">Collection</a></li><ul><li id="component-overview-html-title-1-5-1" class="toc-item"><a href="component-overview.html#title.1.5.1">Accessing Elements</a></li><li id="component-overview-html-title-1-5-2" class="toc-item"><a href="component-overview.html#title.1.5.2">Adding new Elements</a></li><li id="component-overview-html-title-1-5-3" class="toc-item"><a href="component-overview.html#title.1.5.3">Getting Collection Count</a></li><li id="component-overview-html-title-1-5-4" class="toc-item"><a href="component-overview.html#title.1.5.4">Saving the Collection</a></li><li id="component-overview-html-title-1-5-5" class="toc-item"><a href="component-overview.html#title.1.5.5">Deleting the Collection</a></li><li id="component-overview-html-title-1-5-6" class="toc-item"><a href="component-overview.html#title.1.5.6">Key Mapping</a></li><li id="component-overview-html-title-1-5-7" class="toc-item"><a href="component-overview.html#title.1.5.7">Loading Related Records</a></li></ul><li id="component-overview-html-title-1-6" class="toc-item"><a href="component-overview.html#title.1.6">Validator</a></li><ul><li id="component-overview-html-title-1-6-1" class="toc-item"><a href="component-overview.html#title.1.6.1">More Validation</a></li><li id="component-overview-html-title-1-6-2" class="toc-item"><a href="component-overview.html#title.1.6.2">Valid or Not Valid</a></li><ul></ul></ul><li id="component-overview-html-title-1-7" class="toc-item"><a href="component-overview.html#title.1.7">Profiler</a></li><ul><li id="component-overview-html-title-1-7-1" class="toc-item"><a href="component-overview.html#title.1.7.1">Basic Usage</a></li></ul><li id="component-overview-html-title-1-8" class="toc-item"><a href="component-overview.html#title.1.8">Locking Manager</a></li><ul><li id="component-overview-html-title-1-8-1" class="toc-item"><a href="component-overview.html#title.1.8.1">Optimistic Locking</a></li><li id="component-overview-html-title-1-8-2" class="toc-item"><a href="component-overview.html#title.1.8.2">Pessimistic Locking</a></li><li id="component-overview-html-title-1-8-3" class="toc-item"><a href="component-overview.html#title.1.8.3">Examples</a></li><li id="component-overview-html-title-1-8-4" class="toc-item"><a href="component-overview.html#title.1.8.4">Technical Details</a></li></ul><li id="component-overview-html-title-1-9" class="toc-item"><a href="component-overview.html#title.1.9">Views</a></li><ul><li id="component-overview-html-title-1-9-1" class="toc-item"><a href="component-overview.html#title.1.9.1">Using Views</a></li></ul><li id="component-overview-html-title-1-10" class="toc-item"><a href="component-overview.html#title.1.10">Conclusion</a></li></ul><li id="configuration-html-title-1" class="toc-item"><a href="configuration.html#title.1">Configuration</a></li><ul><li id="configuration-html-title-1-1" class="toc-item"><a href="configuration.html#title.1.1">Levels of Configuration</a></li><li id="configuration-html-title-1-2" class="toc-item"><a href="configuration.html#title.1.2">Default Attributes</a></li><ul><li id="configuration-html-title-1-2-1" class="toc-item"><a href="configuration.html#title.1.2.1">Default Column Options</a></li><li id="configuration-html-title-1-2-2" class="toc-item"><a href="configuration.html#title.1.2.2">Default Added Auto Id</a></li></ul><li id="configuration-html-title-1-3" class="toc-item"><a href="configuration.html#title.1.3">Portability</a></li><ul><li id="configuration-html-title-1-3-1" class="toc-item"><a href="configuration.html#title.1.3.1">Portability Mode Attributes</a></li><li id="configuration-html-title-1-3-2" class="toc-item"><a href="configuration.html#title.1.3.2">Examples</a></li></ul><li id="configuration-html-title-1-4" class="toc-item"><a href="configuration.html#title.1.4">Identifier quoting</a></li><li id="configuration-html-title-1-5" class="toc-item"><a href="configuration.html#title.1.5">Hydration Overwriting</a></li><li id="configuration-html-title-1-6" class="toc-item"><a href="configuration.html#title.1.6">Configure Table Class</a></li><li id="configuration-html-title-1-7" class="toc-item"><a href="configuration.html#title.1.7">Configure Query Class</a></li><li id="configuration-html-title-1-8" class="toc-item"><a href="configuration.html#title.1.8">Configure Collection Class</a></li><li id="configuration-html-title-1-9" class="toc-item"><a href="configuration.html#title.1.9">Disabling Cascading Saves</a></li><li id="configuration-html-title-1-10" class="toc-item"><a href="configuration.html#title.1.10">Exporting</a></li><li id="configuration-html-title-1-11" class="toc-item"><a href="configuration.html#title.1.11">Naming convention attributes</a></li><ul><li id="configuration-html-title-1-11-1" class="toc-item"><a href="configuration.html#title.1.11.1">Index name format</a></li><li id="configuration-html-title-1-11-2" class="toc-item"><a href="configuration.html#title.1.11.2">Sequence name format</a></li><li id="configuration-html-title-1-11-3" class="toc-item"><a href="configuration.html#title.1.11.3">Table name format</a></li><li id="configuration-html-title-1-11-4" class="toc-item"><a href="configuration.html#title.1.11.4">Database name format</a></li><li id="configuration-html-title-1-11-5" class="toc-item"><a href="configuration.html#title.1.11.5">Validation attributes</a></li><li id="configuration-html-title-1-11-6" class="toc-item"><a href="configuration.html#title.1.11.6">Validation mode constants</a></li><li id="configuration-html-title-1-11-7" class="toc-item"><a href="configuration.html#title.1.11.7">Examples</a></li></ul><li id="configuration-html-title-1-12" class="toc-item"><a href="configuration.html#title.1.12">Conclusion</a></li></ul><li id="connections-html-title-1" class="toc-item"><a href="connections.html#title.1">Connections</a></li><ul><li id="connections-html-title-1-1" class="toc-item"><a href="connections.html#title.1.1">Introduction</a></li><li id="connections-html-title-1-2" class="toc-item"><a href="connections.html#title.1.2">Opening Connections</a></li><li id="connections-html-title-1-3" class="toc-item"><a href="connections.html#title.1.3">Retrieve Connections</a></li><li id="connections-html-title-1-4" class="toc-item"><a href="connections.html#title.1.4">Current Connection</a></li><li id="connections-html-title-1-5" class="toc-item"><a href="connections.html#title.1.5">Change Current Connection</a></li><li id="connections-html-title-1-6" class="toc-item"><a href="connections.html#title.1.6">Iterating Connections</a></li><li id="connections-html-title-1-7" class="toc-item"><a href="connections.html#title.1.7">Get Connection Name</a></li><li id="connections-html-title-1-8" class="toc-item"><a href="connections.html#title.1.8">Close Connection</a></li><li id="connections-html-title-1-9" class="toc-item"><a href="connections.html#title.1.9">Get All Connections</a></li><li id="connections-html-title-1-10" class="toc-item"><a href="connections.html#title.1.10">Count Connections</a></li><li id="connections-html-title-1-11" class="toc-item"><a href="connections.html#title.1.11">Creating and Dropping Database</a></li><ul><li id="connections-html-title-1-11-1" class="toc-item"><a href="connections.html#title.1.11.1">For a Specific Connection</a></li></ul><li id="connections-html-title-1-12" class="toc-item"><a href="connections.html#title.1.12">Writing Custom Connections</a></li><li id="connections-html-title-1-13" class="toc-item"><a href="connections.html#title.1.13">Conclusion</a></li></ul><li id="data-fixtures-html-title-1" class="toc-item"><a href="data-fixtures.html#title.1">Data Fixtures</a></li><ul><li id="data-fixtures-html-title-1-1" class="toc-item"><a href="data-fixtures.html#title.1.1">Importing</a></li><li id="data-fixtures-html-title-1-2" class="toc-item"><a href="data-fixtures.html#title.1.2">Dumping</a></li><li id="data-fixtures-html-title-1-3" class="toc-item"><a href="data-fixtures.html#title.1.3">Implement</a></li><li id="data-fixtures-html-title-1-4" class="toc-item"><a href="data-fixtures.html#title.1.4">Writing</a></li><li id="data-fixtures-html-title-1-5" class="toc-item"><a href="data-fixtures.html#title.1.5">Fixtures For Nested Sets</a></li><li id="data-fixtures-html-title-1-6" class="toc-item"><a href="data-fixtures.html#title.1.6">Fixtures For I18n</a></li><li id="data-fixtures-html-title-1-7" class="toc-item"><a href="data-fixtures.html#title.1.7">Conclusion</a></li></ul><li id="data-hydrators-html-title-1" class="toc-item"><a href="data-hydrators.html#title.1">Data Hydrators</a></li><ul><li id="data-hydrators-html-title-1-1" class="toc-item"><a href="data-hydrators.html#title.1.1">Core Hydration Methods</a></li><ul><li id="data-hydrators-html-title-1-1-1" class="toc-item"><a href="data-hydrators.html#title.1.1.1">Record</a></li><li id="data-hydrators-html-title-1-1-2" class="toc-item"><a href="data-hydrators.html#title.1.1.2">Array</a></li><li id="data-hydrators-html-title-1-1-3" class="toc-item"><a href="data-hydrators.html#title.1.1.3">Scalar</a></li><li id="data-hydrators-html-title-1-1-4" class="toc-item"><a href="data-hydrators.html#title.1.1.4">Single Scalar</a></li><li id="data-hydrators-html-title-1-1-5" class="toc-item"><a href="data-hydrators.html#title.1.1.5">On Demand</a></li><li id="data-hydrators-html-title-1-1-6" class="toc-item"><a href="data-hydrators.html#title.1.1.6">Nested Set Record Hierarchy</a></li><li id="data-hydrators-html-title-1-1-7" class="toc-item"><a href="data-hydrators.html#title.1.1.7">Nested Set Array Hierarchy</a></li></ul><li id="data-hydrators-html-title-1-2" class="toc-item"><a href="data-hydrators.html#title.1.2">Writing Hydration Method</a></li></ul><li id="data-validation-html-title-1" class="toc-item"><a href="data-validation.html#title.1">Data Validation</a></li><ul><li id="data-validation-html-title-1-1" class="toc-item"><a href="data-validation.html#title.1.1">Introduction</a></li><li id="data-validation-html-title-1-2" class="toc-item"><a href="data-validation.html#title.1.2">Examples</a></li><li id="data-validation-html-title-1-3" class="toc-item"><a href="data-validation.html#title.1.3">Conclusion</a></li></ul><li id="database-abstraction-layer-html-title-1" class="toc-item"><a href="database-abstraction-layer.html#title.1">Database Abstraction Layer</a></li><ul><li id="database-abstraction-layer-html-title-1-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.1">Export</a></li><ul><li id="database-abstraction-layer-html-title-1-1-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-1-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.2">Creating Databases</a></li><li id="database-abstraction-layer-html-title-1-1-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.3">Creating Tables</a></li><li id="database-abstraction-layer-html-title-1-1-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.4">Creating Foreign Keys</a></li><li id="database-abstraction-layer-html-title-1-1-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.5">Altering table</a></li><li id="database-abstraction-layer-html-title-1-1-6" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.6">Creating Indexes</a></li><li id="database-abstraction-layer-html-title-1-1-7" class="toc-item"><a href="database-abstraction-layer.html#title.1.1.7">Deleting database elements</a></li></ul><li id="database-abstraction-layer-html-title-1-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.2">Import</a></li><ul><li id="database-abstraction-layer-html-title-1-2-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-2-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.2">Listing Databases</a></li><li id="database-abstraction-layer-html-title-1-2-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.3">Listing Sequences</a></li><li id="database-abstraction-layer-html-title-1-2-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.4">Listing Constraints</a></li><li id="database-abstraction-layer-html-title-1-2-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.5">Listing Table Columns</a></li><li id="database-abstraction-layer-html-title-1-2-6" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.6">Listing Table Indexes</a></li><li id="database-abstraction-layer-html-title-1-2-7" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.7">Listing Tables</a></li><li id="database-abstraction-layer-html-title-1-2-8" class="toc-item"><a href="database-abstraction-layer.html#title.1.2.8">Listing Views</a></li></ul><li id="database-abstraction-layer-html-title-1-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.3">DataDict</a></li><ul><li id="database-abstraction-layer-html-title-1-3-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.1">Introduction</a></li><li id="database-abstraction-layer-html-title-1-3-2" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.2">Getting portable declaration</a></li><li id="database-abstraction-layer-html-title-1-3-3" class="toc-item"><a href="database-abstraction-layer.html#title.1.3.3">Getting Native Declaration</a></li></ul><li id="database-abstraction-layer-html-title-1-4" class="toc-item"><a href="database-abstraction-layer.html#title.1.4">Drivers</a></li><ul><li id="database-abstraction-layer-html-title-1-4-1" class="toc-item"><a href="database-abstraction-layer.html#title.1.4.1">Mysql</a></li><ul></ul></ul><li id="database-abstraction-layer-html-title-1-5" class="toc-item"><a href="database-abstraction-layer.html#title.1.5">Conclusion</a></li></ul><li id="defining-models-html-title-1" class="toc-item"><a href="defining-models.html#title.1">Defining Models</a></li><ul><li id="defining-models-html-title-1-1" class="toc-item"><a href="defining-models.html#title.1.1">Columns</a></li><ul><li id="defining-models-html-title-1-1-1" class="toc-item"><a href="defining-models.html#title.1.1.1">Column Lengths</a></li><li id="defining-models-html-title-1-1-2" class="toc-item"><a href="defining-models.html#title.1.1.2">Column Aliases</a></li><li id="defining-models-html-title-1-1-3" class="toc-item"><a href="defining-models.html#title.1.1.3">Default values</a></li><li id="defining-models-html-title-1-1-4" class="toc-item"><a href="defining-models.html#title.1.1.4">Data types</a></li><ul></ul><li id="defining-models-html-title-1-1-5" class="toc-item"><a href="defining-models.html#title.1.1.5">Examples</a></li></ul><li id="defining-models-html-title-1-2" class="toc-item"><a href="defining-models.html#title.1.2">Relationships</a></li><ul><li id="defining-models-html-title-1-2-1" class="toc-item"><a href="defining-models.html#title.1.2.1">Introduction</a></li><li id="defining-models-html-title-1-2-2" class="toc-item"><a href="defining-models.html#title.1.2.2">Foreign Key Associations</a></li><ul></ul><li id="defining-models-html-title-1-2-3" class="toc-item"><a href="defining-models.html#title.1.2.3">Join Table Associations</a></li><ul></ul><li id="defining-models-html-title-1-2-4" class="toc-item"><a href="defining-models.html#title.1.2.4">Foreign Key Constraints</a></li><ul></ul></ul><li id="defining-models-html-title-1-3" class="toc-item"><a href="defining-models.html#title.1.3">Indexes</a></li><ul><li id="defining-models-html-title-1-3-1" class="toc-item"><a href="defining-models.html#title.1.3.1">Introduction</a></li><li id="defining-models-html-title-1-3-2" class="toc-item"><a href="defining-models.html#title.1.3.2">Adding indexes</a></li><li id="defining-models-html-title-1-3-3" class="toc-item"><a href="defining-models.html#title.1.3.3">Index options</a></li><li id="defining-models-html-title-1-3-4" class="toc-item"><a href="defining-models.html#title.1.3.4">Special indexes</a></li></ul><li id="defining-models-html-title-1-4" class="toc-item"><a href="defining-models.html#title.1.4">Checks</a></li><li id="defining-models-html-title-1-5" class="toc-item"><a href="defining-models.html#title.1.5">Table Options</a></li><li id="defining-models-html-title-1-6" class="toc-item"><a href="defining-models.html#title.1.6">Record Filters</a></li><li id="defining-models-html-title-1-7" class="toc-item"><a href="defining-models.html#title.1.7">Transitive Persistence</a></li><ul><li id="defining-models-html-title-1-7-1" class="toc-item"><a href="defining-models.html#title.1.7.1">Application-Level Cascades</a></li><ul></ul><li id="defining-models-html-title-1-7-2" class="toc-item"><a href="defining-models.html#title.1.7.2">Database-Level Cascades</a></li></ul><li id="defining-models-html-title-1-8" class="toc-item"><a href="defining-models.html#title.1.8">Conclusion</a></li></ul><li id="dql-doctrine-query-language-html-title-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1">DQL: Doctrine Query Language</a></li><ul><li id="dql-doctrine-query-language-html-title-1-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.2">SELECT queries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-2-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.2.1">Aggregate values</a></li></ul><li id="dql-doctrine-query-language-html-title-1-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.3">UPDATE queries</a></li><li id="dql-doctrine-query-language-html-title-1-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.4">DELETE Queries</a></li><li id="dql-doctrine-query-language-html-title-1-5" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.5">FROM clause</a></li><li id="dql-doctrine-query-language-html-title-1-6" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6">JOIN syntax</a></li><ul><li id="dql-doctrine-query-language-html-title-1-6-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6.1">ON keyword</a></li><li id="dql-doctrine-query-language-html-title-1-6-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.6.2">WITH keyword</a></li></ul><li id="dql-doctrine-query-language-html-title-1-7" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.7">INDEXBY keyword</a></li><li id="dql-doctrine-query-language-html-title-1-8" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.8">WHERE clause</a></li><li id="dql-doctrine-query-language-html-title-1-9" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9">Conditional expressions</a></li><ul><li id="dql-doctrine-query-language-html-title-1-9-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.1">Literals</a></li><li id="dql-doctrine-query-language-html-title-1-9-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.2">Input parameters</a></li><li id="dql-doctrine-query-language-html-title-1-9-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.3">Operators and operator precedence</a></li><li id="dql-doctrine-query-language-html-title-1-9-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.4">In expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-5" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.5">Like Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-6" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.6">Exists Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-7" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.7">All and Any Expressions</a></li><li id="dql-doctrine-query-language-html-title-1-9-8" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.9.8">Subqueries</a></li></ul><li id="dql-doctrine-query-language-html-title-1-10" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10">Functional Expressions</a></li><ul><li id="dql-doctrine-query-language-html-title-1-10-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10.1">String functions</a></li><li id="dql-doctrine-query-language-html-title-1-10-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.10.2">Arithmetic functions</a></li></ul><li id="dql-doctrine-query-language-html-title-1-11" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11">Subqueries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-11-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-11-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.11.2">Comparisons using subqueries</a></li></ul><li id="dql-doctrine-query-language-html-title-1-12" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.12">GROUP BY, HAVING clauses</a></li><li id="dql-doctrine-query-language-html-title-1-13" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13">ORDER BY clause</a></li><ul><li id="dql-doctrine-query-language-html-title-1-13-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.1">Introduction</a></li><li id="dql-doctrine-query-language-html-title-1-13-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.2">Sorting by an aggregate value</a></li><li id="dql-doctrine-query-language-html-title-1-13-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.13.3">Using random order</a></li></ul><li id="dql-doctrine-query-language-html-title-1-14" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14">LIMIT and OFFSET clauses</a></li><ul><li id="dql-doctrine-query-language-html-title-1-14-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14.1">Driver Portability</a></li><li id="dql-doctrine-query-language-html-title-1-14-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.14.2">The limit-subquery-algorithm</a></li></ul><li id="dql-doctrine-query-language-html-title-1-15" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15">Named Queries</a></li><ul><li id="dql-doctrine-query-language-html-title-1-15-1" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.1">Creating a Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-2" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.2">Accessing Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-3" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.3">Executing a Named Query</a></li><li id="dql-doctrine-query-language-html-title-1-15-4" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.15.4">Cross-Accessing Named Query</a></li></ul><li id="dql-doctrine-query-language-html-title-1-16" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.16">BNF</a></li><li id="dql-doctrine-query-language-html-title-1-17" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.17">Magic Finders</a></li><li id="dql-doctrine-query-language-html-title-1-18" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.18">Debugging Queries</a></li><li id="dql-doctrine-query-language-html-title-1-19" class="toc-item"><a href="dql-doctrine-query-language.html#title.1.19">Conclusion</a></li></ul><li id="event-listeners-html-title-1" class="toc-item"><a href="event-listeners.html#title.1">Event Listeners</a></li><ul><li id="event-listeners-html-title-1-1" class="toc-item"><a href="event-listeners.html#title.1.1">Introduction</a></li><li id="event-listeners-html-title-1-2" class="toc-item"><a href="event-listeners.html#title.1.2">Connection Listeners</a></li><ul><li id="event-listeners-html-title-1-2-1" class="toc-item"><a href="event-listeners.html#title.1.2.1">Creating a New Listener</a></li><li id="event-listeners-html-title-1-2-2" class="toc-item"><a href="event-listeners.html#title.1.2.2">Attaching listeners</a></li><li id="event-listeners-html-title-1-2-3" class="toc-item"><a href="event-listeners.html#title.1.2.3">Pre and Post Connect</a></li><li id="event-listeners-html-title-1-2-4" class="toc-item"><a href="event-listeners.html#title.1.2.4">Transaction Listeners</a></li><li id="event-listeners-html-title-1-2-5" class="toc-item"><a href="event-listeners.html#title.1.2.5">Query Execution Listeners</a></li></ul><li id="event-listeners-html-title-1-3" class="toc-item"><a href="event-listeners.html#title.1.3">Hydration Listeners</a></li><li id="event-listeners-html-title-1-4" class="toc-item"><a href="event-listeners.html#title.1.4">Record Listeners</a></li><li id="event-listeners-html-title-1-5" class="toc-item"><a href="event-listeners.html#title.1.5">Record Hooks</a></li><li id="event-listeners-html-title-1-6" class="toc-item"><a href="event-listeners.html#title.1.6">DQL Hooks</a></li><li id="event-listeners-html-title-1-7" class="toc-item"><a href="event-listeners.html#title.1.7">Chaining Listeners</a></li><li id="event-listeners-html-title-1-8" class="toc-item"><a href="event-listeners.html#title.1.8">The Event object</a></li><ul><li id="event-listeners-html-title-1-8-1" class="toc-item"><a href="event-listeners.html#title.1.8.1">Getting the Invoker</a></li><li id="event-listeners-html-title-1-8-2" class="toc-item"><a href="event-listeners.html#title.1.8.2">Event Codes</a></li><li id="event-listeners-html-title-1-8-3" class="toc-item"><a href="event-listeners.html#title.1.8.3">Getting the Invoker</a></li><li id="event-listeners-html-title-1-8-4" class="toc-item"><a href="event-listeners.html#title.1.8.4">Skip Next Operation</a></li><li id="event-listeners-html-title-1-8-5" class="toc-item"><a href="event-listeners.html#title.1.8.5">Skip Next Listener</a></li></ul><li id="event-listeners-html-title-1-9" class="toc-item"><a href="event-listeners.html#title.1.9">Conclusion</a></li></ul><li id="exceptions-and-warnings-html-title-1" class="toc-item"><a href="exceptions-and-warnings.html#title.1">Exceptions and Warnings</a></li><ul><li id="exceptions-and-warnings-html-title-1-1" class="toc-item"><a href="exceptions-and-warnings.html#title.1.1">Manager exceptions</a></li><li id="exceptions-and-warnings-html-title-1-2" class="toc-item"><a href="exceptions-and-warnings.html#title.1.2">Relation exceptions</a></li><li id="exceptions-and-warnings-html-title-1-3" class="toc-item"><a href="exceptions-and-warnings.html#title.1.3">Connection exceptions</a></li><li id="exceptions-and-warnings-html-title-1-4" class="toc-item"><a href="exceptions-and-warnings.html#title.1.4">Query exceptions</a></li><li id="exceptions-and-warnings-html-title-1-5" class="toc-item"><a href="exceptions-and-warnings.html#title.1.5">Conclusion</a></li></ul><li id="extensions-html-title-1" class="toc-item"><a href="extensions.html#title.1">Extensions</a></li><li id="getting-started-html-title-1" class="toc-item"><a href="getting-started.html#title.1">Getting Started</a></li><ul><li id="getting-started-html-title-1-1" class="toc-item"><a href="getting-started.html#title.1.1">Checking Requirements</a></li><li id="getting-started-html-title-1-2" class="toc-item"><a href="getting-started.html#title.1.2">Installing</a></li><ul><li id="getting-started-html-title-1-2-1" class="toc-item"><a href="getting-started.html#title.1.2.1">Sandbox</a></li><li id="getting-started-html-title-1-2-2" class="toc-item"><a href="getting-started.html#title.1.2.2">SVN</a></li><ul></ul><li id="getting-started-html-title-1-2-3" class="toc-item"><a href="getting-started.html#title.1.2.3">SVN Externals</a></li><li id="getting-started-html-title-1-2-4" class="toc-item"><a href="getting-started.html#title.1.2.4">PEAR Installer</a></li><li id="getting-started-html-title-1-2-5" class="toc-item"><a href="getting-started.html#title.1.2.5">Download Pear Package</a></li></ul><li id="getting-started-html-title-1-3" class="toc-item"><a href="getting-started.html#title.1.3">Implementing</a></li><ul><li id="getting-started-html-title-1-3-1" class="toc-item"><a href="getting-started.html#title.1.3.1">Including Doctrine Libraries</a></li><li id="getting-started-html-title-1-3-2" class="toc-item"><a href="getting-started.html#title.1.3.2">Require Doctrine Base Class</a></li><li id="getting-started-html-title-1-3-3" class="toc-item"><a href="getting-started.html#title.1.3.3">Register Autoloader</a></li><ul></ul><li id="getting-started-html-title-1-3-4" class="toc-item"><a href="getting-started.html#title.1.3.4">Bootstrap File</a></li><li id="getting-started-html-title-1-3-5" class="toc-item"><a href="getting-started.html#title.1.3.5">Test Script</a></li></ul><li id="getting-started-html-title-1-4" class="toc-item"><a href="getting-started.html#title.1.4">Conclusion</a></li></ul><li id="hierarchical-data-html-title-1" class="toc-item"><a href="hierarchical-data.html#title.1">Hierarchical Data</a></li><ul><li id="hierarchical-data-html-title-1-1" class="toc-item"><a href="hierarchical-data.html#title.1.1">Introduction</a></li><li id="hierarchical-data-html-title-1-2" class="toc-item"><a href="hierarchical-data.html#title.1.2">Nested Set</a></li><ul><li id="hierarchical-data-html-title-1-2-1" class="toc-item"><a href="hierarchical-data.html#title.1.2.1">Introduction</a></li><li id="hierarchical-data-html-title-1-2-2" class="toc-item"><a href="hierarchical-data.html#title.1.2.2">Setting Up</a></li><li id="hierarchical-data-html-title-1-2-3" class="toc-item"><a href="hierarchical-data.html#title.1.2.3">Multiple Trees</a></li><li id="hierarchical-data-html-title-1-2-4" class="toc-item"><a href="hierarchical-data.html#title.1.2.4">Working with Trees</a></li><ul></ul><li id="hierarchical-data-html-title-1-2-5" class="toc-item"><a href="hierarchical-data.html#title.1.2.5">Advanced Usage</a></li><ul></ul><li id="hierarchical-data-html-title-1-2-6" class="toc-item"><a href="hierarchical-data.html#title.1.2.6">Rendering with Indention</a></li></ul><li id="hierarchical-data-html-title-1-3" class="toc-item"><a href="hierarchical-data.html#title.1.3">Conclusion</a></li></ul><li id="imprint-html-title-1" class="toc-item"><a href="imprint.html#title.1">Imprint</a></li><li id="improving-performance-html-title-1" class="toc-item"><a href="improving-performance.html#title.1">Improving Performance</a></li><ul><li id="improving-performance-html-title-1-1" class="toc-item"><a href="improving-performance.html#title.1.1">Introduction</a></li><li id="improving-performance-html-title-1-2" class="toc-item"><a href="improving-performance.html#title.1.2">Compile</a></li><li id="improving-performance-html-title-1-3" class="toc-item"><a href="improving-performance.html#title.1.3">Conservative Fetching</a></li><li id="improving-performance-html-title-1-4" class="toc-item"><a href="improving-performance.html#title.1.4">Bundle your Class Files</a></li><li id="improving-performance-html-title-1-5" class="toc-item"><a href="improving-performance.html#title.1.5">Use a Bytecode Cache</a></li><li id="improving-performance-html-title-1-6" class="toc-item"><a href="improving-performance.html#title.1.6">Free Objects</a></li><li id="improving-performance-html-title-1-7" class="toc-item"><a href="improving-performance.html#title.1.7">Other Tips</a></li><li id="improving-performance-html-title-1-8" class="toc-item"><a href="improving-performance.html#title.1.8">Conclusion</a></li></ul><li id="index-html-title-1" class="toc-item"><a href="index.html#title.1">Doctrine  ORM Manual</a></li><li id="inheritance-html-title-1" class="toc-item"><a href="inheritance.html#title.1">Inheritance</a></li><ul><li id="inheritance-html-title-1-1" class="toc-item"><a href="inheritance.html#title.1.1">Simple</a></li><li id="inheritance-html-title-1-2" class="toc-item"><a href="inheritance.html#title.1.2">Concrete</a></li><li id="inheritance-html-title-1-3" class="toc-item"><a href="inheritance.html#title.1.3">Column Aggregation</a></li><li id="inheritance-html-title-1-4" class="toc-item"><a href="inheritance.html#title.1.4">Conclusion</a></li></ul><li id="introduction-to-connections-html-title-1" class="toc-item"><a href="introduction-to-connections.html#title.1">Introduction to Connections</a></li><ul><li id="introduction-to-connections-html-title-1-1" class="toc-item"><a href="introduction-to-connections.html#title.1.1">DSN, the Data Source Name</a></li><ul><li id="introduction-to-connections-html-title-1-1-1" class="toc-item"><a href="introduction-to-connections.html#title.1.1.1">Main Parts</a></li><ul></ul><li id="introduction-to-connections-html-title-1-1-2" class="toc-item"><a href="introduction-to-connections.html#title.1.1.2">Providing the DSN</a></li><li id="introduction-to-connections-html-title-1-1-3" class="toc-item"><a href="introduction-to-connections.html#title.1.1.3">Examples</a></li></ul><li id="introduction-to-connections-html-title-1-2" class="toc-item"><a href="introduction-to-connections.html#title.1.2">Opening New Connections</a></li><li id="introduction-to-connections-html-title-1-3" class="toc-item"><a href="introduction-to-connections.html#title.1.3">Lazy Database Connecting</a></li><li id="introduction-to-connections-html-title-1-4" class="toc-item"><a href="introduction-to-connections.html#title.1.4">Testing your Connection</a></li><li id="introduction-to-connections-html-title-1-5" class="toc-item"><a href="introduction-to-connections.html#title.1.5">Conclusion</a></li></ul><li id="introduction-to-models-html-title-1" class="toc-item"><a href="introduction-to-models.html#title.1">Introduction to Models</a></li><ul><li id="introduction-to-models-html-title-1-1" class="toc-item"><a href="introduction-to-models.html#title.1.1">Introduction</a></li><li id="introduction-to-models-html-title-1-2" class="toc-item"><a href="introduction-to-models.html#title.1.2">Generating Models</a></li><ul><li id="introduction-to-models-html-title-1-2-1" class="toc-item"><a href="introduction-to-models.html#title.1.2.1">Existing Databases</a></li><ul></ul><li id="introduction-to-models-html-title-1-2-2" class="toc-item"><a href="introduction-to-models.html#title.1.2.2">Schema Files</a></li></ul><li id="introduction-to-models-html-title-1-3" class="toc-item"><a href="introduction-to-models.html#title.1.3">Manually Writing Models</a></li><li id="introduction-to-models-html-title-1-4" class="toc-item"><a href="introduction-to-models.html#title.1.4">Autoloading Models</a></li><ul><li id="introduction-to-models-html-title-1-4-1" class="toc-item"><a href="introduction-to-models.html#title.1.4.1">Conservative</a></li><li id="introduction-to-models-html-title-1-4-2" class="toc-item"><a href="introduction-to-models.html#title.1.4.2">Aggressive</a></li></ul><li id="introduction-to-models-html-title-1-5" class="toc-item"><a href="introduction-to-models.html#title.1.5">Conclusion</a></li></ul><li id="introduction-html-title-1" class="toc-item"><a href="introduction.html#title.1">Introduction</a></li><ul><li id="introduction-html-title-1-1" class="toc-item"><a href="introduction.html#title.1.1">About this Version</a></li><li id="introduction-html-title-1-2" class="toc-item"><a href="introduction.html#title.1.2">How to Contribute</a></li><li id="introduction-html-title-1-3" class="toc-item"><a href="introduction.html#title.1.3">What is Doctrine?</a></li><li id="introduction-html-title-1-4" class="toc-item"><a href="introduction.html#title.1.4">What is an ORM?</a></li><li id="introduction-html-title-1-5" class="toc-item"><a href="introduction.html#title.1.5">What is the Problem?</a></li><li id="introduction-html-title-1-6" class="toc-item"><a href="introduction.html#title.1.6">Minimum Requirements</a></li><li id="introduction-html-title-1-7" class="toc-item"><a href="introduction.html#title.1.7">Basic Overview</a></li><li id="introduction-html-title-1-8" class="toc-item"><a href="introduction.html#title.1.8">Doctrine Explained</a></li><li id="introduction-html-title-1-9" class="toc-item"><a href="introduction.html#title.1.9">Key Concepts</a></li><li id="introduction-html-title-1-10" class="toc-item"><a href="introduction.html#title.1.10">Further Reading</a></li><li id="introduction-html-title-1-11" class="toc-item"><a href="introduction.html#title.1.11">Conclusion</a></li></ul><li id="license-html-title-1" class="toc-item"><a href="license.html#title.1">Attribution-Share Alike 3.0 Unported License</a></li><li id="migrations-html-title-1" class="toc-item"><a href="migrations.html#title.1">Migrations</a></li><ul><li id="migrations-html-title-1-1" class="toc-item"><a href="migrations.html#title.1.1">Performing Migrations</a></li><li id="migrations-html-title-1-2" class="toc-item"><a href="migrations.html#title.1.2">Implement</a></li><li id="migrations-html-title-1-3" class="toc-item"><a href="migrations.html#title.1.3">Writing Migration Classes</a></li><li id="migrations-html-title-1-4" class="toc-item"><a href="migrations.html#title.1.4">Conclusion</a></li></ul><li id="native-sql-html-title-1" class="toc-item"><a href="native-sql.html#title.1">Native SQL</a></li><ul><li id="native-sql-html-title-1-1" class="toc-item"><a href="native-sql.html#title.1.1">Introduction</a></li><li id="native-sql-html-title-1-2" class="toc-item"><a href="native-sql.html#title.1.2">Component Queries</a></li><li id="native-sql-html-title-1-3" class="toc-item"><a href="native-sql.html#title.1.3">Fetching from Multiple Components</a></li><li id="native-sql-html-title-1-4" class="toc-item"><a href="native-sql.html#title.1.4">Conclusion</a></li></ul><li id="real-world-examples-html-title-1" class="toc-item"><a href="real-world-examples.html#title.1">Real World Examples</a></li><ul><li id="real-world-examples-html-title-1-1" class="toc-item"><a href="real-world-examples.html#title.1.1">User Management System</a></li><li id="real-world-examples-html-title-1-2" class="toc-item"><a href="real-world-examples.html#title.1.2">Forum Application</a></li><li id="real-world-examples-html-title-1-3" class="toc-item"><a href="real-world-examples.html#title.1.3">Conclusion</a></li></ul><li id="searching-html-title-1" class="toc-item"><a href="searching.html#title.1">Searching</a></li><ul><li id="searching-html-title-1-1" class="toc-item"><a href="searching.html#title.1.1">Introduction</a></li><li id="searching-html-title-1-2" class="toc-item"><a href="searching.html#title.1.2">Index structure</a></li><li id="searching-html-title-1-3" class="toc-item"><a href="searching.html#title.1.3">Index Building</a></li><li id="searching-html-title-1-4" class="toc-item"><a href="searching.html#title.1.4">Text Analyzers</a></li><li id="searching-html-title-1-5" class="toc-item"><a href="searching.html#title.1.5">Query language</a></li><li id="searching-html-title-1-6" class="toc-item"><a href="searching.html#title.1.6">Performing Searches</a></li><li id="searching-html-title-1-7" class="toc-item"><a href="searching.html#title.1.7">File searches</a></li><li id="searching-html-title-1-8" class="toc-item"><a href="searching.html#title.1.8">Conclusion</a></li></ul><li id="technology-html-title-1" class="toc-item"><a href="technology.html#title.1">Technology</a></li><ul><li id="technology-html-title-1-1" class="toc-item"><a href="technology.html#title.1.1">Introduction</a></li><li id="technology-html-title-1-2" class="toc-item"><a href="technology.html#title.1.2">Architecture</a></li><ul><li id="technology-html-title-1-2-1" class="toc-item"><a href="technology.html#title.1.2.1">Doctrine CORE</a></li><li id="technology-html-title-1-2-2" class="toc-item"><a href="technology.html#title.1.2.2">Doctrine DBAL</a></li><li id="technology-html-title-1-2-3" class="toc-item"><a href="technology.html#title.1.2.3">Doctrine ORM</a></li></ul><li id="technology-html-title-1-3" class="toc-item"><a href="technology.html#title.1.3">Design Patterns Used</a></li><li id="technology-html-title-1-4" class="toc-item"><a href="technology.html#title.1.4">Speed</a></li><li id="technology-html-title-1-5" class="toc-item"><a href="technology.html#title.1.5">Conclusion</a></li></ul><li id="transactions-html-title-1" class="toc-item"><a href="transactions.html#title.1">Transactions</a></li><ul><li id="transactions-html-title-1-1" class="toc-item"><a href="transactions.html#title.1.1">Introduction</a></li><li id="transactions-html-title-1-2" class="toc-item"><a href="transactions.html#title.1.2">Nesting</a></li><li id="transactions-html-title-1-3" class="toc-item"><a href="transactions.html#title.1.3">Savepoints</a></li><li id="transactions-html-title-1-4" class="toc-item"><a href="transactions.html#title.1.4">Isolation Levels</a></li><li id="transactions-html-title-1-5" class="toc-item"><a href="transactions.html#title.1.5">Conclusion</a></li></ul><li id="unit-testing-html-title-1" class="toc-item"><a href="unit-testing.html#title.1">Unit Testing</a></li><ul><li id="unit-testing-html-title-1-1" class="toc-item"><a href="unit-testing.html#title.1.1">Running tests</a></li><ul><li id="unit-testing-html-title-1-1-1" class="toc-item"><a href="unit-testing.html#title.1.1.1">CLI</a></li><li id="unit-testing-html-title-1-1-2" class="toc-item"><a href="unit-testing.html#title.1.1.2">Browser</a></li></ul><li id="unit-testing-html-title-1-2" class="toc-item"><a href="unit-testing.html#title.1.2">Writing Tests</a></li><ul><li id="unit-testing-html-title-1-2-1" class="toc-item"><a href="unit-testing.html#title.1.2.1">Ticket Tests</a></li><li id="unit-testing-html-title-1-2-2" class="toc-item"><a href="unit-testing.html#title.1.2.2">Methods for testing</a></li><ul></ul><li id="unit-testing-html-title-1-2-3" class="toc-item"><a href="unit-testing.html#title.1.2.3">Mock Drivers</a></li><li id="unit-testing-html-title-1-2-4" class="toc-item"><a href="unit-testing.html#title.1.2.4">Test Class Guidelines</a></li><li id="unit-testing-html-title-1-2-5" class="toc-item"><a href="unit-testing.html#title.1.2.5">Test Method Guidelines</a></li></ul><li id="unit-testing-html-title-1-3" class="toc-item"><a href="unit-testing.html#title.1.3">Conclusion</a></li></ul><li id="utilities-html-title-1" class="toc-item"><a href="utilities.html#title.1">Utilities</a></li><ul><li id="utilities-html-title-1-1" class="toc-item"><a href="utilities.html#title.1.1">Pagination</a></li><ul><li id="utilities-html-title-1-1-1" class="toc-item"><a href="utilities.html#title.1.1.1">Introduction</a></li><li id="utilities-html-title-1-1-2" class="toc-item"><a href="utilities.html#title.1.1.2">Working with Pager</a></li><li id="utilities-html-title-1-1-3" class="toc-item"><a href="utilities.html#title.1.1.3">Controlling Range Styles</a></li><ul></ul><li id="utilities-html-title-1-1-4" class="toc-item"><a href="utilities.html#title.1.1.4">Advanced layouts with pager</a></li><ul></ul><li id="utilities-html-title-1-1-5" class="toc-item"><a href="utilities.html#title.1.1.5">Customizing pager layout</a></li></ul><li id="utilities-html-title-1-2" class="toc-item"><a href="utilities.html#title.1.2">Facade</a></li><ul><li id="utilities-html-title-1-2-1" class="toc-item"><a href="utilities.html#title.1.2.1">Creating &amp; Dropping Databases</a></li><li id="utilities-html-title-1-2-2" class="toc-item"><a href="utilities.html#title.1.2.2">Convenience Methods</a></li><li id="utilities-html-title-1-2-3" class="toc-item"><a href="utilities.html#title.1.2.3">Tasks</a></li></ul><li id="utilities-html-title-1-3" class="toc-item"><a href="utilities.html#title.1.3">Command Line Interface</a></li><ul><li id="utilities-html-title-1-3-1" class="toc-item"><a href="utilities.html#title.1.3.1">Introduction The Doctrine Cli is a collection of tasks that help you</a></li><li id="utilities-html-title-1-3-2" class="toc-item"><a href="utilities.html#title.1.3.2">Tasks</a></li><li id="utilities-html-title-1-3-3" class="toc-item"><a href="utilities.html#title.1.3.3">Usage</a></li></ul><li id="utilities-html-title-1-4" class="toc-item"><a href="utilities.html#title.1.4">Sandbox</a></li><ul><li id="utilities-html-title-1-4-1" class="toc-item"><a href="utilities.html#title.1.4.1">Installation</a></li></ul><li id="utilities-html-title-1-5" class="toc-item"><a href="utilities.html#title.1.5">Conclusion</a></li></ul><li id="working-with-models-html-title-1" class="toc-item"><a href="working-with-models.html#title.1">Working with Models</a></li><ul><li id="working-with-models-html-title-1-1" class="toc-item"><a href="working-with-models.html#title.1.1">Define Test Schema</a></li><li id="working-with-models-html-title-1-2" class="toc-item"><a href="working-with-models.html#title.1.2">Dealing with Relations</a></li><ul><li id="working-with-models-html-title-1-2-1" class="toc-item"><a href="working-with-models.html#title.1.2.1">Creating Related Records</a></li><li id="working-with-models-html-title-1-2-2" class="toc-item"><a href="working-with-models.html#title.1.2.2">Retrieving Related Records</a></li><li id="working-with-models-html-title-1-2-3" class="toc-item"><a href="working-with-models.html#title.1.2.3">Updating Related Records</a></li><li id="working-with-models-html-title-1-2-4" class="toc-item"><a href="working-with-models.html#title.1.2.4">Clearing Related Records</a></li><li id="working-with-models-html-title-1-2-5" class="toc-item"><a href="working-with-models.html#title.1.2.5">Deleting Related Records</a></li><li id="working-with-models-html-title-1-2-6" class="toc-item"><a href="working-with-models.html#title.1.2.6">Working with Related Records</a></li><ul></ul></ul><li id="working-with-models-html-title-1-3" class="toc-item"><a href="working-with-models.html#title.1.3">Many-to-Many Relations</a></li><ul><li id="working-with-models-html-title-1-3-1" class="toc-item"><a href="working-with-models.html#title.1.3.1">Creating a New Link</a></li><li id="working-with-models-html-title-1-3-2" class="toc-item"><a href="working-with-models.html#title.1.3.2">Deleting a Link</a></li></ul><li id="working-with-models-html-title-1-4" class="toc-item"><a href="working-with-models.html#title.1.4">Fetching Objects</a></li><ul><li id="working-with-models-html-title-1-4-1" class="toc-item"><a href="working-with-models.html#title.1.4.1">Sample Queries</a></li><li id="working-with-models-html-title-1-4-2" class="toc-item"><a href="working-with-models.html#title.1.4.2">Field Lazy Loading</a></li></ul><li id="working-with-models-html-title-1-5" class="toc-item"><a href="working-with-models.html#title.1.5">Arrays and Objects</a></li><ul><li id="working-with-models-html-title-1-5-1" class="toc-item"><a href="working-with-models.html#title.1.5.1">To Array</a></li><li id="working-with-models-html-title-1-5-2" class="toc-item"><a href="working-with-models.html#title.1.5.2">From Array</a></li><li id="working-with-models-html-title-1-5-3" class="toc-item"><a href="working-with-models.html#title.1.5.3">Synchronize With Array</a></li></ul><li id="working-with-models-html-title-1-6" class="toc-item"><a href="working-with-models.html#title.1.6">Overriding the Constructor</a></li><li id="working-with-models-html-title-1-7" class="toc-item"><a href="working-with-models.html#title.1.7">Conclusion</a></li></ul><li id="yaml-schema-files-html-title-1" class="toc-item"><a href="yaml-schema-files.html#title.1">YAML Schema Files</a></li><ul><li id="yaml-schema-files-html-title-1-1" class="toc-item"><a href="yaml-schema-files.html#title.1.1">Introduction</a></li><li id="yaml-schema-files-html-title-1-2" class="toc-item"><a href="yaml-schema-files.html#title.1.2">Abbreviated Syntax</a></li><li id="yaml-schema-files-html-title-1-3" class="toc-item"><a href="yaml-schema-files.html#title.1.3">Verbose Syntax</a></li><li id="yaml-schema-files-html-title-1-4" class="toc-item"><a href="yaml-schema-files.html#title.1.4">Relationships</a></li><ul><li id="yaml-schema-files-html-title-1-4-1" class="toc-item"><a href="yaml-schema-files.html#title.1.4.1">Detect Relations</a></li><li id="yaml-schema-files-html-title-1-4-2" class="toc-item"><a href="yaml-schema-files.html#title.1.4.2">Customizing Relationships</a></li><li id="yaml-schema-files-html-title-1-4-3" class="toc-item"><a href="yaml-schema-files.html#title.1.4.3">One to One</a></li><li id="yaml-schema-files-html-title-1-4-4" class="toc-item"><a href="yaml-schema-files.html#title.1.4.4">One to Many</a></li><li id="yaml-schema-files-html-title-1-4-5" class="toc-item"><a href="yaml-schema-files.html#title.1.4.5">Many to Many</a></li></ul><li id="yaml-schema-files-html-title-1-5" class="toc-item"><a href="yaml-schema-files.html#title.1.5">Features &amp; Examples</a></li><ul><li id="yaml-schema-files-html-title-1-5-1" class="toc-item"><a href="yaml-schema-files.html#title.1.5.1">Connection Binding</a></li><li id="yaml-schema-files-html-title-1-5-2" class="toc-item"><a href="yaml-schema-files.html#title.1.5.2">Attributes</a></li><li id="yaml-schema-files-html-title-1-5-3" class="toc-item"><a href="yaml-schema-files.html#title.1.5.3">Enums</a></li><li id="yaml-schema-files-html-title-1-5-4" class="toc-item"><a href="yaml-schema-files.html#title.1.5.4">ActAs Behaviors</a></li><li id="yaml-schema-files-html-title-1-5-5" class="toc-item"><a href="yaml-schema-files.html#title.1.5.5">Listeners</a></li><li id="yaml-schema-files-html-title-1-5-6" class="toc-item"><a href="yaml-schema-files.html#title.1.5.6">Options</a></li><li id="yaml-schema-files-html-title-1-5-7" class="toc-item"><a href="yaml-schema-files.html#title.1.5.7">Indexes</a></li><li id="yaml-schema-files-html-title-1-5-8" class="toc-item"><a href="yaml-schema-files.html#title.1.5.8">Inheritance</a></li><ul></ul><li id="yaml-schema-files-html-title-1-5-9" class="toc-item"><a href="yaml-schema-files.html#title.1.5.9">Column Aliases</a></li><li id="yaml-schema-files-html-title-1-5-10" class="toc-item"><a href="yaml-schema-files.html#title.1.5.10">Packages</a></li><ul></ul><li id="yaml-schema-files-html-title-1-5-11" class="toc-item"><a href="yaml-schema-files.html#title.1.5.11">Global Schema Information</a></li></ul><li id="yaml-schema-files-html-title-1-6" class="toc-item"><a href="yaml-schema-files.html#title.1.6">Using Schema Files</a></li><li id="yaml-schema-files-html-title-1-7" class="toc-item"><a href="yaml-schema-files.html#title.1.7">Conclusion</a></li></ul></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Component Overview</li>
                            </ol>
                        </nav>
                                    </div>

                                    <div class="alert caution bg-light-yellow text-dark border"><i class="fas fa-exclamation-circle text-warning mr-2"></i> This project is no longer maintained and has been archived.</div>
                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            <ul class="list-inline">
                                                                            <li class="list-inline-item mr-0">
                                            <a href="/projects/doctrine1/en/latest/manual/component-overview.html" class="project-version-switcher badge badge-warning">master</a>
                                        </li>
                                    
                                    
                                    <li class="list-inline-item ml-2"><a href="https://github.com/doctrine/doctrine1-documentation/edit/master/source/en/manual/component-overview.rst" class="badge badge-primary">Edit</a></li>

                                </ul>
                            
                            
<p></p>
<hr />
<a class="section-anchor" id="title.1" name="title.1"></a><h1 class="section-header"><a href="#title.1">Component Overview<i class="fas fa-link"></i></a></h1>
<p>This chapter is intended to give you a birds eye view of all the main
components that make up Doctrine and how they work together. We've
discussed most of the components in the previous chapters but after this
chapter you will have a better idea of all the components and what their
jobs are.</p>
<a id="component-overview-manager"></a>
<hr />
<a class="section-anchor" id="title.1.1" name="title.1.1"></a><h2 class="section-header"><a href="#title.1.1">Manager<i class="fas fa-link"></i></a></h2>
<p>The Doctrine_Manager class is a singleton and is the root of the
configuration hierarchy and is used as a facade for controlling several
aspects of Doctrine. You can retrieve the singleton instance with the
following code.</p>

<pre><code class="">$manager = Doctrine_Manager::getInstance();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.1.1" name="title.1.1.1"></a><h3 class="section-header"><a href="#title.1.1.1">Retrieving Connections<i class="fas fa-link"></i></a></h3>

<pre><code class="">$connections = $manager-&gt;getConnections();
foreach (connections as $connection) {
    echo $connection-&gt;getName() . &quot;&quot;;
}

</code></pre>
<p>The Doctrine_Manager implements an iterator so you can simple loop
over the $manager variable to loop over the connections.</p>

<pre><code class="">foreach ($manager as $connection) {
    echo $connection-&gt;getName() . &quot;&quot;;
}
</code></pre>
<a id="component-overview-connection"></a>
<hr />
<a class="section-anchor" id="title.1.2" name="title.1.2"></a><h2 class="section-header"><a href="#title.1.2">Connection<i class="fas fa-link"></i></a></h2>
<p>Doctrine_Connection is a wrapper for database connection. The
connection is typically an instance of PDO but because of how Doctrine
is designed, it is possible to design your own adapters that mimic the
functionality that PDO provides.</p>
<p>The Doctrine_Connection class handles several things:</p>
<ul><li> Handles database portability things missing from PDO (eg. LIMIT /
   OFFSET emulation)</li>
<li> Keeps track of Doctrine_Table objects</li>
<li> Keeps track of records</li>
<li> Keeps track of records that need to be updated / inserted / deleted</li>
<li> Handles transactions and transaction nesting</li>
<li> Handles the actual querying of the database in the case of INSERT /
   UPDATE / DELETE operations</li>
<li> Can query the database using DQL. You will learn more about DQL in
   the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a> chapter.</li>
<li> Optionally validates transactions using Doctrine_Validator and gives
   full information of possible errors.</li>
</ul>

<hr />
<a class="section-anchor" id="title.1.2.1" name="title.1.2.1"></a><h3 class="section-header"><a href="#title.1.2.1">Available Drivers<i class="fas fa-link"></i></a></h3>
<p>Doctrine has drivers for every PDO-supported database. The supported
databases are:</p>
<ul><li> FreeTDS / Microsoft SQL Server / Sybase</li>
<li> Firebird/Interbase 6</li>
<li> Informix</li>
<li> Mysql</li>
<li> Oracle</li>
<li> Odbc</li>
<li> PostgreSQL</li>
<li> Sqlite</li>
</ul>

<hr />
<a class="section-anchor" id="title.1.2.2" name="title.1.2.2"></a><h3 class="section-header"><a href="#title.1.2.2">Creating Connections<i class="fas fa-link"></i></a></h3>

<pre><code class="">// bootstrap.php
$conn = Doctrine_Manager::connection('mysql://username:password@localhost/test', 'connection 1');
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>We have already created a new connection in the previous chapters. You can
skip the above step and use the connection we've already created. You can
retrieve it by using the Doctrine_Manager::connection method.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.2.3" name="title.1.2.3"></a><h3 class="section-header"><a href="#title.1.2.3">Flushing the Connection<i class="fas fa-link"></i></a></h3>
<p>When you create new <code>User</code> records you can flush the connection and save all
un-saved objects for that connection. Below is an example:</p>
<pre><code class="">$conn = Doctrine_Manager::connection();

$user1 = new User();
$user1-&gt;username = 'Jack';

$user2 = new User();
$user2-&gt;username = 'jwage';

$conn-&gt;flush();
</code></pre>
<p>Calling Doctrine_Connection::flush will save all unsaved record
instances for that connection. You could of course optionally call
save on each record instance and it would be the same thing.</p>

<pre><code class="">$user1-&gt;save();
$user2-&gt;save();
</code></pre>
<a id="component-overview-table"></a>
<hr />
<a class="section-anchor" id="title.1.3" name="title.1.3"></a><h2 class="section-header"><a href="#title.1.3">Table<i class="fas fa-link"></i></a></h2>
<p>Doctrine_Table holds the schema information specified by the given
component (record). For example if you have a <code>User</code> class that extends
Doctrine_Record, each schema definition call gets delegated to a
unique table object that holds the information for later use.</p>
<p>Each Doctrine_Table is registered by
Doctrine_Connection. You can retrieve the table object for each
component easily which is demonstrated right below.</p>
<p>For example, lets say we want to retrieve the table object for the User class.
We can do this by simply giving <code>User</code> as the first argument for the
Doctrine_Core::getTable method.</p>
<hr />
<a class="section-anchor" id="title.1.3.1" name="title.1.3.1"></a><h3 class="section-header"><a href="#title.1.3.1">Getting a Table Object<i class="fas fa-link"></i></a></h3>
<p>In order to get table object for specified record just call
Doctrine_Record::getTable.</p>

<pre><code class="">// test.php
$accountTable = Doctrine_Core::getTable('Account');
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.2" name="title.1.3.2"></a><h3 class="section-header"><a href="#title.1.3.2">Getting Column Information<i class="fas fa-link"></i></a></h3>
<p>You can retrieve the column definitions set in Doctrine_Record by
using the appropriate Doctrine_Table methods. If you need all
information of all columns you can simply use:</p>
<pre><code class="">// test.php
$columns = $accountTable-&gt;getColumns();

foreach ($columns as $column) {
    print_r($column);
}
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Array (
    [type] =&gt; integer
    [length] =&gt; 20
    [autoincrement] =&gt; 1
    [primary] =&gt; 1
)
Array (
    [type] =&gt; string
    [length] =&gt; 255
)
Array (
    [type] =&gt; decimal
    [length] =&gt; 18
)
</code></pre>
<p>Sometimes this can be an overkill. The following example shows how to
retrieve the column names as an array:</p>
<pre><code class="">// test.php
$names = $accountTable-&gt;getColumnNames();
print_r($names);
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Array (
    [0] =&gt; id
    [1] =&gt; name
    [2] =&gt; amount
)
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.3" name="title.1.3.3"></a><h3 class="section-header"><a href="#title.1.3.3">Getting Relation Information<i class="fas fa-link"></i></a></h3>
<p>You can also get an array of all the <code>Doctrine_Relation</code> objects by
simply calling Doctrine_Table::getRelations like the following:</p>
<pre><code class="">// test.php
$userTable = Doctrine_Core::getTable('User');
$relations = $userTable-&gt;getRelations();
foreach ($relations as $name =&gt; $relation) {
    echo $name . &quot;:\n&quot;;
    echo &quot;Local - &quot; . $relation-&gt;getLocal() . &quot;\n&quot;;
    echo &quot;Foreign - &quot; .    $relation-&gt;getForeign() . &quot;\n\n&quot;;
}
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Email:
Local - id
Foreign - user_id

Phonenumbers:
Local - id
Foreign - user_id

Groups:
Local - user_id
Foreign - group_id

Friends:
Local - user1
Foreign - user2

Addresses:
Local - id
Foreign - user_id

Threads:
Local - id
Foreign - user_id
</code></pre>
<p>You can get the <code>Doctrine_Relation</code> object for an individual relationship by
using the Doctrine_Table::getRelation method.</p>

<pre><code class="">// test.php
$relation = $userTable-&gt;getRelation('Phonenumbers');

echo 'Name: ' . $relation['alias'] . &quot;\n&quot;;
echo 'Local - ' . $relation['local'] . &quot;\n&quot;;
echo 'Foreign - ' .  $relation['foreign'] . &quot;\n&quot;;
echo 'Relation Class - ' . get_class($relation);
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Name: Phonenumbers
Local - id
Foreign - user_id
Relation Class - Doctrine_Relation_ForeignKey
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>Notice how in the above examples the <code>$relation</code> variable
holds an instance of <code>Doctrine_Relation_ForeignKey</code> yet we can
access it like an array. This is because, like many Doctrine
classes, it implements <code>ArrayAccess</code>.</p>
</div>
<p>You can debug all the information of a relationship by using the
print_r to inspect it.</p>

<pre><code class="">$array = $relation-&gt;toArray();
print_r($array);
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.4" name="title.1.3.4"></a><h3 class="section-header"><a href="#title.1.3.4">Finder Methods<i class="fas fa-link"></i></a></h3>
<p>Doctrine_Table provides basic finder methods. These finder methods
are very fast to write and should be used if you only need to fetch data
from one database table. If you need queries that use several components
(database tables) use Doctrine_Connection::query.</p>
<p>You can easily find an individual user by its primary key by using the
find method:</p>
<pre><code class="">$user = $userTable-&gt;find(2);
print_r($user-&gt;toArray());
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Array (
    [id] =&gt; 2
    [is_active] =&gt; 1
    [is_super_admin] =&gt; 0
    [first_name] =&gt;
    [last_name] =&gt;
    [username] =&gt; jwage
    [password] =&gt;
    [type] =&gt;
    [created_at] =&gt; 2009-01-21 13:29:12
    [updated_at] =&gt; 2009-01-21 13:29:12
)
</code></pre>
<p>You can also use the findAll method to retrieve a collection of
all <code>User</code> records in the database:</p>
<pre><code class="">foreach ($userTable-&gt;findAll() as $user) {
    echo $user-&gt;username . &quot;\n&quot;;
}
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Jack
jwage
</code></pre>
<div class="alert caution bg-light-yellow text-dark border"><i class="fas fa-exclamation-triangle text-danger mr-2"></i><p>The findAll method is not recommended as it will
Return all records in the database and if you need to retrieve
information from relationships it will lazily load that data causing
high query counts. You can learn how to retrieve records and their related
records efficiently by reading the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a>
chapter.</p>
</div>
<p>You can also retrieve a set of records with a DQL where condition by
using the findByDql method:</p>
<pre><code class="">$users = $userTable-&gt;findByDql('username LIKE ?', '%jw%');

foreach($users as $user) {
    echo $user-&gt;username . &quot;&quot;;
}
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
jwage
</code></pre>
<p>Doctrine also offers some additional magic finder methods that can be
read about in the [doc dql-doctrine-query-language:magic-finders :name]
section of the DQL chapter.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>All of the finders below provided by Doctrine_Table
use instances of Doctrine_Query for executing the queries. The
objects are built dynamically internally and executed.</p>
<p>Using Doctrine_Query instances are highly recommend when
accessing multiple objects through relationships. If you don't you will
have high query counts as the data will be lazily loaded. You can read more
about this in the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a> chapter.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.3.4.1" name="title.1.3.4.1"></a><h4 class="section-header"><a href="#title.1.3.4.1">Custom Table Classes<i class="fas fa-link"></i></a></h4>
<p>Adding custom table classes is very easy. Only thing you need to do is name the
classes as <code>[componentName]Table</code> and make them extend
Doctrine_Table`. So for the ``User` model we would create a class
like the following:</p>
<pre><code class="">// models/UserTable.php
class UserTable extends Doctrine_Table
{
}
</code></pre>
<hr />
<a class="section-anchor" id="title.1.3.5" name="title.1.3.5"></a><h3 class="section-header"><a href="#title.1.3.5">Custom Finders<i class="fas fa-link"></i></a></h3>
<p>You can add custom finder methods to your custom table object. These
finder methods may use fast Doctrine_Table finder methods or [doc
dql-doctrine-query-language DQL API] (Doctrine_Query::create).</p>

<pre><code class="">// models/UserTable.php
class UserTable extends Doctrine_Table
{
    public function findByName($name)
    {
        return Doctrine_Query::create()
                -&gt;from('User u')
                -&gt;where('u.name LIKE ?', &quot;%$name%&quot;)
                -&gt;execute();
    }
}
</code></pre>
<p>Doctrine will check if a child Doctrine_Table class called
<code>UserTable</code> exists when calling getTable and if it does, it will
return an instance of that instead of the default Doctrine_Table.</p>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>In order for custom {{Doctrine_Table}} classes to be
loaded you must enable the <code>autoload_table_classes</code> attribute in
your bootstrap.php file like done below.</p>

<pre><code class="">// boostrap.php
// ...
$manager-&gt;setAttribute(Doctrine_Core::ATTR_AUTOLOAD_TABLE_CLASSES, true);
</code></pre>
</div>
<p>Now when we ask for the <code>User</code> table object we will get the following:</p>
<pre><code class="">$userTable = Doctrine_Core::getTable('User');

echo get_class($userTable); // UserTable

$users = $userTable-&gt;findByName(&quot;Jack&quot;);
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The above example where we add a {{findByName()}} method is
made possible automatically by the magic finder methods. You can
read about them in the [doc
dql-doctrine-query-language:magic-finders :name] section of the DQL
chapter.</p>
</div>
<a id="component-overview-record"></a>
<hr />
<a class="section-anchor" id="title.1.4" name="title.1.4"></a><h2 class="section-header"><a href="#title.1.4">Record<i class="fas fa-link"></i></a></h2>
<p>Doctrine represents tables in your RDBMS with child
Doctrine_Record classes. These classes are where you define your
schema information, options, attributes, etc. Instances of these child classes
represents records in the database and you can get and set properties on these
objects.</p>
<hr />
<a class="section-anchor" id="title.1.4.1" name="title.1.4.1"></a><h3 class="section-header"><a href="#title.1.4.1">Properties<i class="fas fa-link"></i></a></h3>
<p>Each assigned column property of Doctrine_Record represents a
database table column. You will learn more about how to define your models in
the <a href="defining-models.html">Defining Models</a> chapter.</p>
<p>Now accessing the columns is easy:</p>
<pre><code class="">// test.php
$userTable = Doctrine_Core::getTable('User');
$user = $userTable-&gt;find(1);
</code></pre>
<ul><li>Access property through overloading::
    // ...
    echo $user-&gt;username;</li>
<li>Access property with get()::
    // ...
    echo $user-&gt;get('username);</li>
<li>Access property with ArrayAccess::
    // ...
    echo $user['username'];</li>
</ul>

<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>The recommended way to access column values is by using the
ArrayAccess as it makes it easy to switch between record and array
fetching when needed.</p>
</div>
<p>Iterating through the properties of a record can be done in similar way
as iterating through an array - by using the <code>foreach</code> construct. This
is possible since Doctrine_Record implements a magic
<code>IteratorAggregate</code> interface.</p>

<pre><code class="">foreach ($user as $field =&gt; $value) {
    echo $field . ': ' . $value . &quot;&quot;;
}
</code></pre>
<p>As with arrays you can use the isset for checking if given
property exists and unset for setting given property to null.</p>
<p>We can easily check if a property named 'name' exists in a if conditional:</p>
<pre><code class="">if (isset($user['username'])) {
}
</code></pre>
<p>If we want to unset the name property we can do it using the unset
function in php:</p>
<pre><code class="">unset($user['username']);
</code></pre>
<p>When you have set values for record properties you can get an array of
the modified fields and values using Doctrine_Record::getModified:</p>
<pre><code class="">// test.php
$user['username'] = 'Jack Daniels';
print_r($user-&gt;getModified());
</code></pre>
<p>The above example would output the following when executed:</p>
<pre><code class="text">$ php test.php
Array (
    [username] =&gt; Jack Daniels
)
</code></pre>
<p>You can also simply check if a record is modified by using the
Doctrine_Record::isModified method:</p>
<pre><code class="">echo $user-&gt;isModified() ? 'Modified' : 'Not Modified';
</code></pre>
<p>Sometimes you may want to retrieve the column count of given record. In
order to do this you can simply pass the record as an argument for the
Doctrine_Record
implements a magic Countable interface. The other way would be calling
the count method.</p>

<pre><code class="">echo $record-&gt;count();
echo count($record);
</code></pre>
<p>Doctrine_Record offers a special method for accessing the
identifier of given record. This method is called identifier and
it returns an array with identifier field names as keys and values as
the associated property values.</p>

<pre><code class="">$user['username'] = 'Jack Daniels';
$user-&gt;save();

print_r($user-&gt;identifier()); // array('id' =&gt; 1)
</code></pre>
<p>A common case is that you have an array of values which you need to
assign to a given record. It may feel awkward and clumsy to set these
values separately. No need to worry though, Doctrine_Record offers
a way for merging a given array or record to another</p>
<p>The merge method iterates through the properties of the given
record or array and assigns the values to the object</p>

<pre><code class="">$values = array(
    'username' =&gt; 'someone',
    'age' =&gt; 11,
);

$user-&gt;merge($values);

echo $user-&gt;username; // someone
echo $user-&gt;age; // 11
</code></pre>
<p>You can also merge a one records values in to another like the
following:</p>
<pre><code class="">$user1 = new User();
$user1-&gt;username = 'jwage';

$user2 = new User();
$user2-&gt;merge($user1);

echo $user2-&gt;username; // jwage
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>fromArray method
which is identical to merge and only exists for consistency
with the toArray method.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.4.2" name="title.1.4.2"></a><h3 class="section-header"><a href="#title.1.4.2">Updating Records<i class="fas fa-link"></i></a></h3>
<p>Updating objects is very easy, you just call the
Doctrine_Record::save method. The other way is to call
Doctrine_Connection::flush which saves all objects. It should be
noted though that flushing is a much heavier operation than just calling
save method.</p>

<pre><code class="">$userTable = Doctrine_Core::getTable('User');
$user = $userTable-&gt;find(2);

if ($user !== false) {
    $user-&gt;username = 'Jack Daniels';
    $user-&gt;save();
}
</code></pre>
<p>Sometimes you may want to do a direct update. In direct update the
objects aren't loaded from database, rather the state of the database is
directly updated. In the following example we use DQL UPDATE statement
to update all users.</p>
<p>Run a query to make all user names lowercase:</p>
<pre><code class="">$q = Doctrine_Query::create()
        -&gt;update('User u')
        -&gt;set('u.username', 'LOWER(u.name)');

$q-&gt;execute();
</code></pre>
<p>You can also run an update using objects if you already know the identifier of
the record. When you use the Doctrine_Record::assignIdentifier
method it sets the record identifier and changes the state so that calling
Doctrine_Record::save performs an update instead of insert.</p>

<pre><code class="">$user = new User();
$user-&gt;assignIdentifier(1);
$user-&gt;username = 'jwage';
$user-&gt;save();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.3" name="title.1.4.3"></a><h3 class="section-header"><a href="#title.1.4.3">Replacing Records<i class="fas fa-link"></i></a></h3>
<p>Replacing records is simple. If you instantiate a new object and save it
and then late instantiate another new object with the same primary key
or unique index value which already exists in the database, then it will
replace/update that row in the database instead of inserting a new one.
Below is an example.</p>
<p>First, imagine a <code>User</code> model where username is a unique index.</p>

<pre><code class="">// test.php
$user = new User();
$user-&gt;username = 'jwage';
$user-&gt;password = 'changeme';
$user-&gt;save();
</code></pre>
<p>Issues the following query</p>
<pre><code class="sql">INSERT INTO user
    (username, password)
VALUES
    (?, ?),
    ('jwage', 'changeme')
</code></pre>
<p>Now lets create another new object and set the same username but a
different password.</p>

<pre><code class="">$user = new User();
$user-&gt;username = 'jwage';
$user-&gt;password = 'newpassword';
$user-&gt;replace();
</code></pre>
<p>Issues the following query</p>
<pre><code class="sql">REPLACE INTO user
    (id, username, password)
VALUES
    (?, ?, ?),
    (null, 'jwage', 'newpassword')
</code></pre>
<p>The record is replaced/updated instead of a new one being inserted</p>
<hr />
<a class="section-anchor" id="title.1.4.4" name="title.1.4.4"></a><h3 class="section-header"><a href="#title.1.4.4">Refreshing Records<i class="fas fa-link"></i></a></h3>
<p>Sometimes you may want to refresh your record with data from the
database, use Doctrine_Record::refresh.</p>

<pre><code class="">$user = Doctrine_Core::getTable('User')-&gt;find(2);
$user-&gt;username = 'New name';
</code></pre>
<p>Now if you use the Doctrine_Record::refresh method it will select
the data from the database again and update the properties of the
instance.</p>

<pre><code class="">$user-&gt;refresh();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.5" name="title.1.4.5"></a><h3 class="section-header"><a href="#title.1.4.5">Refreshing relationships<i class="fas fa-link"></i></a></h3>
<p>The Doctrine_Record::refresh method can also refresh the already
loaded record relationships, but you need to specify them on the
original query.</p>
<p>First lets retrieve a <code>User</code> with its associated <code>Groups</code>:</p>
<pre><code class="">$q = Doctrine_Query::create()
        -&gt;from('User u')
        -&gt;leftJoin('u.Groups')
        -&gt;where('id = ?');

$user = $q-&gt;fetchOne(array(1));
</code></pre>
<p>Now lets retrieve a <code>Group</code> with its associated <code>Users</code>:</p>
<pre><code class="">$q = Doctrine_Query::create()
        -&gt;from('Group g')
        -&gt;leftJoin('g.Users')
        -&gt;where('id = ?');

$group = $q-&gt;fetchOne(array(1));
</code></pre>
<p>Now lets link the retrieved <code>User</code> and <code>Group</code> through a
<code>UserGroup</code> instance:</p>
<pre><code class="">$userGroup = new UserGroup();
$userGroup-&gt;user_id = $user-&gt;id;
$userGroup-&gt;group_id = $group-&gt;id;
$userGroup-&gt;save();
</code></pre>
<p>You can also link a <code>User</code> to a <code>Group</code> in a much simpler way, by
simply adding the <code>Group</code> to the <code>User</code>. Doctrine will take care of
creating the <code>UserGroup</code> instance for you automatically:</p>
<pre><code class="">$user-&gt;Groups[] = $group;
$user-&gt;save()
</code></pre>
<p>Now if we call <code>Doctrine_Record::refresh(true)</code> it will refresh the
record and its relationships loading the newly created reference we made
above:</p>
<pre><code class="">$user-&gt;refresh(true);
$group-&gt;refresh(true);
</code></pre>
<p>You can also lazily refresh all defined relationships of a model using
Doctrine_Record::refreshRelated:</p>
<pre><code class="">$user = Doctrine_Core::getTable('User')-&gt;findOneByName('jon');
$user-&gt;refreshRelated();
</code></pre>
<p>If you want to refresh an individual specified relationship just pass
the name of a relationship to the refreshRelated function and it
will lazily load the relationship:</p>
<pre><code class="">$user-&gt;refreshRelated('Phonenumber');
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.6" name="title.1.4.6"></a><h3 class="section-header"><a href="#title.1.4.6">Deleting Records<i class="fas fa-link"></i></a></h3>
<p>Deleting records in Doctrine is handled by Doctrine_Record::delete,
Doctrine_Collection::delete and
Doctrine_Connection::delete methods.</p>

<pre><code class="">$userTable = Doctrine_Core::getTable(&quot;User&quot;);

$user = $userTable-&gt;find(2);

// deletes user and all related composite objects
if($user !== false) {
    $user-&gt;delete();
}
</code></pre>
<p>If you have a Doctrine_Collection` of ``User` records you can call
delete and it will loop over all records calling
Doctrine_Record::delete for you.</p>

<pre><code class="">$users = $userTable-&gt;findAll();
</code></pre>
<p>Now you can delete all users and their related composite objects by calling
Doctrine_Collection::delete`. It will loop over all ``Users` in the
collection calling delete one each one:</p>
<pre><code class="">$users-&gt;delete();
</code></pre>
<a id="component-overview-using-expression-values"></a>
<hr />
<a class="section-anchor" id="title.1.4.7" name="title.1.4.7"></a><h3 class="section-header"><a href="#title.1.4.7">Using Expression Values<i class="fas fa-link"></i></a></h3>
<p>There might be situations where you need to use SQL expressions as
values of columns. This can be achieved by using
<code>Doctrine_Expression</code> which converts portable DQL expressions to your
native SQL expressions.</p>
<p>Lets say we have a class called event with columns
<code>timepoint(datetime)</code> and <code>name(string)</code>. Saving the record with the
current timestamp can be achieved as follows:</p>
<pre><code class="">// test.php
$user = new User();
$user-&gt;username = 'jwage';
$user-&gt;updated_at = new Doctrine_Expression('NOW()');
$user-&gt;save();
</code></pre>
<p>The above code would issue the following SQL query:</p>
<pre><code class="sql">INSERT INTO user (username, updated_at) VALUES ('jwage', NOW())
</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>When you use <code>Doctrine_Expression</code> with your objects in
order to get the updated value you will have to manually call
refresh to get the updated value from the database.</p>

<pre><code class="">$user-&gt;refresh();
</code></pre>
</div>
<hr />
<a class="section-anchor" id="title.1.4.8" name="title.1.4.8"></a><h3 class="section-header"><a href="#title.1.4.8">Getting Record State<i class="fas fa-link"></i></a></h3>
<p>Every Doctrine_Record has a state. First of all records can be
transient or persistent. Every record that is retrieved from database is
persistent and every newly created record is considered transient. If a
Doctrine_Record is retrieved from database but the only loaded
property is its primary key, then this record has a state called proxy.</p>
<p>Every transient and persistent Doctrine_Record is either clean or
dirty. Doctrine_Record is clean when none of its properties are
changed and dirty when at least one of its properties has changed.</p>
<p>A record can also have a state called locked. In order to avoid infinite
recursion in some rare circular reference cases Doctrine uses this state
internally to indicate that a record is currently under a manipulation
operation.</p>
<p>Below is a table containing all the different states a record can be in
with a short description of it:</p>
<table class="table table-bordered"><tr><td>Name</td><td>Description</td></tr><tr><td>Doctrine_Record::STATE_PROXY   Record is in    Doctrine_Record::STATE_TCLEAN  Record is tra   Doctrine_Record::STATE_TDIRTY  Record is tra   Doctrine_Record::STATE_DIRTY   Record is dir   Doctrine_Record::STATE_CLEAN   Record is cle   Doctrine_Record::STATE_LOCKED  Record is loc</td><td>proxy state meaning its persistent but not all of its properties are loaded from the database. nsient clean, meaning its transient and none of its properties are changed. nsient dirty, meaning its transient and some of its properties are changed. ty, meaning its persistent and some of its properties are changed. an, meaning its persistent and none of its properties are changed. ked.</td></tr></table>
<p>You can easily get the state of a record by using the
Doctrine_Record::state method:</p>
<pre><code class="">$user = new User();

if ($user-&gt;state() == Doctrine_Record::STATE_TDIRTY) {
    echo 'Record is transient dirty';
}
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>values specified in the schema. If we use an object that has no
default values and instantiate a new instance it will return
<code>TCLEAN</code>.</p>
</div>

<pre><code class="">$account = new Account();

if ($account-&gt;state() == Doctrine_Record::STATE_TCLEAN) {
    echo 'Record is transient clean';
}
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.9" name="title.1.4.9"></a><h3 class="section-header"><a href="#title.1.4.9">Getting Object Copy<i class="fas fa-link"></i></a></h3>
<p>Sometimes you may want to get a copy of your object (a new object with
all properties copied). Doctrine provides a simple method for this:
Doctrine_Record::copy.</p>

<pre><code class="">$copy = $user-&gt;copy();
</code></pre>
<p>Notice that copying the record with copy returns a new record
(state <code>TDIRTY</code>) with the values of the old record, and it copies the
relations of that record. If you do not want to copy the relations too,
you need to use <code>copy(false)</code>.</p>
<p>Get a copy of user without the relations:</p>
<pre><code class="">$copy = $user-&gt;copy(false);
</code></pre>
<p>Using the PHP <code>clone</code> functionality simply uses this copy
functionality internally:</p>
<pre><code class="">$copy = clone $user;
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.10" name="title.1.4.10"></a><h3 class="section-header"><a href="#title.1.4.10">Saving a Blank Record<i class="fas fa-link"></i></a></h3>
<p>By default Doctrine doesn't execute when save is being called on
an unmodified record. There might be situations where you want to
force-insert the record even if it has not been modified. This can be
achieved by assigning the state of the record to
Doctrine_Record::STATE_TDIRTY:</p>
<pre><code class="">$user = new User();
$user-&gt;state('TDIRTY');
$user-&gt;save();
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>When setting the state you can optionally pass a string for
the state and it will be converted to the appropriate state
constant. In the example above, <code>TDIRTY</code> is actually converted to
Doctrine_Record::STATE_TDIRTY.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.4.11" name="title.1.4.11"></a><h3 class="section-header"><a href="#title.1.4.11">Mapping Custom Values<i class="fas fa-link"></i></a></h3>
<p>There might be situations where you want to map custom values to
records. For example values that depend on some outer sources and you
only want these values to be available at runtime not persisting those
values into database. This can be achieved as follows:</p>
<pre><code class="">$user-&gt;mapValue('isRegistered', true);

$user-&gt;isRegistered; // true
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.12" name="title.1.4.12"></a><h3 class="section-header"><a href="#title.1.4.12">Serializing<i class="fas fa-link"></i></a></h3>
<p>Sometimes you may want to serialize your record objects (possibly for
caching purposes):</p>
<pre><code class="">$string = serialize($user);

$user = unserialize($string);
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.13" name="title.1.4.13"></a><h3 class="section-header"><a href="#title.1.4.13">Checking Existence<i class="fas fa-link"></i></a></h3>
<p>Very commonly you'll need to know if given record exists in the
database. You can use the exists method for checking if given
record has a database row equivalent:</p>
<pre><code class="">$record = new User();

echo $record-&gt;exists() ? 'Exists' : 'Does Not Exist'; // Does Not Exist

$record-&gt;username = 'someone'; $record-&gt;save();

echo $record-&gt;exists() ? 'Exists' : 'Does Not Exist'; // Exists
</code></pre>
<hr />
<a class="section-anchor" id="title.1.4.14" name="title.1.4.14"></a><h3 class="section-header"><a href="#title.1.4.14">Function Callbacks for Columns<i class="fas fa-link"></i></a></h3>
<p>Doctrine_Record offers a way for attaching callback calls for
column values. For example if you want to trim certain column, you can
simply use:</p>
<pre><code class="">$record-&gt;call('trim', 'username');
</code></pre>
<a id="component-overview-collection"></a>
<hr />
<a class="section-anchor" id="title.1.5" name="title.1.5"></a><h2 class="section-header"><a href="#title.1.5">Collection<i class="fas fa-link"></i></a></h2>
<p>Doctrine_Collection is a collection of records (see
Doctrine_Record). As with records the collections can be deleted and
saved using Doctrine_Collection::delete and
Doctrine_Collection::save accordingly.</p>
<p>When fetching data from database with either DQL API (see
Doctrine_Query`) or rawSql API (see ``Doctrine_RawSql`) the
methods return an instance of Doctrine_Collection by default.</p>
<p>The following example shows how to initialize a new collection:</p>
<pre><code class="">$users = new Doctrine_Collection('User');
</code></pre>
<p>Now add some new data to the collection:</p>
<pre><code class="">$users[0]-&gt;username = 'Arnold';
$users[1]-&gt;username = 'Somebody';
</code></pre>
<p>Now just like we can delete a collection we can save it:</p>
<pre><code class="">$users-&gt;save();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.5.1" name="title.1.5.1"></a><h3 class="section-header"><a href="#title.1.5.1">Accessing Elements<i class="fas fa-link"></i></a></h3>
<p>You can access the elements of Doctrine_Collection with
get methods or with ArrayAccess interface.</p>

<pre><code class="">$userTable = Doctrine_Core::getTable('User');
$users = $userTable-&gt;findAll();
</code></pre>
<ul><li>Accessing elements with ArrayAccess interface::
    $users[0]-&gt;username = &quot;Jack Daniels&quot;;
    $users[1]-&gt;username = &quot;John Locke&quot;;</li>
<li>Accessing elements with get::
    echo $users-&gt;get(1)-&gt;username;</li>
</ul>

<hr />
<a class="section-anchor" id="title.1.5.2" name="title.1.5.2"></a><h3 class="section-header"><a href="#title.1.5.2">Adding new Elements<i class="fas fa-link"></i></a></h3>
<p>When accessing single elements of the collection and those elements
(records) don't exist Doctrine auto-adds them.</p>
<p>In the following example we fetch all users from database (there are 5)
and then add couple of users in the collection.</p>
<p>As with PHP arrays the indexes start from zero.</p>

<pre><code class="">// test.php
$users = $userTable-&gt;findAll();

echo count($users); // 5

$users[5]-&gt;username = &quot;new user 1&quot;;
$users[6]-&gt;username = &quot;new user 2&quot;;
</code></pre>
<p>You could also optionally omit the 5 and 6 from the array index and it
will automatically increment just as a PHP array would:</p>
<pre><code class="">$users[]-&gt;username = 'new user 3'; // key is 7
$users[]-&gt;username = 'new user 4'; // key is 8
</code></pre>
<hr />
<a class="section-anchor" id="title.1.5.3" name="title.1.5.3"></a><h3 class="section-header"><a href="#title.1.5.3">Getting Collection Count<i class="fas fa-link"></i></a></h3>
<p>The Doctrine_Collection::count method returns the number of
elements currently in the collection:</p>
<pre><code class="">$users = $userTable-&gt;findAll();

echo $users-&gt;count();
</code></pre>
<p>Since Doctrine_Collection implements Countable interface a valid
alternative for the previous example is to simply pass the collection as
an argument for the count() function:</p>
<pre><code class="">echo count($users);
</code></pre>
<hr />
<a class="section-anchor" id="title.1.5.4" name="title.1.5.4"></a><h3 class="section-header"><a href="#title.1.5.4">Saving the Collection<i class="fas fa-link"></i></a></h3>
<p>Similar to Doctrine_Record the collection can be saved by calling
the save gets called Doctrine issues
save operations an all records and wraps the whole procedure in a
transaction.</p>

<pre><code class="">$users = $userTable-&gt;findAll();

$users[0]-&gt;username = 'Jack Daniels';
$users[1]-&gt;username = 'John Locke';

$users-&gt;save();
</code></pre>
<hr />
<a class="section-anchor" id="title.1.5.5" name="title.1.5.5"></a><h3 class="section-header"><a href="#title.1.5.5">Deleting the Collection<i class="fas fa-link"></i></a></h3>
<p>Doctrine Collections can be deleted in very same way is Doctrine Records
you just call delete method. As for all collections Doctrine knows
how to perform single-shot-delete meaning it only performs one database
query for the each collection.</p>
<p>For example if we have collection of users. When deleting the collection
of users doctrine only performs one query for this whole transaction.
The query would look something like:</p>
<pre><code class="sql">DELETE FROM user WHERE id IN (1, 2, 3, ... , N)
</code></pre>
<hr />
<a class="section-anchor" id="title.1.5.6" name="title.1.5.6"></a><h3 class="section-header"><a href="#title.1.5.6">Key Mapping<i class="fas fa-link"></i></a></h3>
<p>Sometimes you may not want to use normal indexing for collection elements. For
example in some cases mapping primary keys as collection keys might be useful.
The following example demonstrates how this can be achieved.</p>
<ul><li>Map the <code>id</code> column::
    // test.php
    $userTable = Doctrine_Core::getTable('User');
    $userTable-&gt;setAttribute(Doctrine_Core::ATTR_COLL_KEY, 'id');</li>
<li>Now user collections will use the values of id column as element indexes::
    $users = $userTable-&gt;findAll();
    foreach($users as $id =&gt; $user) {
        echo $id . $user-&gt;username;
    }</li>
<li>You may want to map the <code>name</code> column::
    $userTable = Doctrine_Core::getTable('User');
    $userTable-&gt;setAttribute(Doctrine_Core::ATTR_COLL_KEY, 'username');</li>
<li>Now user collections will use the values of <code>name</code> column as element
  indexes::
    $users = $userTable-&gt;findAll();
    foreach($users as $username =&gt; $user) {
        echo $username . ' - ' . $user-&gt;created_at . &quot;&quot;;
    }</li>
</ul>

<div class="alert caution bg-light-yellow text-dark border"><i class="fas fa-exclamation-triangle text-danger mr-2"></i><p>Note this would only be advisable if the <code>username</code> column is specified
as unique in your schema otherwise you will have cases where data cannot be
hydrated properly due to duplicate collection keys.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.5.7" name="title.1.5.7"></a><h3 class="section-header"><a href="#title.1.5.7">Loading Related Records<i class="fas fa-link"></i></a></h3>
<p>Doctrine provides means for efficiently retrieving all related records
for all record elements. That means when you have for example a
collection of users you can load all phonenumbers for all users by
simple calling the loadRelated method.</p>
<p>However, in most cases you don't need to load related elements
explicitly, rather what you should do is try to load everything at once
by using the DQL API and JOINS.</p>
<p>The following example uses three queries for retrieving users, their
phonenumbers and the groups they belong to.</p>

<pre><code class="">$q = Doctrine_Query::create()
        -&gt;from('User u');

$users = $q-&gt;execute();
</code></pre>
<p>Now lets load phonenumbers for all users:</p>
<pre><code class="">$users-&gt;loadRelated('Phonenumbers');

foreach($users as $user) {
    echo $user-&gt;Phonenumbers[0]-&gt;phonenumber;
    // no additional db queries needed here
}
</code></pre>
<p>The loadRelated works an any relation, even associations:</p>
<pre><code class="">$users-&gt;loadRelated('Groups');

foreach($users as $user) {
    echo $user-&gt;Groups[0]-&gt;name;
}
</code></pre>
<p>The example below shows how to do this more efficiently by using the DQL
API.</p>
<p>Write a Doctrine_Query that loads everything in one query:</p>
<pre><code class="">$q = Doctrine_Query::create()
        -&gt;from('User u')
        -&gt;leftJoin('u.Phonenumbers p')
        -&gt;leftJoin('u.Groups g');

$users = $q-&gt;execute();
</code></pre>
<p>Now when we use the <code>Phonenumbers</code> and <code>Groups</code> no additional database
queries are needed:</p>
<pre><code class="">foreach($users as $user) {
    echo $user-&gt;Phonenumbers[0]-&gt;phonenumber;
    echo $user-&gt;Groups[0]-&gt;name;
}
</code></pre>
<hr />
<a class="section-anchor" id="title.1.6" name="title.1.6"></a><h2 class="section-header"><a href="#title.1.6">Validator<i class="fas fa-link"></i></a></h2>
<p>Validation in Doctrine is a way to enforce your business rules in the model
part of the MVC architecture. You can think of this validation as a gateway
that needs to be passed right before data gets into the persistent data store.
The definition of these business rules takes place at the record level, that
means in your active record model classes (classes derived from
Doctrine_Record). The first thing you need to do to be able to use
this kind of validation is to enable it globally. This is done through the
Doctrine_Manager.</p>

<pre><code class="">// bootstrap.php
$manager-&gt;setAttribute(Doctrine_Core::ATTR_VALIDATE, Doctrine_Core::VALIDATE_ALL);
</code></pre>
<p>Once you enabled validation, you'll get a bunch of validations
automatically:</p>
<ul><li> Data type validations: All values assigned to columns are checked for
   the right type. That means if you specified a column of your record
   as type 'integer', Doctrine will validate that any values assigned to
   that column are of this type. This kind of type validation tries to
   be as smart as possible since PHP is a loosely typed language. For
   example 2 as well as &quot;7&quot; are both valid integers whilst &quot;3f&quot; is not.
   Type validations occur on every column (since every column definition
   needs a type).</li>
<li> Length validation: As the name implies, all values assigned to
   columns are validated to make sure that the value does not exceed the
   maximum length.</li>
</ul>

<p>You can combine the following constants by using bitwise operations:
<code>VALIDATE_ALL</code>, <code>VALIDATE_TYPES</code>, <code>VALIDATE_LENGTHS</code>,
<code>VALIDATE_CONSTRAINTS</code>, <code>VALIDATE_NONE</code>.</p>
<p>For example to enable all validations except length validations you
would use:</p>
<pre><code class="">// bootstrap.php
$manager-&gt;setAttribute(Doctrine_Core::ATTR_VALIDATE, VALIDATE_ALL &amp; ~VALIDATE_LENGTHS);
</code></pre>
<p>You can read more about this topic in the <a href="data-validation.html">Data Validation</a>
chapter.</p>
<hr />
<a class="section-anchor" id="title.1.6.1" name="title.1.6.1"></a><h3 class="section-header"><a href="#title.1.6.1">More Validation<i class="fas fa-link"></i></a></h3>
<p>The type and length validations are handy but most of the time they're
not enough. Therefore Doctrine provides some mechanisms that can be used
to validate your data in more detail.</p>
<p>Validators are an easy way to specify further validations. Doctrine has
a lot of predefined validators that are frequently needed such as
<code>email</code>, <code>country</code>, <code>ip</code>, <code>range</code> and <code>regexp</code> validators. You
find a full list of available validators in the [doc data-validation
:name] chapter. You can specify which validators apply to which column
through the 4th argument of the hasColumn method. If that is still
not enough and you need some specialized validation that is not yet
available as a predefined validator you have three options:</p>
<ul><li> You can write the validator on your own.</li>
<li> You can propose your need for a new validator to a Doctrine
   developer.</li>
<li> You can use validation hooks.</li>
</ul>

<p>The first two options are advisable if it is likely that the validation
is of general use and is potentially applicable in many situations. In
that case it is a good idea to implement a new validator. However if the
validation is special it is better to use hooks provided by Doctrine:</p>
<ul><li> validate (Executed every time the record gets validated)</li>
<li> validateOnInsert (Executed when the record is new and gets
   validated)</li>
<li> validateOnUpdate (Executed when the record is not new and gets
   validated)</li>
</ul>

<p>If you need a special validation in your active record you can simply override
one of these methods in your active record class (a descendant of
Doctrine_Record). Within these methods you can use all the power
of PHP to validate your fields. When a field does not pass your validation you
can then add errors to the record's error stack. The following code snippet
shows an example of how to define validators together with custom validation:</p>

<pre><code class="">// models/User.php
class User extends BaseUser
{
    protected function validate()
    {
        if ($this-&gt;username == 'God') {
            // Blasphemy! Stop that! ;-)
            // syntax: add(&lt;fieldName&gt;, &lt;error code/identifier&gt;)
            $errorStack = $this-&gt;getErrorStack();
            $errorStack-&gt;add('name', 'You cannot use this username!');
        }
    }
}

</code></pre>

<pre><code class="">// models/Email.php
class Email extends BaseEmail
{
    // ...

    public function setTableDefinition()
    {
        parent::setTableDefinition();

        // ...

        // validators 'email' and 'unique' used
        $this-&gt;hasColumn('address', 'string', 150, array('email', 'unique'));
    }
}
</code></pre>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>
<pre><code class="yaml"># schema.yml
Email:
  columns:
    address:
      type: string(150)
      email: true
      unique: true
</code></pre>
<hr />
<a class="section-anchor" id="title.1.6.2" name="title.1.6.2"></a><h3 class="section-header"><a href="#title.1.6.2">Valid or Not Valid<i class="fas fa-link"></i></a></h3>
<p>Now that you know how to specify your business rules in your models, it
is time to look at how to deal with these rules in the rest of your
application.</p>
<hr />
<a class="section-anchor" id="title.1.6.2.1" name="title.1.6.2.1"></a><h4 class="section-header"><a href="#title.1.6.2.1">Implicit Validation<i class="fas fa-link"></i></a></h4>
<p>Whenever a record is going to be saved to the persistent data store (i.e.
through calling $record-&gt;save) the full validation procedure is
executed. If errors occur during that process an exception of the type
Doctrine_Validator_Exception will be thrown. You can catch that
exception and analyze the errors by using the instance method
Doctrine_Validator_Exception::getInvalidRecords. This method
returns an ordinary array with references to all records that did not pass
validation. You can then further explore the errors of each record by analyzing
the error stack of each record. The error stack of a record can be obtained
with the instance method Doctrine_Record::getErrorStack. Each error
stack is an instance of the class <code>Doctrine_Validator_ErrorStack</code>. The error
stack provides an easy to use interface to inspect the errors.</p>
<hr />
<a class="section-anchor" id="title.1.6.2.2" name="title.1.6.2.2"></a><h4 class="section-header"><a href="#title.1.6.2.2">Explicit Validation<i class="fas fa-link"></i></a></h4>
<p>You can explicitly trigger the validation for any record at any time.
For this purpose Doctrine_Record provides the instance method
Doctrine_Record::isValid. This method returns a boolean value
indicating the result of the validation. If the method returns false,
you can inspect the error stack in the same way as seen above except
that no exception is thrown, so you simply obtain the error stack of the
record that didnt pass validation through
Doctrine_Record::getErrorStack.</p>
<p>The following code snippet shows an example of handling implicit
validation which caused a Doctrine_Validator_Exception.</p>

<pre><code class="">// test.php
$user = new User();

try {
    $user-&gt;username = str_repeat('t', 256);
    $user-&gt;Email-&gt;address = &quot;drink@@notvalid..&quot;;
    $user-&gt;save();
} catch(Doctrine_Validator_Exception $e) {
    $userErrors = $user-&gt;getErrorStack();
    $emailErrors = $user-&gt;Email-&gt;getErrorStack();

    foreach($userErrors as $fieldName =&gt; $errorCodes) {
        echo $fieldName . &quot; - &quot; . implode(', ', $errorCodes) . &quot;\n&quot;;
    }
    foreach($emailErrors as $fieldName =&gt; $errorCodes) {
        echo $fieldName . &quot; - &quot; . implode(', ', $errorCodes) . &quot;\n&quot;;
    }
}
</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>You could also use $e-&gt;getInvalidRecords. The direct
way used above is just more simple when you know the records you're
dealing with.</p>
</div>
<p>You can also retrieve the error stack as a nicely formatted string for
easy use in your applications:</p>
<pre><code class="">// test.php
echo $user-&gt;getErrorStackAsString();
</code></pre>
<p>It would output an error string that looks something like the following:</p>
<pre><code class="text">Validation failed in class User

1 field had validation error:

* 1 validator failed on username (length)
</code></pre>
<hr />
<a class="section-anchor" id="title.1.7" name="title.1.7"></a><h2 class="section-header"><a href="#title.1.7">Profiler<i class="fas fa-link"></i></a></h2>
<p><code>Doctrine_Connection_Profiler</code> is an event listener for
Doctrine_Connection. It provides flexible query profiling. Besides
the SQL strings the query profiles include elapsed time to run the queries.
This allows inspection of the queries that have been performed without the need
for adding extra debugging code to model classes.</p>
<p><code>Doctrine_Connection_Profiler</code> can be enabled by adding it as an event
listener for Doctrine_Connection:</p>
<pre><code class="">$profiler = new Doctrine_Connection_Profiler();

$conn = Doctrine_Manager::connection();
$conn-&gt;setListener($profiler);
</code></pre>
<hr />
<a class="section-anchor" id="title.1.7.1" name="title.1.7.1"></a><h3 class="section-header"><a href="#title.1.7.1">Basic Usage<i class="fas fa-link"></i></a></h3>
<p>Perhaps some of your pages is loading slowly. The following shows how to
build a complete profiler report from the connection:</p>
<pre><code class="">// test.php
$time = 0;
foreach ($profiler as $event) {
    $time += $event-&gt;getElapsedSecs();

    printf(
        &quot;%s %f\n%s\n&quot;,
        $event-&gt;getName(),
        $event-&gt;getElapsedSecs(),
        $event-&gt;getQuery()
    );

    $params = $event-&gt;getParams();
    if (!empty($params)) {
        print_r($params);
    }
}
echo &quot;Total time: &quot; . $time . &quot;\n&quot;;

</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>Frameworks like <a href="http://www.symfony-project.com">symfony</a>, <a href="">Zend
&lt;http://framework.zend.com&gt;</a>, etc. offer web debug toolbars that use this
functionality provided by Doctrine for reporting the number of queries
executed on every page as well as the time it takes for each query.</p>
</div>
<hr />
<a class="section-anchor" id="title.1.8" name="title.1.8"></a><h2 class="section-header"><a href="#title.1.8">Locking Manager<i class="fas fa-link"></i></a></h2>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>The term 'Transaction' does not refer to database transactions here but to
the general meaning of this term.</p>
</div>
<p>Locking is a mechanism to control concurrency. The two most well known locking
strategies are optimistic and pessimistic locking. The following is a short
description of these two strategies from which only pessimistic locking is
currently supported by Doctrine.</p>
<hr />
<a class="section-anchor" id="title.1.8.1" name="title.1.8.1"></a><h3 class="section-header"><a href="#title.1.8.1">Optimistic Locking<i class="fas fa-link"></i></a></h3>
<p>The state/version of the object(s) is noted when the transaction begins.  When
the transaction finishes the noted state/version of the participating objects
is compared to the current state/version. When the states/versions differ the
objects have been modified by another transaction and the current transaction
should fail. This approach is called 'optimistic' because it is assumed that it
is unlikely that several users will participate in transactions on the same
objects at the same time.</p>
<hr />
<a class="section-anchor" id="title.1.8.2" name="title.1.8.2"></a><h3 class="section-header"><a href="#title.1.8.2">Pessimistic Locking<i class="fas fa-link"></i></a></h3>
<p>The objects that need to participate in the transaction are locked at the
moment the user starts the transaction. No other user can start a transaction
that operates on these objects while the locks are active.  This ensures that
the user who starts the transaction can be sure that no one else modifies the
same objects until he has finished his work.</p>
<p>Doctrine's pessimistic offline locking capabilities can be used to control
concurrency during actions or procedures that take several HTTP request and
response cycles and/or a lot of time to complete.</p>
<hr />
<a class="section-anchor" id="title.1.8.3" name="title.1.8.3"></a><h3 class="section-header"><a href="#title.1.8.3">Examples<i class="fas fa-link"></i></a></h3>
<p>The following code snippet demonstrates the use of Doctrine's pessimistic
offline locking capabilities.</p>
<p>At the page where the lock is requested get a locking manager instance:</p>
<pre><code class="">// test.php
$lockingManager = new Doctrine_Locking_Manager_Pessimistic();
</code></pre>
<div class="alert tip bg-success text-light"><i class="fas fa-question-circle mr-2"></i><p>Ensure that old locks which timed out are released before we
try to acquire our lock 300 seconds = 5 minutes timeout. This can be
done by using the releaseAgedLocks method:</p>
<pre><code class="">// test.php
$user = Doctrine_Core::getTable('User')-&gt;find(1);

try {
    $lockingManager-&gt;releaseAgedLocks(300);
    $gotLock = $lockingManager-&gt;getLock($user, 'jwage');

    if ($gotLock){
        echo &quot;Got lock!&quot;;
    } else {
        echo &quot;Sorry, someone else is currently working on this record&quot;;
    }
} catch(Doctrine_Locking_Exception $dle) {
    echo $dle-&gt;getMessage(); // handle the error
}
</code></pre>
</div>
<p>At the page where the transaction finishes get a locking manager
instance:</p>
<pre><code class="">// test.php
$user = Doctrine_Core::getTable('User')-&gt;find(1);

$lockingManager = new Doctrine_Locking_Manager_Pessimistic();

try {
    if ($lockingManager-&gt;releaseLock($user, 'jwage')) {
        echo &quot;Lock released&quot;;
    } else {
        echo &quot;Record was not locked. No locks released.&quot;;
    }
} catch(Doctrine_Locking_Exception $dle) {
    echo $dle-&gt;getMessage(); // handle the error
}
</code></pre>
<hr />
<a class="section-anchor" id="title.1.8.4" name="title.1.8.4"></a><h3 class="section-header"><a href="#title.1.8.4">Technical Details<i class="fas fa-link"></i></a></h3>
<p>The pessimistic offline locking manager stores the locks in the database
(therefore 'offline'). The required locking table is automatically
created when you try to instantiate an instance of the manager and the
<code>ATTR_CREATE_TABLES</code> is set to TRUE. This behavior may change in the
future to provide a centralized and consistent table creation procedure
for installation purposes.</p>
<a id="component-overview-views"></a>
<hr />
<a class="section-anchor" id="title.1.9" name="title.1.9"></a><h2 class="section-header"><a href="#title.1.9">Views<i class="fas fa-link"></i></a></h2>
<p>Database views can greatly increase the performance of complex queries.  You
can think of them as cached queries. <code>Doctrine_View</code> provides integration
between database views and DQL queries.</p>
<hr />
<a class="section-anchor" id="title.1.9.1" name="title.1.9.1"></a><h3 class="section-header"><a href="#title.1.9.1">Using Views<i class="fas fa-link"></i></a></h3>
<p>Using views on your database using Doctrine is easy. We provide a nice
<code>Doctrine_View</code> class which provides functionality for creating,
dropping and executing views.</p>
<p>The <code>Doctrine_View</code> class integrates with the Doctrine_Query
class by saving the SQL that would be executed by Doctrine_Query.</p>
<p>First lets create a new Doctrine_Query instance to work with:</p>
<pre><code class="">$q = Doctrine_Query::create()
        -&gt;from('User u')
        -&gt;leftJoin('u.Phonenumber p')
        -&gt;limit(20);
</code></pre>
<p>Now lets create the <code>Doctrine_View</code> instance and pass it the
Doctrine_Query` instance as well as a ``name` for identifying that
database view:</p>
<pre><code class="">$view = new Doctrine_View($q, 'RetrieveUsersAndPhonenumbers');
</code></pre>
<p>Now we can easily create the view by using the
Doctrine_View::create method:</p>
<pre><code class="">try {
    $view-&gt;create();
} catch (Exception $e) {
}
</code></pre>
<p>Alternatively if you want to drop the database view you use the
Doctrine_View::drop method:</p>
<pre><code class="">try {
    $view-&gt;drop();
} catch (Exception $e) {
}
</code></pre>
<p>Using views are extremely easy. Just use the
Doctrine_View::execute for executing the view and returning the
results just as a normal Doctrine_Query object would:</p>
<pre><code class="">$users = $view-&gt;execute();

foreach ($users as $user) {
    print_r($us-&gt;toArray());
}
</code></pre>
<hr />
<a class="section-anchor" id="title.1.10" name="title.1.10"></a><h2 class="section-header"><a href="#title.1.10">Conclusion<i class="fas fa-link"></i></a></h2>
<p>We now have been exposed to a very large percentage of the core
functionality provided by Doctrine. The next chapters of this book are
documentation that cover some of the optional functionality that can
help make your life easier on a day to day basis.</p>
<p>Lets move on to the <a href="native-sql.html">next chapter</a> where we can learn
about how to use native SQL to hydrate our data in to arrays and objects
instead of the Doctrine Query Language.</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

                            
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://www.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://www.doctrine-project.org/js/main.js?f32c09"></script>
        <script src="https://www.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

            <script src="https://www.doctrine-project.org/js/sidebar.js?6349dd"></script>

    <script type="text/javascript">
        new Sidebar();
    </script>

                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
