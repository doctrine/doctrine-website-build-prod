<!DOCTYPE html>
<html>
    <head>
        <title>        Component Overview - Doctrine Doctrine1 ORM (Doctrine1)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine1 ORM Documentation: Component Overview ">

        <meta name="keywords" content="                    php,doctrine1,orm,database,documentation,component,overview
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/component-overview.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?5cc46a"
                        integrity="sha384-vonb47KM6nk2/R9Sju3ZEm6yxaL1E02sUWkUGIgcfejb0VD6cFCFZzEvb1r14grl"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/component-overview.html" />
        <meta property="og:title" content="        Component Overview - Doctrine Doctrine1 ORM (Doctrine1)
    " />
        <meta property="og:description" content="Doctrine Doctrine1 ORM Documentation: Component Overview " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Component Overview",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine1/edit/master/docs/en/manual/component-overview.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="about-author.html#about-the-author">About the Author</a>


</li>
    <li class="toc-item">
    <a href="about-sensio.html#about-sensio">About Sensio</a>


</li>
    <li class="toc-item">
    <a href="acknowledgements.html#acknowledgements-and-contributors">Acknowledgements and Contributors</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="acknowledgements.html#contributors">Contributors</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="acknowledgements.html#roman-s-borschel">Roman S. Borschel</a>


</li>
            <li class="toc-item">
    <a href="acknowledgements.html#guilherme-blanco">Guilherme Blanco</a>


</li>
            <li class="toc-item">
    <a href="acknowledgements.html#konsta-vesterinen">Konsta Vesterinen</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="acknowledgements.html#companies">Companies</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="acknowledgements.html#centre-source">centre{source}</a>


</li>
            <li class="toc-item">
    <a href="acknowledgements.html#sensio-labs">Sensio Labs</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="acknowledgements.html#other-contributors">Other Contributors</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="behaviors.html#behaviors">Behaviors</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="behaviors.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#simple-templates">Simple Templates</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#templates-with-relations">Templates with Relations</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#delegate-methods">Delegate Methods</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#creating-behaviors">Creating Behaviors</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#core-behaviors">Core Behaviors</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="behaviors.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#versionable">Versionable</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#timestampable">Timestampable</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#sluggable">Sluggable</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#i18n">I18n</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#nestedset">NestedSet</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#searchable">Searchable</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#geographical">Geographical</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#softdelete">SoftDelete</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="behaviors.html#nesting-behaviors">Nesting Behaviors</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#generating-files">Generating Files</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#querying-generated-classes">Querying Generated Classes</a>


</li>
            <li class="toc-item">
    <a href="behaviors.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="caching.html#caching">Caching</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="caching.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="caching.html#drivers">Drivers</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="caching.html#memcache">Memcache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#apc">APC</a>


</li>
            <li class="toc-item">
    <a href="caching.html#db">Db</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="caching.html#query-cache-result-cache">Query Cache &amp; Result Cache</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="caching.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="caching.html#query-cache">Query Cache</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="caching.html#using-the-query-cache">Using the Query Cache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#fine-tuning">Fine Tuning</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="caching.html#result-cache">Result Cache</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="caching.html#using-the-result-cache">Using the Result Cache</a>


</li>
            <li class="toc-item">
    <a href="caching.html#fine-tuning">Fine Tuning</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="caching.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="coding-standards.html#coding-standards">Coding Standards</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="coding-standards.html#php-file-formatting">PHP File Formatting</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="coding-standards.html#general">General</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#indentation">Indentation</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#maximum-line-length">Maximum Line Length</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#line-termination">Line Termination</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="coding-standards.html#naming-conventions">Naming Conventions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="coding-standards.html#classes">Classes</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#interfaces">Interfaces</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#filenames">Filenames</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#functions-and-methods">Functions and Methods</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#variables">Variables</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#constants">Constants</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#record-columns">Record Columns</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="coding-standards.html#coding-style">Coding Style</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="coding-standards.html#php-code-demarcation">PHP Code Demarcation</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#strings">Strings</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="coding-standards.html#literal-string">Literal String</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#string-containing-apostrophes">String Containing Apostrophes</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#variable-substitution">Variable Substitution</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#string-concatenation">String Concatenation</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#concatenation-line-breaking">Concatenation Line Breaking</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="coding-standards.html#arrays">Arrays</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#classes">Classes</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#functions-and-methods">Functions and Methods</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#control-statements">Control Statements</a>


</li>
            <li class="toc-item">
    <a href="coding-standards.html#inline-documentation">Inline Documentation</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="coding-standards.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#component-overview">Component Overview</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#manager">Manager</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#retrieving-connections">Retrieving Connections</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#connection">Connection</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#available-drivers">Available Drivers</a>


</li>
            <li class="toc-item">
    <a href="#creating-connections">Creating Connections</a>


</li>
            <li class="toc-item">
    <a href="#flushing-the-connection">Flushing the Connection</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#table">Table</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#getting-a-table-object">Getting a Table Object</a>


</li>
            <li class="toc-item">
    <a href="#getting-column-information">Getting Column Information</a>


</li>
            <li class="toc-item">
    <a href="#getting-relation-information">Getting Relation Information</a>


</li>
            <li class="toc-item">
    <a href="#finder-methods">Finder Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#custom-table-classes">Custom Table Classes</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#custom-finders">Custom Finders</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#record">Record</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#properties">Properties</a>


</li>
            <li class="toc-item">
    <a href="#updating-records">Updating Records</a>


</li>
            <li class="toc-item">
    <a href="#replacing-records">Replacing Records</a>


</li>
            <li class="toc-item">
    <a href="#refreshing-records">Refreshing Records</a>


</li>
            <li class="toc-item">
    <a href="#refreshing-relationships">Refreshing relationships</a>


</li>
            <li class="toc-item">
    <a href="#deleting-records">Deleting Records</a>


</li>
            <li class="toc-item">
    <a href="#using-expression-values">Using Expression Values</a>


</li>
            <li class="toc-item">
    <a href="#getting-record-state">Getting Record State</a>


</li>
            <li class="toc-item">
    <a href="#getting-object-copy">Getting Object Copy</a>


</li>
            <li class="toc-item">
    <a href="#saving-a-blank-record">Saving a Blank Record</a>


</li>
            <li class="toc-item">
    <a href="#mapping-custom-values">Mapping Custom Values</a>


</li>
            <li class="toc-item">
    <a href="#serializing">Serializing</a>


</li>
            <li class="toc-item">
    <a href="#checking-existence">Checking Existence</a>


</li>
            <li class="toc-item">
    <a href="#function-callbacks-for-columns">Function Callbacks for Columns</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#collection">Collection</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#accessing-elements">Accessing Elements</a>


</li>
            <li class="toc-item">
    <a href="#adding-new-elements">Adding new Elements</a>


</li>
            <li class="toc-item">
    <a href="#getting-collection-count">Getting Collection Count</a>


</li>
            <li class="toc-item">
    <a href="#saving-the-collection">Saving the Collection</a>


</li>
            <li class="toc-item">
    <a href="#deleting-the-collection">Deleting the Collection</a>


</li>
            <li class="toc-item">
    <a href="#key-mapping">Key Mapping</a>


</li>
            <li class="toc-item">
    <a href="#loading-related-records">Loading Related Records</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#validator">Validator</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#more-validation">More Validation</a>


</li>
            <li class="toc-item">
    <a href="#valid-or-not-valid">Valid or Not Valid</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#implicit-validation">Implicit Validation</a>


</li>
            <li class="toc-item">
    <a href="#explicit-validation">Explicit Validation</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#profiler">Profiler</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#basic-usage">Basic Usage</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#locking-manager">Locking Manager</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#optimistic-locking">Optimistic Locking</a>


</li>
            <li class="toc-item">
    <a href="#pessimistic-locking">Pessimistic Locking</a>


</li>
            <li class="toc-item">
    <a href="#examples">Examples</a>


</li>
            <li class="toc-item">
    <a href="#technical-details">Technical Details</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#views">Views</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#using-views">Using Views</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="configuration.html#configuration">Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="configuration.html#levels-of-configuration">Levels of Configuration</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#default-attributes">Default Attributes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#default-column-options">Default Column Options</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#default-added-auto-id">Default Added Auto Id</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="configuration.html#portability">Portability</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#portability-mode-attributes">Portability Mode Attributes</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#examples">Examples</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="configuration.html#identifier-quoting">Identifier quoting</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#hydration-overwriting">Hydration Overwriting</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#configure-table-class">Configure Table Class</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#configure-query-class">Configure Query Class</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#configure-collection-class">Configure Collection Class</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#disabling-cascading-saves">Disabling Cascading Saves</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#exporting">Exporting</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#naming-convention-attributes">Naming convention attributes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="configuration.html#index-name-format">Index name format</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#sequence-name-format">Sequence name format</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#table-name-format">Table name format</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#database-name-format">Database name format</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#validation-attributes">Validation attributes</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#validation-mode-constants">Validation mode constants</a>


</li>
            <li class="toc-item">
    <a href="configuration.html#examples">Examples</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="configuration.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="connections.html#connections">Connections</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="connections.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="connections.html#opening-connections">Opening Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#retrieve-connections">Retrieve Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#current-connection">Current Connection</a>


</li>
            <li class="toc-item">
    <a href="connections.html#change-current-connection">Change Current Connection</a>


</li>
            <li class="toc-item">
    <a href="connections.html#iterating-connections">Iterating Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#get-connection-name">Get Connection Name</a>


</li>
            <li class="toc-item">
    <a href="connections.html#close-connection">Close Connection</a>


</li>
            <li class="toc-item">
    <a href="connections.html#get-all-connections">Get All Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#count-connections">Count Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#creating-and-dropping-database">Creating and Dropping Database</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="connections.html#for-a-specific-connection">For a Specific Connection</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="connections.html#writing-custom-connections">Writing Custom Connections</a>


</li>
            <li class="toc-item">
    <a href="connections.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="data-fixtures.html#data-fixtures">Data Fixtures</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="data-fixtures.html#importing">Importing</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#dumping">Dumping</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#implement">Implement</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#writing">Writing</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#fixtures-for-nested-sets">Fixtures For Nested Sets</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#fixtures-for-i18n">Fixtures For I18n</a>


</li>
            <li class="toc-item">
    <a href="data-fixtures.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="data-hydrators.html#data-hydrators">Data Hydrators</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="data-hydrators.html#core-hydration-methods">Core Hydration Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="data-hydrators.html#record">Record</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#array">Array</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#scalar">Scalar</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#single-scalar">Single Scalar</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#on-demand">On Demand</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#nested-set-record-hierarchy">Nested Set Record Hierarchy</a>


</li>
            <li class="toc-item">
    <a href="data-hydrators.html#nested-set-array-hierarchy">Nested Set Array Hierarchy</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="data-hydrators.html#writing-hydration-method">Writing Hydration Method</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="data-validation.html#data-validation">Data Validation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="data-validation.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#examples">Examples</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="data-validation.html#not-null">Not Null</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#email">Email</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#not-blank">Not Blank</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#no-space">No Space</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#past">Past</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#future">Future</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#min-length">Min Length</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#country">Country</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#ip-address">IP Address</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#html-color">HTML Color</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#range">Range</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#unique">Unique</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#regular-expression">Regular Expression</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#credit-card">Credit Card</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#read-only">Read Only</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#unsigned">Unsigned</a>


</li>
            <li class="toc-item">
    <a href="data-validation.html#us-state">US State</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="data-validation.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="database-abstraction-layer.html#database-abstraction-layer">Database Abstraction Layer</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#export">Export</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#creating-databases">Creating Databases</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#creating-tables">Creating Tables</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#creating-foreign-keys">Creating Foreign Keys</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#altering-table">Altering table</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#creating-indexes">Creating Indexes</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#deleting-database-elements">Deleting database elements</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#import">Import</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-databases">Listing Databases</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-sequences">Listing Sequences</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-constraints">Listing Constraints</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-table-columns">Listing Table Columns</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-table-indexes">Listing Table Indexes</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-tables">Listing Tables</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#listing-views">Listing Views</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#datadict">DataDict</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#getting-portable-declaration">Getting portable declaration</a>


</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#getting-native-declaration">Getting Native Declaration</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#drivers">Drivers</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#mysql">Mysql</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="database-abstraction-layer.html#setting-table-type">Setting table type</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="database-abstraction-layer.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="defining-models.html#defining-models">Defining Models</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="defining-models.html#columns">Columns</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#column-lengths">Column Lengths</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#column-aliases">Column Aliases</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#default-values">Default values</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#data-types">Data types</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#type-modifiers">Type modifiers</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#boolean">Boolean</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#integer">Integer</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#float">Float</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#decimal">Decimal</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#string">String</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#array">Array</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#object">Object</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#blob">Blob</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#clob">Clob</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#timestamp">Timestamp</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#time">Time</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#date">Date</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#enum">Enum</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#gzip">Gzip</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#examples">Examples</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#relationships">Relationships</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#foreign-key-associations">Foreign Key Associations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#one-to-one">One to One</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#one-to-many-and-many-to-one">One to Many and Many to One</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#tree-structure">Tree Structure</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#join-table-associations">Join Table Associations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#many-to-many">Many to Many</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#self-referencing-nest-relations">Self Referencing (Nest Relations)</a>

        <ul class="section-level-3">
            <li class="toc-item">
    <a href="defining-models.html#non-equal-nest-relations">Non-Equal Nest Relations</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#equal-nest-relations">Equal Nest Relations</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#foreign-key-constraints">Foreign Key Constraints</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#foreign-key-names">Foreign Key Names</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#integrity-actions">Integrity Actions</a>

        <ul class="section-level-3">
            <li class="toc-item">
    <a href="defining-models.html#cascade">CASCADE</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#set-null">SET NULL</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#no-action">NO ACTION</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#restrict">RESTRICT</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#set-default">SET DEFAULT</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#indexes">Indexes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#adding-indexes">Adding indexes</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#index-options">Index options</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#special-indexes">Special indexes</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#checks">Checks</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#table-options">Table Options</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#record-filters">Record Filters</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#transitive-persistence">Transitive Persistence</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#application-level-cascades">Application-Level Cascades</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="defining-models.html#save-cascades">Save Cascades</a>


</li>
            <li class="toc-item">
    <a href="defining-models.html#delete-cascades">Delete Cascades</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#database-level-cascades">Database-Level Cascades</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="defining-models.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="dql-doctrine-query-language.html#dql-doctrine-query-language">DQL: Doctrine Query Language</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#select-queries">SELECT queries</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#aggregate-values">Aggregate values</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#update-queries">UPDATE queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#delete-queries">DELETE Queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#from-clause">FROM clause</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#join-syntax">JOIN syntax</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#on-keyword">ON keyword</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#with-keyword">WITH keyword</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#indexby-keyword">INDEXBY keyword</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#where-clause">WHERE clause</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#conditional-expressions">Conditional expressions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#literals">Literals</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#strings">Strings</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#integers">Integers</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#floats">Floats</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#booleans">Booleans</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#enums">Enums</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#input-parameters">Input parameters</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#operators-and-operator-precedence">Operators and operator precedence</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#in-expressions">In expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#like-expressions">Like Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#exists-expressions">Exists Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#all-and-any-expressions">All and Any Expressions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#subqueries">Subqueries</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#functional-expressions">Functional Expressions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#string-functions">String functions</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#arithmetic-functions">Arithmetic functions</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#subqueries">Subqueries</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#comparisons-using-subqueries">Comparisons using subqueries</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#group-by-having-clauses">GROUP BY, HAVING clauses</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#order-by-clause">ORDER BY clause</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#sorting-by-an-aggregate-value">Sorting by an aggregate value</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#using-random-order">Using random order</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#limit-and-offset-clauses">LIMIT and OFFSET clauses</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#driver-portability">Driver Portability</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#the-limit-subquery-algorithm">The limit-subquery-algorithm</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#named-queries">Named Queries</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#creating-a-named-query">Creating a Named Query</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#accessing-named-query">Accessing Named Query</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#executing-a-named-query">Executing a Named Query</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#cross-accessing-named-query">Cross-Accessing Named Query</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#bnf">BNF</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#magic-finders">Magic Finders</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#debugging-queries">Debugging Queries</a>


</li>
            <li class="toc-item">
    <a href="dql-doctrine-query-language.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="event-listeners.html#event-listeners">Event Listeners</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="event-listeners.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#connection-listeners">Connection Listeners</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="event-listeners.html#creating-a-new-listener">Creating a New Listener</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#attaching-listeners">Attaching listeners</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#pre-and-post-connect">Pre and Post Connect</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#transaction-listeners">Transaction Listeners</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#query-execution-listeners">Query Execution Listeners</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="event-listeners.html#hydration-listeners">Hydration Listeners</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#record-listeners">Record Listeners</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#record-hooks">Record Hooks</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#dql-hooks">DQL Hooks</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#chaining-listeners">Chaining Listeners</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#the-event-object">The Event object</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="event-listeners.html#getting-the-invoker">Getting the Invoker</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#event-codes">Event Codes</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#getting-the-invoker">Getting the Invoker</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#skip-next-operation">Skip Next Operation</a>


</li>
            <li class="toc-item">
    <a href="event-listeners.html#skip-next-listener">Skip Next Listener</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="event-listeners.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="exceptions-and-warnings.html#exceptions-and-warnings">Exceptions and Warnings</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="exceptions-and-warnings.html#manager-exceptions">Manager exceptions</a>


</li>
            <li class="toc-item">
    <a href="exceptions-and-warnings.html#relation-exceptions">Relation exceptions</a>


</li>
            <li class="toc-item">
    <a href="exceptions-and-warnings.html#connection-exceptions">Connection exceptions</a>


</li>
            <li class="toc-item">
    <a href="exceptions-and-warnings.html#query-exceptions">Query exceptions</a>


</li>
            <li class="toc-item">
    <a href="exceptions-and-warnings.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="extensions.html#extensions">Extensions</a>


</li>
    <li class="toc-item">
    <a href="getting-started.html#getting-started">Getting Started</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="getting-started.html#checking-requirements">Checking Requirements</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#installing">Installing</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="getting-started.html#sandbox">Sandbox</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#svn">SVN</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="getting-started.html#installing">Installing</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#updating">Updating</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="getting-started.html#svn-externals">SVN Externals</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#pear-installer">PEAR Installer</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#download-pear-package">Download Pear Package</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="getting-started.html#implementing">Implementing</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="getting-started.html#including-doctrine-libraries">Including Doctrine Libraries</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#require-doctrine-base-class">Require Doctrine Base Class</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#register-autoloader">Register Autoloader</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="getting-started.html#autoloading-explained">Autoloading Explained</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="getting-started.html#bootstrap-file">Bootstrap File</a>


</li>
            <li class="toc-item">
    <a href="getting-started.html#test-script">Test Script</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="getting-started.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="hierarchical-data.html#hierarchical-data">Hierarchical Data</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="hierarchical-data.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#nested-set">Nested Set</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="hierarchical-data.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#setting-up">Setting Up</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#multiple-trees">Multiple Trees</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#working-with-trees">Working with Trees</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="hierarchical-data.html#creating-a-root-node">Creating a Root Node</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#inserting-a-node">Inserting a Node</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#deleting-a-node">Deleting a Node</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#moving-a-node">Moving a Node</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#examining-a-node">Examining a Node</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#examining-and-retrieving-siblings">Examining and Retrieving Siblings</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#examining-and-retrieving-descendants">Examining and Retrieving Descendants</a>


</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#rendering-a-simple-tree">Rendering a Simple Tree</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#advanced-usage">Advanced Usage</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="hierarchical-data.html#fetching-a-tree-with-relations">Fetching a Tree with Relations</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#rendering-with-indention">Rendering with Indention</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="hierarchical-data.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="imprint.html#imprint">Imprint</a>


</li>
    <li class="toc-item">
    <a href="improving-performance.html#improving-performance">Improving Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="improving-performance.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#compile">Compile</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#conservative-fetching">Conservative Fetching</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#bundle-your-class-files">Bundle your Class Files</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#use-a-bytecode-cache">Use a Bytecode Cache</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#free-objects">Free Objects</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#other-tips">Other Tips</a>


</li>
            <li class="toc-item">
    <a href="improving-performance.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="index.html#doctrine-version-orm-manual">Doctrine version ORM Manual</a>


</li>
    <li class="toc-item">
    <a href="inheritance.html#inheritance">Inheritance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="inheritance.html#simple">Simple</a>


</li>
            <li class="toc-item">
    <a href="inheritance.html#concrete">Concrete</a>


</li>
            <li class="toc-item">
    <a href="inheritance.html#column-aggregation">Column Aggregation</a>


</li>
            <li class="toc-item">
    <a href="inheritance.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="introduction.html#introduction">Introduction</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="introduction.html#about-this-version">About this Version</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#how-to-contribute">How to Contribute</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#what-is-doctrine">What is Doctrine?</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#what-is-an-orm">What is an ORM?</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#what-is-the-problem">What is the Problem?</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#minimum-requirements">Minimum Requirements</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#basic-overview">Basic Overview</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#doctrine-explained">Doctrine Explained</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#key-concepts">Key Concepts</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#further-reading">Further Reading</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="introduction-to-connections.html#introduction-to-connections">Introduction to Connections</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="introduction-to-connections.html#dsn-the-data-source-name">DSN, the Data Source Name</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction-to-connections.html#main-parts">Main Parts</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction-to-connections.html#options">Options</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#providing-the-dsn">Providing the DSN</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#examples">Examples</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#opening-new-connections">Opening New Connections</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#lazy-database-connecting">Lazy Database Connecting</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#testing-your-connection">Testing your Connection</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-connections.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="introduction-to-models.html#introduction-to-models">Introduction to Models</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="introduction-to-models.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#generating-models">Generating Models</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction-to-models.html#existing-databases">Existing Databases</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction-to-models.html#making-the-first-import">Making the first import</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#schema-files">Schema Files</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#manually-writing-models">Manually Writing Models</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#autoloading-models">Autoloading Models</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="introduction-to-models.html#conservative">Conservative</a>


</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#aggressive">Aggressive</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="introduction-to-models.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="license.html#attribution-share-alike-3-0-unported-license">Attribution-Share Alike 3.0 Unported License</a>


</li>
    <li class="toc-item">
    <a href="migrations.html#migrations">Migrations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="migrations.html#performing-migrations">Performing Migrations</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#implement">Implement</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#writing-migration-classes">Writing Migration Classes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="migrations.html#available-operations">Available Operations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="migrations.html#create-table">Create Table</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#drop-table">Drop Table</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#rename-table">Rename Table</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#create-constraint">Create Constraint</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#drop-constraint">Drop Constraint</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#create-foreign-key">Create Foreign Key</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#drop-foreign-key">Drop Foreign Key</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#add-column">Add Column</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#rename-column">Rename Column</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#change-column">Change Column</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#remove-column">Remove Column</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#irreversible-migration">Irreversible Migration</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#add-index">Add Index</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#remove-index">Remove Index</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="migrations.html#pre-and-post-hooks">Pre and Post Hooks</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#up-down-automation">Up/Down Automation</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#generating-migrations">Generating Migrations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="migrations.html#from-database">From Database</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#from-existing-models">From Existing Models</a>


</li>
            <li class="toc-item">
    <a href="migrations.html#diff-tool">Diff Tool</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="migrations.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="native-sql.html#native-sql">Native SQL</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="native-sql.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#component-queries">Component Queries</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#fetching-from-multiple-components">Fetching from Multiple Components</a>


</li>
            <li class="toc-item">
    <a href="native-sql.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="real-world-examples.html#real-world-examples">Real World Examples</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="real-world-examples.html#user-management-system">User Management System</a>


</li>
            <li class="toc-item">
    <a href="real-world-examples.html#forum-application">Forum Application</a>


</li>
            <li class="toc-item">
    <a href="real-world-examples.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="searching.html#searching">Searching</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="searching.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="searching.html#index-structure">Index structure</a>


</li>
            <li class="toc-item">
    <a href="searching.html#index-building">Index Building</a>


</li>
            <li class="toc-item">
    <a href="searching.html#text-analyzers">Text Analyzers</a>


</li>
            <li class="toc-item">
    <a href="searching.html#query-language">Query language</a>


</li>
            <li class="toc-item">
    <a href="searching.html#performing-searches">Performing Searches</a>


</li>
            <li class="toc-item">
    <a href="searching.html#file-searches">File searches</a>


</li>
            <li class="toc-item">
    <a href="searching.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="technology.html#technology">Technology</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="technology.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="technology.html#architecture">Architecture</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="technology.html#doctrine-core">Doctrine CORE</a>


</li>
            <li class="toc-item">
    <a href="technology.html#doctrine-dbal">Doctrine DBAL</a>


</li>
            <li class="toc-item">
    <a href="technology.html#doctrine-orm">Doctrine ORM</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="technology.html#design-patterns-used">Design Patterns Used</a>


</li>
            <li class="toc-item">
    <a href="technology.html#speed">Speed</a>


</li>
            <li class="toc-item">
    <a href="technology.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="transactions.html#transactions">Transactions</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="transactions.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="transactions.html#nesting">Nesting</a>


</li>
            <li class="toc-item">
    <a href="transactions.html#savepoints">Savepoints</a>


</li>
            <li class="toc-item">
    <a href="transactions.html#isolation-levels">Isolation Levels</a>


</li>
            <li class="toc-item">
    <a href="transactions.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="unit-testing.html#unit-testing">Unit Testing</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="unit-testing.html#running-tests">Running tests</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="unit-testing.html#cli">CLI</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#browser">Browser</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="unit-testing.html#writing-tests">Writing Tests</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="unit-testing.html#ticket-tests">Ticket Tests</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#methods-for-testing">Methods for testing</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="unit-testing.html#assert-equal">Assert Equal</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#assert-not-equal">Assert Not Equal</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#assert-identical">Assert Identical</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#assert-true">Assert True</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#assert-false">Assert False</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="unit-testing.html#mock-drivers">Mock Drivers</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#test-class-guidelines">Test Class Guidelines</a>


</li>
            <li class="toc-item">
    <a href="unit-testing.html#test-method-guidelines">Test Method Guidelines</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="unit-testing.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="utilities.html#utilities">Utilities</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="utilities.html#pagination">Pagination</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#working-with-pager">Working with Pager</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#controlling-range-styles">Controlling Range Styles</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#sliding">Sliding</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#jumping">Jumping</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#advanced-layouts-with-pager">Advanced layouts with pager</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#mask">Mask</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#template">Template</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#customizing-pager-layout">Customizing pager layout</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#facade">Facade</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#creating-dropping-databases">Creating &amp; Dropping Databases</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#convenience-methods">Convenience Methods</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#tasks">Tasks</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#command-line-interface">Command Line Interface</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#introduction-the-doctrine-cli-is-a-collection-of-tasks-that-help-you">Introduction The Doctrine Cli is a collection of tasks that help you</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#tasks">Tasks</a>


</li>
            <li class="toc-item">
    <a href="utilities.html#usage">Usage</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#sandbox">Sandbox</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="utilities.html#installation">Installation</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="utilities.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="working-with-models.html#working-with-models">Working with Models</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="working-with-models.html#define-test-schema">Define Test Schema</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#dealing-with-relations">Dealing with Relations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-models.html#creating-related-records">Creating Related Records</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#retrieving-related-records">Retrieving Related Records</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#updating-related-records">Updating Related Records</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#clearing-related-records">Clearing Related Records</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#deleting-related-records">Deleting Related Records</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#working-with-related-records">Working with Related Records</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-models.html#testing-the-existence-of-a-relation">Testing the Existence of a Relation</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-models.html#many-to-many-relations">Many-to-Many Relations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-models.html#creating-a-new-link">Creating a New Link</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#deleting-a-link">Deleting a Link</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-models.html#fetching-objects">Fetching Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-models.html#sample-queries">Sample Queries</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#field-lazy-loading">Field Lazy Loading</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-models.html#arrays-and-objects">Arrays and Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-models.html#to-array">To Array</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#from-array">From Array</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#synchronize-with-array">Synchronize With Array</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-models.html#overriding-the-constructor">Overriding the Constructor</a>


</li>
            <li class="toc-item">
    <a href="working-with-models.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="yaml-schema-files.html#yaml-schema-files">YAML Schema Files</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="yaml-schema-files.html#introduction">Introduction</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#abbreviated-syntax">Abbreviated Syntax</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#verbose-syntax">Verbose Syntax</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#relationships">Relationships</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="yaml-schema-files.html#detect-relations">Detect Relations</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#customizing-relationships">Customizing Relationships</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#one-to-one">One to One</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#one-to-many">One to Many</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#many-to-many">Many to Many</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#features-examples">Features &amp; Examples</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="yaml-schema-files.html#connection-binding">Connection Binding</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#attributes">Attributes</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#enums">Enums</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#actas-behaviors">ActAs Behaviors</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#listeners">Listeners</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#options">Options</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#indexes">Indexes</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#inheritance">Inheritance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="yaml-schema-files.html#simple-inheritance">Simple Inheritance</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#concrete-inheritance">Concrete Inheritance</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#column-aggregation-inheritance">Column Aggregation Inheritance</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#column-aliases">Column Aliases</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#packages">Packages</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="yaml-schema-files.html#package-custom-path">Package Custom Path</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#global-schema-information">Global Schema Information</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#using-schema-files">Using Schema Files</a>


</li>
            <li class="toc-item">
    <a href="yaml-schema-files.html#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Doctrine1",
            "item": "https://www.doctrine-project.org/projects/doctrine1.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine1/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Component Overview",
            "item": "https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/component-overview.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Component Overview</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>This project is no longer maintained and has been archived.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine1/en/latest/manual/component-overview.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine1/en/latest/manual/component-overview.html">
                                                        master

                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                                                                                    </div>
                                </div>
                            
                            

            <div class="section" id="component-overview">
            <h1 class="section-header ">
    <a href="#component-overview">
        Component Overview
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>This chapter is intended to give you a birds eye view of all the main
components that make up Doctrine and how they work together. We&#039;ve
discussed most of the components in the previous chapters but after this
chapter you will have a better idea of all the components and what their
jobs are.</p>

            <div class="section" id="manager">
            <a id="component-overview-manager"></a>
            <h2 class="section-header ">
    <a href="#manager">
        Manager
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The Doctrine_Manager class is a singleton and is the root of the
configuration hierarchy and is used as a facade for controlling several
aspects of Doctrine. You can retrieve the singleton instance with the
following code.</p>

                <div class="console">
        <pre><code class="console">$manager = Doctrine_Manager::getInstance();</code></pre>
    </div>

            <div class="section" id="retrieving-connections">
            <h3 class="section-header ">
    <a href="#retrieving-connections">
        Retrieving Connections
        <i class="fas fa-link"></i>
    </a>
</h3>
                <div class="console">
        <pre><code class="console">$connections = $manager-&gt;getConnections();
foreach (connections as $connection) {
    echo $connection-&gt;getName() . &quot;&quot;;
}</code></pre>
    </div>

            
    <p>The Doctrine_Manager implements an iterator so you can simple loop
over the $manager variable to loop over the connections.</p>

                <div class="console">
        <pre><code class="console">foreach ($manager as $connection) {
    echo $connection-&gt;getName() . &quot;&quot;;
}</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="connection">
            <a id="component-overview-connection"></a>
            <h2 class="section-header ">
    <a href="#connection">
        Connection
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine_Connection is a wrapper for database connection. The
connection is typically an instance of PDO but because of how Doctrine
is designed, it is possible to design your own adapters that mimic the
functionality that PDO provides.</p>

            
    <p>The Doctrine_Connection class handles several things:</p>

            

<ul>
    <li>Handles database portability things missing from PDO (eg. LIMIT /
OFFSET emulation)</li>
    <li>Keeps track of Doctrine_Table objects</li>
    <li>Keeps track of records</li>
    <li>Keeps track of records that need to be updated / inserted / deleted</li>
    <li>Handles transactions and transaction nesting</li>
    <li>Handles the actual querying of the database in the case of INSERT /
UPDATE / DELETE operations</li>
    <li>Can query the database using DQL. You will learn more about DQL in
the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a> chapter.</li>
    <li>Optionally validates transactions using Doctrine_Validator and gives
full information of possible errors.</li>
</ul>

            <div class="section" id="available-drivers">
            <h3 class="section-header ">
    <a href="#available-drivers">
        Available Drivers
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine has drivers for every PDO-supported database. The supported
databases are:</p>

            

<ul>
    <li>FreeTDS / Microsoft SQL Server / Sybase</li>
    <li>Firebird/Interbase 6</li>
    <li>Informix</li>
    <li>Mysql</li>
    <li>Oracle</li>
    <li>Odbc</li>
    <li>PostgreSQL</li>
    <li>Sqlite</li>
</ul>

    </div>
            <div class="section" id="creating-connections">
            <h3 class="section-header ">
    <a href="#creating-connections">
        Creating Connections
        <i class="fas fa-link"></i>
    </a>
</h3>
                <div class="console">
        <pre><code class="console">// bootstrap.php
$conn = Doctrine_Manager::connection(&#039;mysql://username:password@localhost/test&#039;, &#039;connection 1&#039;);</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>We have already created a new connection in the previous chapters. You can
skip the above step and use the connection we&#039;ve already created. You can
retrieve it by using the Doctrine_Manager::connection method.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="flushing-the-connection">
            <h3 class="section-header ">
    <a href="#flushing-the-connection">
        Flushing the Connection
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>When you create new <code>User</code> records you can flush the connection and save all
un-saved objects for that connection. Below is an example:</p>

                <div class="console">
        <pre><code class="console">$conn = Doctrine_Manager::connection();

$user1 = new User();
$user1-&gt;username = &#039;Jack&#039;;

$user2 = new User();
$user2-&gt;username = &#039;jwage&#039;;

$conn-&gt;flush();
</code></pre>
    </div>

            
    <p>Calling Doctrine_Connection::flush will save all unsaved record
instances for that connection. You could of course optionally call
save on each record instance and it would be the same thing.</p>

                <div class="console">
        <pre><code class="console">$user1-&gt;save();
$user2-&gt;save();</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="table">
            <a id="component-overview-table"></a>
            <h2 class="section-header ">
    <a href="#table">
        Table
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine_Table holds the schema information specified by the given
component (record). For example if you have a <code>User</code> class that extends
Doctrine_Record, each schema definition call gets delegated to a
unique table object that holds the information for later use.</p>

            
    <p>Each Doctrine_Table is registered by
Doctrine_Connection. You can retrieve the table object for each
component easily which is demonstrated right below.</p>

            
    <p>For example, lets say we want to retrieve the table object for the User class.
We can do this by simply giving <code>User</code> as the first argument for the
Doctrine_Core::getTable method.</p>

            <div class="section" id="getting-a-table-object">
            <h3 class="section-header ">
    <a href="#getting-a-table-object">
        Getting a Table Object
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>In order to get table object for specified record just call
Doctrine_Record::getTable.</p>

                <div class="console">
        <pre><code class="console">// test.php
$accountTable = Doctrine_Core::getTable(&#039;Account&#039;);</code></pre>
    </div>

    </div>
            <div class="section" id="getting-column-information">
            <h3 class="section-header ">
    <a href="#getting-column-information">
        Getting Column Information
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can retrieve the column definitions set in Doctrine_Record by
using the appropriate Doctrine_Table methods. If you need all
information of all columns you can simply use:</p>

                <div class="console">
        <pre><code class="console">// test.php
$columns = $accountTable-&gt;getColumns();

foreach ($columns as $column) {
    print_r($column);
}
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="916badcdaac2beb7eedaa0d76e49c8ff6d1a3a38"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="916badcdaac2beb7eedaa0d76e49c8ff6d1a3a38"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Array (</code><code class="line language-text">    [type] =&gt; integer</code><code class="line language-text">    [length] =&gt; 20</code><code class="line language-text">    [autoincrement] =&gt; 1</code><code class="line language-text">    [primary] =&gt; 1</code><code class="line language-text">)</code><code class="line language-text">Array (</code><code class="line language-text">    [type] =&gt; string</code><code class="line language-text">    [length] =&gt; 255</code><code class="line language-text">)</code><code class="line language-text">Array (</code><code class="line language-text">    [type] =&gt; decimal</code><code class="line language-text">    [length] =&gt; 18</code><code class="line language-text">)</code><code class="empty"></code></pre>
            
    <p>Sometimes this can be an overkill. The following example shows how to
retrieve the column names as an array:</p>

                <div class="console">
        <pre><code class="console">// test.php
$names = $accountTable-&gt;getColumnNames();
print_r($names);
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="e53005ca78cd431e4b2a418033df850cf5f8b2da"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e53005ca78cd431e4b2a418033df850cf5f8b2da"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Array (</code><code class="line language-text">    [0] =&gt; id</code><code class="line language-text">    [1] =&gt; name</code><code class="line language-text">    [2] =&gt; amount</code><code class="line language-text">)</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="getting-relation-information">
            <h3 class="section-header ">
    <a href="#getting-relation-information">
        Getting Relation Information
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can also get an array of all the <code>Doctrine_Relation</code> objects by
simply calling Doctrine_Table::getRelations like the following:</p>

                <div class="console">
        <pre><code class="console">// test.php
$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$relations = $userTable-&gt;getRelations();
foreach ($relations as $name =&gt; $relation) {
    echo $name . &quot;:\n&quot;;
    echo &quot;Local - &quot; . $relation-&gt;getLocal() . &quot;\n&quot;;
    echo &quot;Foreign - &quot; .    $relation-&gt;getForeign() . &quot;\n\n&quot;;
}
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="0978f76e34a89834e334fb915d86ebd1a04e7910"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="0978f76e34a89834e334fb915d86ebd1a04e7910"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Email:</code><code class="line language-text">Local - id</code><code class="line language-text">Foreign - user_id</code><code class="line language-text"></code><code class="line language-text">Phonenumbers:</code><code class="line language-text">Local - id</code><code class="line language-text">Foreign - user_id</code><code class="line language-text"></code><code class="line language-text">Groups:</code><code class="line language-text">Local - user_id</code><code class="line language-text">Foreign - group_id</code><code class="line language-text"></code><code class="line language-text">Friends:</code><code class="line language-text">Local - user1</code><code class="line language-text">Foreign - user2</code><code class="line language-text"></code><code class="line language-text">Addresses:</code><code class="line language-text">Local - id</code><code class="line language-text">Foreign - user_id</code><code class="line language-text"></code><code class="line language-text">Threads:</code><code class="line language-text">Local - id</code><code class="line language-text">Foreign - user_id</code><code class="empty"></code></pre>
            
    <p>You can get the <code>Doctrine_Relation</code> object for an individual relationship by
using the Doctrine_Table::getRelation method.</p>

                <div class="console">
        <pre><code class="console">// test.php
$relation = $userTable-&gt;getRelation(&#039;Phonenumbers&#039;);

echo &#039;Name: &#039; . $relation[&#039;alias&#039;] . &quot;\n&quot;;
echo &#039;Local - &#039; . $relation[&#039;local&#039;] . &quot;\n&quot;;
echo &#039;Foreign - &#039; .  $relation[&#039;foreign&#039;] . &quot;\n&quot;;
echo &#039;Relation Class - &#039; . get_class($relation);</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="442773dd8079d00d035c7418aa9543edb10e410e"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="442773dd8079d00d035c7418aa9543edb10e410e"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Name: Phonenumbers</code><code class="line language-text">Local - id</code><code class="line language-text">Foreign - user_id</code><code class="line language-text">Relation Class - Doctrine_Relation_ForeignKey</code><code class="empty"></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Notice how in the above examples the <code>$relation</code> variable
holds an instance of <code>Doctrine_Relation_ForeignKey</code> yet we can
access it like an array. This is because, like many Doctrine
classes, it implements <code>ArrayAccess</code>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>You can debug all the information of a relationship by using the
print_r to inspect it.</p>

                <div class="console">
        <pre><code class="console">$array = $relation-&gt;toArray();
print_r($array);</code></pre>
    </div>

    </div>
            <div class="section" id="finder-methods">
            <h3 class="section-header ">
    <a href="#finder-methods">
        Finder Methods
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine_Table provides basic finder methods. These finder methods
are very fast to write and should be used if you only need to fetch data
from one database table. If you need queries that use several components
(database tables) use Doctrine_Connection::query.</p>

            
    <p>You can easily find an individual user by its primary key by using the
find method:</p>

                <div class="console">
        <pre><code class="console">$user = $userTable-&gt;find(2);
print_r($user-&gt;toArray());
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="c6c1c6040be2f4b70f6d3157e2ec17ffb5ee4620"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="c6c1c6040be2f4b70f6d3157e2ec17ffb5ee4620"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Array (</code><code class="line language-text">    [id] =&gt; 2</code><code class="line language-text">    [is_active] =&gt; 1</code><code class="line language-text">    [is_super_admin] =&gt; 0</code><code class="line language-text">    [first_name] =&gt;</code><code class="line language-text">    [last_name] =&gt;</code><code class="line language-text">    [username] =&gt; jwage</code><code class="line language-text">    [password] =&gt;</code><code class="line language-text">    [type] =&gt;</code><code class="line language-text">    [created_at] =&gt; 2009-01-21 13:29:12</code><code class="line language-text">    [updated_at] =&gt; 2009-01-21 13:29:12</code><code class="line language-text">)</code><code class="empty"></code></pre>
            
    <p>You can also use the findAll method to retrieve a collection of
all <code>User</code> records in the database:</p>

                <div class="console">
        <pre><code class="console">foreach ($userTable-&gt;findAll() as $user) {
    echo $user-&gt;username . &quot;\n&quot;;
}
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="68ed42de4d4e844820888b52dcc4c81376775584"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="68ed42de4d4e844820888b52dcc4c81376775584"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Jack</code><code class="line language-text">jwage</code><code class="empty"></code></pre>
                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>The findAll method is not recommended as it will
Return all records in the database and if you need to retrieve
information from relationships it will lazily load that data causing
high query counts. You can learn how to retrieve records and their related
records efficiently by reading the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a>
chapter.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>You can also retrieve a set of records with a DQL where condition by
using the findByDql method:</p>

                <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findByDql(&#039;username LIKE ?&#039;, &#039;%jw%&#039;);

foreach($users as $user) {
    echo $user-&gt;username . &quot;&quot;;
}
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="5abab50644508b042545854544f96c929a04f2d2"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="5abab50644508b042545854544f96c929a04f2d2"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">jwage</code><code class="empty"></code></pre>
            
    <p>Doctrine also offers some additional magic finder methods that can be
read about in the [doc dql-doctrine-query-language:magic-finders :name]
section of the DQL chapter.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>All of the finders below provided by Doctrine_Table
use instances of Doctrine_Query for executing the queries. The
objects are built dynamically internally and executed.</p>

    <p>Using Doctrine_Query instances are highly recommend when
accessing multiple objects through relationships. If you don&#039;t you will
have high query counts as the data will be lazily loaded. You can read more
about this in the <a href="dql-doctrine-query-language.html">DQL: Doctrine Query Language</a> chapter.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            <div class="section" id="custom-table-classes">
            <h4 class="section-header ">
    <a href="#custom-table-classes">
        Custom Table Classes
        <i class="fas fa-link"></i>
    </a>
</h4>
            
    <p>Adding custom table classes is very easy. Only thing you need to do is name the
classes as <code>[componentName]Table</code> and make them extend
Doctrine_Table<code>. So for the </code><code>User</code> model we would create a class
like the following:</p>

                <div class="console">
        <pre><code class="console">// models/UserTable.php
class UserTable extends Doctrine_Table
{
}
</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="custom-finders">
            <h3 class="section-header ">
    <a href="#custom-finders">
        Custom Finders
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can add custom finder methods to your custom table object. These
finder methods may use fast Doctrine_Table finder methods or [doc
dql-doctrine-query-language DQL API] (Doctrine_Query::create).</p>

                <div class="console">
        <pre><code class="console">// models/UserTable.php
class UserTable extends Doctrine_Table
{
    public function findByName($name)
    {
        return Doctrine_Query::create()
                -&gt;from(&#039;User u&#039;)
                -&gt;where(&#039;u.name LIKE ?&#039;, &quot;%$name%&quot;)
                -&gt;execute();
    }
}</code></pre>
    </div>

            
    <p>Doctrine will check if a child Doctrine_Table class called
<code>UserTable</code> exists when calling getTable and if it does, it will
return an instance of that instead of the default Doctrine_Table.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>In order for custom {{Doctrine_Table}} classes to be
loaded you must enable the <code>autoload_table_classes</code> attribute in
your bootstrap.php file like done below.</p>
    <div class="console">
        <pre><code class="console">// boostrap.php
// ...
$manager-&gt;setAttribute(Doctrine_Core::ATTR_AUTOLOAD_TABLE_CLASSES, true);</code></pre>
    </div>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Now when we ask for the <code>User</code> table object we will get the following:</p>

                <div class="console">
        <pre><code class="console">$userTable = Doctrine_Core::getTable(&#039;User&#039;);

echo get_class($userTable); // UserTable

$users = $userTable-&gt;findByName(&quot;Jack&quot;);
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The above example where we add a {{findByName()}} method is
made possible automatically by the magic finder methods. You can
read about them in the [doc
dql-doctrine-query-language:magic-finders :name] section of the DQL
chapter.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
            <div class="section" id="record">
            <a id="component-overview-record"></a>
            <h2 class="section-header ">
    <a href="#record">
        Record
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine represents tables in your RDBMS with child
Doctrine_Record classes. These classes are where you define your
schema information, options, attributes, etc. Instances of these child classes
represents records in the database and you can get and set properties on these
objects.</p>

            <div class="section" id="properties">
            <h3 class="section-header ">
    <a href="#properties">
        Properties
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Each assigned column property of Doctrine_Record represents a
database table column. You will learn more about how to define your models in
the <a href="defining-models.html">Defining Models</a> chapter.</p>

            
    <p>Now accessing the columns is easy:</p>

                <div class="console">
        <pre><code class="console">// test.php
$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$user = $userTable-&gt;find(1);
</code></pre>
    </div>

            

<ul>
    <li>
    <p>Access property through overloading:</p>
    <div class="console">
        <pre><code class="console">// ...
echo $user-&gt;username;</code></pre>
    </div>
</li>
    <li>
    <p>Access property with get():</p>
    <div class="console">
        <pre><code class="console">// ...
echo $user-&gt;get(&#039;username);</code></pre>
    </div>
</li>
    <li>
    <p>Access property with ArrayAccess:</p>
    <div class="console">
        <pre><code class="console">// ...
echo $user[&#039;username&#039;];</code></pre>
    </div>
</li>
</ul>

            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>The recommended way to access column values is by using the
ArrayAccess as it makes it easy to switch between record and array
fetching when needed.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Iterating through the properties of a record can be done in similar way
as iterating through an array - by using the <code>foreach</code> construct. This
is possible since Doctrine_Record implements a magic
<code>IteratorAggregate</code> interface.</p>

                <div class="console">
        <pre><code class="console">foreach ($user as $field =&gt; $value) {
    echo $field . &#039;: &#039; . $value . &quot;&quot;;
}</code></pre>
    </div>

            
    <p>As with arrays you can use the isset for checking if given
property exists and unset for setting given property to null.</p>

            
    <p>We can easily check if a property named &#039;name&#039; exists in a if conditional:</p>

                <div class="console">
        <pre><code class="console">if (isset($user[&#039;username&#039;])) {
}
</code></pre>
    </div>

            
    <p>If we want to unset the name property we can do it using the unset
function in php:</p>

                <div class="console">
        <pre><code class="console">unset($user[&#039;username&#039;]);
</code></pre>
    </div>

            
    <p>When you have set values for record properties you can get an array of
the modified fields and values using Doctrine_Record::getModified:</p>

                <div class="console">
        <pre><code class="console">// test.php
$user[&#039;username&#039;] = &#039;Jack Daniels&#039;;
print_r($user-&gt;getModified());
</code></pre>
    </div>

            
    <p>The above example would output the following when executed:</p>

                <pre class="code-block-table" id="bbccbf944d1bacb0c95105c97149280355a6d113"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="bbccbf944d1bacb0c95105c97149280355a6d113"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">$ php test.php</code><code class="line language-text">Array (</code><code class="line language-text">    [username] =&gt; Jack Daniels</code><code class="line language-text">)</code><code class="empty"></code></pre>
            
    <p>You can also simply check if a record is modified by using the
Doctrine_Record::isModified method:</p>

                <div class="console">
        <pre><code class="console">echo $user-&gt;isModified() ? &#039;Modified&#039; : &#039;Not Modified&#039;;
</code></pre>
    </div>

            
    <p>Sometimes you may want to retrieve the column count of given record. In
order to do this you can simply pass the record as an argument for the
Doctrine_Record
implements a magic Countable interface. The other way would be calling
the count method.</p>

                <div class="console">
        <pre><code class="console">echo $record-&gt;count();
echo count($record);</code></pre>
    </div>

            
    <p>Doctrine_Record offers a special method for accessing the
identifier of given record. This method is called identifier and
it returns an array with identifier field names as keys and values as
the associated property values.</p>

                <div class="console">
        <pre><code class="console">$user[&#039;username&#039;] = &#039;Jack Daniels&#039;;
$user-&gt;save();

print_r($user-&gt;identifier()); // array(&#039;id&#039; =&gt; 1)</code></pre>
    </div>

            
    <p>A common case is that you have an array of values which you need to
assign to a given record. It may feel awkward and clumsy to set these
values separately. No need to worry though, Doctrine_Record offers
a way for merging a given array or record to another</p>

            
    <p>The merge method iterates through the properties of the given
record or array and assigns the values to the object</p>

                <div class="console">
        <pre><code class="console">$values = array(
    &#039;username&#039; =&gt; &#039;someone&#039;,
    &#039;age&#039; =&gt; 11,
);

$user-&gt;merge($values);

echo $user-&gt;username; // someone
echo $user-&gt;age; // 11</code></pre>
    </div>

            
    <p>You can also merge a one records values in to another like the
following:</p>

                <div class="console">
        <pre><code class="console">$user1 = new User();
$user1-&gt;username = &#039;jwage&#039;;

$user2 = new User();
$user2-&gt;merge($user1);

echo $user2-&gt;username; // jwage
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>fromArray method
which is identical to merge and only exists for consistency
with the toArray method.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="updating-records">
            <h3 class="section-header ">
    <a href="#updating-records">
        Updating Records
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Updating objects is very easy, you just call the
Doctrine_Record::save method. The other way is to call
Doctrine_Connection::flush which saves all objects. It should be
noted though that flushing is a much heavier operation than just calling
save method.</p>

                <div class="console">
        <pre><code class="console">$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$user = $userTable-&gt;find(2);

if ($user !== false) {
    $user-&gt;username = &#039;Jack Daniels&#039;;
    $user-&gt;save();
}</code></pre>
    </div>

            
    <p>Sometimes you may want to do a direct update. In direct update the
objects aren&#039;t loaded from database, rather the state of the database is
directly updated. In the following example we use DQL UPDATE statement
to update all users.</p>

            
    <p>Run a query to make all user names lowercase:</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;update(&#039;User u&#039;)
        -&gt;set(&#039;u.username&#039;, &#039;LOWER(u.name)&#039;);

$q-&gt;execute();
</code></pre>
    </div>

            
    <p>You can also run an update using objects if you already know the identifier of
the record. When you use the Doctrine_Record::assignIdentifier
method it sets the record identifier and changes the state so that calling
Doctrine_Record::save performs an update instead of insert.</p>

                <div class="console">
        <pre><code class="console">$user = new User();
$user-&gt;assignIdentifier(1);
$user-&gt;username = &#039;jwage&#039;;
$user-&gt;save();</code></pre>
    </div>

    </div>
            <div class="section" id="replacing-records">
            <h3 class="section-header ">
    <a href="#replacing-records">
        Replacing Records
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Replacing records is simple. If you instantiate a new object and save it
and then late instantiate another new object with the same primary key
or unique index value which already exists in the database, then it will
replace/update that row in the database instead of inserting a new one.
Below is an example.</p>

            
    <p>First, imagine a <code>User</code> model where username is a unique index.</p>

                <div class="console">
        <pre><code class="console">// test.php
$user = new User();
$user-&gt;username = &#039;jwage&#039;;
$user-&gt;password = &#039;changeme&#039;;
$user-&gt;save();</code></pre>
    </div>

            
    <p>Issues the following query</p>

                <pre class="code-block-table" id="8f4dfd9d2467cd7e70bbf0f3191480cb1d9bf303"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="8f4dfd9d2467cd7e70bbf0f3191480cb1d9bf303"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span></code><code class="line language-sql">    (username, password)</code><code class="line language-sql"><span class="hljs-keyword">VALUES</span></code><code class="line language-sql">    (?, ?),</code><code class="line language-sql">    ('jwage', 'changeme')</code><code class="empty"></code></pre>
            
    <p>Now lets create another new object and set the same username but a
different password.</p>

                <div class="console">
        <pre><code class="console">$user = new User();
$user-&gt;username = &#039;jwage&#039;;
$user-&gt;password = &#039;newpassword&#039;;
$user-&gt;replace();</code></pre>
    </div>

            
    <p>Issues the following query</p>

                <pre class="code-block-table" id="be95caaf21fe80803284f10c5d59223ead6e7291"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="be95caaf21fe80803284f10c5d59223ead6e7291"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-sql"><span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span></code><code class="line language-sql">    (id, username, password)</code><code class="line language-sql"><span class="hljs-keyword">VALUES</span></code><code class="line language-sql">    (?, ?, ?),</code><code class="line language-sql">    (null, 'jwage', 'newpassword')</code><code class="empty"></code></pre>
            
    <p>The record is replaced/updated instead of a new one being inserted</p>

    </div>
            <div class="section" id="refreshing-records">
            <h3 class="section-header ">
    <a href="#refreshing-records">
        Refreshing Records
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Sometimes you may want to refresh your record with data from the
database, use Doctrine_Record::refresh.</p>

                <div class="console">
        <pre><code class="console">$user = Doctrine_Core::getTable(&#039;User&#039;)-&gt;find(2);
$user-&gt;username = &#039;New name&#039;;</code></pre>
    </div>

            
    <p>Now if you use the Doctrine_Record::refresh method it will select
the data from the database again and update the properties of the
instance.</p>

                <div class="console">
        <pre><code class="console">$user-&gt;refresh();</code></pre>
    </div>

    </div>
            <div class="section" id="refreshing-relationships">
            <h3 class="section-header ">
    <a href="#refreshing-relationships">
        Refreshing relationships
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The Doctrine_Record::refresh method can also refresh the already
loaded record relationships, but you need to specify them on the
original query.</p>

            
    <p>First lets retrieve a <code>User</code> with its associated <code>Groups</code>:</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;from(&#039;User u&#039;)
        -&gt;leftJoin(&#039;u.Groups&#039;)
        -&gt;where(&#039;id = ?&#039;);

$user = $q-&gt;fetchOne(array(1));
</code></pre>
    </div>

            
    <p>Now lets retrieve a <code>Group</code> with its associated <code>Users</code>:</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;from(&#039;Group g&#039;)
        -&gt;leftJoin(&#039;g.Users&#039;)
        -&gt;where(&#039;id = ?&#039;);

$group = $q-&gt;fetchOne(array(1));
</code></pre>
    </div>

            
    <p>Now lets link the retrieved <code>User</code> and <code>Group</code> through a
<code>UserGroup</code> instance:</p>

                <div class="console">
        <pre><code class="console">$userGroup = new UserGroup();
$userGroup-&gt;user_id = $user-&gt;id;
$userGroup-&gt;group_id = $group-&gt;id;
$userGroup-&gt;save();
</code></pre>
    </div>

            
    <p>You can also link a <code>User</code> to a <code>Group</code> in a much simpler way, by
simply adding the <code>Group</code> to the <code>User</code>. Doctrine will take care of
creating the <code>UserGroup</code> instance for you automatically:</p>

                <div class="console">
        <pre><code class="console">$user-&gt;Groups[] = $group;
$user-&gt;save()
</code></pre>
    </div>

            
    <p>Now if we call <code>Doctrine_Record::refresh(true)</code> it will refresh the
record and its relationships loading the newly created reference we made
above:</p>

                <div class="console">
        <pre><code class="console">$user-&gt;refresh(true);
$group-&gt;refresh(true);
</code></pre>
    </div>

            
    <p>You can also lazily refresh all defined relationships of a model using
Doctrine_Record::refreshRelated:</p>

                <div class="console">
        <pre><code class="console">$user = Doctrine_Core::getTable(&#039;User&#039;)-&gt;findOneByName(&#039;jon&#039;);
$user-&gt;refreshRelated();
</code></pre>
    </div>

            
    <p>If you want to refresh an individual specified relationship just pass
the name of a relationship to the refreshRelated function and it
will lazily load the relationship:</p>

                <div class="console">
        <pre><code class="console">$user-&gt;refreshRelated(&#039;Phonenumber&#039;);
</code></pre>
    </div>

    </div>
            <div class="section" id="deleting-records">
            <h3 class="section-header ">
    <a href="#deleting-records">
        Deleting Records
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Deleting records in Doctrine is handled by Doctrine_Record::delete,
Doctrine_Collection::delete and
Doctrine_Connection::delete methods.</p>

                <div class="console">
        <pre><code class="console">$userTable = Doctrine_Core::getTable(&quot;User&quot;);

$user = $userTable-&gt;find(2);

// deletes user and all related composite objects
if($user !== false) {
    $user-&gt;delete();
}</code></pre>
    </div>

            
    <p>If you have a Doctrine_Collection<code> of </code><code>User</code> records you can call
delete and it will loop over all records calling
Doctrine_Record::delete for you.</p>

                <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findAll();</code></pre>
    </div>

            
    <p>Now you can delete all users and their related composite objects by calling
Doctrine_Collection<code class="">delete. It will loop over all </code><code>Users</code> in the
collection calling delete one each one:</p>

                <div class="console">
        <pre><code class="console">$users-&gt;delete();
</code></pre>
    </div>

    </div>
            <div class="section" id="using-expression-values">
            <a id="component-overview-using-expression-values"></a>
            <h3 class="section-header ">
    <a href="#using-expression-values">
        Using Expression Values
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>There might be situations where you need to use SQL expressions as
values of columns. This can be achieved by using
<code>Doctrine_Expression</code> which converts portable DQL expressions to your
native SQL expressions.</p>

            
    <p>Lets say we have a class called event with columns
<code>timepoint(datetime)</code> and <code>name(string)</code>. Saving the record with the
current timestamp can be achieved as follows:</p>

                <div class="console">
        <pre><code class="console">// test.php
$user = new User();
$user-&gt;username = &#039;jwage&#039;;
$user-&gt;updated_at = new Doctrine_Expression(&#039;NOW()&#039;);
$user-&gt;save();
</code></pre>
    </div>

            
    <p>The above code would issue the following SQL query:</p>

                <pre class="code-block-table" id="51cec4a6800f4f0e91c2c3dca345030cf110263e"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="51cec4a6800f4f0e91c2c3dca345030cf110263e"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, updated_at) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'jwage'</span>, <span class="hljs-keyword">NOW</span>())</code><code class="empty"></code></pre>
            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>When you use <code>Doctrine_Expression</code> with your objects in
order to get the updated value you will have to manually call
refresh to get the updated value from the database.</p>
    <div class="console">
        <pre><code class="console">$user-&gt;refresh();</code></pre>
    </div>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="getting-record-state">
            <h3 class="section-header ">
    <a href="#getting-record-state">
        Getting Record State
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Every Doctrine_Record has a state. First of all records can be
transient or persistent. Every record that is retrieved from database is
persistent and every newly created record is considered transient. If a
Doctrine_Record is retrieved from database but the only loaded
property is its primary key, then this record has a state called proxy.</p>

            
    <p>Every transient and persistent Doctrine_Record is either clean or
dirty. Doctrine_Record is clean when none of its properties are
changed and dirty when at least one of its properties has changed.</p>

            
    <p>A record can also have a state called locked. In order to avoid infinite
recursion in some rare circular reference cases Doctrine uses this state
internally to indicate that a record is currently under a manipulation
operation.</p>

            
    <p>Below is a table containing all the different states a record can be in
with a short description of it:</p>

            <table>
                <thead>
            <tr>
                            <th>Name</th>
                            <th>Description</th>
                    </tr>
        </thead>
    <tbody>
    <tr>
            <td>Doctrine_Record::STATE_PROXY   Record is i</td>
            <td>proxy state meaning
its persistent but not all of its
properties are loaded from the
database.</td>
    </tr>
    <tr>
            <td>Doctrine_Record::STATE_TCLEAN  Record is t</td>
            <td>nsient clean, meaning
its transient and none of its
properties are changed.</td>
    </tr>
    <tr>
            <td>Doctrine_Record::STATE_TDIRTY  Record is t</td>
            <td>nsient dirty, meaning
its transient and some of its
properties are changed.</td>
    </tr>
    <tr>
            <td>Doctrine_Record::STATE_DIRTY   Record is d</td>
            <td>ty, meaning its
persistent and some of its
properties are changed.</td>
    </tr>
    <tr>
            <td>Doctrine_Record::STATE_CLEAN   Record is c</td>
            <td>an, meaning its
persistent and none of its
properties are changed.</td>
    </tr>
    <tr>
            <td>Doctrine_Record::STATE_LOCKED  Record is l</td>
            <td>ked.</td>
    </tr>
</tbody>
</table>
            
    <p>You can easily get the state of a record by using the
Doctrine_Record::state method:</p>

                <div class="console">
        <pre><code class="console">$user = new User();

if ($user-&gt;state() == Doctrine_Record::STATE_TDIRTY) {
    echo &#039;Record is transient dirty&#039;;
}
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>values specified in the schema. If we use an object that has no
default values and instantiate a new instance it will return
<code>TCLEAN</code>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
                <div class="console">
        <pre><code class="console">$account = new Account();

if ($account-&gt;state() == Doctrine_Record::STATE_TCLEAN) {
    echo &#039;Record is transient clean&#039;;
}</code></pre>
    </div>

    </div>
            <div class="section" id="getting-object-copy">
            <h3 class="section-header ">
    <a href="#getting-object-copy">
        Getting Object Copy
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Sometimes you may want to get a copy of your object (a new object with
all properties copied). Doctrine provides a simple method for this:
Doctrine_Record::copy.</p>

                <div class="console">
        <pre><code class="console">$copy = $user-&gt;copy();</code></pre>
    </div>

            
    <p>Notice that copying the record with copy returns a new record
(state <code>TDIRTY</code>) with the values of the old record, and it copies the
relations of that record. If you do not want to copy the relations too,
you need to use <code>copy(false)</code>.</p>

            
    <p>Get a copy of user without the relations:</p>

                <div class="console">
        <pre><code class="console">$copy = $user-&gt;copy(false);
</code></pre>
    </div>

            
    <p>Using the PHP <code>clone</code> functionality simply uses this copy
functionality internally:</p>

                <div class="console">
        <pre><code class="console">$copy = clone $user;
</code></pre>
    </div>

    </div>
            <div class="section" id="saving-a-blank-record">
            <h3 class="section-header ">
    <a href="#saving-a-blank-record">
        Saving a Blank Record
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>By default Doctrine doesn&#039;t execute when save is being called on
an unmodified record. There might be situations where you want to
force-insert the record even if it has not been modified. This can be
achieved by assigning the state of the record to
Doctrine_Record::STATE_TDIRTY:</p>

                <div class="console">
        <pre><code class="console">$user = new User();
$user-&gt;state(&#039;TDIRTY&#039;);
$user-&gt;save();
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>When setting the state you can optionally pass a string for
the state and it will be converted to the appropriate state
constant. In the example above, <code>TDIRTY</code> is actually converted to
Doctrine_Record::STATE_TDIRTY.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="mapping-custom-values">
            <h3 class="section-header ">
    <a href="#mapping-custom-values">
        Mapping Custom Values
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>There might be situations where you want to map custom values to
records. For example values that depend on some outer sources and you
only want these values to be available at runtime not persisting those
values into database. This can be achieved as follows:</p>

                <div class="console">
        <pre><code class="console">$user-&gt;mapValue(&#039;isRegistered&#039;, true);

$user-&gt;isRegistered; // true
</code></pre>
    </div>

    </div>
            <div class="section" id="serializing">
            <h3 class="section-header ">
    <a href="#serializing">
        Serializing
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Sometimes you may want to serialize your record objects (possibly for
caching purposes):</p>

                <div class="console">
        <pre><code class="console">$string = serialize($user);

$user = unserialize($string);
</code></pre>
    </div>

    </div>
            <div class="section" id="checking-existence">
            <h3 class="section-header ">
    <a href="#checking-existence">
        Checking Existence
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Very commonly you&#039;ll need to know if given record exists in the
database. You can use the exists method for checking if given
record has a database row equivalent:</p>

                <div class="console">
        <pre><code class="console">$record = new User();

echo $record-&gt;exists() ? &#039;Exists&#039; : &#039;Does Not Exist&#039;; // Does Not Exist

$record-&gt;username = &#039;someone&#039;; $record-&gt;save();

echo $record-&gt;exists() ? &#039;Exists&#039; : &#039;Does Not Exist&#039;; // Exists
</code></pre>
    </div>

    </div>
            <div class="section" id="function-callbacks-for-columns">
            <h3 class="section-header ">
    <a href="#function-callbacks-for-columns">
        Function Callbacks for Columns
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine_Record offers a way for attaching callback calls for
column values. For example if you want to trim certain column, you can
simply use:</p>

                <div class="console">
        <pre><code class="console">$record-&gt;call(&#039;trim&#039;, &#039;username&#039;);
</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="collection">
            <a id="component-overview-collection"></a>
            <h2 class="section-header ">
    <a href="#collection">
        Collection
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Doctrine_Collection is a collection of records (see
Doctrine_Record). As with records the collections can be deleted and
saved using Doctrine_Collection::delete and
Doctrine_Collection::save accordingly.</p>

            
    <p>When fetching data from database with either DQL API (see
Doctrine_Query<code>) or rawSql API (see </code><code>Doctrine_RawSql</code>) the
methods return an instance of Doctrine_Collection by default.</p>

            
    <p>The following example shows how to initialize a new collection:</p>

                <div class="console">
        <pre><code class="console">$users = new Doctrine_Collection(&#039;User&#039;);
</code></pre>
    </div>

            
    <p>Now add some new data to the collection:</p>

                <div class="console">
        <pre><code class="console">$users[0]-&gt;username = &#039;Arnold&#039;;
$users[1]-&gt;username = &#039;Somebody&#039;;
</code></pre>
    </div>

            
    <p>Now just like we can delete a collection we can save it:</p>

                <div class="console">
        <pre><code class="console">$users-&gt;save();
</code></pre>
    </div>

            <div class="section" id="accessing-elements">
            <h3 class="section-header ">
    <a href="#accessing-elements">
        Accessing Elements
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>You can access the elements of Doctrine_Collection with
get methods or with ArrayAccess interface.</p>

                <div class="console">
        <pre><code class="console">$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$users = $userTable-&gt;findAll();</code></pre>
    </div>

            

<ul>
    <li>
    <p>Accessing elements with ArrayAccess interface:</p>
    <div class="console">
        <pre><code class="console">$users[0]-&gt;username = &quot;Jack Daniels&quot;;
$users[1]-&gt;username = &quot;John Locke&quot;;</code></pre>
    </div>
</li>
    <li>
    <p>Accessing elements with get:</p>
    <div class="console">
        <pre><code class="console">echo $users-&gt;get(1)-&gt;username;</code></pre>
    </div>
</li>
</ul>

    </div>
            <div class="section" id="adding-new-elements">
            <h3 class="section-header ">
    <a href="#adding-new-elements">
        Adding new Elements
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>When accessing single elements of the collection and those elements
(records) don&#039;t exist Doctrine auto-adds them.</p>

            
    <p>In the following example we fetch all users from database (there are 5)
and then add couple of users in the collection.</p>

            
    <p>As with PHP arrays the indexes start from zero.</p>

                <div class="console">
        <pre><code class="console">// test.php
$users = $userTable-&gt;findAll();

echo count($users); // 5

$users[5]-&gt;username = &quot;new user 1&quot;;
$users[6]-&gt;username = &quot;new user 2&quot;;</code></pre>
    </div>

            
    <p>You could also optionally omit the 5 and 6 from the array index and it
will automatically increment just as a PHP array would:</p>

                <div class="console">
        <pre><code class="console">$users[]-&gt;username = &#039;new user 3&#039;; // key is 7
$users[]-&gt;username = &#039;new user 4&#039;; // key is 8
</code></pre>
    </div>

    </div>
            <div class="section" id="getting-collection-count">
            <h3 class="section-header ">
    <a href="#getting-collection-count">
        Getting Collection Count
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The Doctrine_Collection::count method returns the number of
elements currently in the collection:</p>

                <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findAll();

echo $users-&gt;count();
</code></pre>
    </div>

            
    <p>Since Doctrine_Collection implements Countable interface a valid
alternative for the previous example is to simply pass the collection as
an argument for the count() function:</p>

                <div class="console">
        <pre><code class="console">echo count($users);
</code></pre>
    </div>

    </div>
            <div class="section" id="saving-the-collection">
            <h3 class="section-header ">
    <a href="#saving-the-collection">
        Saving the Collection
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Similar to Doctrine_Record the collection can be saved by calling
the save gets called Doctrine issues
save operations an all records and wraps the whole procedure in a
transaction.</p>

                <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findAll();

$users[0]-&gt;username = &#039;Jack Daniels&#039;;
$users[1]-&gt;username = &#039;John Locke&#039;;

$users-&gt;save();</code></pre>
    </div>

    </div>
            <div class="section" id="deleting-the-collection">
            <h3 class="section-header ">
    <a href="#deleting-the-collection">
        Deleting the Collection
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine Collections can be deleted in very same way is Doctrine Records
you just call delete method. As for all collections Doctrine knows
how to perform single-shot-delete meaning it only performs one database
query for the each collection.</p>

            
    <p>For example if we have collection of users. When deleting the collection
of users doctrine only performs one query for this whole transaction.
The query would look something like:</p>

                <pre class="code-block-table" id="3cda6b7db24ec684784cc49b73e25ef135829149"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="3cda6b7db24ec684784cc49b73e25ef135829149"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">id</span> <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, ... , N)</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="key-mapping">
            <h3 class="section-header ">
    <a href="#key-mapping">
        Key Mapping
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Sometimes you may not want to use normal indexing for collection elements. For
example in some cases mapping primary keys as collection keys might be useful.
The following example demonstrates how this can be achieved.</p>

            

<ul>
    <li>
    <p>Map the <code>id</code> column:</p>
    <div class="console">
        <pre><code class="console">// test.php
$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$userTable-&gt;setAttribute(Doctrine_Core::ATTR_COLL_KEY, &#039;id&#039;);</code></pre>
    </div>
</li>
    <li>
    <p>Now user collections will use the values of id column as element indexes:</p>
    <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findAll();

foreach($users as $id =&gt; $user) {
    echo $id . $user-&gt;username;
}</code></pre>
    </div>
</li>
    <li>
    <p>You may want to map the <code>name</code> column:</p>
    <div class="console">
        <pre><code class="console">$userTable = Doctrine_Core::getTable(&#039;User&#039;);
$userTable-&gt;setAttribute(Doctrine_Core::ATTR_COLL_KEY, &#039;username&#039;);</code></pre>
    </div>
</li>
    <li>
    <p>Now user collections will use the values of <code>name</code> column as element
indexes:</p>
    <div class="console">
        <pre><code class="console">$users = $userTable-&gt;findAll();

foreach($users as $username =&gt; $user) {
    echo $username . &#039; - &#039; . $user-&gt;created_at . &quot;&quot;;
}</code></pre>
    </div>
</li>
</ul>

                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>Note this would only be advisable if the <code>username</code> column is specified
as unique in your schema otherwise you will have cases where data cannot be
hydrated properly due to duplicate collection keys.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="loading-related-records">
            <h3 class="section-header ">
    <a href="#loading-related-records">
        Loading Related Records
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Doctrine provides means for efficiently retrieving all related records
for all record elements. That means when you have for example a
collection of users you can load all phonenumbers for all users by
simple calling the loadRelated method.</p>

            
    <p>However, in most cases you don&#039;t need to load related elements
explicitly, rather what you should do is try to load everything at once
by using the DQL API and JOINS.</p>

            
    <p>The following example uses three queries for retrieving users, their
phonenumbers and the groups they belong to.</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;from(&#039;User u&#039;);

$users = $q-&gt;execute();</code></pre>
    </div>

            
    <p>Now lets load phonenumbers for all users:</p>

                <div class="console">
        <pre><code class="console">$users-&gt;loadRelated(&#039;Phonenumbers&#039;);

foreach($users as $user) {
    echo $user-&gt;Phonenumbers[0]-&gt;phonenumber;
    // no additional db queries needed here
}
</code></pre>
    </div>

            
    <p>The loadRelated works an any relation, even associations:</p>

                <div class="console">
        <pre><code class="console">$users-&gt;loadRelated(&#039;Groups&#039;);

foreach($users as $user) {
    echo $user-&gt;Groups[0]-&gt;name;
}
</code></pre>
    </div>

            
    <p>The example below shows how to do this more efficiently by using the DQL
API.</p>

            
    <p>Write a Doctrine_Query that loads everything in one query:</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;from(&#039;User u&#039;)
        -&gt;leftJoin(&#039;u.Phonenumbers p&#039;)
        -&gt;leftJoin(&#039;u.Groups g&#039;);

$users = $q-&gt;execute();
</code></pre>
    </div>

            
    <p>Now when we use the <code>Phonenumbers</code> and <code>Groups</code> no additional database
queries are needed:</p>

                <div class="console">
        <pre><code class="console">foreach($users as $user) {
    echo $user-&gt;Phonenumbers[0]-&gt;phonenumber;
    echo $user-&gt;Groups[0]-&gt;name;
}
</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="validator">
            <h2 class="section-header ">
    <a href="#validator">
        Validator
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Validation in Doctrine is a way to enforce your business rules in the model
part of the MVC architecture. You can think of this validation as a gateway
that needs to be passed right before data gets into the persistent data store.
The definition of these business rules takes place at the record level, that
means in your active record model classes (classes derived from
Doctrine_Record). The first thing you need to do to be able to use
this kind of validation is to enable it globally. This is done through the
Doctrine_Manager.</p>

                <div class="console">
        <pre><code class="console">// bootstrap.php
$manager-&gt;setAttribute(Doctrine_Core::ATTR_VALIDATE, Doctrine_Core::VALIDATE_ALL);</code></pre>
    </div>

            
    <p>Once you enabled validation, you&#039;ll get a bunch of validations
automatically:</p>

            

<ul>
    <li>Data type validations: All values assigned to columns are checked for
the right type. That means if you specified a column of your record
as type &#039;integer&#039;, Doctrine will validate that any values assigned to
that column are of this type. This kind of type validation tries to
be as smart as possible since PHP is a loosely typed language. For
example 2 as well as &quot;7&quot; are both valid integers whilst &quot;3f&quot; is not.
Type validations occur on every column (since every column definition
needs a type).</li>
    <li>Length validation: As the name implies, all values assigned to
columns are validated to make sure that the value does not exceed the
maximum length.</li>
</ul>

            
    <p>You can combine the following constants by using bitwise operations:
<code>VALIDATE_ALL</code>, <code>VALIDATE_TYPES</code>, <code>VALIDATE_LENGTHS</code>,
<code>VALIDATE_CONSTRAINTS</code>, <code>VALIDATE_NONE</code>.</p>

            
    <p>For example to enable all validations except length validations you
would use:</p>

                <div class="console">
        <pre><code class="console">// bootstrap.php
$manager-&gt;setAttribute(Doctrine_Core::ATTR_VALIDATE, VALIDATE_ALL &amp; ~VALIDATE_LENGTHS);
</code></pre>
    </div>

            
    <p>You can read more about this topic in the <a href="data-validation.html">Data Validation</a>
chapter.</p>

            <div class="section" id="more-validation">
            <h3 class="section-header ">
    <a href="#more-validation">
        More Validation
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The type and length validations are handy but most of the time they&#039;re
not enough. Therefore Doctrine provides some mechanisms that can be used
to validate your data in more detail.</p>

            
    <p>Validators are an easy way to specify further validations. Doctrine has
a lot of predefined validators that are frequently needed such as
<code>email</code>, <code>country</code>, <code>ip</code>, <code>range</code> and <code>regexp</code> validators. You
find a full list of available validators in the [doc data-validation
:name] chapter. You can specify which validators apply to which column
through the 4th argument of the hasColumn method. If that is still
not enough and you need some specialized validation that is not yet
available as a predefined validator you have three options:</p>

            

<ul>
    <li>You can write the validator on your own.</li>
    <li>You can propose your need for a new validator to a Doctrine
developer.</li>
    <li>You can use validation hooks.</li>
</ul>

            
    <p>The first two options are advisable if it is likely that the validation
is of general use and is potentially applicable in many situations. In
that case it is a good idea to implement a new validator. However if the
validation is special it is better to use hooks provided by Doctrine:</p>

            

<ul>
    <li>validate (Executed every time the record gets validated)</li>
    <li>validateOnInsert (Executed when the record is new and gets
validated)</li>
    <li>validateOnUpdate (Executed when the record is not new and gets
validated)</li>
</ul>

            
    <p>If you need a special validation in your active record you can simply override
one of these methods in your active record class (a descendant of
Doctrine_Record). Within these methods you can use all the power
of PHP to validate your fields. When a field does not pass your validation you
can then add errors to the record&#039;s error stack. The following code snippet
shows an example of how to define validators together with custom validation:</p>

                <div class="console">
        <pre><code class="console">// models/User.php
class User extends BaseUser
{
    protected function validate()
    {
        if ($this-&gt;username == &#039;God&#039;) {
            // Blasphemy! Stop that! ;-)
            // syntax: add(&lt;fieldName&gt;, &lt;error code/identifier&gt;)
            $errorStack = $this-&gt;getErrorStack();
            $errorStack-&gt;add(&#039;name&#039;, &#039;You cannot use this username!&#039;);
        }
    }
}</code></pre>
    </div>

                <div class="console">
        <pre><code class="console">// models/Email.php
class Email extends BaseEmail
{
    // ...

    public function setTableDefinition()
    {
        parent::setTableDefinition();

        // ...

        // validators &#039;email&#039; and &#039;unique&#039; used
        $this-&gt;hasColumn(&#039;address&#039;, &#039;string&#039;, 150, array(&#039;email&#039;, &#039;unique&#039;));
    }
}</code></pre>
    </div>

            
    <p>Here is the same example in YAML format. You can read more about YAML in
the <a href="yaml-schema-files.html">YAML Schema Files</a> chapter:</p>

                <pre class="code-block-table" id="5e8a4fa2ecb167a665e380c31c3c4445b525c76b"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="5e8a4fa2ecb167a665e380c31c3c4445b525c76b"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-comment"># schema.yml</span></code><code class="line language-yaml"><span class="hljs-attr">Email:</span></code><code class="line language-yaml">  <span class="hljs-attr">columns:</span></code><code class="line language-yaml">    <span class="hljs-attr">address:</span></code><code class="line language-yaml">      <span class="hljs-attr">type:</span> <span class="hljs-string">string(150)</span></code><code class="line language-yaml">      <span class="hljs-attr">email:</span> <span class="hljs-literal">true</span></code><code class="line language-yaml">      <span class="hljs-attr">unique:</span> <span class="hljs-literal">true</span></code><code class="empty"></code></pre>
    </div>
            <div class="section" id="valid-or-not-valid">
            <h3 class="section-header ">
    <a href="#valid-or-not-valid">
        Valid or Not Valid
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Now that you know how to specify your business rules in your models, it
is time to look at how to deal with these rules in the rest of your
application.</p>

            <div class="section" id="implicit-validation">
            <h4 class="section-header ">
    <a href="#implicit-validation">
        Implicit Validation
        <i class="fas fa-link"></i>
    </a>
</h4>
            
    <p>Whenever a record is going to be saved to the persistent data store (i.e.
through calling $record-&gt;save) the full validation procedure is
executed. If errors occur during that process an exception of the type
Doctrine_Validator_Exception will be thrown. You can catch that
exception and analyze the errors by using the instance method
Doctrine_Validator_Exception::getInvalidRecords. This method
returns an ordinary array with references to all records that did not pass
validation. You can then further explore the errors of each record by analyzing
the error stack of each record. The error stack of a record can be obtained
with the instance method Doctrine_Record::getErrorStack. Each error
stack is an instance of the class <code>Doctrine_Validator_ErrorStack</code>. The error
stack provides an easy to use interface to inspect the errors.</p>

    </div>
            <div class="section" id="explicit-validation">
            <h4 class="section-header ">
    <a href="#explicit-validation">
        Explicit Validation
        <i class="fas fa-link"></i>
    </a>
</h4>
            
    <p>You can explicitly trigger the validation for any record at any time.
For this purpose Doctrine_Record provides the instance method
Doctrine_Record::isValid. This method returns a boolean value
indicating the result of the validation. If the method returns false,
you can inspect the error stack in the same way as seen above except
that no exception is thrown, so you simply obtain the error stack of the
record that didnt pass validation through
Doctrine_Record::getErrorStack.</p>

            
    <p>The following code snippet shows an example of handling implicit
validation which caused a Doctrine_Validator_Exception.</p>

                <div class="console">
        <pre><code class="console">// test.php
$user = new User();

try {
    $user-&gt;username = str_repeat(&#039;t&#039;, 256);
    $user-&gt;Email-&gt;address = &quot;drink@@notvalid..&quot;;
    $user-&gt;save();
} catch(Doctrine_Validator_Exception $e) {
    $userErrors = $user-&gt;getErrorStack();
    $emailErrors = $user-&gt;Email-&gt;getErrorStack();

    foreach($userErrors as $fieldName =&gt; $errorCodes) {
        echo $fieldName . &quot; - &quot; . implode(&#039;, &#039;, $errorCodes) . &quot;\n&quot;;
    }
    foreach($emailErrors as $fieldName =&gt; $errorCodes) {
        echo $fieldName . &quot; - &quot; . implode(&#039;, &#039;, $errorCodes) . &quot;\n&quot;;
    }
}</code></pre>
    </div>

            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>You could also use $e-&gt;getInvalidRecords. The direct
way used above is just more simple when you know the records you&#039;re
dealing with.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>You can also retrieve the error stack as a nicely formatted string for
easy use in your applications:</p>

                <div class="console">
        <pre><code class="console">// test.php
echo $user-&gt;getErrorStackAsString();
</code></pre>
    </div>

            
    <p>It would output an error string that looks something like the following:</p>

                <pre class="code-block-table" id="751aed2c7502d4a021046fedba13e9669ff8333a"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="751aed2c7502d4a021046fedba13e9669ff8333a"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-text">Validation failed in class User</code><code class="line language-text"></code><code class="line language-text">1 field had validation error:</code><code class="line language-text"></code><code class="line language-text">* 1 validator failed on username (length)</code><code class="empty"></code></pre>
    </div>
    </div>
    </div>
            <div class="section" id="profiler">
            <h2 class="section-header ">
    <a href="#profiler">
        Profiler
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p><code>Doctrine_Connection_Profiler</code> is an event listener for
Doctrine_Connection. It provides flexible query profiling. Besides
the SQL strings the query profiles include elapsed time to run the queries.
This allows inspection of the queries that have been performed without the need
for adding extra debugging code to model classes.</p>

            
    <p><code>Doctrine_Connection_Profiler</code> can be enabled by adding it as an event
listener for Doctrine_Connection:</p>

                <div class="console">
        <pre><code class="console">$profiler = new Doctrine_Connection_Profiler();

$conn = Doctrine_Manager::connection();
$conn-&gt;setListener($profiler);
</code></pre>
    </div>

            <div class="section" id="basic-usage">
            <h3 class="section-header ">
    <a href="#basic-usage">
        Basic Usage
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Perhaps some of your pages is loading slowly. The following shows how to
build a complete profiler report from the connection:</p>

                <div class="console">
        <pre><code class="console">// test.php
$time = 0;
foreach ($profiler as $event) {
    $time += $event-&gt;getElapsedSecs();

    printf(
        &quot;%s %f\n%s\n&quot;,
        $event-&gt;getName(),
        $event-&gt;getElapsedSecs(),
        $event-&gt;getQuery()
    );

    $params = $event-&gt;getParams();
    if (!empty($params)) {
        print_r($params);
    }
}
echo &quot;Total time: &quot; . $time . &quot;\n&quot;;

</code></pre>
    </div>

            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>Frameworks like <a href="http://www.symfony-project.com">symfony</a>, <a href="http://framework.zend.com">Zend</a>, etc. offer web debug toolbars that use this
functionality provided by Doctrine for reporting the number of queries
executed on every page as well as the time it takes for each query.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
            <div class="section" id="locking-manager">
            <h2 class="section-header ">
    <a href="#locking-manager">
        Locking Manager
        <i class="fas fa-link"></i>
    </a>
</h2>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The term &#039;Transaction&#039; does not refer to database transactions here but to
the general meaning of this term.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Locking is a mechanism to control concurrency. The two most well known locking
strategies are optimistic and pessimistic locking. The following is a short
description of these two strategies from which only pessimistic locking is
currently supported by Doctrine.</p>

            <div class="section" id="optimistic-locking">
            <h3 class="section-header ">
    <a href="#optimistic-locking">
        Optimistic Locking
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The state/version of the object(s) is noted when the transaction begins.  When
the transaction finishes the noted state/version of the participating objects
is compared to the current state/version. When the states/versions differ the
objects have been modified by another transaction and the current transaction
should fail. This approach is called &#039;optimistic&#039; because it is assumed that it
is unlikely that several users will participate in transactions on the same
objects at the same time.</p>

    </div>
            <div class="section" id="pessimistic-locking">
            <h3 class="section-header ">
    <a href="#pessimistic-locking">
        Pessimistic Locking
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The objects that need to participate in the transaction are locked at the
moment the user starts the transaction. No other user can start a transaction
that operates on these objects while the locks are active.  This ensures that
the user who starts the transaction can be sure that no one else modifies the
same objects until he has finished his work.</p>

            
    <p>Doctrine&#039;s pessimistic offline locking capabilities can be used to control
concurrency during actions or procedures that take several HTTP request and
response cycles and/or a lot of time to complete.</p>

    </div>
            <div class="section" id="examples">
            <h3 class="section-header ">
    <a href="#examples">
        Examples
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The following code snippet demonstrates the use of Doctrine&#039;s pessimistic
offline locking capabilities.</p>

            
    <p>At the page where the lock is requested get a locking manager instance:</p>

                <div class="console">
        <pre><code class="console">// test.php
$lockingManager = new Doctrine_Locking_Manager_Pessimistic();
</code></pre>
    </div>

            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>Ensure that old locks which timed out are released before we
try to acquire our lock 300 seconds = 5 minutes timeout. This can be
done by using the releaseAgedLocks method:</p>
    <div class="console">
        <pre><code class="console">// test.php
$user = Doctrine_Core::getTable(&#039;User&#039;)-&gt;find(1);

try {
    $lockingManager-&gt;releaseAgedLocks(300);
    $gotLock = $lockingManager-&gt;getLock($user, &#039;jwage&#039;);

    if ($gotLock){
        echo &quot;Got lock!&quot;;
    } else {
        echo &quot;Sorry, someone else is currently working on this record&quot;;
    }
} catch(Doctrine_Locking_Exception $dle) {
    echo $dle-&gt;getMessage(); // handle the error
}</code></pre>
    </div>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>At the page where the transaction finishes get a locking manager
instance:</p>

                <div class="console">
        <pre><code class="console">// test.php
$user = Doctrine_Core::getTable(&#039;User&#039;)-&gt;find(1);

$lockingManager = new Doctrine_Locking_Manager_Pessimistic();

try {
    if ($lockingManager-&gt;releaseLock($user, &#039;jwage&#039;)) {
        echo &quot;Lock released&quot;;
    } else {
        echo &quot;Record was not locked. No locks released.&quot;;
    }
} catch(Doctrine_Locking_Exception $dle) {
    echo $dle-&gt;getMessage(); // handle the error
}
</code></pre>
    </div>

    </div>
            <div class="section" id="technical-details">
            <h3 class="section-header ">
    <a href="#technical-details">
        Technical Details
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>The pessimistic offline locking manager stores the locks in the database
(therefore &#039;offline&#039;). The required locking table is automatically
created when you try to instantiate an instance of the manager and the
<code>ATTR_CREATE_TABLES</code> is set to TRUE. This behavior may change in the
future to provide a centralized and consistent table creation procedure
for installation purposes.</p>

    </div>
    </div>
            <div class="section" id="views">
            <a id="component-overview-views"></a>
            <h2 class="section-header ">
    <a href="#views">
        Views
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Database views can greatly increase the performance of complex queries.  You
can think of them as cached queries. <code>Doctrine_View</code> provides integration
between database views and DQL queries.</p>

            <div class="section" id="using-views">
            <h3 class="section-header ">
    <a href="#using-views">
        Using Views
        <i class="fas fa-link"></i>
    </a>
</h3>
            
    <p>Using views on your database using Doctrine is easy. We provide a nice
<code>Doctrine_View</code> class which provides functionality for creating,
dropping and executing views.</p>

            
    <p>The <code>Doctrine_View</code> class integrates with the Doctrine_Query
class by saving the SQL that would be executed by Doctrine_Query.</p>

            
    <p>First lets create a new Doctrine_Query instance to work with:</p>

                <div class="console">
        <pre><code class="console">$q = Doctrine_Query::create()
        -&gt;from(&#039;User u&#039;)
        -&gt;leftJoin(&#039;u.Phonenumber p&#039;)
        -&gt;limit(20);
</code></pre>
    </div>

            
    <p>Now lets create the <code>Doctrine_View</code> instance and pass it the
Doctrine_Query<code> instance as well as a </code><code>name</code> for identifying that
database view:</p>

                <div class="console">
        <pre><code class="console">$view = new Doctrine_View($q, &#039;RetrieveUsersAndPhonenumbers&#039;);
</code></pre>
    </div>

            
    <p>Now we can easily create the view by using the
Doctrine_View::create method:</p>

                <div class="console">
        <pre><code class="console">try {
    $view-&gt;create();
} catch (Exception $e) {
}
</code></pre>
    </div>

            
    <p>Alternatively if you want to drop the database view you use the
Doctrine_View::drop method:</p>

                <div class="console">
        <pre><code class="console">try {
    $view-&gt;drop();
} catch (Exception $e) {
}
</code></pre>
    </div>

            
    <p>Using views are extremely easy. Just use the
Doctrine_View::execute for executing the view and returning the
results just as a normal Doctrine_Query object would:</p>

                <div class="console">
        <pre><code class="console">$users = $view-&gt;execute();

foreach ($users as $user) {
    print_r($us-&gt;toArray());
}
</code></pre>
    </div>

    </div>
    </div>
            <div class="section" id="conclusion">
            <h2 class="section-header ">
    <a href="#conclusion">
        Conclusion
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>We now have been exposed to a very large percentage of the core
functionality provided by Doctrine. The next chapters of this book are
documentation that cover some of the optional functionality that can
help make your life easier on a day to day basis.</p>

            
    <p>Lets move on to the <a href="native-sql.html">next chapter</a> where we can learn
about how to use native SQL to hydrate our data in to arrays and objects
instead of the Doctrine Query Language.</p>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine1 master'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
