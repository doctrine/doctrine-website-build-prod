<!DOCTYPE html>
<html>
    <head>
        <title>Introduction - Doctrine1 ORM (Doctrine1)</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
">

        <meta name="keywords" content="php,doctrine1,orm">

                    <meta name="robots" content="index, follow">
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine1/en/latest/cookbook/my-first-project.html" />
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://www.doctrine-project.org/css/style.css?49bbdd" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://www.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine1/en/latest/cookbook/my-first-project.html" />
        <meta property="og:title" content="Introduction - Doctrine1 ORM (Doctrine1)" />
        <meta property="og:description" content="PHP 5 Doctrine1 Object Relational Mapper (ORM)
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Introduction",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://www.doctrine-project.org/"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/projects.html" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu projects-dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://www.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <div class="container-wrapper container-fluid">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="code-igniter-and-doctrine-html-codeigniter-and-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#codeigniter-and-doctrine">CodeIgniter and Doctrine</a></li><ul><li id="code-igniter-and-doctrine-html-download-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#download-doctrine">Download Doctrine</a></li><li id="code-igniter-and-doctrine-html-setup-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#setup-doctrine">Setup Doctrine</a></li><li id="code-igniter-and-doctrine-html-setup-command-line-interface" class="toc-item"><a href="code-igniter-and-doctrine.html#setup-command-line-interface">Setup Command Line Interface</a></li><li id="code-igniter-and-doctrine-html-start-using-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#start-using-doctrine">Start Using Doctrine</a></li></ul><li id="creating-a-unit-of-work-using-doctrine-html-writing-a-unit-of-work-in-php-doctrine" class="toc-item"><a href="creating-a-unit-of-work-using-doctrine.html#writing-a-unit-of-work-in-php-doctrine">Writing a Unit of Work in PHP Doctrine</a></li><li id="index-html-cookbook" class="toc-item"><a href="index.html#cookbook">Cookbook</a></li><li id="master-and-slave-connections-html-master-and-slave-connections" class="toc-item"><a href="master-and-slave-connections.html#master-and-slave-connections">Master and Slave Connections</a></li><li id="my-first-project-html-introduction" class="toc-item"><a href="my-first-project.html#introduction">Introduction</a></li><li id="my-first-project-html-download" class="toc-item"><a href="my-first-project.html#download">Download</a></li><li id="my-first-project-html-running-the-cli" class="toc-item"><a href="my-first-project.html#running-the-cli">Running the CLI</a></li><li id="my-first-project-html-defining-schema" class="toc-item"><a href="my-first-project.html#defining-schema">Defining Schema</a></li><li id="my-first-project-html-test-data-fixtures" class="toc-item"><a href="my-first-project.html#test-data-fixtures">Test Data Fixtures</a></li><li id="my-first-project-html-building-everything-now-that-you-have-written-your-schema-files-and" class="toc-item"><a href="my-first-project.html#building-everything-now-that-you-have-written-your-schema-files-and">Building Everything Now that you have written your schema files and</a></li><li id="my-first-project-html-running-tests" class="toc-item"><a href="my-first-project.html#running-tests">Running Tests</a></li><li id="plug-and-play-schema-information-with-templates-html-plug-and-play-schema-information-with-templates" class="toc-item"><a href="plug-and-play-schema-information-with-templates.html#plug-and-play-schema-information-with-templates">Plug and Play Schema Information with Templates</a></li><li id="record-based-retrieval-security-template-html-record-based-retrieval-security-template" class="toc-item"><a href="record-based-retrieval-security-template.html#record-based-retrieval-security-template">Record-based Retrieval Security Template</a></li><ul><li id="record-based-retrieval-security-template-html-introduction" class="toc-item"><a href="record-based-retrieval-security-template.html#introduction">Introduction</a></li><li id="record-based-retrieval-security-template-html-template" class="toc-item"><a href="record-based-retrieval-security-template.html#template">Template</a></li><li id="record-based-retrieval-security-template-html-yaml-schema-syntax" class="toc-item"><a href="record-based-retrieval-security-template.html#yaml-schema-syntax">YAML schema syntax</a></li><li id="record-based-retrieval-security-template-html-using-the-template" class="toc-item"><a href="record-based-retrieval-security-template.html#using-the-template">Using the template</a></li><li id="record-based-retrieval-security-template-html-user-setup" class="toc-item"><a href="record-based-retrieval-security-template.html#user-setup">User setup</a></li><li id="record-based-retrieval-security-template-html-querying" class="toc-item"><a href="record-based-retrieval-security-template.html#querying">Querying</a></li><li id="record-based-retrieval-security-template-html-restrictions" class="toc-item"><a href="record-based-retrieval-security-template.html#restrictions">Restrictions</a></li></ul><li id="taking-advantage-of-column-aggregation-inheritance-html-taking-advantage-of-column-aggregation-inheritance" class="toc-item"><a href="taking-advantage-of-column-aggregation-inheritance.html#taking-advantage-of-column-aggregation-inheritance">Taking Advantage of Column Aggregation Inheritance</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Documentation</li>
                            </ol>
                        </nav>
                    
                                                        </div>

                                    <div class="alert caution bg-light-yellow text-dark border"><i class="fas fa-exclamation-circle text-warning mr-2"></i> This project is no longer maintained and has been archived.</div>
                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            <ul class="list-inline">
                                                                            <li class="list-inline-item mr-0">
                                            <a href="/projects/doctrine1/en/latest/cookbook/my-first-project.html" class="project-version-switcher badge badge-warning">master</a>
                                        </li>
                                    
                                    
                                    <li class="list-inline-item ml-2"><a href="https://github.com/doctrine/doctrine1-documentation/edit/master/source/en/cookbook/my-first-project.rst" class="badge badge-primary">Edit</a></li>

                                </ul>
                            
                            
<p></p>
<hr />
<a class="section-anchor" id="introduction" name="introduction"></a><h1 class="section-header"><a href="#introduction">Introduction<i class="fas fa-link"></i></a></h1>
<p>This is a tutorial &amp; how-to on creating your first project using the
fully featured PHP Doctrine ORM. This tutorial uses the the ready to go
Doctrine sandbox package. It requires a web server, PHP and PDO +
Sqlite.</p>
<hr />
<a class="section-anchor" id="download" name="download"></a><h1 class="section-header"><a href="#download">Download<i class="fas fa-link"></i></a></h1>
<p>To get started, first download the latest Doctrine sandbox package:
http://www.doctrine-project.org/download. Second, extract the downloaded
file and you should have a directory named Doctrine-x.x.x-Sandbox.
Inside of that directory is a simple example implementation of a
Doctrine based web application.</p>
<p><code>````````````</code>
Package Contents
<code>````````````</code>
The files/directory structure should look like the
following $ cd Doctrine-0.10.1-Sandbox $ ls config.php doctrine
index.php migrations schema data doctrine.php lib models</p>
<p>The sandbox does not require any configuration, it comes ready to use
with a sqlite database. Below is a description of each of the
files/directories and what its purpose is.</p>
<ul><li class="dash"> doctrine - Shell script for executing the command line interface. Run
   with ./doctrine to see a list of command or ./doctrine help to see a
   detailed list of the commands</li>
<li class="dash"> doctrine.php - Php script which implements the Doctrine command line
   interface which is included in the above doctrine shell script</li>
<li class="dash"> index.php - Front web controller for your web application</li>
<li class="dash"> migrations - Folder for your migration classes</li>
<li class="dash"> schema - Folder for your schema files</li>
<li class="dash"> models - Folder for your model files</li>
<li class="dash"> lib - Folder for the Doctrine core library files</li>
</ul>

<hr />
<a class="section-anchor" id="running-the-cli" name="running-the-cli"></a><h1 class="section-header"><a href="#running-the-cli">Running the CLI<i class="fas fa-link"></i></a></h1>
<p>If you execute the doctrine shell script from the command line it will
output the following:</p>
<blockquote><p>$ ./doctrine Doctrine Command Line Interface</p>
</blockquote>
<p>./doctrine build-all ./doctrine build-all-load ./doctrine
build-all-reload ./doctrine compile ./doctrine create-db ./doctrine
create-tables ./doctrine dql ./doctrine drop-db ./doctrine dump-data
./doctrine generate-migration ./doctrine generate-migrations-db
./doctrine generate-migrations-models ./doctrine generate-models-db
./doctrine generate-models-yaml ./doctrine generate-sql ./doctrine
generate-yaml-db ./doctrine generate-yaml-models ./doctrine load-data
./doctrine migrate ./doctrine rebuild-db</p>
<hr />
<a class="section-anchor" id="defining-schema" name="defining-schema"></a><h1 class="section-header"><a href="#defining-schema">Defining Schema<i class="fas fa-link"></i></a></h1>
<p>Below is a sample yaml schema file to get started. You can place the
yaml file in schemas/schema.yml. The command line interface looks for
all \*.yml files in the schemas folder.</p>
<p>User: columns: id: primary: true autoincrement: true type: integer(4)
username: string(255) password: string(255) relations: Groups: class:
Group refClass: UserGroup foreignAlias: Users</p>
<p>Group: tableName: groups columns: id: primary: true autoincrement: true
type: integer(4) name: string(255)</p>
<p>UserGroup: columns: user\_id: integer(4) group\_id: integer(4)
relations: User: onDelete: CASCADE Group: onDelete: CASCADE</p>
<hr />
<a class="section-anchor" id="test-data-fixtures" name="test-data-fixtures"></a><h1 class="section-header"><a href="#test-data-fixtures">Test Data Fixtures<i class="fas fa-link"></i></a></h1>
<p>Below is a sample yaml data fixtures file. You can place this file in
data/fixtures/data.yml. The command line interface looks for all \*.yml
files in the data/fixtures folder.</p>
<p>User: zyne: username: zYne- password: changeme Groups: [founder, lead,
documentation] jwage: username: jwage password: changeme Groups: [lead,
documentation]</p>
<p>Group: founder: name: Founder lead: name: Lead documentation: name:
Documentation</p>
<hr />
<a class="section-anchor" id="building-everything-now-that-you-have-written-your-schema-files-and" name="building-everything-now-that-you-have-written-your-schema-files-and"></a><h1 class="section-header"><a href="#building-everything-now-that-you-have-written-your-schema-files-and">Building Everything Now that you have written your schema files and<i class="fas fa-link"></i></a></h1>
<p>data fixtures, you can now build everything and begin working with your
models . Run the command below and your models will be generated in the
models folder.</p>
<blockquote><p>$ ./doctrine build-all-reload build-all-reload - Are you sure you wish</p>
</blockquote>
<p>to drop your databases? (y/n) y build-all-reload - Successfully dropped
database for connection &quot;sandbox&quot; at path
&quot;/Users/jwage/Sites/doctrine/branches/0.10/tools/sandbox/sandbox.db&quot;
build-all-reload - Generated models successfully from YAML schema
build-all-reload - Successfully created database for connection
&quot;sandbox&quot; at path
&quot;/Users/jwage/Sites/doctrine/branches/0.10/tools/sandbox/sandbox.db&quot;
build-all-reload - Created tables successfully build-all-reload - Data
was successfully loaded</p>
<p>Take a peak in the models folder and you will see that the model classes
were generated for you. Now you can begin coding in your index.php to
play with Doctrine itself. Inside index.php place some code like the
following for a simple test.</p>
<hr />
<a class="section-anchor" id="running-tests" name="running-tests"></a><h1 class="section-header"><a href="#running-tests">Running Tests<i class="fas fa-link"></i></a></h1>
<blockquote><p>$query = new Doctrine\_Query(); $query-&gt;from('User u, u.Groups g');</p>
</blockquote>
<p>$users = $query-&gt;execute();</p>
<p>echo '</p>
<pre>

<p>'; print\_r($users-&gt;toArray(true));</p>
<p>The print\_r() should output the following data. You will notice that
this is the data that we populated by placing the yaml file in the
data/fixtures files. You can add more data to the fixtures and rerun the
build-all-reload command to reinitialize the database.</p>
<blockquote><p>Array ( [0] =&gt; Array ( [id] =&gt; 1 [username] =&gt; zYne- [password] =&gt;</p>
</blockquote>
<p>changeme [Groups] =&gt; Array ( [0] =&gt; Array ( [id] =&gt; 1 [name] =&gt; Founder
)</p>

<pre><code class="">[1] =&gt; Array
    (
        [id] =&gt; 2
        [name] =&gt; Lead
    )

[2] =&gt; Array
    (
        [id] =&gt; 3
        [name] =&gt; Documentation
    )







2
e] =&gt; jwage
d] =&gt; changeme
 =&gt; Array

[0] =&gt; Array
    (
        [id] =&gt; 2
        [name] =&gt; Lead
    )

[1] =&gt; Array
    (
        [id] =&gt; 3
        [name] =&gt; Documentation
    )




</code></pre>
<p>)</p>
<p>You can also issue DQL queries directly to your database by using the
dql command line function. It is used like the following.</p>
<blockquote><p>jwage:sandbox jwage$ ./doctrine dql &quot;FROM User u, u.Groups g&quot; dql -</p>
</blockquote>
<p>executing: &quot;FROM User u, u.Groups g&quot; () dql - - dql - id: 1 dql -
username: zYne- dql - password: changeme dql - Groups: dql - - dql - id:
1 dql - name: Founder dql - - dql - id: 2 dql - name: Lead dql - - dql -
id: 3 dql - name: Documentation dql - - dql - id: 2 dql - username:
jwage dql - password: changeme dql - Groups: dql - - dql - id: 2 dql -
name: Lead dql - - dql - id: 3 dql - name: Documentation</p>
<p><code>`````</code>
User CRUD
<code>`````</code></p>
<p>Now we can demonstrate how to implement Doctrine in to a
super simple module for managing users and passwords. Place the
following code in your index.php and pull it up in your browser. You
will see the simple application.</p>
<blockquote><p>require\_once('config.php');</p>
</blockquote>
<p>Doctrine\_Core::loadModels('models');</p>
<p>`module = isset(`\ <em>REQUEST['module']) ?$</em>REQUEST['module']:'users'; `action = isset(`\ <em>REQUEST['action'])? $</em>REQUEST['action']:'list';</p>
<p>if ($module == 'users') { `userId = isset(`\ <em>REQUEST['id']) &amp;&amp;$</em>REQUEST['id'] &gt; 0 ? $\_REQUEST['id']:null; $userTable =
Doctrine\_Core::getTable('User');</p>

<pre><code class="">if ($userId === null) {
    $user = new User();
} else {
    $user = $userTable-&gt;find($userId);
}

switch ($action) {
    case 'edit':
    case 'add':
        echo '&lt;form action=&quot;index.php?module=users&amp;action=save&quot; method=&quot;POST&quot;&gt;
              &lt;fieldset&gt;
                &lt;legend&gt;User&lt;/legend&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;' . $user-&gt;id . '&quot; /&gt;
                &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;user[username]&quot; value=&quot;' . $user-&gt;username . '&quot; /&gt;
                &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;user[password]&quot; value=&quot;' . $user-&gt;password . '&quot; /&gt;
                &lt;input type=&quot;submit&quot; name=&quot;save&quot; value=&quot;Save&quot; /&gt;
              &lt;/fieldset&gt;
              &lt;/form&gt;';
        break;
    case 'save':
        $user-&gt;merge($_REQUEST['user']);
        $user-&gt;save();

        header('location: index.php?module=users&amp;action=edit&amp;id=' . $user-&gt;id);
        break;
    case 'delete':
        $user-&gt;delete();

        header('location: index.php?module=users&amp;action=list');
        break;
    default:
        $query = new Doctrine_Query();
        $query-&gt;from('User u')
              -&gt;orderby('u.username');

        $users = $query-&gt;execute();

        echo '&lt;ul&gt;';
        foreach ($users as $user) {
            echo '&lt;li&gt;&lt;a href=&quot;index.php?module=users&amp;action=edit&amp;id=' . $user-&gt;id . '&quot;&gt;' . $user-&gt;username . '&lt;/a&gt; &amp;nbsp; &lt;a href=&quot;index.php?module=users&amp;action=delete&amp;id=' . $user-&gt;id . '&quot;&gt;[X]&lt;/a&gt;&lt;/li&gt;';
        }
        echo '&lt;/ul&gt;';
}

echo '&lt;ul&gt;
        &lt;li&gt;&lt;a href=&quot;index.php?module=users&amp;action=add&quot;&gt;Add&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;index.php?module=users&amp;action=list&quot;&gt;List&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;';
</code></pre>
<p>} else { throw new Exception('Invalid module'); }</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

                            
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://www.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://www.doctrine-project.org/js/main.js?2a2af0"></script>
        <script src="https://www.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);
        </script>

            <script src="https://www.doctrine-project.org/js/sidebar.js?482a20"></script>

    <script type="text/javascript">
        new Sidebar();
    </script>

                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
