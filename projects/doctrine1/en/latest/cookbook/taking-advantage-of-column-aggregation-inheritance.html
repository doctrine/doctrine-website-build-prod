<!DOCTYPE html>
<html>
    <head>
        <title>Taking Advantage of Column Aggregation Inheritance - Doctrine1 ORM (Doctrine1) - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine1 ORM Documentation: Taking Advantage of Column Aggregation Inheritance ">

        <meta name="keywords" content="php,doctrine1,orm,database,documentation,taking,advantage,of,column,aggregation,inheritance">

                    <meta name="robots" content="index, follow">
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine1/en/latest/cookbook/taking-advantage-of-column-aggregation-inheritance.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"
            integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/css/style.css?822c47"
            integrity="sha384-XyM6vFnQKXdOL6LF3O6GWlS90zYVHQGnsbJTtdzyEN1deysV3eK6YrAF6AHemiSi"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"
            integrity="sha384-3pqpjew6zqJsw9mdIpd6FVJvuFuacqOpSXwAifQ9iHE4keUyghetuuJDGFoTNhfn"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"
            integrity="sha384-VzUGdSDk+HLoSg+ptudZxGZyaFVN7q7Eqh7QaUU19cWL2fK0kyz1belH38z7MbcZ"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/css/railscasts.css?62eb49"
            integrity="sha384-K7nnw0wrUNTkBLTS8aN3AOx/e095lEJ1g60EJX7ash3cfsHTpQV6kWKoCPxPc9AJ"
            crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine1/en/latest/cookbook/taking-advantage-of-column-aggregation-inheritance.html" />
        <meta property="og:title" content="Taking Advantage of Column Aggregation Inheritance - Doctrine1 ORM (Doctrine1) - Doctrine" />
        <meta property="og:description" content="Doctrine Doctrine1 ORM Documentation: Taking Advantage of Column Aggregation Inheritance " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine1 ORM",
            "description": "Taking Advantage of Column Aggregation Inheritance",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?6c0dab" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank">GitHub</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/community/index.html">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                       <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/team/maintainers.html" id="navbarTeamDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Team</a>

                            <div class="dropdown-menu" aria-labelledby="navbarTeamDropdown">
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                            </div>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine1-documentation/edit/master/source/en/cookbook/taking-advantage-of-column-aggregation-inheritance.rst" class="btn btn-light" target="_blank">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        
<div class="toc"><ul><li id="code-igniter-and-doctrine-html-codeigniter-and-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#codeigniter-and-doctrine">CodeIgniter and Doctrine</a></li><ul><li id="code-igniter-and-doctrine-html-download-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#download-doctrine">Download Doctrine</a></li><li id="code-igniter-and-doctrine-html-setup-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#setup-doctrine">Setup Doctrine</a></li><li id="code-igniter-and-doctrine-html-setup-command-line-interface" class="toc-item"><a href="code-igniter-and-doctrine.html#setup-command-line-interface">Setup Command Line Interface</a></li><li id="code-igniter-and-doctrine-html-start-using-doctrine" class="toc-item"><a href="code-igniter-and-doctrine.html#start-using-doctrine">Start Using Doctrine</a></li></ul><li id="creating-a-unit-of-work-using-doctrine-html-writing-a-unit-of-work-in-php-doctrine" class="toc-item"><a href="creating-a-unit-of-work-using-doctrine.html#writing-a-unit-of-work-in-php-doctrine">Writing a Unit of Work in PHP Doctrine</a></li><li id="index-html-cookbook" class="toc-item"><a href="index.html#cookbook">Cookbook</a></li><li id="master-and-slave-connections-html-master-and-slave-connections" class="toc-item"><a href="master-and-slave-connections.html#master-and-slave-connections">Master and Slave Connections</a></li><li id="my-first-project-html-introduction" class="toc-item"><a href="my-first-project.html#introduction">Introduction</a></li><li id="my-first-project-html-download" class="toc-item"><a href="my-first-project.html#download">Download</a></li><li id="my-first-project-html-running-the-cli" class="toc-item"><a href="my-first-project.html#running-the-cli">Running the CLI</a></li><li id="my-first-project-html-defining-schema" class="toc-item"><a href="my-first-project.html#defining-schema">Defining Schema</a></li><li id="my-first-project-html-test-data-fixtures" class="toc-item"><a href="my-first-project.html#test-data-fixtures">Test Data Fixtures</a></li><li id="my-first-project-html-building-everything-now-that-you-have-written-your-schema-files-and" class="toc-item"><a href="my-first-project.html#building-everything-now-that-you-have-written-your-schema-files-and">Building Everything Now that you have written your schema files and</a></li><li id="my-first-project-html-running-tests" class="toc-item"><a href="my-first-project.html#running-tests">Running Tests</a></li><li id="plug-and-play-schema-information-with-templates-html-plug-and-play-schema-information-with-templates" class="toc-item"><a href="plug-and-play-schema-information-with-templates.html#plug-and-play-schema-information-with-templates">Plug and Play Schema Information with Templates</a></li><li id="record-based-retrieval-security-template-html-record-based-retrieval-security-template" class="toc-item"><a href="record-based-retrieval-security-template.html#record-based-retrieval-security-template">Record-based Retrieval Security Template</a></li><ul><li id="record-based-retrieval-security-template-html-introduction" class="toc-item"><a href="record-based-retrieval-security-template.html#introduction">Introduction</a></li><li id="record-based-retrieval-security-template-html-template" class="toc-item"><a href="record-based-retrieval-security-template.html#template">Template</a></li><li id="record-based-retrieval-security-template-html-yaml-schema-syntax" class="toc-item"><a href="record-based-retrieval-security-template.html#yaml-schema-syntax">YAML schema syntax</a></li><li id="record-based-retrieval-security-template-html-using-the-template" class="toc-item"><a href="record-based-retrieval-security-template.html#using-the-template">Using the template</a></li><li id="record-based-retrieval-security-template-html-user-setup" class="toc-item"><a href="record-based-retrieval-security-template.html#user-setup">User setup</a></li><li id="record-based-retrieval-security-template-html-querying" class="toc-item"><a href="record-based-retrieval-security-template.html#querying">Querying</a></li><li id="record-based-retrieval-security-template-html-restrictions" class="toc-item"><a href="record-based-retrieval-security-template.html#restrictions">Restrictions</a></li></ul><li id="taking-advantage-of-column-aggregation-inheritance-html-taking-advantage-of-column-aggregation-inheritance" class="toc-item"><a href="taking-advantage-of-column-aggregation-inheritance.html#taking-advantage-of-column-aggregation-inheritance">Taking Advantage of Column Aggregation Inheritance</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1.html">Doctrine1</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine1/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Taking Advantage of Column Aggregation Inheritance</li>
                            </ol>
                        </nav>
                                    </div>

                                                    
                                    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>This project is no longer maintained and has been archived.</p></td>
        </tr>
    </table>
</div>
                
                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine1/en/latest/cookbook/taking-advantage-of-column-aggregation-inheritance.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine1/en/latest/cookbook/taking-advantage-of-column-aggregation-inheritance.html">
                                                    master

                                                    
                                                                                                    </a>
                                                                                    
                                                                            </div>
                                </div>
                            
                            
<p></p>
<hr />
<a class="section-anchor" id="taking-advantage-of-column-aggregation-inheritance" name="taking-advantage-of-column-aggregation-inheritance"></a><h1 class="section-header"><a href="#taking-advantage-of-column-aggregation-inheritance">Taking Advantage of Column Aggregation Inheritance<i class="fas fa-link"></i></a></h1>
<p>First, let me give a brief explanation of what column aggregation
inheritance is and how it works. With column aggregation inheritance all
classes share the same table, and all columns must exist in the parent.
Doctrine is able to know which class each row in the database belongs to
by automatically setting a &quot;type&quot; column so that Doctrine can cast the
correct class when hydrating data from the database. Even if you query
the top level column aggregation class, the collection will return
instances of the class that each row belongs to.</p>
<p>Now that you have a basic understand of column aggregation inheritance
lets put it to use. In this example we will setup some models which will
allow us to use one address table for storing all of our addresses
across the entire application. Any record will be able to have multiple
addresses, and all the information will be stored in one table. First
lets define our Address</p>
<blockquote><p>class Address extends Doctrine\_Record { public function</p>
</blockquote>
<p>setTableDefinition() { $this-&gt;hasColumn('address1', 'string', 255);
$this-&gt;hasColumn('address2', 'string', 255);
$this-&gt;hasColumn('address3', 'string', 255); $this-&gt;hasColumn('city',
'string', 255); $this-&gt;hasColumn('state', 'string', 2);
$this-&gt;hasColumn('zipcode', 'string', 15); $this-&gt;hasColumn('type',
'string', 255); $this-&gt;hasColumn('record\_id', 'integer');</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>this->option('export', 'tables');

<span class="noselect">$ </span>this->setSubClasses(array('UserAddress'    => array('type' => 'UserAddress'),
                           'CompanyAddress' => array('type' => 'CompanyAddress')));</code></pre></div>
<p>}</p>
<p>Note the option set above to only export tables because we do not want
to export any foreign key constraints since record\_id is going to
relate to many different records.</p>
<p>We are going to setup a User so it can have multiple addresses, so we
will need to setup a UserAddress child class that User can relate to.</p>
<blockquote><p>class UserAddress extends Address { public function setUp() {</p>
</blockquote>
<p>$this-&gt;hasOne('User', array('local' =&gt; 'record\_id', 'foreign' =&gt;
'id')); } }</p>
<p>Now lets define our User and link it to the UserAddress model so it can
have multiple addresses. class User extends Doctrine\_Record { public
function setTableDefinition() { $this-&gt;hasColumn('username', 'string',
255); $this-&gt;hasColumn('password', 'string', 255); }</p>
<div class="console"><pre><code class="console">public function setUp()
{
    $this->hasMany('UserAddress as Addresses', array('local'    => 'id',
                                                     'foreign'  => 'record_id'));
}</code></pre></div>
<p>}</p>
<p>Now say we have a Company record which also needs ot have many
addresses. First we need to setup the CompanyAddress child class</p>
<blockquote><p>class CompanyAddress extends Address { public function setUp() {</p>
</blockquote>
<p>$this-&gt;hasOne('Company', array('local' =&gt; 'record\_id', 'foreign' =&gt;
'id')); } }</p>
<p>Now lets define our Company and link it to the CompanyAddress model so
it can have multiple addresses. class Company extends Doctrine\_Record {
public function setTableDefinition() { $this-&gt;hasColumn('name',
'string', 255); }</p>
<div class="console"><pre><code class="console">public function setUp()
{
    $this->hasMany('CompanyAddress as Addresses', array('local'    => 'id',
                                                        'foreign'  => 'record_id'));
}</code></pre></div>
<p>}</p>
<p>Now both Users and Companies can have multiple addresses and the data is
all stored in one address table.</p>
<p>Now lets create the tables and insert some records</p>
<blockquote><p>Doctrine\_Core::createTablesFromArray(array('User', 'Company',</p>
</blockquote>
<p>'Address'));</p>
<p>$user = new User(); $user-&gt;username = 'jwage'; $user-&gt;password =
'changeme'; $user-&gt;Addresses[0]-&gt;address1 = '123 Road Dr.';
$user-&gt;Addresses[0]-&gt;city = 'Nashville'; $user-&gt;Addresses[0]-&gt;state =
'TN'; $user-&gt;save();</p>
<p>$company = new Company(); $company-&gt;name = 'centre{source}';
$company-&gt;Addresses[0]-&gt;address1 = '123 Road Dr.';
$company-&gt;Addresses[0]-&gt;city = 'Nashville';
$company-&gt;Addresses[0]-&gt;state = 'TN'; $company-&gt;save();</p>
<p>Query for the user and its addresses</p>
<blockquote><p>$users = Doctrine\_Query::create() -&gt;from('User u')</p>
</blockquote>
<p>-&gt;leftJoin('u.Addresses a') -&gt;execute();</p>
<p>echo $users[0]-&gt;username; // jwage echo
`users[0]-&gt;Addresses[0]-&gt;address1 = '123 Road Dr.'; echo get_class(`\ users[0]-&gt;Addresses[0]);// UserAddress</p>
<p>Query for the company and its addresses</p>
<blockquote><p>$companies = Doctrine\_Query::create() -&gt;from('Company c')</p>
</blockquote>
<p>-&gt;leftJoin('c.Addresses a') -&gt;execute();</p>
<p>echo $companies[0]-&gt;name; // centre{source} echo
`companies[0]-&gt;Addresses[0]-&gt;address1 = '123 Road Dr.'; echo get_class(`\ companies[0]-&gt;Addresses[0]);// CompanyAddress</p>
<p>Now lets query the Addresses directly and you will notice each child
record returned is hydrated as the appropriate child class that created
the record initially.</p>
<p>`addresses = Doctrine_Query::create() -&gt;from('Address a') -&gt;execute(); echo get_class(`\ addresses[0]);// UserAddress echo get\_class($addresses[1]); // CompanyAddress</p>
<p></p>
                                            </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT"
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous">
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"
            integrity="sha384-EtEQyqoKtrBSat8+V0eTyycfmdkEHHzKesnWrc2VPnKAcD8PJw8HKAWKsK/QnGT+"
            crossorigin="anonymous">
        </script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://cdn.ravenjs.com/3.24.2/raven.min.js"
            integrity="sha384-HwE7dFvrH8iD9R5VYUqNwjIhxDycip+e4DjP5nEhXrJtACG8AdNXjvP+AfJWxhJh"
            crossorigin="anonymous">
        </script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script
            src="https://www.doctrine-project.org/js/main.js?4138a7"
            integrity="sha384-4PtbMmuLWIQQORdH5aYanVqX4PRToNwwYq7k6PdX/mrXBJ/PFQOkEcgxBw6MW1Gw"
            crossorigin="anonymous">
        </script>

        <script
            src="https://www.doctrine-project.org/js/search.js?493399"
            integrity="sha384-vH1McEYqOv8hsr8UjcB2ZrQs9UHtvoyJcCGg/a6+3I7aiwLSXSz/swbGBPXIZMFL"
            crossorigin="anonymous">
        </script>

        
                            
        
        <script type="text/javascript">
            var projectSlug = 'doctrine1';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine1 master'
            };

            new Main();

            new Search(projectSlug, versionSlug, searchBoxSettings);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script
            type="text/javascript"
            src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
            async>
        </script>

            <script
        src="https://www.doctrine-project.org/js/sidebar.js?70a0ba"
        integrity="sha384-WssgVD8YsN07ueQpdg7Bu0T12VTnGRVzHXE5FbCSXI/RMTZvOHvOsn0BHzkQfGLw"
        crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        new Sidebar();
    </script>

                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
