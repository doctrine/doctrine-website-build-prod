<!DOCTYPE html>
<html>
    <head>
        <title>Annotations Reference - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

                    <meta name="robots" content="noindex, follow">
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://new.doctrine-project.org/css/style.css?9" rel="stylesheet" type="text/css" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://new.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://new.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://new.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://new.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://new.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://new.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://new.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://new.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://new.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://new.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://new.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://new.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://new.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://new.doctrine-project.org/images/mstile-310x310.png" />

        <link rel="stylesheet" href="https://new.doctrine-project.org/components/highlightjs/styles/railscasts.css?9" />
        <link rel="alternate" type="application/atom+xml" href="https://new.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>
    </head>
    <body>

        <header>
            <nav class="navbar navbar-expand-md navbar-dark border-bottom">
                <a class="navbar-brand text-hide" href="https://new.doctrine-project.org/"><img src="https://new.doctrine-project.org/images/doctrine-logo.svg" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://new.doctrine-project.org/projects/" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orm/">ORM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/dbal/">DBAL</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/phpcr-odm/">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/couchdb-odm/">CouchDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/migrations/">Migrations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/common/">Common</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/mongodb/">MongoDB</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/orientdb-odm/">OrientDB ODM</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/annotations/">Annotations</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/collections/">Collections</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/inflector/">Inflector</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/cache/">Cache</a>
                                                                    <a class="dropdown-item" href="https://new.doctrine-project.org/projects/lexer/">Lexer</a>
                                                            </div>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/contribute/">Contribute</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://new.doctrine-project.org/search/">Search</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://github.com/doctrine/" target="_blank">Development</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Begin page content -->
        <main role="main" class="container">
                                                                
                                
                                                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/">Home</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/">Projects</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/mongodb-odm/">MongoDB ODM</a></li>
                            <li class="breadcrumb-item"><a href="https://new.doctrine-project.org/projects/doctrine-mongodb-odm/en/1.1/">Documentation</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Annotations Reference</li>
                        </ol>
                    </nav>
                
                                    <ul class="list-inline float-right">
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html" class="badge badge-secondary">master</a>
                            </li>
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-mongodb-odm/en/1.2/reference/annotations-reference.html" class="badge badge-secondary">1.2</a>
                            </li>
                                                    <li class="list-inline-item mr-0">
                                <a href="/projects/doctrine-mongodb-odm/en/1.1/reference/annotations-reference.html" class="badge badge-primary">1.1</a>
                            </li>
                                            </ul>
                
                <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
</head>
<body>
<h1 class="section-header" id="title.1"><a href="#title.1">Annotations Reference<i class="fas fa-link"></i></a></h1>
<p>In this chapter a reference of every Doctrine 2 ODM Annotation is
given with short explanations on their context and usage.</p>
<h2 class="section-header" id="title.1.1"><a href="#title.1.1">@AlsoLoad<i class="fas fa-link"></i></a></h2>
<p>Specify one or more MongoDB fields to use for loading data if the original field
does not exist.</p>
<pre><code class="php">&lt;?php

/** @Field(type=&quot;string&quot;) @AlsoLoad(&quot;name&quot;) */
public $fullName;
</code></pre>
<p>The <code>$fullName</code> property will be loaded from <code>fullName</code> if it exists, but
fall back to <code>name</code> if it does not exist. If multiple fall back fields are
specified, ODM will consider them in order until the first is found.</p>
<p>Additionally, <a href="">@AlsoLoad</a> may annotate a method with one or more field names.
Before normal hydration, the field(s) will be considered in order and the method
will be invoked with the first value found as its single argument.</p>
<pre><code class="php">&lt;?php

/** @AlsoLoad({&quot;name&quot;, &quot;fullName&quot;}) */
public function populateFirstAndLastName($name)
{
    list($this-&gt;firstName, $this-&gt;lastName) = explode(' ', $name);
}
</code></pre>
<p>For additional information on using <a href="">@AlsoLoad</a>, see
<a href="migrating-schemas.html">Migrations</a>.</p>
<h2 class="section-header" id="title.1.2"><a href="#title.1.2">@ChangeTrackingPolicy<i class="fas fa-link"></i></a></h2>
<p>This annotation is used to change the change tracking policy for a document:</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @ChangeTrackingPolicy(&quot;DEFERRED_EXPLICIT&quot;)
 */
class Person
{
    // ...
}
</code></pre>
<p>For a list of available policies, read the section on <a href="change_tracking_policies.html">change tracking policies</a>.</p>
<h2 class="section-header" id="title.1.3"><a href="#title.1.3">@DefaultDiscriminatorValue<i class="fas fa-link"></i></a></h2>
<p>This annotation can be used when using <a href="">@DiscriminatorField</a>. It will be used
as a fallback value if a document has no discriminator field set. This must
correspond to a value from the configured discriminator map.</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @InheritanceType(&quot;SINGLE_COLLECTION&quot;)
 * @DiscriminatorField(&quot;type&quot;)
 * @DiscriminatorMap({&quot;person&quot; = &quot;Person&quot;, &quot;employee&quot; = &quot;Employee&quot;})
 * @DefaultDiscriminatorValue(&quot;person&quot;)
 */
class Person
{
    // ...
}
</code></pre>
<h2 class="section-header" id="title.1.4"><a href="#title.1.4">@DiscriminatorField<i class="fas fa-link"></i></a></h2>
<p>This annotation is required for the top-most class in a
<a href="single_collection_inheritance.html">single collection inheritance</a> hierarchy.
It takes a string as its only argument, which specifies the database field to
store a class name or key (if a discriminator map is used). ODM uses this field
during hydration to select the instantiation class.</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @InheritanceType(&quot;SINGLE_COLLECTION&quot;)
 * @DiscriminatorField(&quot;type&quot;)
 */
class SuperUser
{
    // ...
}
</code></pre>
<div class="alert note bg-light-yellow text-dark border"><i class="fas fa-sticky-note text-primary mr-2"></i><p>For backwards compatibility, the discriminator field may also be specified
via either the <code>name</code> or <code>fieldName</code> annotation attributes.</p>
</div>
<h2 class="section-header" id="title.1.5"><a href="#title.1.5">@DiscriminatorMap<i class="fas fa-link"></i></a></h2>
<p>This annotation is required for the top-most class in a
<a href="single_collection_inheritance.html">single collection inheritance</a> hierarchy.
It takes an array as its only argument, which maps keys to class names. The
class names may be fully qualified or relative to the current namespace. When
a document is persisted to the database, its class name key will be stored in
the discriminator field instead of the <abbr title="Fully-Qualified Class Name">FQCN</abbr>
.</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @InheritanceType(&quot;SINGLE_COLLECTION&quot;)
 * @DiscriminatorField(&quot;type&quot;)
 * @DiscriminatorMap({&quot;person&quot; = &quot;Person&quot;, &quot;employee&quot; = &quot;Employee&quot;})
 */
class Person
{
    // ...
}
</code></pre>
<h2 class="section-header" id="title.1.6"><a href="#title.1.6">@Document<i class="fas fa-link"></i></a></h2>
<p>Required annotation to mark a PHP class as a document, whose peristence will be
managed by ODM.</p>
<p>Optional attributes:</p>
<p>-
   db - By default, the document manager will use the MongoDB database defined
   in the configuration, but this option may be used to override the database
   for a particular document class.
-
   collection - By default, the collection name is derived from the document's
   class name, but this option may be used to override that behavior.
-
   repositoryClass - Specifies a custom repository class to use.
-
   indexes - Specifies an array of indexes for this document.
-
   readOnly - Prevents document from being updated: it can only be inserted,
   upserted or removed.
-
   writeConcern - Specifies the write concern for this document that overwrites
   the default write concern specified in the configuration. It does not overwrite
   a write concern given as <a href="flush_options.html">option</a> to the <code>flush</code>
   method when committing your documents.</p>
<pre><code class="php">&lt;?php

/**
 * @Document(
 *     db=&quot;documents&quot;,
 *     collection=&quot;users&quot;,
 *     repositoryClass=&quot;MyProject\UserRepository&quot;,
 *     indexes={
 *         @Index(keys={&quot;username&quot;=&quot;desc&quot;}, options={&quot;unique&quot;=true})
 *     },
 *     readOnly=true,
 * )
 */
class User
{
    //...
}
</code></pre>
<h2 class="section-header" id="title.1.7"><a href="#title.1.7">@EmbedMany<i class="fas fa-link"></i></a></h2>
<p>This annotation is similar to <a href="">@EmbedOne</a>, but instead of embedding one
document, it embeds a collection of documents.</p>
<p>Optional attributes:</p>
<p>-
    targetDocument - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of the target document.
-
    discriminatorField - The database field name to store the discriminator
    value within the embedded document.
-
    discriminatorMap - Map of discriminator values to class names.
-
    defaultDiscriminatorValue - A default value for discriminatorField if no value
    has been set in the embedded document.
-
    strategy - The strategy used to persist changes to the collection. Possible
    values are <code>addToSet</code>, <code>pushAll</code>, <code>set</code>, and <code>setArray</code>. <code>pushAll</code>
    is the default. See <a href="storage_strategies.html"></a> for more information.
-
    collectionClass - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of class that implements <code>Collection</code> interface
    and is used to hold documents. Doctrine's <code>ArrayCollection</code> is used by default.</p>
<pre><code class="php">&lt;?php

/**
 * @EmbedMany(
 *     strategy=&quot;set&quot;,
 *     discriminatorField=&quot;type&quot;,
 *     discriminatorMap={
 *         &quot;book&quot;=&quot;Documents\BookTag&quot;,
 *         &quot;song&quot;=&quot;Documents\SongTag&quot;
 *     },
 *     defaultDiscriminatorValue=&quot;book&quot;
 * )
 */
private $tags = array();
</code></pre>
<p>Depending on the embedded document's class, a value of <code>user</code> or <code>author</code>
will be stored in the <code>type</code> field and used to reconstruct the proper class
during hydration. The <code>type</code> field need not be mapped on the embedded
document classes.</p>
<h2 class="section-header" id="title.1.8"><a href="#title.1.8">@EmbedOne<i class="fas fa-link"></i></a></h2>
<p>The <a href="">@EmbedOne</a> annotation works similarly to <a href="">@ReferenceOne</a>, except that
that document will be embedded within the parent document. Consider the
following excerpt from the MongoDB documentation:</p>
<blockquote><p>The key question in MongoDB schema design is &quot;does this object merit its own
collection, or rather should it be embedded within objects in other
collections?&quot; In relational databases, each sub-item of interest typically
becomes a separate table (unless you are denormalizing for performance). In
MongoDB, this is not recommended â€“ embedding objects is much more efficient.
Data is then collocated on disk; client-server turnarounds to the database
are eliminated. So in general, the question to ask is, &quot;why would I not want
to embed this object?&quot;</p>
</blockquote>
<p>Optional attributes:</p>
<p>-
    targetDocument - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of the target document.
-
    discriminatorField - The database field name to store the discriminator
    value within the embedded document.
-
    discriminatorMap - Map of discriminator values to class names.
-
    defaultDiscriminatorValue - A default value for discriminatorField if no value
    has been set in the embedded document.</p>
<pre><code class="php">&lt;?php

/**
 * @EmbedOne(
 *     discriminatorField=&quot;type&quot;,
 *     discriminatorMap={
 *         &quot;user&quot;=&quot;Documents\User&quot;,
 *         &quot;author&quot;=&quot;Documents\Author&quot;
 *     },
 *     defaultDiscriminatorValue=&quot;user&quot;
 * )
 */
private $creator;
</code></pre>
<p>Depending on the embedded document's class, a value of <code>user</code> or <code>author</code>
will be stored in the <code>type</code> field and used to reconstruct the proper class
during hydration. The <code>type</code> field need not be mapped on the embedded
document classes.</p>
<h2 class="section-header" id="title.1.9"><a href="#title.1.9">@EmbeddedDocument<i class="fas fa-link"></i></a></h2>
<p>Marks the document as embeddable. This annotation is required for any documents
to be stored within an <a href="">@EmbedOne</a> or <a href="">@EmbedMany</a> relationship.</p>
<pre><code class="php">&lt;?php

/** @EmbeddedDocument */
class Money
{
    /** @Field(type=&quot;float&quot;) */
    private $amount;

    public function __construct($amount)
    {
        $this-&gt;amount = (float) $amount;
    }
    //...
}

/** @Document(db=&quot;finance&quot;, collection=&quot;wallets&quot;) */
class Wallet
{
    /** @EmbedOne(targetDocument=&quot;Money&quot;) */
    private $money;

    public function setMoney(Money $money)
    {
        $this-&gt;money = $money;
    }
    //...
}
//...
$wallet = new Wallet();
$wallet-&gt;setMoney(new Money(34.39));
$dm-&gt;persist($wallet);
$dm-&gt;flush();
</code></pre>
<p>Unlike normal documents, embedded documents cannot specify their own database or
collection. That said, a single embedded document class may be used with
multiple document classes, and even other embedded documents!</p>
<p>Optional attributes:</p>
<p>-
   indexes - Specifies an array of indexes for this embedded document, to be
   included in the schemas of any embedding documents.</p>
<h2 class="section-header" id="title.1.10"><a href="#title.1.10">@Field<i class="fas fa-link"></i></a></h2>
<p>Marks an annotated instance variable for persistence. Values for this field will
be saved to and loaded from the document store as part of the document class'
lifecycle.</p>
<p>Optional attributes:</p>
<p>-
   type - Name of the ODM type, which will determine the value's representation
   in PHP and BSON (i.e. MongoDB). See <a href="doctrine_mapping_types.html"></a> for a list
   of types. Defaults to &quot;string&quot;.
-
   name - By default, the property name is used for the field name in MongoDB;
   however, this option may be used to specify a database field name.
-
   nullable - By default, ODM will <code>$unset</code> fields in MongoDB if the PHP value
   is null. Specify true for this option to force ODM to store a null value in
   the database instead of unsetting the field.</p>
<p>Examples:</p>
<pre><code class="php">&lt;?php

/**
 * @Field(type=&quot;string&quot;)
 */
protected $username;

/**
 * @Field(type=&quot;string&quot;, name=&quot;co&quot;)
 */
protected $country;

/**
 * @Field(type=&quot;float&quot;)
 */
protected $height;
</code></pre>
<a id="haslifecyclecallbacks"></a>
<h2 class="section-header" id="title.1.11"><a href="#title.1.11">@HasLifecycleCallbacks<i class="fas fa-link"></i></a></h2>
<p>This annotation must be set on the document class to instruct Doctrine to check
for lifecycle callback annotations on public methods. Using <a href="">@PreFlush</a>,
<a href="">@PreLoad</a>, <a href="">@PostLoad</a>, <a href="">@PrePersist</a>, <a href="">@PostPersist</a>, <a href="">@PreRemove</a>,
<a href="">@PostRemove</a>, <a href="">@PreUpdate</a>, or <a href="">@PostUpdate</a> on methods without this
annotation will cause Doctrine to ignore the callbacks.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class User
{
    /** @PostPersist */
    public function sendWelcomeEmail() {}
}
</code></pre>
<h2 class="section-header" id="title.1.12"><a href="#title.1.12">@Id<i class="fas fa-link"></i></a></h2>
<p>The annotated instance variable will be marked as the document identifier. The
default behavior is to store an <a href="https://secure.php.net/manual/en/class.mongodb-bson-objectid.php">MongoDB\BSON\ObjectId</a> instance, but you may
customize this via the <a href="basic_mapping_identifiers.html">strategy</a> attribute.</p>
<pre><code class="php">&lt;?php

/** @Document */
class User
{
    /** @Id */
    protected $id;
}
</code></pre>
<h2 class="section-header" id="title.1.13"><a href="#title.1.13">@Index<i class="fas fa-link"></i></a></h2>
<p>This annotation is used inside of the class-level <a href="">@Document</a> or
<a href="">@EmbeddedDocument</a> annotations to specify indexes to be created on the
collection (or embedding document's collection in the case of
<a href="">@EmbeddedDocument</a>). It may also be used at the property-level to define
single-field indexes.</p>
<p>Optional attributes:</p>
<p>-
    keys - Mapping of indexed fields to their ordering or index type. ODM will
    allow &quot;asc&quot; and &quot;desc&quot; to be used in place of <code>1</code> and <code>-1</code>,
    respectively. Special index types (e.g. &quot;2dsphere&quot;) should be specified as
    strings. This is required when <a href="">@Index</a> is used at the class level.
-
    options - Options for creating the index</p>
<p>The <code>keys</code> and <code>options</code> attributes correspond to the arguments for
<a href="http://php.net/manual/en/mongocollection.createindex.php">MongoCollection::createIndex()</a>.
ODM allows mapped field names (i.e. PHP property names) to be used when defining
<code>keys</code>.</p>
<pre><code class="php">&lt;?php

/**
 * @Document(
 *   indexes={
 *     @Index(keys={&quot;username&quot;=&quot;desc&quot;}, options={&quot;unique&quot;=true})
 *   }
 * )
 */
class User
{
    //...
}
</code></pre>
<p>If you are creating a single-field index, you can simply specify an <a href="">@Index</a> or
<a href="">@UniqueIndex</a> on a mapped property:</p>
<pre><code class="php">&lt;?php

/** @Field(type=&quot;string&quot;) @UniqueIndex */
private $username;
</code></pre>
<h2 class="section-header" id="title.1.14"><a href="#title.1.14">@Indexes<i class="fas fa-link"></i></a></h2>
<p>This annotation may be used at the class level to specify an array of <a href="">@Index</a>
annotations. It is functionally equivalent to using the <code>indexes</code> option for
the <a href="">@Document</a> or <a href="">@EmbeddedDocument</a> annotations.</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @Indexes({
 *   @Index(keys={&quot;username&quot;=&quot;desc&quot;}, options={&quot;unique&quot;=true})
 * })
 */
class User
{
    //...
}
</code></pre>
<h2 class="section-header" id="title.1.15"><a href="#title.1.15">@InheritanceType<i class="fas fa-link"></i></a></h2>
<p>This annotation must appear on the top-most class in an
<a href="inheritance_mapping.html">inheritance hierarchy</a>. <code>SINGLE_COLLECTION</code> and
<code>COLLECTION_PER_CLASS</code> are currently supported.</p>
<p>Examples:</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @InheritanceType(&quot;COLLECTION_PER_CLASS&quot;)
 */
class Person
{
    // ...
}

/**
 * @Document
 * @InheritanceType(&quot;SINGLE_COLLECTION&quot;)
 * @DiscriminatorField(&quot;type&quot;)
 * @DiscriminatorMap({&quot;person&quot;=&quot;Person&quot;, &quot;employee&quot;=&quot;Employee&quot;})
 */
class Person
{
    // ...
}
</code></pre>
<h2 class="section-header" id="title.1.16"><a href="#title.1.16">@Lock<i class="fas fa-link"></i></a></h2>
<p>The annotated instance variable will be used to store lock information for <a href="transactions_and_concurrency_pessimistic_locking.html">pessimistic locking</a>.
This is only compatible with the <code>int</code> type, and cannot be combined with <a href="">@Id</a>.</p>
<pre><code class="php">&lt;?php

/** @Field(type=&quot;int&quot;) @Lock */
private $lock;
</code></pre>
<h2 class="section-header" id="title.1.17"><a href="#title.1.17">@MappedSuperclass<i class="fas fa-link"></i></a></h2>
<p>The annotation is used to specify classes that are parents of document classes
and should not be managed directly. See
<a href="inheritance_mapping.html">inheritance mapping</a> for additional information.</p>
<pre><code class="php">&lt;?php

/** @MappedSuperclass */
class BaseDocument
{
    // ...
}
</code></pre>
<h2 class="section-header" id="title.1.18"><a href="#title.1.18">@NotSaved<i class="fas fa-link"></i></a></h2>
<p>The annotation is used to specify properties that are loaded if they exist in
MongoDB; however, ODM will not save the property value back to the database.</p>
<pre><code class="php">&lt;?php

/** @NotSaved */
public $field;
</code></pre>
<h2 class="section-header" id="title.1.19"><a href="#title.1.19">@PostLoad<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>postLoad</code> event. The
<a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for the
method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PostLoad */
    public function postLoad()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.20"><a href="#title.1.20">@PostPersist<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>postPersist</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PostPersist */
    public function postPersist()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.21"><a href="#title.1.21">@PostRemove<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>postRemove</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PostRemove */
    public function postRemove()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.22"><a href="#title.1.22">@PostUpdate<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>postUpdate</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PostUpdate */
    public function postUpdate()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.23"><a href="#title.1.23">@PreFlush<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>preFlush</code> event. The
<a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for the
method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PreFlush */
    public function preFlush()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.24"><a href="#title.1.24">@PreLoad<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>preLoad</code> event. The
<a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for the
method to be registered.</p>
<pre><code class="php">&lt;?php

use Doctrine\ODM\MongoDB\Event\PreLoadEventArgs;

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PreLoad */
    public function preLoad(PreLoadEventArgs $eventArgs)
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.25"><a href="#title.1.25">@PrePersist<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>prePersist</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PrePersist */
    public function prePersist()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.26"><a href="#title.1.26">@PreRemove<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>preRemove</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PreRemove */
    public function preRemove()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.27"><a href="#title.1.27">@PreUpdate<i class="fas fa-link"></i></a></h2>
<p>Marks a method on the document class to be called on the <code>preUpdate</code> event.
The <a href="">@HasLifecycleCallbacks</a> annotation must be present on the same class for
the method to be registered.</p>
<pre><code class="php">&lt;?php

/** @Document @HasLifecycleCallbacks */
class Article
{
    // ...

    /** @PreUpdate */
    public function preUpdated()
    {
        // ...
    }
}
</code></pre>
<p>See <a href="lifecycle_events.html"></a> for more information.</p>
<h2 class="section-header" id="title.1.28"><a href="#title.1.28">@ReadPreference<i class="fas fa-link"></i></a></h2>
<p>Specifies `Read Preference &lt;https://docs.mongodb.com/manual/core/read-preference/&gt;_`
that will be applied when querying for the annotated document.</p>
<pre><code class="php">&lt;?php

namespace Documents;

/**
 * @Document
 * @ODM\ReadPreference(&quot;primaryPreferred&quot;, tags={
 *   { &quot;dc&quot;=&quot;east&quot; },
 *   { &quot;dc&quot;=&quot;west&quot; },
 *   {  }
 * })
 */
class User
{
}
</code></pre>
<a id="annotations_reference_reference_many"></a>
<h2 class="section-header" id="title.1.29"><a href="#title.1.29">@ReferenceMany<i class="fas fa-link"></i></a></h2>
<p>Defines that the annotated instance variable holds a collection of referenced
documents.</p>
<p>Optional attributes:</p>
<p>-
    targetDocument - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of the target document. A <code>targetDocument</code> is
    required when using <code>storeAs: id</code>.
-
    storeAs - Indicates how to store the reference. <code>id</code> stores the identifier,
    <code>ref</code> an embedded object containing the <code>id</code> field and (optionally) a
    discriminator. <code>dbRef</code> and <code>dbRefWithDb</code> store a <a href="https://docs.mongodb.com/manual/reference/database-references/#dbrefs">DBRef</a> object and
    are deprecated in favor of <code>ref</code>. Note that <code>id</code> references are not
    compatible with the discriminators.
-
    cascade - Cascade Option
-
    discriminatorField - The field name to store the discriminator value within
    the reference object.
-
    discriminatorMap - Map of discriminator values to class names.
-
    defaultDiscriminatorValue - A default value for discriminatorField if no value
    has been set in the referenced document.
-
    inversedBy - The field name of the inverse side. Only allowed on owning side.
-
    mappedBy - The field name of the owning side. Only allowed on the inverse side.
-
    repositoryMethod - The name of the repository method to call to populate this reference.
-
    sort - The default sort for the query that loads the reference.
-
    criteria - Array of default criteria for the query that loads the reference.
-
    limit - Limit for the query that loads the reference.
-
    skip - Skip for the query that loads the reference.
-
    strategy - The strategy used to persist changes to the collection. Possible
    values are <code>addToSet</code>, <code>pushAll</code>, <code>set</code>, and <code>setArray</code>. <code>pushAll</code>
    is the default. See <a href="storage_strategies.html"></a> for more information.
-
    collectionClass - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of class that implements <code>Collection</code> interface
    and is used to hold documents. Doctrine's <code>ArrayCollection</code> is used by default
-
    prime - A list of references contained in the target document that will be
    initialized when the collection is loaded. Only allowed for inverse
    references.</p>
<pre><code class="php">&lt;?php

/**
 * @ReferenceMany(
 *     strategy=&quot;set&quot;,
 *     targetDocument=&quot;Documents\Item&quot;,
 *     cascade=&quot;all&quot;,
 *     sort={&quot;sort_field&quot;: &quot;asc&quot;}
 *     discriminatorField=&quot;type&quot;,
 *     discriminatorMap={
 *         &quot;book&quot;=&quot;Documents\BookItem&quot;,
 *         &quot;song&quot;=&quot;Documents\SongItem&quot;
 *     },
 *     defaultDiscriminatorValue=&quot;book&quot;
 * )
 */
private $cart;
</code></pre>
<a id="annotations_reference_reference_one"></a>
<h2 class="section-header" id="title.1.30"><a href="#title.1.30">@ReferenceOne<i class="fas fa-link"></i></a></h2>
<p>Defines an instance variable holds a related document instance.</p>
<p>Optional attributes:</p>
<p>-
    targetDocument - A <abbr title="Fully-Qualified Class Name">FQCN</abbr>
 of the target document. A <code>targetDocument</code> is
    required when using <code>storeAs: id</code>.
-
    storeAs - Indicates how to store the reference. <code>id</code> stores the identifier,
    <code>ref</code> an embedded object containing the <code>id</code> field and (optionally) a
    discriminator. <code>dbRef</code> and <code>dbRefWithDb</code> store a <a href="https://docs.mongodb.com/manual/reference/database-references/#dbrefs">DBRef</a> object and
    are deprecated in favor of <code>ref</code>. Note that <code>id</code> references are not
    compatible with the discriminators.
-
    cascade - Cascade Option
-
    discriminatorField - The field name to store the discriminator value within
    the reference object.
-
    discriminatorMap - Map of discriminator values to class names.
-
    defaultDiscriminatorValue - A default value for discriminatorField if no value
    has been set in the referenced document.
-
    inversedBy - The field name of the inverse side. Only allowed on owning side.
-
    mappedBy - The field name of the owning side. Only allowed on the inverse side.
-
    repositoryMethod - The name of the repository method to call to populate this reference.
-
    sort - The default sort for the query that loads the reference.
-
    criteria - Array of default criteria for the query that loads the reference.
-
    limit - Limit for the query that loads the reference.
-
    skip - Skip for the query that loads the reference.</p>
<pre><code class="php">&lt;?php

/**
 * @ReferenceOne(
 *     targetDocument=&quot;Documents\Item&quot;,
 *     cascade=&quot;all&quot;,
 *     discriminatorField=&quot;type&quot;,
 *     discriminatorMap={
 *         &quot;book&quot;=&quot;Documents\BookItem&quot;,
 *         &quot;song&quot;=&quot;Documents\SongItem&quot;
 *     },
 *     defaultDiscriminatorValue=&quot;book&quot;
 * )
 */
private $cart;
</code></pre>
<h2 class="section-header" id="title.1.31"><a href="#title.1.31">@ShardKey<i class="fas fa-link"></i></a></h2>
<p>This annotation may be used at the class level to specify a shard key to be used
for sharding the document collection.</p>
<pre><code class="php">&lt;?php

/**
 * @Document
 * @ShardKey(keys={&quot;username&quot;=&quot;asc&quot;})
 */
class User
{
    //...
}
</code></pre>
<h2 class="section-header" id="title.1.32"><a href="#title.1.32">@UniqueIndex<i class="fas fa-link"></i></a></h2>
<p>Alias of <a href="">@Index</a>, with the <code>unique</code> option set by default.</p>
<pre><code class="php">&lt;?php

/** @Field(type=&quot;string&quot;) @UniqueIndex */
private $email;
</code></pre>
<a id="annotations_reference_version"></a>
<h2 class="section-header" id="title.1.33"><a href="#title.1.33">@Version<i class="fas fa-link"></i></a></h2>
<p>The annotated instance variable will be used to store version information for <a href="transactions_and_concurrency_optimistic_locking.html">optimistic locking</a>.
This is only compatible with <code>int</code> and <code>date</code> field types, and cannot be combined with <a href="">@Id</a>.</p>
<pre><code class="php">&lt;?php

/** @Field(type=&quot;int&quot;) @Version */
private $version;
</code></pre>
<p>By default, Doctrine ODM updates <a href="embed_many.html">embed-many</a> and
<a href="reference_many.html">reference-many</a> collections in separate write operations,
which do not bump the document version. Users employing document versioning are
encouraged to use the <a href="atomic_set.html">atomicSet</a> or
<a href="atomic_set_array.html">atomicSetArray</a> strategies for such collections, which
will ensure that collections are updated in the same write operation as the
versioned parent document.</p>
</body>
</html>                    </main>

        <footer class="footer">
            <div class="container">
                <i class="fa fa-copyright"></i> 2018 Doctrine
            </div>
        </footer>

        <script type="text/javascript">
            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function() {scrollFunction()};

            function scrollFunction() {
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    document.getElementById('back-to-top').style.display = "block";
                } else {
                    document.getElementById('back-to-top').style.display = "none";
                }
            }

            // When the user clicks on the button, scroll to the top of the document
            function topFunction() {
                document.body.scrollTop = 0; // For Safari
                document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
            }
        </script>

        <button onclick="topFunction()" id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://new.doctrine-project.org/components/highlightjs/highlight.pack.js?9"></script>
        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
