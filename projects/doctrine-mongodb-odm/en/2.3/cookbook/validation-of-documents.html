<!DOCTYPE html>
<html>
    <head>
        <title>        Validation of Documents - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine MongoDB Object Document Mapper Documentation: Validation of Documents ">

        <meta name="keywords" content="                    php,mongodb,odm,data,mapper,mapping,object,documentation,validation,of,documents
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.5/cookbook/validation-of-documents.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?15a855"
                        integrity="sha384-IVdylBzDQpFJ+EmdH6hsr98Htg0t1rrKj99U9d2vkDI1YrWNS7+OZ+Ti5KHXx+3r"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.3/cookbook/validation-of-documents.html" />
        <meta property="og:title" content="        Validation of Documents - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    " />
        <meta property="og:description" content="Doctrine MongoDB Object Document Mapper Documentation: Validation of Documents " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine MongoDB Object Document Mapper",
            "description": "Validation of Documents",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar stop-war-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                 <a href="/stop-war.html">ðŸ‡ºðŸ‡¦ UKRAINE NEEDS YOUR HELP NOW!</a>
            </nav>

            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/mongodb-odm/edit/2.3.x/docs/en/cookbook/validation-of-documents.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc-section"><h2 class="toc-header">Tutorials</h2>
<div class="toc"><ul><li id="tutorials-getting-started-html-getting-started" class="toc-item"><a href="../tutorials/getting-started.html#getting-started">Getting Started</a><ul><li id="tutorials-getting-started-html-example-model-simple-blog" class="toc-item"><a href="../tutorials/getting-started.html#example-model-simple-blog">Example Model: Simple Blog</a></li><li id="tutorials-getting-started-html-a-first-prototype" class="toc-item"><a href="../tutorials/getting-started.html#a-first-prototype">A first prototype</a></li><li id="tutorials-getting-started-html-persistent-models" class="toc-item"><a href="../tutorials/getting-started.html#persistent-models">Persistent Models</a></li><li id="tutorials-getting-started-html-usage" class="toc-item"><a href="../tutorials/getting-started.html#usage">Usage</a></li></ul></li></ul></div>
</div>
<div class="toc-section"><h2 class="toc-header">Reference</h2>
<div class="toc"><ul><li id="reference-introduction-html-introduction" class="toc-item"><a href="../reference/introduction.html#introduction">Introduction</a><ul><li id="reference-introduction-html-features-overview" class="toc-item"><a href="../reference/introduction.html#features-overview">Features Overview</a></li><li id="reference-introduction-html-setup" class="toc-item"><a href="../reference/introduction.html#setup">Setup</a></li><li id="reference-introduction-html-providing-a-custom-client" class="toc-item"><a href="../reference/introduction.html#providing-a-custom-client">Providing a custom client</a></li></ul></li><li id="reference-architecture-html-architecture" class="toc-item"><a href="../reference/architecture.html#architecture">Architecture</a><ul><li id="reference-architecture-html-documents" class="toc-item"><a href="../reference/architecture.html#documents">Documents</a><ul><li id="reference-architecture-html-document-states" class="toc-item"><a href="../reference/architecture.html#document-states">Document states</a></li><li id="reference-architecture-html-persistent-fields" class="toc-item"><a href="../reference/architecture.html#persistent-fields">Persistent fields</a></li><li id="reference-architecture-html-serializing-documents" class="toc-item"><a href="../reference/architecture.html#serializing-documents">Serializing documents</a></li></ul></li><li id="reference-architecture-html-the-documentmanager" class="toc-item"><a href="../reference/architecture.html#the-documentmanager">The DocumentManager</a><ul><li id="reference-architecture-html-transactional-write-behind" class="toc-item"><a href="../reference/architecture.html#transactional-write-behind">Transactional write-behind</a></li><li id="reference-architecture-html-the-unit-of-work" class="toc-item"><a href="../reference/architecture.html#the-unit-of-work">The Unit of Work</a></li></ul></li></ul></li><li id="reference-console-commands-html-console-commands" class="toc-item"><a href="../reference/console-commands.html#console-commands">Console Commands</a></li><li id="reference-basic-mapping-html-basic-mapping" class="toc-item"><a href="../reference/basic-mapping.html#basic-mapping">Basic Mapping</a><ul><li id="reference-basic-mapping-html-mapping-drivers" class="toc-item"><a href="../reference/basic-mapping.html#mapping-drivers">Mapping Drivers</a></li><li id="reference-basic-mapping-html-introduction-to-docblock-annotations" class="toc-item"><a href="../reference/basic-mapping.html#introduction-to-docblock-annotations">Introduction to Docblock Annotations</a></li><li id="reference-basic-mapping-html-persistent-classes" class="toc-item"><a href="../reference/basic-mapping.html#persistent-classes">Persistent classes</a></li><li id="reference-basic-mapping-html-doctrine-mapping-types" class="toc-item"><a href="../reference/basic-mapping.html#doctrine-mapping-types">Doctrine Mapping Types</a></li><li id="reference-basic-mapping-html-property-mapping" class="toc-item"><a href="../reference/basic-mapping.html#property-mapping">Property Mapping</a><ul><li id="reference-basic-mapping-html-identifiers" class="toc-item"><a href="../reference/basic-mapping.html#identifiers">Identifiers</a></li><li id="reference-basic-mapping-html-fields" class="toc-item"><a href="../reference/basic-mapping.html#fields">Fields</a></li></ul></li><li id="reference-basic-mapping-html-multiple-document-types-in-a-collection" class="toc-item"><a href="../reference/basic-mapping.html#multiple-document-types-in-a-collection">Multiple Document Types in a Collection</a></li></ul></li><li id="reference-custom-mapping-types-html-custom-mapping-types" class="toc-item"><a href="../reference/custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a></li><li id="reference-reference-mapping-html-reference-mapping" class="toc-item"><a href="../reference/reference-mapping.html#reference-mapping">Reference Mapping</a><ul><li id="reference-reference-mapping-html-collections" class="toc-item"><a href="../reference/reference-mapping.html#collections">Collections</a></li><li id="reference-reference-mapping-html-reference-one" class="toc-item"><a href="../reference/reference-mapping.html#reference-one">Reference One</a></li><li id="reference-reference-mapping-html-reference-many" class="toc-item"><a href="../reference/reference-mapping.html#reference-many">Reference Many</a></li><li id="reference-reference-mapping-html-mixing-document-types" class="toc-item"><a href="../reference/reference-mapping.html#mixing-document-types">Mixing Document Types</a></li><li id="reference-reference-mapping-html-storing-references" class="toc-item"><a href="../reference/reference-mapping.html#storing-references">Storing References</a></li><li id="reference-reference-mapping-html-cascading-operations" class="toc-item"><a href="../reference/reference-mapping.html#cascading-operations">Cascading Operations</a></li><li id="reference-reference-mapping-html-orphan-removal" class="toc-item"><a href="../reference/reference-mapping.html#orphan-removal">Orphan Removal</a></li></ul></li><li id="reference-bidirectional-references-html-bi-directional-references" class="toc-item"><a href="../reference/bidirectional-references.html#bi-directional-references">Bi-Directional References</a><ul><li id="reference-bidirectional-references-html-owning-and-inverse-sides" class="toc-item"><a href="../reference/bidirectional-references.html#owning-and-inverse-sides">Owning and Inverse Sides</a><ul><li id="reference-bidirectional-references-html-one-to-many" class="toc-item"><a href="../reference/bidirectional-references.html#one-to-many">One to Many</a></li></ul></li><li id="reference-bidirectional-references-html-other-examples" class="toc-item"><a href="../reference/bidirectional-references.html#other-examples">Other Examples</a><ul><li id="reference-bidirectional-references-html-one-to-one" class="toc-item"><a href="../reference/bidirectional-references.html#one-to-one">One to One</a></li><li id="reference-bidirectional-references-html-self-referencing-many-to-many" class="toc-item"><a href="../reference/bidirectional-references.html#self-referencing-many-to-many">Self-Referencing Many to Many</a></li></ul></li></ul></li><li id="reference-complex-references-html-complex-references" class="toc-item"><a href="../reference/complex-references.html#complex-references">Complex References</a><ul><li id="reference-complex-references-html-basic-example" class="toc-item"><a href="../reference/complex-references.html#basic-example">Basic Example</a></li><li id="reference-complex-references-html-73c113dd8be2fad1d60d9059f86bf8eb623a8bc1-example" class="toc-item"><a href="../reference/complex-references.html#73c113dd8be2fad1d60d9059f86bf8eb623a8bc1-example">73c113dd8be2fad1d60d9059f86bf8eb623a8bc1 Example</a></li><li id="reference-complex-references-html-2b12d7a2b8ce7561646f2fd4f4c8111c8b02ab00-example" class="toc-item"><a href="../reference/complex-references.html#2b12d7a2b8ce7561646f2fd4f4c8111c8b02ab00-example">2b12d7a2b8ce7561646f2fd4f4c8111c8b02ab00 Example</a></li></ul></li><li id="reference-indexes-html-indexes" class="toc-item"><a href="../reference/indexes.html#indexes">Indexes</a><ul><li id="reference-indexes-html-index-options" class="toc-item"><a href="../reference/indexes.html#index-options">Index Options</a></li><li id="reference-indexes-html-unique-index" class="toc-item"><a href="../reference/indexes.html#unique-index">Unique Index</a></li><li id="reference-indexes-html-embedded-indexes" class="toc-item"><a href="../reference/indexes.html#embedded-indexes">Embedded Indexes</a></li><li id="reference-indexes-html-geospatial-indexing" class="toc-item"><a href="../reference/indexes.html#geospatial-indexing">Geospatial Indexing</a></li><li id="reference-indexes-html-partial-indexes" class="toc-item"><a href="../reference/indexes.html#partial-indexes">Partial indexes</a></li></ul></li><li id="reference-inheritance-mapping-html-inheritance-mapping" class="toc-item"><a href="../reference/inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a><ul><li id="reference-inheritance-mapping-html-mapped-superclasses" class="toc-item"><a href="../reference/inheritance-mapping.html#mapped-superclasses">Mapped Superclasses</a></li><li id="reference-inheritance-mapping-html-single-collection-inheritance" class="toc-item"><a href="../reference/inheritance-mapping.html#single-collection-inheritance">Single Collection Inheritance</a></li><li id="reference-inheritance-mapping-html-collection-per-class-inheritance" class="toc-item"><a href="../reference/inheritance-mapping.html#collection-per-class-inheritance">Collection Per Class Inheritance</a></li></ul></li><li id="reference-embedded-mapping-html-embedded-mapping" class="toc-item"><a href="../reference/embedded-mapping.html#embedded-mapping">Embedded Mapping</a><ul><li id="reference-embedded-mapping-html-embed-one" class="toc-item"><a href="../reference/embedded-mapping.html#embed-one">Embed One</a></li><li id="reference-embedded-mapping-html-embed-many" class="toc-item"><a href="../reference/embedded-mapping.html#embed-many">Embed Many</a></li><li id="reference-embedded-mapping-html-mixing-document-types" class="toc-item"><a href="../reference/embedded-mapping.html#mixing-document-types">Mixing Document Types</a></li><li id="reference-embedded-mapping-html-cascading-operations" class="toc-item"><a href="../reference/embedded-mapping.html#cascading-operations">Cascading Operations</a></li></ul></li><li id="reference-trees-html-trees" class="toc-item"><a href="../reference/trees.html#trees">Trees</a><ul><li id="reference-trees-html-full-tree-in-single-document" class="toc-item"><a href="../reference/trees.html#full-tree-in-single-document">Full Tree in Single Document</a></li><li id="reference-trees-html-parent-reference" class="toc-item"><a href="../reference/trees.html#parent-reference">Parent Reference</a></li><li id="reference-trees-html-child-reference" class="toc-item"><a href="../reference/trees.html#child-reference">Child Reference</a></li><li id="reference-trees-html-array-of-ancestors" class="toc-item"><a href="../reference/trees.html#array-of-ancestors">Array of Ancestors</a></li><li id="reference-trees-html-materialized-paths" class="toc-item"><a href="../reference/trees.html#materialized-paths">Materialized Paths</a></li></ul></li><li id="reference-storing-files-with-gridfs-html-storing-files-with-gridfs" class="toc-item"><a href="../reference/storing-files-with-gridfs.html#storing-files-with-gridfs">Storing Files with GridFS</a><ul><li id="reference-storing-files-with-gridfs-html-about-gridfs" class="toc-item"><a href="../reference/storing-files-with-gridfs.html#about-gridfs">About GridFS</a></li><li id="reference-storing-files-with-gridfs-html-mapping-documents-as-gridfs-files" class="toc-item"><a href="../reference/storing-files-with-gridfs.html#mapping-documents-as-gridfs-files">Mapping documents as GridFS files</a></li><li id="reference-storing-files-with-gridfs-html-inserting-files-into-gridfs-buckets" class="toc-item"><a href="../reference/storing-files-with-gridfs.html#inserting-files-into-gridfs-buckets">Inserting files into GridFS buckets</a></li><li id="reference-storing-files-with-gridfs-html-reading-files-from-gridfs-buckets" class="toc-item"><a href="../reference/storing-files-with-gridfs.html#reading-files-from-gridfs-buckets">Reading files from GridFS buckets</a></li></ul></li><li id="reference-xml-mapping-html-xml-mapping" class="toc-item"><a href="../reference/xml-mapping.html#xml-mapping">XML Mapping</a><ul><li id="reference-xml-mapping-html-simplified-xml-driver" class="toc-item"><a href="../reference/xml-mapping.html#simplified-xml-driver">Simplified XML Driver</a><ul><li id="reference-xml-mapping-html-example" class="toc-item"><a href="../reference/xml-mapping.html#example">Example</a></li><li id="reference-xml-mapping-html-reference" class="toc-item"><a href="../reference/xml-mapping.html#reference">Reference</a></li></ul></li></ul></li><li id="reference-annotations-reference-html-annotations-reference" class="toc-item"><a href="../reference/annotations-reference.html#annotations-reference">Annotations Reference</a><ul><li id="reference-annotations-reference-html-alsoload" class="toc-item"><a href="../reference/annotations-reference.html#alsoload">@AlsoLoad</a></li><li id="reference-annotations-reference-html-changetrackingpolicy" class="toc-item"><a href="../reference/annotations-reference.html#changetrackingpolicy">@ChangeTrackingPolicy</a></li><li id="reference-annotations-reference-html-defaultdiscriminatorvalue" class="toc-item"><a href="../reference/annotations-reference.html#defaultdiscriminatorvalue">@DefaultDiscriminatorValue</a></li><li id="reference-annotations-reference-html-discriminatorfield" class="toc-item"><a href="../reference/annotations-reference.html#discriminatorfield">@DiscriminatorField</a></li><li id="reference-annotations-reference-html-discriminatormap" class="toc-item"><a href="../reference/annotations-reference.html#discriminatormap">@DiscriminatorMap</a></li><li id="reference-annotations-reference-html-document" class="toc-item"><a href="../reference/annotations-reference.html#document">@Document</a></li><li id="reference-annotations-reference-html-embedmany" class="toc-item"><a href="../reference/annotations-reference.html#embedmany">@EmbedMany</a></li><li id="reference-annotations-reference-html-embedone" class="toc-item"><a href="../reference/annotations-reference.html#embedone">@EmbedOne</a></li><li id="reference-annotations-reference-html-embeddeddocument" class="toc-item"><a href="../reference/annotations-reference.html#embeddeddocument">@EmbeddedDocument</a></li><li id="reference-annotations-reference-html-field" class="toc-item"><a href="../reference/annotations-reference.html#field">@Field</a></li><li id="reference-annotations-reference-html-file" class="toc-item"><a href="../reference/annotations-reference.html#file">@File</a></li><li id="reference-annotations-reference-html-file-chunksize" class="toc-item"><a href="../reference/annotations-reference.html#file-chunksize">@File\ChunkSize</a></li><li id="reference-annotations-reference-html-file-filename" class="toc-item"><a href="../reference/annotations-reference.html#file-filename">@File\Filename</a></li><li id="reference-annotations-reference-html-file-length" class="toc-item"><a href="../reference/annotations-reference.html#file-length">@File\Length</a></li><li id="reference-annotations-reference-html-file-metadata" class="toc-item"><a href="../reference/annotations-reference.html#file-metadata">@File\Metadata</a></li><li id="reference-annotations-reference-html-file-uploaddate" class="toc-item"><a href="../reference/annotations-reference.html#file-uploaddate">@File\UploadDate</a></li><li id="reference-annotations-reference-html-haslifecyclecallbacks" class="toc-item"><a href="../reference/annotations-reference.html#haslifecyclecallbacks">@HasLifecycleCallbacks</a></li><li id="reference-annotations-reference-html-id" class="toc-item"><a href="../reference/annotations-reference.html#id">@Id</a></li><li id="reference-annotations-reference-html-index" class="toc-item"><a href="../reference/annotations-reference.html#index">@Index</a></li><li id="reference-annotations-reference-html-indexes" class="toc-item"><a href="../reference/annotations-reference.html#indexes">@Indexes</a></li><li id="reference-annotations-reference-html-inheritancetype" class="toc-item"><a href="../reference/annotations-reference.html#inheritancetype">@InheritanceType</a></li><li id="reference-annotations-reference-html-lock" class="toc-item"><a href="../reference/annotations-reference.html#lock">@Lock</a></li><li id="reference-annotations-reference-html-mappedsuperclass" class="toc-item"><a href="../reference/annotations-reference.html#mappedsuperclass">@MappedSuperclass</a></li><li id="reference-annotations-reference-html-postload" class="toc-item"><a href="../reference/annotations-reference.html#postload">@PostLoad</a></li><li id="reference-annotations-reference-html-postpersist" class="toc-item"><a href="../reference/annotations-reference.html#postpersist">@PostPersist</a></li><li id="reference-annotations-reference-html-postremove" class="toc-item"><a href="../reference/annotations-reference.html#postremove">@PostRemove</a></li><li id="reference-annotations-reference-html-postupdate" class="toc-item"><a href="../reference/annotations-reference.html#postupdate">@PostUpdate</a></li><li id="reference-annotations-reference-html-preflush" class="toc-item"><a href="../reference/annotations-reference.html#preflush">@PreFlush</a></li><li id="reference-annotations-reference-html-preload" class="toc-item"><a href="../reference/annotations-reference.html#preload">@PreLoad</a></li><li id="reference-annotations-reference-html-prepersist" class="toc-item"><a href="../reference/annotations-reference.html#prepersist">@PrePersist</a></li><li id="reference-annotations-reference-html-preremove" class="toc-item"><a href="../reference/annotations-reference.html#preremove">@PreRemove</a></li><li id="reference-annotations-reference-html-preupdate" class="toc-item"><a href="../reference/annotations-reference.html#preupdate">@PreUpdate</a></li><li id="reference-annotations-reference-html-readpreference" class="toc-item"><a href="../reference/annotations-reference.html#readpreference">@ReadPreference</a></li><li id="reference-annotations-reference-html-referencemany" class="toc-item"><a href="../reference/annotations-reference.html#referencemany">@ReferenceMany</a></li><li id="reference-annotations-reference-html-referenceone" class="toc-item"><a href="../reference/annotations-reference.html#referenceone">@ReferenceOne</a></li><li id="reference-annotations-reference-html-shardkey" class="toc-item"><a href="../reference/annotations-reference.html#shardkey">@ShardKey</a></li><li id="reference-annotations-reference-html-uniqueindex" class="toc-item"><a href="../reference/annotations-reference.html#uniqueindex">@UniqueIndex</a></li><li id="reference-annotations-reference-html-validation" class="toc-item"><a href="../reference/annotations-reference.html#validation">@Validation</a></li><li id="reference-annotations-reference-html-version" class="toc-item"><a href="../reference/annotations-reference.html#version">@Version</a></li><li id="reference-annotations-reference-html-view" class="toc-item"><a href="../reference/annotations-reference.html#view">@View</a></li></ul></li><li id="reference-metadata-drivers-html-metadata-drivers" class="toc-item"><a href="../reference/metadata-drivers.html#metadata-drivers">Metadata Drivers</a><ul><li id="reference-metadata-drivers-html-core-metadata-drivers" class="toc-item"><a href="../reference/metadata-drivers.html#core-metadata-drivers">Core Metadata Drivers</a></li><li id="reference-metadata-drivers-html-implementing-metadata-drivers" class="toc-item"><a href="../reference/metadata-drivers.html#implementing-metadata-drivers">Implementing Metadata Drivers</a></li><li id="reference-metadata-drivers-html-classmetadata" class="toc-item"><a href="../reference/metadata-drivers.html#classmetadata">ClassMetadata</a></li><li id="reference-metadata-drivers-html-getting-classmetadata-instances" class="toc-item"><a href="../reference/metadata-drivers.html#getting-classmetadata-instances">Getting ClassMetadata Instances</a></li></ul></li><li id="reference-working-with-objects-html-working-with-objects" class="toc-item"><a href="../reference/working-with-objects.html#working-with-objects">Working with Objects</a><ul><li id="reference-working-with-objects-html-understanding" class="toc-item"><a href="../reference/working-with-objects.html#understanding">Understanding</a><ul><li id="reference-working-with-objects-html-the-size-of-a-unit-of-work" class="toc-item"><a href="../reference/working-with-objects.html#the-size-of-a-unit-of-work">The size of a Unit of Work</a></li><li id="reference-working-with-objects-html-the-cost-of-flush" class="toc-item"><a href="../reference/working-with-objects.html#the-cost-of-flush">The cost of flush()</a></li><li id="reference-working-with-objects-html-direct-access-to-a-unit-of-work" class="toc-item"><a href="../reference/working-with-objects.html#direct-access-to-a-unit-of-work">Direct access to a Unit of Work</a></li></ul></li><li id="reference-working-with-objects-html-persisting-documents" class="toc-item"><a href="../reference/working-with-objects.html#persisting-documents">Persisting documents</a></li><li id="reference-working-with-objects-html-flush-options" class="toc-item"><a href="../reference/working-with-objects.html#flush-options">Flush Options</a></li><li id="reference-working-with-objects-html-removing-documents" class="toc-item"><a href="../reference/working-with-objects.html#removing-documents">Removing documents</a></li><li id="reference-working-with-objects-html-detaching-documents" class="toc-item"><a href="../reference/working-with-objects.html#detaching-documents">Detaching documents</a></li><li id="reference-working-with-objects-html-merging-documents" class="toc-item"><a href="../reference/working-with-objects.html#merging-documents">Merging documents</a></li><li id="reference-working-with-objects-html-references" class="toc-item"><a href="../reference/working-with-objects.html#references">References</a></li><li id="reference-working-with-objects-html-establishing-references" class="toc-item"><a href="../reference/working-with-objects.html#establishing-references">Establishing References</a></li><li id="reference-working-with-objects-html-removing-references" class="toc-item"><a href="../reference/working-with-objects.html#removing-references">Removing References</a></li><li id="reference-working-with-objects-html-transitive-persistence" class="toc-item"><a href="../reference/working-with-objects.html#transitive-persistence">Transitive persistence</a></li><li id="reference-working-with-objects-html-querying" class="toc-item"><a href="../reference/working-with-objects.html#querying">Querying</a><ul><li id="reference-working-with-objects-html-by-primary-key" class="toc-item"><a href="../reference/working-with-objects.html#by-primary-key">By Primary Key</a></li><li id="reference-working-with-objects-html-by-simple-conditions" class="toc-item"><a href="../reference/working-with-objects.html#by-simple-conditions">By Simple Conditions</a></li><li id="reference-working-with-objects-html-by-lazy-loading" class="toc-item"><a href="../reference/working-with-objects.html#by-lazy-loading">By Lazy Loading</a></li><li id="reference-working-with-objects-html-by-query-builder-objects" class="toc-item"><a href="../reference/working-with-objects.html#by-query-builder-objects">By Query Builder Objects</a></li><li id="reference-working-with-objects-html-by-reference" class="toc-item"><a href="../reference/working-with-objects.html#by-reference">By Reference</a></li></ul></li></ul></li><li id="reference-document-repositories-html-document-repositories" class="toc-item"><a href="../reference/document-repositories.html#document-repositories">Document Repositories</a><ul><li id="reference-document-repositories-html-custom-repositories" class="toc-item"><a href="../reference/document-repositories.html#custom-repositories">Custom Repositories</a></li><li id="reference-document-repositories-html-repositories-with-additional-dependencies" class="toc-item"><a href="../reference/document-repositories.html#repositories-with-additional-dependencies">Repositories with Additional Dependencies</a></li></ul></li><li id="reference-events-html-events" class="toc-item"><a href="../reference/events.html#events">Events</a><ul><li id="reference-events-html-the-event-system" class="toc-item"><a href="../reference/events.html#the-event-system">The Event System</a></li><li id="reference-events-html-lifecycle-events" class="toc-item"><a href="../reference/events.html#lifecycle-events">Lifecycle Events</a></li><li id="reference-events-html-lifecycle-callbacks" class="toc-item"><a href="../reference/events.html#lifecycle-callbacks">Lifecycle Callbacks</a></li><li id="reference-events-html-listening-to-lifecycle-events" class="toc-item"><a href="../reference/events.html#listening-to-lifecycle-events">Listening to Lifecycle Events</a></li><li id="reference-events-html-implementing-event-listeners" class="toc-item"><a href="../reference/events.html#implementing-event-listeners">Implementing Event Listeners</a><ul><li id="reference-events-html-prepersist" class="toc-item"><a href="../reference/events.html#prepersist">prePersist</a></li><li id="reference-events-html-preload" class="toc-item"><a href="../reference/events.html#preload">preLoad</a></li><li id="reference-events-html-postload" class="toc-item"><a href="../reference/events.html#postload">postLoad</a></li><li id="reference-events-html-preremove" class="toc-item"><a href="../reference/events.html#preremove">preRemove</a></li><li id="reference-events-html-preflush" class="toc-item"><a href="../reference/events.html#preflush">preFlush</a></li><li id="reference-events-html-onflush" class="toc-item"><a href="../reference/events.html#onflush">onFlush</a></li><li id="reference-events-html-postflush" class="toc-item"><a href="../reference/events.html#postflush">postFlush</a></li><li id="reference-events-html-preupdate" class="toc-item"><a href="../reference/events.html#preupdate">preUpdate</a></li><li id="reference-events-html-onclear" class="toc-item"><a href="../reference/events.html#onclear">onClear</a></li><li id="reference-events-html-documentnotfound" class="toc-item"><a href="../reference/events.html#documentnotfound">documentNotFound</a></li><li id="reference-events-html-postupdate-postremove-postpersist" class="toc-item"><a href="../reference/events.html#postupdate-postremove-postpersist">postUpdate, postRemove, postPersist</a></li><li id="reference-events-html-postcollectionload" class="toc-item"><a href="../reference/events.html#postcollectionload">postCollectionLoad</a></li></ul></li><li id="reference-events-html-load-classmetadata-event" class="toc-item"><a href="../reference/events.html#load-classmetadata-event">Load ClassMetadata Event</a></li></ul></li><li id="reference-migrating-schemas-html-migrating-schemas" class="toc-item"><a href="../reference/migrating-schemas.html#migrating-schemas">Migrating Schemas</a><ul><li id="reference-migrating-schemas-html-renaming-a-field" class="toc-item"><a href="../reference/migrating-schemas.html#renaming-a-field">Renaming a Field</a></li><li id="reference-migrating-schemas-html-transforming-data" class="toc-item"><a href="../reference/migrating-schemas.html#transforming-data">Transforming Data</a></li><li id="reference-migrating-schemas-html-moving-fields" class="toc-item"><a href="../reference/migrating-schemas.html#moving-fields">Moving Fields</a></li></ul></li><li id="reference-query-builder-api-html-query-builder-api" class="toc-item"><a href="../reference/query-builder-api.html#query-builder-api">Query Builder API</a><ul><li id="reference-query-builder-api-html-finding-documents" class="toc-item"><a href="../reference/query-builder-api.html#finding-documents">Finding Documents</a></li><li id="reference-query-builder-api-html-creating-a-query-builder" class="toc-item"><a href="../reference/query-builder-api.html#creating-a-query-builder">Creating a Query Builder</a><ul><li id="reference-query-builder-api-html-executing-queries" class="toc-item"><a href="../reference/query-builder-api.html#executing-queries">Executing Queries</a></li><li id="reference-query-builder-api-html-debugging-queries" class="toc-item"><a href="../reference/query-builder-api.html#debugging-queries">Debugging Queries</a></li><li id="reference-query-builder-api-html-getting-single-result" class="toc-item"><a href="../reference/query-builder-api.html#getting-single-result">Getting Single Result</a></li><li id="reference-query-builder-api-html-selecting-fields" class="toc-item"><a href="../reference/query-builder-api.html#selecting-fields">Selecting Fields</a></li><li id="reference-query-builder-api-html-index-hints" class="toc-item"><a href="../reference/query-builder-api.html#index-hints">Index hints</a></li><li id="reference-query-builder-api-html-selecting-distinct-values" class="toc-item"><a href="../reference/query-builder-api.html#selecting-distinct-values">Selecting Distinct Values</a></li><li id="reference-query-builder-api-html-refreshing-documents" class="toc-item"><a href="../reference/query-builder-api.html#refreshing-documents">Refreshing Documents</a></li><li id="reference-query-builder-api-html-fetching-documents-as-read-only" class="toc-item"><a href="../reference/query-builder-api.html#fetching-documents-as-read-only">Fetching Documents as Read-Only</a></li><li id="reference-query-builder-api-html-disabling-hydration" class="toc-item"><a href="../reference/query-builder-api.html#disabling-hydration">Disabling Hydration</a></li><li id="reference-query-builder-api-html-disabling-result-caching" class="toc-item"><a href="../reference/query-builder-api.html#disabling-result-caching">Disabling Result Caching</a></li><li id="reference-query-builder-api-html-limiting-results" class="toc-item"><a href="../reference/query-builder-api.html#limiting-results">Limiting Results</a></li><li id="reference-query-builder-api-html-sorting-results" class="toc-item"><a href="../reference/query-builder-api.html#sorting-results">Sorting Results</a></li><li id="reference-query-builder-api-html-conditional-operators" class="toc-item"><a href="../reference/query-builder-api.html#conditional-operators">Conditional Operators</a></li><li id="reference-query-builder-api-html-text-search" class="toc-item"><a href="../reference/query-builder-api.html#text-search">Text Search</a></li><li id="reference-query-builder-api-html-update-queries" class="toc-item"><a href="../reference/query-builder-api.html#update-queries">Update Queries</a></li></ul></li><li id="reference-query-builder-api-html-updating-multiple-documents" class="toc-item"><a href="../reference/query-builder-api.html#updating-multiple-documents">Updating multiple documents</a></li><li id="reference-query-builder-api-html-modifier-operations" class="toc-item"><a href="../reference/query-builder-api.html#modifier-operations">Modifier Operations</a></li><li id="reference-query-builder-api-html-remove-queries" class="toc-item"><a href="../reference/query-builder-api.html#remove-queries">Remove Queries</a></li></ul></li><li id="reference-aggregation-builder-html-aggregation-builder" class="toc-item"><a href="../reference/aggregation-builder.html#aggregation-builder">Aggregation builder</a><ul><li id="reference-aggregation-builder-html-creating-an-aggregation-builder" class="toc-item"><a href="../reference/aggregation-builder.html#creating-an-aggregation-builder">Creating an Aggregation Builder</a><ul><li id="reference-aggregation-builder-html-adding-pipeline-stages" class="toc-item"><a href="../reference/aggregation-builder.html#adding-pipeline-stages">Adding pipeline stages</a></li><li id="reference-aggregation-builder-html-nesting-expressions" class="toc-item"><a href="../reference/aggregation-builder.html#nesting-expressions">Nesting expressions</a></li><li id="reference-aggregation-builder-html-executing-an-aggregation-pipeline" class="toc-item"><a href="../reference/aggregation-builder.html#executing-an-aggregation-pipeline">Executing an aggregation pipeline</a></li><li id="reference-aggregation-builder-html-hydration" class="toc-item"><a href="../reference/aggregation-builder.html#hydration">Hydration</a></li><li id="reference-aggregation-builder-html-disabling-result-caching" class="toc-item"><a href="../reference/aggregation-builder.html#disabling-result-caching">Disabling Result Caching</a></li></ul></li><li id="reference-aggregation-builder-html-aggregation-pipeline-stages" class="toc-item"><a href="../reference/aggregation-builder.html#aggregation-pipeline-stages">Aggregation pipeline stages</a><ul><li id="reference-aggregation-builder-html-addfields" class="toc-item"><a href="../reference/aggregation-builder.html#addfields">$addFields</a></li><li id="reference-aggregation-builder-html-bucket" class="toc-item"><a href="../reference/aggregation-builder.html#bucket">$bucket</a></li><li id="reference-aggregation-builder-html-bucketauto" class="toc-item"><a href="../reference/aggregation-builder.html#bucketauto">$bucketAuto</a></li><li id="reference-aggregation-builder-html-collstats" class="toc-item"><a href="../reference/aggregation-builder.html#collstats">$collStats</a></li><li id="reference-aggregation-builder-html-count" class="toc-item"><a href="../reference/aggregation-builder.html#count">$count</a></li><li id="reference-aggregation-builder-html-facet" class="toc-item"><a href="../reference/aggregation-builder.html#facet">$facet</a></li><li id="reference-aggregation-builder-html-geonear" class="toc-item"><a href="../reference/aggregation-builder.html#geonear">$geoNear</a></li><li id="reference-aggregation-builder-html-graphlookup" class="toc-item"><a href="../reference/aggregation-builder.html#graphlookup">$graphLookup</a></li><li id="reference-aggregation-builder-html-group" class="toc-item"><a href="../reference/aggregation-builder.html#group">$group</a></li><li id="reference-aggregation-builder-html-indexstats" class="toc-item"><a href="../reference/aggregation-builder.html#indexstats">$indexStats</a></li><li id="reference-aggregation-builder-html-lookup" class="toc-item"><a href="../reference/aggregation-builder.html#lookup">$lookup</a></li><li id="reference-aggregation-builder-html-match" class="toc-item"><a href="../reference/aggregation-builder.html#match">$match</a></li><li id="reference-aggregation-builder-html-out" class="toc-item"><a href="../reference/aggregation-builder.html#out">$out</a></li><li id="reference-aggregation-builder-html-project" class="toc-item"><a href="../reference/aggregation-builder.html#project">$project</a></li><li id="reference-aggregation-builder-html-redact" class="toc-item"><a href="../reference/aggregation-builder.html#redact">$redact</a></li><li id="reference-aggregation-builder-html-replaceroot" class="toc-item"><a href="../reference/aggregation-builder.html#replaceroot">$replaceRoot</a></li><li id="reference-aggregation-builder-html-sample" class="toc-item"><a href="../reference/aggregation-builder.html#sample">$sample</a></li><li id="reference-aggregation-builder-html-sort-limit-and-skip" class="toc-item"><a href="../reference/aggregation-builder.html#sort-limit-and-skip">$sort, $limit and $skip</a></li><li id="reference-aggregation-builder-html-sortbycount" class="toc-item"><a href="../reference/aggregation-builder.html#sortbycount">$sortByCount</a></li><li id="reference-aggregation-builder-html-unwind" class="toc-item"><a href="../reference/aggregation-builder.html#unwind">$unwind</a></li></ul></li></ul></li><li id="reference-geospatial-queries-html-geospatial-queries" class="toc-item"><a href="../reference/geospatial-queries.html#geospatial-queries">Geospatial Queries</a><ul><li id="reference-geospatial-queries-html-mapping" class="toc-item"><a href="../reference/geospatial-queries.html#mapping">Mapping</a></li><li id="reference-geospatial-queries-html-near-query" class="toc-item"><a href="../reference/geospatial-queries.html#near-query">Near Query</a></li></ul></li><li id="reference-find-and-update-html-find-and-modify" class="toc-item"><a href="../reference/find-and-update.html#find-and-modify">Find and Modify</a><ul><li id="reference-find-and-update-html-update" class="toc-item"><a href="../reference/find-and-update.html#update">Update</a></li><li id="reference-find-and-update-html-remove" class="toc-item"><a href="../reference/find-and-update.html#remove">Remove</a></li></ul></li><li id="reference-upserting-documents-html-upserting-documents" class="toc-item"><a href="../reference/upserting-documents.html#upserting-documents">Upserting Documents</a></li><li id="reference-filters-html-filters" class="toc-item"><a href="../reference/filters.html#filters">Filters</a><ul><li id="reference-filters-html-example-filter-class" class="toc-item"><a href="../reference/filters.html#example-filter-class">Example filter class</a></li><li id="reference-filters-html-configuration" class="toc-item"><a href="../reference/filters.html#configuration">Configuration</a></li><li id="reference-filters-html-disabling-enabling-filters-and-setting-parameters" class="toc-item"><a href="../reference/filters.html#disabling-enabling-filters-and-setting-parameters">Disabling/Enabling Filters and Setting Parameters</a></li></ul></li><li id="reference-priming-references-html-priming-references" class="toc-item"><a href="../reference/priming-references.html#priming-references">Priming References</a><ul><li id="reference-priming-references-html-query-builder" class="toc-item"><a href="../reference/priming-references.html#query-builder">Query Builder</a></li><li id="reference-priming-references-html-inverse-references" class="toc-item"><a href="../reference/priming-references.html#inverse-references">Inverse references</a></li><li id="reference-priming-references-html-primer-callback" class="toc-item"><a href="../reference/priming-references.html#primer-callback">Primer Callback</a></li></ul></li><li id="reference-capped-collections-html-capped-collections" class="toc-item"><a href="../reference/capped-collections.html#capped-collections">Capped Collections</a><ul><li id="reference-capped-collections-html-mapping" class="toc-item"><a href="../reference/capped-collections.html#mapping">Mapping</a></li><li id="reference-capped-collections-html-creating" class="toc-item"><a href="../reference/capped-collections.html#creating">Creating</a></li></ul></li><li id="reference-storage-strategies-html-storage-strategies" class="toc-item"><a href="../reference/storage-strategies.html#storage-strategies">Storage Strategies</a><ul><li id="reference-storage-strategies-html-increment" class="toc-item"><a href="../reference/storage-strategies.html#increment">increment</a></li><li id="reference-storage-strategies-html-addtoset" class="toc-item"><a href="../reference/storage-strategies.html#addtoset">addToSet</a></li><li id="reference-storage-strategies-html-set" class="toc-item"><a href="../reference/storage-strategies.html#set">set</a></li><li id="reference-storage-strategies-html-setarray" class="toc-item"><a href="../reference/storage-strategies.html#setarray">setArray</a></li><li id="reference-storage-strategies-html-pushall" class="toc-item"><a href="../reference/storage-strategies.html#pushall">pushAll</a></li><li id="reference-storage-strategies-html-atomicset" class="toc-item"><a href="../reference/storage-strategies.html#atomicset">atomicSet</a></li><li id="reference-storage-strategies-html-atomicsetarray" class="toc-item"><a href="../reference/storage-strategies.html#atomicsetarray">atomicSetArray</a></li></ul></li><li id="reference-custom-collections-html-custom-collections" class="toc-item"><a href="../reference/custom-collections.html#custom-collections">Custom Collections</a><ul><li id="reference-custom-collections-html-custom-collection-classes" class="toc-item"><a href="../reference/custom-collections.html#custom-collection-classes">Custom Collection Classes</a></li><li id="reference-custom-collections-html-taking-control-of-the-collection-s-constructor" class="toc-item"><a href="../reference/custom-collections.html#taking-control-of-the-collection-s-constructor">Taking Control of the Collection's Constructor</a></li></ul></li><li id="reference-sharding-html-sharding" class="toc-item"><a href="../reference/sharding.html#sharding">Sharding</a></li><li id="reference-transactions-and-concurrency-html-transactions-and-concurrency" class="toc-item"><a href="../reference/transactions-and-concurrency.html#transactions-and-concurrency">Transactions and Concurrency</a><ul><li id="reference-transactions-and-concurrency-html-transactions" class="toc-item"><a href="../reference/transactions-and-concurrency.html#transactions">Transactions</a><ul><li id="reference-transactions-and-concurrency-html-limitation" class="toc-item"><a href="../reference/transactions-and-concurrency.html#limitation">Limitation</a></li><li id="reference-transactions-and-concurrency-html-workaround" class="toc-item"><a href="../reference/transactions-and-concurrency.html#workaround">Workaround</a></li></ul></li><li id="reference-transactions-and-concurrency-html-concurrency" class="toc-item"><a href="../reference/transactions-and-concurrency.html#concurrency">Concurrency</a><ul><li id="reference-transactions-and-concurrency-html-optimistic-locking" class="toc-item"><a href="../reference/transactions-and-concurrency.html#optimistic-locking">Optimistic Locking</a></li><li id="reference-transactions-and-concurrency-html-pessimistic-locking" class="toc-item"><a href="../reference/transactions-and-concurrency.html#pessimistic-locking">Pessimistic Locking</a></li></ul></li></ul></li><li id="reference-best-practices-html-best-practices" class="toc-item"><a href="../reference/best-practices.html#best-practices">Best Practices</a><ul><li id="reference-best-practices-html-constrain-relationships-as-much-as-possible" class="toc-item"><a href="../reference/best-practices.html#constrain-relationships-as-much-as-possible">Constrain relationships as much as possible</a></li><li id="reference-best-practices-html-use-events-judiciously" class="toc-item"><a href="../reference/best-practices.html#use-events-judiciously">Use events judiciously</a></li><li id="reference-best-practices-html-use-cascades-judiciously" class="toc-item"><a href="../reference/best-practices.html#use-cascades-judiciously">Use cascades judiciously</a></li><li id="reference-best-practices-html-don-t-use-special-characters" class="toc-item"><a href="../reference/best-practices.html#don-t-use-special-characters">Don't use special characters</a></li><li id="reference-best-practices-html-initialize-collections-in-the-constructor" class="toc-item"><a href="../reference/best-practices.html#initialize-collections-in-the-constructor">Initialize collections in the constructor</a></li></ul></li><li id="reference-change-tracking-policies-html-change-tracking-policies" class="toc-item"><a href="../reference/change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a><ul><li id="reference-change-tracking-policies-html-deferred-implicit" class="toc-item"><a href="../reference/change-tracking-policies.html#deferred-implicit">Deferred Implicit</a></li><li id="reference-change-tracking-policies-html-deferred-explicit" class="toc-item"><a href="../reference/change-tracking-policies.html#deferred-explicit">Deferred Explicit</a></li><li id="reference-change-tracking-policies-html-notify" class="toc-item"><a href="../reference/change-tracking-policies.html#notify">Notify</a></li></ul></li></ul></div>
</div>
<div class="toc-section"><h2 class="toc-header">Cookbook</h2>
<div class="toc"><ul><li id="blending-orm-and-mongodb-odm-html-blending-the-orm-and-mongodb-odm" class="toc-item"><a href="blending-orm-and-mongodb-odm.html#blending-the-orm-and-mongodb-odm">Blending the ORM and MongoDB ODM</a><ul><li id="blending-orm-and-mongodb-odm-html-define-product" class="toc-item"><a href="blending-orm-and-mongodb-odm.html#define-product">Define Product</a></li><li id="blending-orm-and-mongodb-odm-html-define-entity" class="toc-item"><a href="blending-orm-and-mongodb-odm.html#define-entity">Define Entity</a></li><li id="blending-orm-and-mongodb-odm-html-event-subscriber" class="toc-item"><a href="blending-orm-and-mongodb-odm.html#event-subscriber">Event Subscriber</a></li><li id="blending-orm-and-mongodb-odm-html-working-with-products-and-orders" class="toc-item"><a href="blending-orm-and-mongodb-odm.html#working-with-products-and-orders">Working with Products and Orders</a></li></ul></li><li id="soft-delete-extension-html-soft-delete-extension" class="toc-item"><a href="soft-delete-extension.html#soft-delete-extension">Soft Delete Extension</a><ul><li id="soft-delete-extension-html-installation" class="toc-item"><a href="soft-delete-extension.html#installation">Installation</a></li><li id="soft-delete-extension-html-setup" class="toc-item"><a href="soft-delete-extension.html#setup">Setup</a></li><li id="soft-delete-extension-html-softdeleteable-interface" class="toc-item"><a href="soft-delete-extension.html#softdeleteable-interface">SoftDeleteable Interface</a></li><li id="soft-delete-extension-html-example-implementation" class="toc-item"><a href="soft-delete-extension.html#example-implementation">Example Implementation</a></li><li id="soft-delete-extension-html-usage" class="toc-item"><a href="soft-delete-extension.html#usage">Usage</a></li><li id="soft-delete-extension-html-events" class="toc-item"><a href="soft-delete-extension.html#events">Events</a></li><li id="soft-delete-extension-html-cascading-soft-deletes" class="toc-item"><a href="soft-delete-extension.html#cascading-soft-deletes">Cascading Soft Deletes</a></li></ul></li><li id="simple-search-engine-html-simple-search-engine" class="toc-item"><a href="simple-search-engine.html#simple-search-engine">Simple Search Engine</a><ul><li id="simple-search-engine-html-sample-model-product" class="toc-item"><a href="simple-search-engine.html#sample-model-product">Sample Model: Product</a></li><li id="simple-search-engine-html-working-with-keywords" class="toc-item"><a href="simple-search-engine.html#working-with-keywords">Working with Keywords</a></li><li id="simple-search-engine-html-searching-keywords" class="toc-item"><a href="simple-search-engine.html#searching-keywords">Searching Keywords</a><ul><li id="simple-search-engine-html-user-input" class="toc-item"><a href="simple-search-engine.html#user-input">User Input</a></li></ul></li><li id="simple-search-engine-html-embedded-documents" class="toc-item"><a href="simple-search-engine.html#embedded-documents">Embedded Documents</a><ul><li id="simple-search-engine-html-definition" class="toc-item"><a href="simple-search-engine.html#definition">Definition</a></li></ul></li></ul></li><li id="implementing-wakeup-or-clone-html-implementing-wakeup-or-clone" class="toc-item"><a href="implementing-wakeup-or-clone.html#implementing-wakeup-or-clone">Implementing Wakeup or Clone</a><ul><li id="implementing-wakeup-or-clone-html-safely-implementing-wakeup" class="toc-item"><a href="implementing-wakeup-or-clone.html#safely-implementing-wakeup">Safely implementing \_\_wakeup</a></li><li id="implementing-wakeup-or-clone-html-safely-implementing-clone" class="toc-item"><a href="implementing-wakeup-or-clone.html#safely-implementing-clone">Safely implementing \_\_clone</a></li><li id="implementing-wakeup-or-clone-html-summary" class="toc-item"><a href="implementing-wakeup-or-clone.html#summary">Summary</a></li></ul></li><li id="implementing-the-notify-changetracking-policy-html-implementing-the-notify-changetracking-policy" class="toc-item"><a href="implementing-the-notify-changetracking-policy.html#implementing-the-notify-changetracking-policy">Implementing the Notify ChangeTracking Policy</a><ul><li id="implementing-the-notify-changetracking-policy-html-implementing-notifypropertychanged" class="toc-item"><a href="implementing-the-notify-changetracking-policy.html#implementing-notifypropertychanged">Implementing NotifyPropertyChanged</a></li></ul></li><li id="validation-of-documents-html-validation-of-documents" class="toc-item"><a href="validation-of-documents.html#validation-of-documents">Validation of Documents</a><ul><li id="validation-of-documents-html-validation-of-documents-application-side" class="toc-item"><a href="validation-of-documents.html#validation-of-documents-application-side">Validation of Documents - Application Side</a></li><li id="validation-of-documents-html-validation-of-documents-database-side" class="toc-item"><a href="validation-of-documents.html#validation-of-documents-database-side">Validation of Documents - Database Side</a></li></ul></li><li id="mapping-classes-to-orm-and-odm-html-mapping-classes-to-the-orm-and-odm" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#mapping-classes-to-the-orm-and-odm">Mapping Classes to the ORM and ODM</a><ul><li id="mapping-classes-to-orm-and-odm-html-test-subject" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#test-subject">Test Subject</a></li><li id="mapping-classes-to-orm-and-odm-html-mapping-information" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#mapping-information">Mapping Information</a><ul><li id="mapping-classes-to-orm-and-odm-html-orm" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#orm">ORM</a></li><li id="mapping-classes-to-orm-and-odm-html-mongodb-odm" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#mongodb-odm">MongoDB ODM</a></li></ul></li><li id="mapping-classes-to-orm-and-odm-html-repository-classes" class="toc-item"><a href="mapping-classes-to-orm-and-odm.html#repository-classes">Repository Classes</a></li></ul></li><li id="implementing-array-access-for-domain-objects-html-implementing-arrayaccess-for-domain-objects" class="toc-item"><a href="implementing-array-access-for-domain-objects.html#implementing-arrayaccess-for-domain-objects">Implementing ArrayAccess for Domain Objects</a><ul><li id="implementing-array-access-for-domain-objects-html-option-1" class="toc-item"><a href="implementing-array-access-for-domain-objects.html#option-1">Option 1</a></li><li id="implementing-array-access-for-domain-objects-html-option-2" class="toc-item"><a href="implementing-array-access-for-domain-objects.html#option-2">Option 2</a></li><li id="implementing-array-access-for-domain-objects-html-read-only" class="toc-item"><a href="implementing-array-access-for-domain-objects.html#read-only">Read-only</a></li></ul></li><li id="resolve-target-document-listener-html-keeping-your-modules-independent" class="toc-item"><a href="resolve-target-document-listener.html#keeping-your-modules-independent">Keeping Your Modules Independent</a><ul><li id="resolve-target-document-listener-html-background" class="toc-item"><a href="resolve-target-document-listener.html#background">Background</a></li><li id="resolve-target-document-listener-html-configuration" class="toc-item"><a href="resolve-target-document-listener.html#configuration">Configuration</a></li><li id="resolve-target-document-listener-html-final-thoughts" class="toc-item"><a href="resolve-target-document-listener.html#final-thoughts">Final Thoughts</a></li></ul></li></ul></div>
</div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "MongoDB ODM",
            "item": "https://www.doctrine-project.org/projects/mongodb-odm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.3/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Validation of Documents",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.3/cookbook/validation-of-documents.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.3/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Validation of Documents</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-odm/en/2.3/cookbook/validation-of-documents.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.3.3
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-odm/en/latest/cookbook/validation-of-documents.html">
                                                    2.6

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.5/cookbook/validation-of-documents.html">
                                                    2.5.2

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.4/cookbook/validation-of-documents.html">2.4</a>
                                                                                            
                                                <a class="dropdown-item active" href="/projects/doctrine-mongodb-odm/en/2.3/cookbook/validation-of-documents.html">2.3</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.2/cookbook/validation-of-documents.html">2.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.1/cookbook/validation-of-documents.html">2.1</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.0/cookbook/validation-of-documents.html">2.0</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.3/cookbook/validation-of-documents.html">1.3</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.2/cookbook/validation-of-documents.html">1.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.1/cookbook/validation-of-documents.html">1.1</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/1.0/cookbook/validation-of-documents.html">1.0</a>
                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="validation-of-documents" name="validation-of-documents"></a><h1 class="section-header"><a href="#validation-of-documents">Validation of Documents<i class="fas fa-link"></i></a></h1>
<div class="section"><a class="section-anchor" id="validation-of-documents-application-side" name="validation-of-documents-application-side"></a><h2 class="section-header"><a href="#validation-of-documents-application-side">Validation of Documents - Application Side<i class="fas fa-link"></i></a></h2>
<div class="alert section-author bg-light text-dark border"><p class="author font-weight-bold"><i class="fas fa-pencil-alt"></i> Written by <a href="mailto:kontakt@beberlei.de">Benjamin Eberlei</a></p></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>You don't need to validate your documents in the lifecycle
events. Its only one of many options. Of course you can also
perform validations in value setters or any other method of your
documents that are used in your code.</p>
</td></tr></table></div>
<p>Documents can register lifecycle event methods with Doctrine that
are called on different occasions. For validation we would need to
hook into the events called before persisting and updating. Even
though we don't support validation out of the box, the
implementation is even simpler than in Doctrine 1 and you will get
the additional benefit of being able to re-use your validation in
any other part of your domain.</p>
<p>Say we have an <code>Order</code> with several <code>OrderLine</code> instances. We
never want to allow any customer to order for a larger sum than he
is allowed to:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d05f66d1be95d61a3e40b1e53f165968edbf2aa3"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d05f66d1be95d61a3e40b1e53f165968edbf2aa3"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-1" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertCustomerAllowedBuying</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        $orderLimit = <span class="hljs-keyword">$this</span>-&gt;customer-&gt;getOrderLimit();

        $amount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">$this</span>-&gt;orderLines <span class="hljs-keyword">AS</span> $line) {
            $amount += $line-&gt;getAmount();
        }

        <span class="hljs-keyword">if</span> ($amount &gt; $orderLimit) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> CustomerOrderLimitExceededException();
        }
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-2" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-3" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-4" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-5" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-6" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-7" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-8" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-9" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-10" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-11" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-12" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-13" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-14" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-15" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-16" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-17" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-18" class="line-number-anchor" /><a href="#line-number-d05f66d1be95d61a3e40b1e53f165968edbf2aa3-18">18</a></td></tr></table></div></code></pre>
<p>Now this is some pretty important piece of business logic in your
code, enforcing it at any time is important so that customers with
a unknown reputation don't owe your business too much money.</p>
<p>We can enforce this constraint in any of the metadata drivers.
First Annotations:</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="22a5e614f18dbf8efa085c457d2cae83c94db831"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="22a5e614f18dbf8efa085c457d2cae83c94db831"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-1" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@Document</span> <span class="hljs-doctag">@HasLifecycleCallbacks</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@PrePersist</span> <span class="hljs-doctag">@PreUpdate</span> */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertCustomerAllowedBuying</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span> </span>{}
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-2" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-3" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-4" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-5" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-6" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-7" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-8" class="line-number-anchor" /><a href="#line-number-22a5e614f18dbf8efa085c457d2cae83c94db831-8">8</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="cff01f77f9050e9543f5e25ca151a1a0b46a866e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="cff01f77f9050e9543f5e25ca151a1a0b46a866e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-1" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Order"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">lifecycle-callbacks</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">lifecycle-callback</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"prePersist"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"assertCustomerallowedBuying"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">lifecycle-callback</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"preUpdate"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"assertCustomerallowedBuying"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">lifecycle-callbacks</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-2" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-3" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-4" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-5" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-6" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-7" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-8" class="line-number-anchor" /><a href="#line-number-cff01f77f9050e9543f5e25ca151a1a0b46a866e-8">8</a></td></tr></table></div></code></pre></div></li></ul></div>
<p>Now validation is performed whenever you call
<code>DocumentManager#persist($order)</code> or when you call
<code>DocumentManager#flush()</code> and an order is about to be updated. Any
Exception that happens in the lifecycle callbacks will be cached by
the DocumentManager and the current transaction is rolled back.</p>
<p>Of course you can do any type of primitive checks, not null,
email-validation, string size, integer and date ranges in your
validation callbacks.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a3699260fa93590bbc06f23abc36feb4b440e381"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a3699260fa93590bbc06f23abc36feb4b440e381"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-1" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-1">1</a></td><td class="code-line" rowspan="21"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">/** <span class="hljs-doctag">@Document</span> <span class="hljs-doctag">@HasLifecycleCallbacks</span> */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span>
</span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@PrePersist</span> <span class="hljs-doctag">@PreUpdate</span> */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">$this</span>-&gt;plannedShipDate <span class="hljs-keyword">instanceof</span> DateTime)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidateException();
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;plannedShipDate-&gt;format(<span class="hljs-string">'U'</span>) &lt; time()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidateException();
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;customer === <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> OrderRequiresCustomerException();
        }
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-2" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-3" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-4" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-5" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-6" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-7" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-8" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-9" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-10" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-11" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-12" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-13" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-14" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-15" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-16" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-17" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-18" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-19" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-20" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3699260fa93590bbc06f23abc36feb4b440e381-21" class="line-number-anchor" /><a href="#line-number-a3699260fa93590bbc06f23abc36feb4b440e381-21">21</a></td></tr></table></div></code></pre>
<p>What is nice about lifecycle events is, you can also re-use the
methods at other places in your domain, for example in combination
with your form library. Additionally there is no limitation in the
number of methods you register on one particular event, i.e. you
can register multiple methods for validation in PrePersist or
PreUpdate or mix and share them in any combinations between those
two events.</p>
<p>There is no limit to what you can and can't validate in
PrePersist and PreUpdate as long as you don't create new document
instances. This was already discussed in the previous blog post on
the Versionable extension, which requires another type of event
called onFlush.</p>
<p>Further readings: <a href="../reference/events.html">Lifecycle Events</a></p>
</div>
<div class="section"><a class="section-anchor" id="validation-of-documents-database-side" name="validation-of-documents-database-side"></a><h2 class="section-header"><a href="#validation-of-documents-database-side">Validation of Documents - Database Side<i class="fas fa-link"></i></a></h2>
<div class="alert section-author bg-light text-dark border"><p class="author font-weight-bold"><i class="fas fa-pencil-alt"></i> Written by <a href="mailto:alexandre-abrioux@users.noreply.github.com">Alexandre Abrioux</a></p></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>This feature has been introduced in version 2.3.0</p>
</td></tr></table></div>
<p>MongoDB â‰¥ 3.6 offers the capability to validate documents during
insertions and updates through a schema associated to the collection
(cf. <a href="https://docs.mongodb.com/manual/core/schema-validation/">MongoDB documentation</a>).</p>
<p>Doctrine MongoDB ODM now provides a way to take advantage of this functionality
thanks to the new <a href="../reference/annotations-reference.html#validation">@Validation</a>
annotation and its properties (also available with XML mapping):</p>
<ul><li class="dash">
  <code>validator</code> - The schema that will be used to validate documents.
  It is a string representing a BSON document under the
  <a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst">Extended JSON specification</a>.</li>
<li class="dash">
  <code>action</code> - The behavior followed by MongoDB to handle documents that
  violate the validation rules.</li>
<li class="dash">
  <code>level</code> - The threshold used by MongoDB to filter operations that
  will get validated.</li>
</ul>

<p>Once defined, those options will be added to the collection after running
the <code>odm:schema:create</code> or <code>odm:schema:update</code> command.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-1" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-1">1</a></td><td class="code-line" rowspan="51"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Documents</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">ODM</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ODM</span>\Document
 * <span class="hljs-doctag">@ODM</span>\Validation(
 *     validator=SchemaValidated::VALIDATOR,
 *     action=ClassMetadata::SCHEMA_VALIDATION_ACTION_WARN,
 *     level=ClassMetadata::SCHEMA_VALIDATION_LEVEL_MODERATE,
 * )
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SchemaValidated</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> VALIDATOR = <span class="hljs-string">&lt;&lt;&lt;'EOT'
{
    "<span class="hljs-subst">$jsonSchema</span>": {
        "required": ["name"],
        "properties": {
            "name": {
                "bsonType": "string",
                "description": "must be a string and is required"
            }
        }
    },
    "<span class="hljs-subst">$or</span>": [
        { "phone": { "<span class="hljs-subst">$type</span>": "string" } },
        { "email": { "<span class="hljs-subst">$regex</span>": { "<span class="hljs-subst">$regularExpression</span>" : { "pattern": "@mongodb\\.com$", "options": "" } } } },
        { "status": { "<span class="hljs-subst">$in</span>": [ "Unknown", "Incomplete" ] } }
    ]
}
EOT;</span>

    <span class="hljs-comment">/** <span class="hljs-doctag">@ODM</span>\Id */</span>
    <span class="hljs-keyword">private</span> $id;

    <span class="hljs-comment">/** <span class="hljs-doctag">@ODM</span>\Field(type="string") */</span>
    <span class="hljs-keyword">private</span> $name;

    <span class="hljs-comment">/** <span class="hljs-doctag">@ODM</span>\Field(type="string") */</span>
    <span class="hljs-keyword">private</span> $phone;

    <span class="hljs-comment">/** <span class="hljs-doctag">@ODM</span>\Field(type="string") */</span>
    <span class="hljs-keyword">private</span> $email;

    <span class="hljs-comment">/** <span class="hljs-doctag">@ODM</span>\Field(type="string") */</span>
    <span class="hljs-keyword">private</span> $status;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-2" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-3" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-4" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-5" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-6" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-7" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-8" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-9" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-10" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-11" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-12" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-13" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-14" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-15" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-16" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-17" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-18" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-19" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-20" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-21" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-22" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-23" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-24" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-25" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-26" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-27" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-28" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-29" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-30" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-31" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-32" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-33" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-34" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-35" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-36" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-37" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-38" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-39" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-40" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-41" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-42" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-43" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-44" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-44">44</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-45" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-45">45</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-46" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-46">46</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-47" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-47">47</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-48" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-48">48</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-49" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-49">49</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-50" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-50">50</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-51" class="line-number-anchor" /><a href="#line-number-1cfe56a2af749e220a4a5bef2ab96f8ef7cae2de-51">51</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2db7a9e1ddae75c0107de05cb75cd334e048c33d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2db7a9e1ddae75c0107de05cb75cd334e048c33d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-1" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-1">1</a></td><td class="code-line" rowspan="27"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mongo-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping"</span>
                  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
                  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping
                  http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"SchemaValidated"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">schema-validation</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"warn"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"moderate"</span>&gt;</span>
            {
                "$jsonSchema": {
                    "required": ["name"],
                    "properties": {
                        "name": {
                            "bsonType": "string",
                            "description": "must be a string and is required"
                        }
                    }
                },
                "$or": [
                    { "phone": { "$type": "string" } },
                    { "email": { "$regex": { "$regularExpression" : { "pattern": "@mongodb\\.com$", "options": "" } } } },
                    { "status": { "$in": [ "Unknown", "Incomplete" ] } }
                ]
            }
        <span class="hljs-tag">&lt;/<span class="hljs-name">schema-validation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mongo-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-2" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-3" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-4" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-5" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-6" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-7" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-8" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-9" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-10" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-11" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-12" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-13" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-14" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-15" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-16" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-17" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-18" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-19" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-20" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-21" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-22" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-23" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-24" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-25" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-26" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-27" class="line-number-anchor" /><a href="#line-number-2db7a9e1ddae75c0107de05cb75cd334e048c33d-27">27</a></td></tr></table></div></code></pre></div></li></ul></div>
<p>Please refer to the <a href="../reference/annotations-reference.html#document">@Validation</a> annotation reference
for more details on how to use this feature.</p>

</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?161e55"
                            integrity="sha384-ZQ6qlvTBtfiU76YxxALyPv3/HvMipQbIgpk6risK+vIGd/IMwfA2/e+ztgwPiLOj"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'mongodb-odm';
            var versionSlug = '2.3';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search MongoDB ODM 2.3'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
