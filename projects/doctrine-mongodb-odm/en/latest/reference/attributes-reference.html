<!DOCTYPE html>
<html>
    <head>
        <title>        Attributes Reference - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine MongoDB Object Document Mapper Documentation: Attributes Reference ">

        <meta name="keywords" content="                    php,mongodb,odm,data,mapper,mapping,object,documentation,attributes,reference
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/2.14/reference/attributes-reference.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?e935b6"
                        integrity="sha384-0+XwQ7PUNkbj10v4XDjjp7VJzfahtyhEtNyFDNmWQaR7ohGXNow7qYgClWx6rQoS"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/attributes-reference.html" />
        <meta property="og:title" content="        Attributes Reference - Doctrine MongoDB Object Document Mapper (MongoDB ODM)
    " />
        <meta property="og:description" content="Doctrine MongoDB Object Document Mapper Documentation: Attributes Reference " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine MongoDB Object Document Mapper",
            "description": "Attributes Reference",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/mongodb-odm/edit/2.15.x/docs/en/reference/attributes-reference.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
            <p class="caption">Tutorials</p>
    <ul class="menu-level">
    </ul>
</div><div class="toc">
            <p class="caption">Reference</p>
    <ul class="menu-level">
    <li class="toc-item">
    <a href="introduction.html#introduction">Introduction</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="introduction.html#what-is-doctrine-mongodb-odm">What is Doctrine MongoDB ODM?</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#features-overview">Features Overview</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#example">Example</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#setup">Setup</a>


</li>
            <li class="toc-item">
    <a href="introduction.html#providing-a-custom-client">Providing a custom client</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="architecture.html#documents">Documents</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="architecture.html#document-states">Document states</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#persistent-fields">Persistent fields</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#serializing-documents">Serializing documents</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="architecture.html#the-documentmanager">The DocumentManager</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="architecture.html#transactional-write-behind">Transactional write-behind</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#the-unit-of-work">The Unit of Work</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="console-commands.html#console-commands">Console Commands</a>


</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="basic-mapping.html#mapping-drivers">Mapping Drivers</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#introduction-to-attributes">Introduction to Attributes</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#persistent-classes">Persistent classes</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#doctrine-mapping-types">Doctrine Mapping Types</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#php-types-mapping">PHP Types Mapping</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#property-mapping">Property Mapping</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#identifiers">Identifiers</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#fields">Fields</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#date-fields">Date Fields</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#multiple-document-types-in-a-collection">Multiple Document Types in a Collection</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="custom-mapping-types.html#custom-mapping-types">Custom Mapping Types</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="custom-mapping-types.html#date-example-mapping-datetimeimmutable-with-timezone">Date Example: Mapping DateTimeImmutable with Timezone</a>


</li>
            <li class="toc-item">
    <a href="custom-mapping-types.html#custom-type-example-mapping-a-money-value-object">Custom Type Example: Mapping a Money Value Object</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="reference-mapping.html#reference-mapping">Reference Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="reference-mapping.html#collections">Collections</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#reference-one">Reference One</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#reference-many">Reference Many</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#mixing-document-types">Mixing Document Types</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#storing-references">Storing References</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#cascading-operations">Cascading Operations</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#orphan-removal">Orphan Removal</a>


</li>
            <li class="toc-item">
    <a href="reference-mapping.html#storing-empty-arrays">Storing Empty Arrays</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="bidirectional-references.html#bi-directional-references">Bi-Directional References</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="bidirectional-references.html#owning-and-inverse-sides">Owning and Inverse Sides</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="bidirectional-references.html#one-to-many">One to Many</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="bidirectional-references.html#other-examples">Other Examples</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="bidirectional-references.html#one-to-one">One to One</a>


</li>
            <li class="toc-item">
    <a href="bidirectional-references.html#self-referencing-many-to-many">Self-Referencing Many to Many</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="complex-references.html#complex-references">Complex References</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="complex-references.html#basic-example">Basic Example</a>


</li>
            <li class="toc-item">
    <a href="complex-references.html#criteria-example">criteria Example</a>


</li>
            <li class="toc-item">
    <a href="complex-references.html#repositorymethod-example">repositoryMethod Example</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="indexes.html#indexes">Indexes</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="indexes.html#index-options">Index Options</a>


</li>
            <li class="toc-item">
    <a href="indexes.html#unique-index">Unique Index</a>


</li>
            <li class="toc-item">
    <a href="indexes.html#embedded-indexes">Embedded Indexes</a>


</li>
            <li class="toc-item">
    <a href="indexes.html#geospatial-indexing">Geospatial Indexing</a>


</li>
            <li class="toc-item">
    <a href="indexes.html#partial-indexes">Partial indexes</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="search-indexes.html#search-indexes">Search Indexes</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="search-indexes.html#search-index-options">Search Index Options</a>


</li>
            <li class="toc-item">
    <a href="search-indexes.html#static-mapping">Static Mapping</a>


</li>
            <li class="toc-item">
    <a href="search-indexes.html#dynamic-mapping">Dynamic Mapping</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="inheritance-mapping.html#mapped-superclasses">Mapped Superclasses</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#single-collection-inheritance">Single Collection Inheritance</a>


</li>
            <li class="toc-item">
    <a href="inheritance-mapping.html#collection-per-class-inheritance">Collection Per Class Inheritance</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="embedded-mapping.html#embedded-mapping">Embedded Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="embedded-mapping.html#embed-one">Embed One</a>


</li>
            <li class="toc-item">
    <a href="embedded-mapping.html#embed-many">Embed Many</a>


</li>
            <li class="toc-item">
    <a href="embedded-mapping.html#mixing-document-types">Mixing Document Types</a>


</li>
            <li class="toc-item">
    <a href="embedded-mapping.html#cascading-operations">Cascading Operations</a>


</li>
            <li class="toc-item">
    <a href="embedded-mapping.html#storing-empty-arrays-in-embedded-documents">Storing Empty Arrays in Embedded Documents</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="trees.html#trees">Trees</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="trees.html#full-tree-in-single-document">Full Tree in Single Document</a>


</li>
            <li class="toc-item">
    <a href="trees.html#parent-reference">Parent Reference</a>


</li>
            <li class="toc-item">
    <a href="trees.html#child-reference">Child Reference</a>


</li>
            <li class="toc-item">
    <a href="trees.html#array-of-ancestors">Array of Ancestors</a>


</li>
            <li class="toc-item">
    <a href="trees.html#materialized-paths">Materialized Paths</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="storing-files-with-gridfs.html#storing-files-with-gridfs">Storing Files with GridFS</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="storing-files-with-gridfs.html#about-gridfs">About GridFS</a>


</li>
            <li class="toc-item">
    <a href="storing-files-with-gridfs.html#mapping-documents-as-gridfs-files">Mapping documents as GridFS files</a>


</li>
            <li class="toc-item">
    <a href="storing-files-with-gridfs.html#inserting-files-into-gridfs-buckets">Inserting files into GridFS buckets</a>


</li>
            <li class="toc-item">
    <a href="storing-files-with-gridfs.html#reading-files-from-gridfs-buckets">Reading files from GridFS buckets</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="xml-mapping.html#simplified-xml-driver">Simplified XML Driver</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="xml-mapping.html#example">Example</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#reference">Reference</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="xml-mapping.html#lock">Lock</a>


</li>
            <li class="toc-item">
    <a href="xml-mapping.html#version">Version</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#attributes-reference">Attributes Reference</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#alsoload">#[AlsoLoad]</a>


</li>
            <li class="toc-item">
    <a href="#changetrackingpolicy">#[ChangeTrackingPolicy]</a>


</li>
            <li class="toc-item">
    <a href="#defaultdiscriminatorvalue">#[DefaultDiscriminatorValue]</a>


</li>
            <li class="toc-item">
    <a href="#discriminatorfield">#[DiscriminatorField]</a>


</li>
            <li class="toc-item">
    <a href="#discriminatormap">#[DiscriminatorMap]</a>


</li>
            <li class="toc-item">
    <a href="#document">#[Document]</a>


</li>
            <li class="toc-item">
    <a href="#embedmany">#[EmbedMany]</a>


</li>
            <li class="toc-item">
    <a href="#embedone">#[EmbedOne]</a>


</li>
            <li class="toc-item">
    <a href="#embeddeddocument">#[EmbeddedDocument]</a>


</li>
            <li class="toc-item">
    <a href="#encrypt">#[Encrypt]</a>


</li>
            <li class="toc-item">
    <a href="#field">#[Field]</a>


</li>
            <li class="toc-item">
    <a href="#file">#[File]</a>


</li>
            <li class="toc-item">
    <a href="#file-chunksize">#[FileChunkSize]</a>


</li>
            <li class="toc-item">
    <a href="#file-filename">#[FileFilename]</a>


</li>
            <li class="toc-item">
    <a href="#file-length">#[FileLength]</a>


</li>
            <li class="toc-item">
    <a href="#file-metadata">#[FileMetadata]</a>


</li>
            <li class="toc-item">
    <a href="#file-uploaddate">#[FileUploadDate]</a>


</li>
            <li class="toc-item">
    <a href="#haslifecyclecallbacks">#[HasLifecycleCallbacks]</a>


</li>
            <li class="toc-item">
    <a href="#id">#[Id]</a>


</li>
            <li class="toc-item">
    <a href="#index">#[Index]</a>


</li>
            <li class="toc-item">
    <a href="#indexes">#[Indexes]</a>


</li>
            <li class="toc-item">
    <a href="#inheritancetype">#[InheritanceType]</a>


</li>
            <li class="toc-item">
    <a href="#lock">#[Lock]</a>


</li>
            <li class="toc-item">
    <a href="#mappedsuperclass">#[MappedSuperclass]</a>


</li>
            <li class="toc-item">
    <a href="#postload">#[PostLoad]</a>


</li>
            <li class="toc-item">
    <a href="#postpersist">#[PostPersist]</a>


</li>
            <li class="toc-item">
    <a href="#postremove">#[PostRemove]</a>


</li>
            <li class="toc-item">
    <a href="#postupdate">#[PostUpdate]</a>


</li>
            <li class="toc-item">
    <a href="#preflush">#[PreFlush]</a>


</li>
            <li class="toc-item">
    <a href="#preload">#[PreLoad]</a>


</li>
            <li class="toc-item">
    <a href="#prepersist">#[PrePersist]</a>


</li>
            <li class="toc-item">
    <a href="#preremove">#[PreRemove]</a>


</li>
            <li class="toc-item">
    <a href="#preupdate">#[PreUpdate]</a>


</li>
            <li class="toc-item">
    <a href="#readpreference">#[ReadPreference]</a>


</li>
            <li class="toc-item">
    <a href="#referencemany">#[ReferenceMany]</a>


</li>
            <li class="toc-item">
    <a href="#referenceone">#[ReferenceOne]</a>


</li>
            <li class="toc-item">
    <a href="#searchindex">#[SearchIndex]</a>


</li>
            <li class="toc-item">
    <a href="#shardkey">#[ShardKey]</a>


</li>
            <li class="toc-item">
    <a href="#timeseries">#[TimeSeries]</a>


</li>
            <li class="toc-item">
    <a href="#uniqueindex">#[UniqueIndex]</a>


</li>
            <li class="toc-item">
    <a href="#validation">#[Validation]</a>


</li>
            <li class="toc-item">
    <a href="#vectorsearchindex">#[VectorSearchIndex]</a>


</li>
            <li class="toc-item">
    <a href="#version">#[Version]</a>


</li>
            <li class="toc-item">
    <a href="#view">#[View]</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="metadata-drivers.html#metadata-drivers">Metadata Drivers</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="metadata-drivers.html#core-metadata-drivers">Core Metadata Drivers</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#implementing-metadata-drivers">Implementing Metadata Drivers</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#classmetadata">ClassMetadata</a>


</li>
            <li class="toc-item">
    <a href="metadata-drivers.html#getting-classmetadata-instances">Getting ClassMetadata Instances</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="working-with-objects.html#understanding">Understanding</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-objects.html#the-size-of-a-unit-of-work">The size of a Unit of Work</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#the-cost-of-flush">The cost of flush()</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#direct-access-to-a-unit-of-work">Direct access to a Unit of Work</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-objects.html#persisting-documents">Persisting documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#flush-options">Flush Options</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#removing-documents">Removing documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#detaching-documents">Detaching documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#merging-documents">Merging documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#references">References</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#establishing-references">Establishing References</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#removing-references">Removing References</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#transitive-persistence">Transitive persistence</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#querying">Querying</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-objects.html#by-primary-key">By Primary Key</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-simple-conditions">By Simple Conditions</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-lazy-loading">By Lazy Loading</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-query-builder-objects">By Query Builder Objects</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-reference">By Reference</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="document-repositories.html#document-repositories">Document Repositories</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="document-repositories.html#custom-repositories">Custom Repositories</a>


</li>
            <li class="toc-item">
    <a href="document-repositories.html#repositories-with-additional-dependencies">Repositories with Additional Dependencies</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="events.html#the-event-system">The Event System</a>


</li>
            <li class="toc-item">
    <a href="events.html#lifecycle-events">Lifecycle Events</a>


</li>
            <li class="toc-item">
    <a href="events.html#lifecycle-callbacks">Lifecycle Callbacks</a>


</li>
            <li class="toc-item">
    <a href="events.html#listening-to-lifecycle-events">Listening to Lifecycle Events</a>


</li>
            <li class="toc-item">
    <a href="events.html#implementing-event-listeners">Implementing Event Listeners</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="events.html#handling-transactional-flushes">Handling Transactional Flushes</a>


</li>
            <li class="toc-item">
    <a href="events.html#prepersist">prePersist</a>


</li>
            <li class="toc-item">
    <a href="events.html#preload">preLoad</a>


</li>
            <li class="toc-item">
    <a href="events.html#postload">postLoad</a>


</li>
            <li class="toc-item">
    <a href="events.html#preremove">preRemove</a>


</li>
            <li class="toc-item">
    <a href="events.html#preflush">preFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#onflush">onFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#postflush">postFlush</a>


</li>
            <li class="toc-item">
    <a href="events.html#preupdate">preUpdate</a>


</li>
            <li class="toc-item">
    <a href="events.html#onclear">onClear</a>


</li>
            <li class="toc-item">
    <a href="events.html#documentnotfound">documentNotFound</a>


</li>
            <li class="toc-item">
    <a href="events.html#postupdate-postremove-postpersist">postUpdate, postRemove, postPersist</a>


</li>
            <li class="toc-item">
    <a href="events.html#postcollectionload">postCollectionLoad</a>


</li>
            <li class="toc-item">
    <a href="events.html#loadclassmetadata">loadClassMetadata</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="migrating-schemas.html#migrating-schemas">Migrating Schemas</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="migrating-schemas.html#creating-a-collection">Creating a collection</a>


</li>
            <li class="toc-item">
    <a href="migrating-schemas.html#renaming-a-field">Renaming a Field</a>


</li>
            <li class="toc-item">
    <a href="migrating-schemas.html#transforming-data">Transforming Data</a>


</li>
            <li class="toc-item">
    <a href="migrating-schemas.html#moving-fields">Moving Fields</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="query-builder-api.html#query-builder-api">Query Builder API</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="query-builder-api.html#finding-documents">Finding Documents</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#creating-a-query-builder">Creating a Query Builder</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-api.html#executing-queries">Executing Queries</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#debugging-queries">Debugging Queries</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#getting-single-result">Getting Single Result</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#selecting-fields">Selecting Fields</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#index-hints">Index hints</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#selecting-distinct-values">Selecting Distinct Values</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#refreshing-documents">Refreshing Documents</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#fetching-documents-as-read-only">Fetching Documents as Read-Only</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#disabling-hydration">Disabling Hydration</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#disabling-result-caching">Disabling Result Caching</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#limiting-results">Limiting Results</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#sorting-results">Sorting Results</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#conditional-operators">Conditional Operators</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#text-search">Text Search</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#update-queries">Update Queries</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-api.html#updating-multiple-documents">Updating multiple documents</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#modifier-operations">Modifier Operations</a>


</li>
            <li class="toc-item">
    <a href="query-builder-api.html#remove-queries">Remove Queries</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="aggregation-builder.html#aggregation-builder">Aggregation builder</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="aggregation-builder.html#creating-an-aggregation-builder">Creating an Aggregation Builder</a>


</li>
            <li class="toc-item">
    <a href="aggregation-builder.html#adding-pipeline-stages">Adding pipeline stages</a>


</li>
            <li class="toc-item">
    <a href="aggregation-builder.html#nesting-expressions">Nesting expressions</a>


</li>
            <li class="toc-item">
    <a href="aggregation-builder.html#executing-an-aggregation-pipeline">Executing an aggregation pipeline</a>


</li>
            <li class="toc-item">
    <a href="aggregation-builder.html#hydration">Hydration</a>


</li>
            <li class="toc-item">
    <a href="aggregation-builder.html#disabling-result-caching">Disabling Result Caching</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="aggregation-stage-reference.html#aggregation-pipeline-stages">Aggregation pipeline stages</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#addfields">$addFields</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#bucket">$bucket</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#bucketauto">$bucketAuto</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#collstats">$collStats</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#count">$count</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#densify">$densify</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#facet">$facet</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#fill">$fill</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#geonear">$geoNear</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#graphlookup">$graphLookup</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#group">$group</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#indexstats">$indexStats</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#lookup">$lookup</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#match">$match</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#merge">$merge</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#out">$out</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#project">$project</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#redact">$redact</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#replaceroot">$replaceRoot</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#replacewith">$replaceWith</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#sample">$sample</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#search">$search</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#set">$set</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#setwindowfields">$setWindowFields</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#sort-limit-and-skip">$sort, $limit and $skip</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#sortbycount">$sortByCount</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#vectorsearch">$vectorSearch</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#unionwith">$unionWith</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#unset">$unset</a>


</li>
            <li class="toc-item">
    <a href="aggregation-stage-reference.html#unwind">$unwind</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="geospatial-queries.html#geospatial-queries">Geospatial Queries</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="geospatial-queries.html#mapping">Mapping</a>


</li>
            <li class="toc-item">
    <a href="geospatial-queries.html#near-query">Near Query</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="find-and-update.html#find-and-modify">Find and Modify</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="find-and-update.html#update">Update</a>


</li>
            <li class="toc-item">
    <a href="find-and-update.html#remove">Remove</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="upserting-documents.html#upserting-documents">Upserting Documents</a>


</li>
    <li class="toc-item">
    <a href="filters.html#filters-1">Filters</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="filters.html#example-filter-class">Example filter class</a>


</li>
            <li class="toc-item">
    <a href="filters.html#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="filters.html#disabling-enabling-filters-and-setting-parameters">Disabling/Enabling Filters and Setting Parameters</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="priming-references.html#priming-references">Priming References</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="priming-references.html#query-builder">Query Builder</a>


</li>
            <li class="toc-item">
    <a href="priming-references.html#inverse-references">Inverse references</a>


</li>
            <li class="toc-item">
    <a href="priming-references.html#primer-callback">Primer Callback</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="capped-collections.html#capped-collections">Capped Collections</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="capped-collections.html#mapping">Mapping</a>


</li>
            <li class="toc-item">
    <a href="capped-collections.html#creating">Creating</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="storage-strategies.html#storage-strategies">Storage Strategies</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="storage-strategies.html#increment">increment</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#addtoset">addToSet</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#set">set</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#setarray">setArray</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#pushall">pushAll</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#atomicset">atomicSet</a>


</li>
            <li class="toc-item">
    <a href="storage-strategies.html#atomicsetarray">atomicSetArray</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="custom-collections.html#custom-collections">Custom Collections</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="custom-collections.html#custom-collection-classes">Custom Collection Classes</a>


</li>
            <li class="toc-item">
    <a href="custom-collections.html#taking-control-of-the-collection-s-constructor">Taking Control of the Collection&#039;s Constructor</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="sharding.html#sharding-1">Sharding</a>


</li>
    <li class="toc-item">
    <a href="transactions-and-concurrency.html#transactions-and-concurrency">Transactions and Concurrency</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#transactions">Transactions</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#transaction-support">Transaction support</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#transaction-support-in-doctrine-mongodb-odm">Transaction Support in Doctrine MongoDB ODM</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#lifecycle-events-and-transactions">Lifecycle Events and Transactions</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#other-concurrency-controls">Other Concurrency Controls</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#optimistic-locking">Optimistic Locking</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#approach">Approach</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#document-configuration">Document Configuration</a>

        <ul class="section-level-3">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#choosing-the-field-type">Choosing the Field Type</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#usage">Usage</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#important-implementation-notes">Important Implementation Notes</a>

        <ul class="section-level-3">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#workflow">Workflow</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#example-code">Example Code</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#pessimistic-locking">Pessimistic Locking</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#document-configuration">Document Configuration</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#lock-modes">Lock Modes</a>


</li>
            <li class="toc-item">
    <a href="transactions-and-concurrency.html#usage">Usage</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="best-practices.html#best-practices">Best Practices</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="best-practices.html#constrain-relationships-as-much-as-possible">Constrain relationships as much as possible</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#use-events-judiciously">Use events judiciously</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#use-cascades-judiciously">Use cascades judiciously</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#don-t-use-special-characters">Don&#039;t use special characters</a>


</li>
            <li class="toc-item">
    <a href="best-practices.html#initialize-collections-in-the-constructor">Initialize collections in the constructor</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="change-tracking-policies.html#change-tracking-policies">Change Tracking Policies</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="change-tracking-policies.html#deferred-implicit">Deferred Implicit</a>


</li>
            <li class="toc-item">
    <a href="change-tracking-policies.html#deferred-explicit">Deferred Explicit</a>


</li>
            <li class="toc-item">
    <a href="change-tracking-policies.html#notify">Notify</a>


</li>
                    </ul>
</li>
    </ul>
</div><div class="toc">
            <p class="caption">Cookbook</p>
    <ul class="menu-level">
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "MongoDB ODM",
            "item": "https://www.doctrine-project.org/projects/mongodb-odm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Attributes Reference",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/attributes-reference.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Attributes Reference</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that has not yet been released.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-odm/en/latest/reference/attributes-reference.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.15
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-mongodb-odm/en/latest/reference/attributes-reference.html">
                                                        2.15

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.14/reference/attributes-reference.html">
                                                        2.14.0

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.13/reference/attributes-reference.html">2.13</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.12/reference/attributes-reference.html">2.12</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.11/reference/attributes-reference.html">2.11</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.10/reference/attributes-reference.html">2.10</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-odm/en/2.9/reference/attributes-reference.html">2.9</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.7</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.5</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.4</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">2.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">1.0</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            

            <div class="section" id="attributes-reference">
            <h1 class="section-header ">
    <a href="#attributes-reference">
        Attributes Reference
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>In this chapter a reference of every Doctrine ODM Attribute is
given with short explanations on their context and usage.</p>

            <div class="section" id="alsoload">
            <h2 class="section-header ">
    <a href="#alsoload">
        #[AlsoLoad]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Specify one or more MongoDB fields to use for loading data if the original field
does not exist.</p>

                <pre class="code-block-table" id="adfa2d12884e60ead93441b19f1eb8de28625837"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="adfa2d12884e60ead93441b19f1eb8de28625837"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'string')]</span></code><code class="line language-php">    <span class="hljs-comment">#[AlsoLoad('name')]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $fullName;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>The <code>$fullName</code> property will be loaded from <code>fullName</code> if it exists, but
fall back to <code>name</code> if it does not exist. If multiple fall back fields are
specified, ODM will consider them in order until the first is found.</p>

            
    <p>Additionally, <a href="#[AlsoLoad]">#[AlsoLoad]</a> may annotate a method with one or more field names.
Before normal hydration, the field(s) will be considered in order and the method
will be invoked with the first value found as its single argument.</p>

                <pre class="code-block-table" id="c618135898cfa3457b341433ee597812cf5377e7"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="c618135898cfa3457b341433ee597812cf5377e7"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[AlsoLoad(['name', 'fullName'])]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">populateFirstAndLastName</span><span class="hljs-params">(string $name)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-keyword">list</span>(<span class="hljs-keyword">$this</span>-&gt;firstName, <span class="hljs-keyword">$this</span>-&gt;lastName) = explode(<span class="hljs-string">' '</span>, $name);</code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>For additional information on using <a href="#[AlsoLoad]">#[AlsoLoad]</a>, see
<a href="migrating-schemas.html">Migrations</a>.</p>

    </div>
            <div class="section" id="changetrackingpolicy">
            <h2 class="section-header ">
    <a href="#changetrackingpolicy">
        #[ChangeTrackingPolicy]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is used to change the change tracking policy for a document:</p>

                <pre class="code-block-table" id="346cce9d83f6f1038ae06bed81a79366bb5a0262"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="346cce9d83f6f1038ae06bed81a79366bb5a0262"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[ChangeTrackingPolicy('DEFERRED_EXPLICIT')]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>For a list of available policies, read the section on <a href="change-tracking-policies.html#change_tracking_policies">change tracking policies</a>.</p>

    </div>
            <div class="section" id="defaultdiscriminatorvalue">
            <h2 class="section-header ">
    <a href="#defaultdiscriminatorvalue">
        #[DefaultDiscriminatorValue]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute can be used when using <a href="#[DiscriminatorField]">#[DiscriminatorField]</a>. It will be used
as a fallback value if a document has no discriminator field set. This must
correspond to a value from the configured discriminator map.</p>

                <pre class="code-block-table" id="92be3fa665bf80314b9f5b435ccc3aa063032da5"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="92be3fa665bf80314b9f5b435ccc3aa063032da5"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[InheritanceType('SINGLE_COLLECTION')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorField('type')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorMap(['person' =&gt; Person::class, 'employee' =&gt; Employee::class])]</span></code><code class="line language-php"><span class="hljs-comment">#[DefaultDiscriminatorValue('person')]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="discriminatorfield">
            <h2 class="section-header ">
    <a href="#discriminatorfield">
        #[DiscriminatorField]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is required for the top-most class in a
<a href="inheritance-mapping.html#single_collection_inheritance">single collection inheritance</a> hierarchy.
It takes a string as its only argument, which specifies the database field to
store a class name or key (if a discriminator map is used). ODM uses this field
during hydration to select the instantiation class.</p>

                <pre class="code-block-table" id="2c7634ea0f62d493a92468cab55d79aa3eee8d65"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="2c7634ea0f62d493a92468cab55d79aa3eee8d65"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[InheritanceType("SINGLE_COLLECTION")]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorField("type")]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperUser</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>For backwards compatibility, the discriminator field may also be specified
via either the <code>name</code> or <code>fieldName</code> argument.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="discriminatormap">
            <h2 class="section-header ">
    <a href="#discriminatormap">
        #[DiscriminatorMap]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is required for the top-most class in a
<a href="inheritance-mapping.html#single_collection_inheritance">single collection inheritance</a> hierarchy.
It takes an array as its only argument, which maps keys to class names. The
class names must be fully qualified. Using the <code>::class constant</code> is supported. When
a document is persisted to the database, its class name key will be stored in
the discriminator field instead of the <abbr title="Fully-Qualified Class Name">FQCN</abbr>. If the discriminator map is non-empty
and it does not contain the class name of the persisted document, a
<code>\Doctrine\ODM\MongoDB\Mapping\MappingException</code> will be thrown.</p>

                <pre class="code-block-table" id="715ba2fb8b4c2254df2fad397745a78fb31bdb75"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="715ba2fb8b4c2254df2fad397745a78fb31bdb75"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[InheritanceType('SINGLE_COLLECTION')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorField('type')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorMap(['person' =&gt; Person::class, 'employee' =&gt; Employee::class])]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="document">
            <h2 class="section-header ">
    <a href="#document">
        #[Document]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Required attribute to mark a PHP class as a document, whose persistence will be
managed by ODM.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>db</code> - By default, the document manager will use the MongoDB database
defined in the configuration, but this option may be used to override the
database for a particular document class.</li>
    <li class="dash"><code>collection</code> - By default, the collection name is derived from the
document&#039;s class name, but this option may be used to override that behavior.</li>
    <li class="dash"><code>repositoryClass</code> - Specifies a custom repository class to use.</li>
    <li class="dash"><code>readOnly</code> - Prevents document from being updated: it can only be inserted,
upserted or removed.</li>
    <li class="dash"><code>writeConcern</code> - Specifies the write concern for this document that
overwrites the default write concern specified in the configuration. It does
not overwrite a write concern given as <a href="working-with-objects.html#flush_options">option</a> to the
<code>flush</code>  method when committing your documents.</li>
</ul>

                <pre class="code-block-table" id="381d2b8e2fabedc7daea24e5354f37b7fe776079"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="381d2b8e2fabedc7daea24e5354f37b7fe776079"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document(</span></code><code class="line language-php">    db: <span class="hljs-string">'documents'</span>,</code><code class="line language-php">    collection: <span class="hljs-string">'users'</span>,</code><code class="line language-php">    repositoryClass: MyProject\UserRepository::class,</code><code class="line language-php">    indexes: [</code><code class="line language-php">        <span class="hljs-keyword">new</span> Index(keys: [<span class="hljs-string">'username'</span> =&gt; <span class="hljs-string">'desc'</span>], options: [<span class="hljs-string">'unique'</span> =&gt; <span class="hljs-keyword">true</span>])</code><code class="line language-php">    ],</code><code class="line language-php">    readOnly: <span class="hljs-keyword">true</span>,</code><code class="line language-php">)]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="embedmany">
            <h2 class="section-header ">
    <a href="#embedmany">
        #[EmbedMany]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is similar to <a href="#[EmbedOne]">#[EmbedOne]</a>, but instead of embedding one
document, it embeds a collection of documents.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>targetDocument</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of the target document.</li>
    <li class="dash"><code>discriminatorField</code> - The database field name to store the discriminator
value within the embedded document.</li>
    <li class="dash"><code>discriminatorMap</code> - Map of discriminator values to class names.</li>
    <li class="dash"><code>defaultDiscriminatorValue</code> - A default value for discriminatorField if no
value has been set in the embedded document.</li>
    <li class="dash"><code>strategy</code> - The strategy used to persist changes to the collection.
Possible values are <code>addToSet</code>, <code>pushAll</code>, <code>set</code>, and <code>setArray</code>.
<code>pushAll</code> is the default. See <a href="storage-strategies.html#storage_strategies">Storage Strategies</a> for more
information.</li>
    <li class="dash"><code>collectionClass</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of class that implements <code>Collection</code>
interface and is used to hold documents. When typed properties
are used it is inherited from PHP type, otherwise Doctrine&#039;s <code>ArrayCollection</code> is
used by default.</li>
    <li class="dash"><code>notSaved</code> - The property is loaded if it exists in the database; however,
ODM will not save the property value back to the database.</li>
</ul>

                <pre class="code-block-table" id="5ba386244392278e426650e55fce47ca5039183e"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="5ba386244392278e426650e55fce47ca5039183e"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> Collection&lt;int, BookTag|SongTag&gt; */</span></code><code class="line language-php">    <span class="hljs-comment">#[EmbedMany(</span></code><code class="line language-php">        strategy:<span class="hljs-string">'set'</span>,</code><code class="line language-php">        discriminatorField:<span class="hljs-string">'type'</span>,</code><code class="line language-php">        discriminatorMap: [</code><code class="line language-php">            <span class="hljs-string">'book'</span> =&gt; Documents\BookTag::class,</code><code class="line language-php">            <span class="hljs-string">'song'</span> =&gt; Documents\SongTag::class,</code><code class="line language-php">        ],</code><code class="line language-php">        defaultDiscriminatorValue: <span class="hljs-string">'book'</span>,</code><code class="line language-php">    )]</code><code class="line language-php">    <span class="hljs-keyword">private</span> Collection $tags;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>Depending on the embedded document&#039;s class, a value of <code>user</code> or <code>author</code>
will be stored in the <code>type</code> field and used to reconstruct the proper class
during hydration. The <code>type</code> field need not be mapped on the embedded
document classes.</p>

    </div>
            <div class="section" id="embedone">
            <h2 class="section-header ">
    <a href="#embedone">
        #[EmbedOne]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The <a href="#[EmbedOne]">#[EmbedOne]</a> attribute works similarly to <a href="#[ReferenceOne]">#[ReferenceOne]</a>, except that
that document will be embedded within the parent document. Consider the
following excerpt from the MongoDB documentation:</p>

            <blockquote>
    <p>The key question in MongoDB schema design is &quot;does this object merit its own
collection, or rather should it be embedded within objects in other
collections?&quot; In relational databases, each sub-item of interest typically
becomes a separate table (unless you are denormalizing for performance). In
MongoDB, this is not recommended – embedding objects is much more efficient.
Data is then collocated on disk; client-server turnarounds to the database
are eliminated. So in general, the question to ask is, &quot;why would I not want
to embed this object?&quot;</p>
</blockquote>
            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>targetDocument</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of the target document. When typed properties
are used it is inherited from PHP type.</li>
    <li class="dash"><code>discriminatorField</code> - The database field name to store the discriminator
value within the embedded document.</li>
    <li class="dash"><code>discriminatorMap</code> - Map of discriminator values to class names.</li>
    <li class="dash"><code>defaultDiscriminatorValue</code> - A default value for discriminatorField if no
value has been set in the embedded document.</li>
    <li class="dash"><code>notSaved</code> - The property is loaded if it exists in the database; however,
ODM will not save the property value back to the database.</li>
</ul>

                <pre class="code-block-table" id="bf70f2a541598ff08c52679b9f9d3095f5146a71"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="bf70f2a541598ff08c52679b9f9d3095f5146a71"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thing</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[EmbedOne(</span></code><code class="line language-php">         discriminatorField: <span class="hljs-string">'type'</span>,</code><code class="line language-php">         discriminatorMap: [</code><code class="line language-php">             <span class="hljs-string">'user'</span> =&gt; Documents\User::class,</code><code class="line language-php">             <span class="hljs-string">'author'</span> =&gt; Documents\Author::class,</code><code class="line language-php">         ],</code><code class="line language-php">         defaultDiscriminatorValue: <span class="hljs-string">'user'</span>,</code><code class="line language-php">    )]</code><code class="line language-php">    <span class="hljs-keyword">private</span> User|Author $creator;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>Depending on the embedded document&#039;s class, a value of <code>user</code> or <code>author</code>
will be stored in the <code>type</code> field and used to reconstruct the proper class
during hydration. The <code>type</code> field need not be mapped on the embedded
document classes.</p>

    </div>
            <div class="section" id="embeddeddocument">
            <h2 class="section-header ">
    <a href="#embeddeddocument">
        #[EmbeddedDocument]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks the document as embeddable. This attribute is required for any documents
to be stored within an <a href="#[EmbedOne]">#[EmbedOne]</a>, <a href="#[EmbedMany]">#[EmbedMany]</a> or <a href="#[File\\Metadata]">#[File\\Metadata]</a>
relationship.</p>

                <pre class="code-block-table" id="36aee7ec9ce32067b02c857d949b54a13b8523e6"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="36aee7ec9ce32067b02c857d949b54a13b8523e6"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[EmbeddedDocument]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Money</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'float')]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> float $amount;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(float $amount)</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-keyword">$this</span>-&gt;amount = $amount;</code><code class="line language-php">    }</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document(db: 'finance', collection: 'wallets')]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Wallet</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[EmbedOne(targetDocument: Money::class)]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> Money $money;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMoney</span><span class="hljs-params">(Money $money)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-keyword">$this</span>-&gt;money = $money;</code><code class="line language-php">    }</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="line language-php"><span class="hljs-comment">//...</span></code><code class="line language-php">$wallet = <span class="hljs-keyword">new</span> Wallet();</code><code class="line language-php">$wallet-&gt;setMoney(<span class="hljs-keyword">new</span> Money(<span class="hljs-number">34.39</span>));</code><code class="line language-php">$dm-&gt;persist($wallet);</code><code class="line language-php">$dm-&gt;flush();</code><code class="empty"></code></pre>
            
    <p>Unlike normal documents, embedded documents cannot specify their own database or
collection. That said, a single embedded document class may be used with
multiple document classes, and even other embedded documents!</p>

    </div>
            <div class="section" id="encrypt">
            <a id="encrypt_attribute"></a>
            <h2 class="section-header ">
    <a href="#encrypt">
        #[Encrypt]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The <code>#[Encrypt]</code> attribute is used to define an encrypted field mapping for a
document property. It allows you to configure fields for automatic and queryable
encryption in MongoDB.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>queryType</code> - Specifies the query type for the field. Possible values:
- <code>null</code> (default) - Field is not queryable.
- <code>EncryptQuery::Equality</code> - Enables equality queries.
- <code>EncryptQuery::Range</code> - Enables range queries.</li>
    <li class="dash"><code>min</code>, <code>max</code> - Specify minimum and maximum (inclusive) queryable values
for a field when possible, as smaller bounds improve query efficiency. If
querying values outside of these bounds, MongoDB returns an error.</li>
    <li class="dash"><code>sparsity</code>, <code>precision</code>, <code>trimFactor</code>, <code>contention</code> - For advanced
users only. The default values for these options are suitable for the majority
of use cases, and should only be modified if your use case requires it.</li>
</ul>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Queryable encryption is only supported in MongoDB version 7.0 and later.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Example:</p>

                <pre class="code-block-table" id="2b0cfb593d68bd8f93c2ddd6faf1dac88b5bc14c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="2b0cfb593d68bd8f93c2ddd6faf1dac88b5bc14c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Encrypt</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">EncryptQuery</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-comment">#[Encrypt(queryType: EncryptQuery::Equality)]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $name;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>The <code>#[Encrypt]</code> attribute can be added to a class with <a href="#[EmbeddedDocument]">#[EmbeddedDocument]</a>.
This will encrypt the entire embedded document, in the field that contains it.
Fields within an encrypted embedded document cannot be individually encrypted.
Queryable encryption is not supported for embedded documents, so the <code>queryType</code>
argument is not applicable. Encrypted embedded documents are stored as a binary
value in the parent document.</p>

                <pre class="code-block-table" id="bac5a2d2b23f815a930fce90509eb55da8d02dd4"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="bac5a2d2b23f815a930fce90509eb55da8d02dd4"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Encrypt</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Encrypt]</span></code><code class="line language-php"><span class="hljs-comment">#[EmbeddedDocument]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreditCard</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $number;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $expiryDate;</code><code class="line language-php">}</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[EmbedOne(targetDocument: CreditCard::class)]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> CreditCard $creditCard;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>For more details, refer to the MongoDB documentation on
<a href="https://www.mongodb.com/docs/manual/core/queryable-encryption/fundamentals/encrypt-and-query/">Queryable Encryption</a>.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The encrypted collection must be created with the <a href="../reference/migrating-schemas">Schema Manager</a> before
before inserting documents.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Due to the way the encrypted fields map is generated, the queryable encryption
is not compatible with <code>SINGLE_COLLECTION</code> inheritance.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="field">
            <h2 class="section-header ">
    <a href="#field">
        #[Field]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks an annotated instance variable for persistence. Values for this field will
be saved to and loaded from the document store as part of the document class&#039;
lifecycle.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>type</code> - Name of the ODM type, which will determine the value&#039;s
representation in PHP and BSON (i.e. MongoDB). See
<a href="basic-mapping.html#doctrine_mapping_types">Doctrine Mapping Types</a> for a list of types. Defaults to &quot;string&quot; or
<a href="basic-mapping.html#reference-php-mapping-types">Type from PHP property type</a>.</li>
    <li class="dash"><code>enumType</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of an <code>enum</code>. ODM will automatically handle conversion
from the backing value stored in the database to an <code>enum</code>. Can be auto-detected
by <a href="basic-mapping.html#reference-php-mapping-types">type from PHP property type</a>.</li>
    <li class="dash"><code>name</code> - By default, the property name is used for the field name in
MongoDB; however, this option may be used to specify a database field name.</li>
    <li class="dash"><code>nullable</code> - By default, ODM will <code>$unset</code> fields in MongoDB if the PHP
value is null. Specify true for this option to force ODM to store a null
value in the database instead of unsetting the field.</li>
    <li class="dash"><code>notSaved</code> - The property is loaded if it exists in the database; however,
ODM will not save the property value back to the database.</li>
</ul>

            
    <p>Examples:</p>

                <pre class="code-block-table" id="030dccc0f757e96ca92ded87fa6d19ed5603a88a"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="030dccc0f757e96ca92ded87fa6d19ed5603a88a"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'string')]</span></code><code class="line language-php">    <span class="hljs-keyword">protected</span> string $username;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'string', name: 'co')]</span></code><code class="line language-php">    <span class="hljs-keyword">protected</span> string $country;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'float')]</span></code><code class="line language-php">    <span class="hljs-keyword">protected</span> float $height;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="file">
            <a id="file"></a>
            <h2 class="section-header ">
    <a href="#file">
        #[File]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This marks the document as a GridFS file. GridFS allow storing larger amounts of
data than regular documents.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>db</code> - By default, the document manager will use the MongoDB database
defined in the configuration, but this option may be used to override the
database for a particular file.</li>
    <li class="dash"><code>bucketName</code> - By default, files are stored in a bucket called <code>fs</code>. You
can customize that bucket name with this property.</li>
    <li class="dash"><code>repositoryClass</code> - Specifies a custom repository class to use. The class
must extend the <code>Doctrine\ODM\MongoDB\Repository\GridFSRepository</code>
interface.</li>
    <li class="dash"><code>readOnly</code> - Prevents the file from being updated: it can only be inserted,
upserted or removed.</li>
    <li class="dash"><code>writeConcern</code> - Specifies the write concern for this file that overwrites
the default write concern specified in the configuration.</li>
</ul>

    </div>
            <div class="section" id="file-chunksize">
            <a id="file_chunksize"></a>
            <h2 class="section-header ">
    <a href="#file-chunksize">
        #[FileChunkSize]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This maps the <code>chunkSize</code> property of a GridFS file to a property. It contains
the size of a single file chunk in bytes. No other options can be set.</p>

    </div>
            <div class="section" id="file-filename">
            <a id="file_filename"></a>
            <h2 class="section-header ">
    <a href="#file-filename">
        #[FileFilename]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This maps the <code>filename</code> property of a GridFS file to a property. No other
options can be set.</p>

    </div>
            <div class="section" id="file-length">
            <a id="file_length"></a>
            <h2 class="section-header ">
    <a href="#file-length">
        #[FileLength]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This maps the <code>length</code> property of a GridFS file to a property. It contains
the size of the entire file in bytes. No other options can be set.</p>

    </div>
            <div class="section" id="file-metadata">
            <a id="file_metadata"></a>
            <h2 class="section-header ">
    <a href="#file-metadata">
        #[FileMetadata]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This maps the <code>metadata</code> property of a GridFS file to a property. Metadata can
be used to store additional properties in a file. The metadata document must be
an embedded document mapped using <a href="#[EmbeddedDocument]">#[EmbeddedDocument]</a>.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>targetDocument</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of the target document.</li>
    <li class="dash"><code>discriminatorField</code> - The database field name to store the discriminator
value within the embedded document.</li>
    <li class="dash"><code>discriminatorMap</code> - Map of discriminator values to class names.</li>
    <li class="dash"><code>defaultDiscriminatorValue</code> - A default value for <code>discriminatorField</code>
if no value has been set in the embedded document.</li>
</ul>

    </div>
            <div class="section" id="file-uploaddate">
            <h2 class="section-header ">
    <a href="#file-uploaddate">
        #[FileUploadDate]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This maps the <code>uploadDate</code> property of a GridFS file to a property. No other
options can be set.</p>

    </div>
            <div class="section" id="haslifecyclecallbacks">
            <a id="haslifecyclecallbacks"></a>
            <h2 class="section-header ">
    <a href="#haslifecyclecallbacks">
        #[HasLifecycleCallbacks]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute must be set on the document class to instruct Doctrine to check
for lifecycle callback attributes on public methods. Using <a href="#[PreFlush]">#[PreFlush]</a>,
<a href="#[PreLoad]">#[PreLoad]</a>, <a href="#[PostLoad]">#[PostLoad]</a>, <a href="#[PrePersist]">#[PrePersist]</a>, <a href="#[PostPersist]">#[PostPersist]</a>, <a href="#[PreRemove]">#[PreRemove]</a>,
<a href="#[PostRemove]">#[PostRemove]</a>, <a href="#[PreUpdate]">#[PreUpdate]</a>, or <a href="#[PostUpdate]">#[PostUpdate]</a> on methods without this
attribute will cause Doctrine to ignore the callbacks.</p>

                <pre class="code-block-table" id="00108e991ac9c20d9c3df2075c4b0e2f981fe10d"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="00108e991ac9c20d9c3df2075c4b0e2f981fe10d"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[PostPersist]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendWelcomeEmail</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span> </span>{}</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="id">
            <h2 class="section-header ">
    <a href="#id">
        #[Id]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The annotated instance variable will be marked as the document identifier. The
default behavior is to store an <a href="https://www.php.net/class.mongodb-bson-objectid">MongoDB\BSON\ObjectId</a> instance, but you may
customize this via the <a href="basic-mapping.html#basic_mapping_identifiers">strategy</a> attribute.</p>

                <pre class="code-block-table" id="d242e60ca1c6e3c2cb9ef97348b79884716a121b"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="d242e60ca1c6e3c2cb9ef97348b79884716a121b"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Id]</span></code><code class="line language-php">    <span class="hljs-keyword">protected</span> string $id;</code><code class="line language-php">}</code><code class="empty"></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The property annotated with <a href="#[Id]">#[Id]</a> cannot be <code>readonly</code> even if the
value is set only once and should never be updated. This is because the
property is set outside of the scope of the class, which is not allowed in
PHP for <code>readonly</code> properties.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="index">
            <h2 class="section-header ">
    <a href="#index">
        #[Index]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is used  to specify indexes to be created on the
collection (or embedding document&#039;s collection in the case of
<a href="#[EmbeddedDocument]">#[EmbeddedDocument]</a>). It may also be used at the property-level to define
single-field indexes.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>keys</code> - Mapping of indexed fields to their ordering or index type. ODM
will allow <code>asc</code> and <code>desc</code> to be used in place of <code>1</code> and <code>-1</code>,
respectively. Special index types (e.g. <code>2dsphere</code>) should be specified as
strings. This is required when <a href="#[Index]">#[Index]</a> is used at the class level.</li>
    <li class="dash"><code>options</code> - Options for creating the index. Options are documented in the
<a href="indexes.html#indexes">indexes chapter</a>.</li>
</ul>

            
    <p>The <code>keys</code> and <code>options</code> attributes correspond to the arguments for
<a href="https://docs.mongodb.com/php-library/current/reference/method/MongoDBCollection-createIndex/">MongoDB\Collection::createIndex()</a>.
ODM allows mapped field names (i.e. PHP property names) to be used when defining
<code>keys</code>.</p>

                <pre class="code-block-table" id="e548f2d815684fe83d6dd4cba3b82e6f061774fc"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e548f2d815684fe83d6dd4cba3b82e6f061774fc"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[Index(keys: ['username' =&gt; 'desc' ], options: ['unique' =&gt; true])]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>If you are creating a single-field index, you can simply specify an <a href="#[Index]">#[Index]</a> or
<a href="#[UniqueIndex]">#[UniqueIndex]</a> on a mapped property:</p>

                <pre class="code-block-table" id="39d037172c70bfd5c96cfd3b9f8c1ac7e28a1ba4"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="39d037172c70bfd5c96cfd3b9f8c1ac7e28a1ba4"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'string')]</span></code><code class="line language-php">    <span class="hljs-comment">#[UniqueIndex]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> string $username;</code><code class="line language-php">}</code><code class="empty"></code></pre>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>If the <code>name</code> option is specified on an index in an embedded document, it
will be prefixed with the embedded field path before creating the index.
This is necessary to avoid index name conflict when the same document is
embedded multiple times in a single collection. Prefixing of the index name
can cause errors due to excessive index name length. In this case, try
shortening the index name or embedded field path.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="indexes">
            <h2 class="section-header ">
    <a href="#indexes">
        #[Indexes]
        <i class="fas fa-link"></i>
    </a>
</h2>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>The <code>#[Indexes]</code> attribute was deprecated in 2.2 and will be removed in 3.0.
Please move all nested <code>new Index</code> instances to a class level attributes.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>This attribute may be used at the class level to specify an array of <a href="#[Index]">#[Index]</a>
attributes. It is functionally equivalent to specifying multiple <code>#[Index]</code>
attributes on a class level.</p>

                <pre class="code-block-table" id="69ad3c3f071af79e2299cf3485b4f2d550bafc1c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="69ad3c3f071af79e2299cf3485b4f2d550bafc1c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[Indexes([</span></code><code class="line language-php">    <span class="hljs-keyword">new</span> Index(keys: [<span class="hljs-string">'username'</span> =&gt; <span class="hljs-string">'desc'</span>], options: [<span class="hljs-string">'unique'</span> =&gt; <span class="hljs-keyword">true</span>]),</code><code class="line language-php">])]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="inheritancetype">
            <h2 class="section-header ">
    <a href="#inheritancetype">
        #[InheritanceType]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute must appear on the top-most class in an
<a href="inheritance-mapping.html#inheritance_mapping">inheritance hierarchy</a>. <code>SINGLE_COLLECTION</code> and
<code>COLLECTION_PER_CLASS</code> are currently supported.</p>

            
    <p>Examples:</p>

                <pre class="code-block-table" id="9ef12d0361dd287ff8d40d6f6c7aa0c4c9678997"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="9ef12d0361dd287ff8d40d6f6c7aa0c4c9678997"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[InheritanceType('COLLECTION_PER_CLASS')]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[InheritanceType('SINGLE_COLLECTION')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorField('type')]</span></code><code class="line language-php"><span class="hljs-comment">#[DiscriminatorMap(['person' =&gt; Person::class, 'employee' =&gt; Employee::class])]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="lock">
            <h2 class="section-header ">
    <a href="#lock">
        #[Lock]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The annotated instance variable will be used to store lock information for <a href="transactions-and-concurrency.html#transactions_and_concurrency_pessimistic_locking">pessimistic locking</a>.
This is only compatible with the <code>int</code> type, and cannot be combined with <a href="#[Id]">#[Id]</a>.</p>

                <pre class="code-block-table" id="2a9f65158c2c57606c5345222136d7f68487bb0b"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="2a9f65158c2c57606c5345222136d7f68487bb0b"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thing</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'int')]</span></code><code class="line language-php">    <span class="hljs-comment">#[Lock]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> int $lock;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="mappedsuperclass">
            <h2 class="section-header ">
    <a href="#mappedsuperclass">
        #[MappedSuperclass]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The attribute is used to specify classes that are parents of document classes
and should not be managed directly. See
<a href="inheritance-mapping.html#inheritance_mapping">inheritance mapping</a> for additional information.</p>

                <pre class="code-block-table" id="10b038608433fa8f22fab90c2170e12231024e06"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="10b038608433fa8f22fab90c2170e12231024e06"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[MappedSuperclass]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDocument</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="postload">
            <h2 class="section-header ">
    <a href="#postload">
        #[PostLoad]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>postLoad</code> event. The
<a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for the
method to be registered.</p>

                <pre class="code-block-table" id="2c04cfb4e0513a702f5a6b68caa938970925082c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="2c04cfb4e0513a702f5a6b68caa938970925082c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PostLoad]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postLoad</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="postpersist">
            <h2 class="section-header ">
    <a href="#postpersist">
        #[PostPersist]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>postPersist</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="e6ad567374483aabadd2827c4eb7083299e0def4"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e6ad567374483aabadd2827c4eb7083299e0def4"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PostPersist]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postPersist</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="postremove">
            <h2 class="section-header ">
    <a href="#postremove">
        #[PostRemove]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>postRemove</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="baa78d18f51589da2a6b08d28bea092da44436cd"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="baa78d18f51589da2a6b08d28bea092da44436cd"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PostRemove]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postRemove</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="postupdate">
            <h2 class="section-header ">
    <a href="#postupdate">
        #[PostUpdate]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>postUpdate</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="aaee99dd2acd084fc02c4bf1d000d7ceb44a1655"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="aaee99dd2acd084fc02c4bf1d000d7ceb44a1655"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PostUpdate]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postUpdate</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="preflush">
            <h2 class="section-header ">
    <a href="#preflush">
        #[PreFlush]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>preFlush</code> event. The
<a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for the
method to be registered.</p>

                <pre class="code-block-table" id="52b83e2a8d9b62367f1cec9941188928f257e6ef"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="52b83e2a8d9b62367f1cec9941188928f257e6ef"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PreFlush]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preFlush</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="preload">
            <h2 class="section-header ">
    <a href="#preload">
        #[PreLoad]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>preLoad</code> event. The
<a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for the
method to be registered.</p>

                <pre class="code-block-table" id="d12bf01e8b89004f90395efd7afaa3178e0acf46"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="d12bf01e8b89004f90395efd7afaa3178e0acf46"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">PreLoadEventArgs</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PreLoad]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preLoad</span><span class="hljs-params">(PreLoadEventArgs $eventArgs)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="prepersist">
            <h2 class="section-header ">
    <a href="#prepersist">
        #[PrePersist]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>prePersist</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="622cf0c288df243fce7e2842767580e80a16c29e"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="622cf0c288df243fce7e2842767580e80a16c29e"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PrePersist]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prePersist</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="preremove">
            <h2 class="section-header ">
    <a href="#preremove">
        #[PreRemove]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>preRemove</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="15157f276449dd9c2c66e0d9efa1448f61e5db9d"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="15157f276449dd9c2c66e0d9efa1448f61e5db9d"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PreRemove]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preRemove</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="preupdate">
            <h2 class="section-header ">
    <a href="#preupdate">
        #[PreUpdate]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Marks a method on the document class to be called on the <code>preUpdate</code> event.
The <a href="#[HasLifecycleCallbacks]">#[HasLifecycleCallbacks]</a> attribute must be present on the same class for
the method to be registered.</p>

                <pre class="code-block-table" id="15888172d1718b4c2083d709f6a8c353fa76e6ad"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="15888172d1718b4c2083d709f6a8c353fa76e6ad"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[HasLifecycleCallbacks]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[PreUpdate]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preUpdated</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>See <a href="events.html#lifecycle_events">Lifecycle Events</a> for more information.</p>

    </div>
            <div class="section" id="readpreference">
            <h2 class="section-header ">
    <a href="#readpreference">
        #[ReadPreference]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Specifies <code>Read Preference &lt;https://docs.mongodb.com/manual/core/read-preference/&gt;_</code>
that will be applied when querying for the annotated document.</p>

                <pre class="code-block-table" id="d79236fe76d9b49ed39f58d42ad64b5c1cb87631"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="d79236fe76d9b49ed39f58d42ad64b5c1cb87631"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Documents</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[ODM\ReadPreference('primaryPreferred', tags: [</span></code><code class="line language-php">    [ <span class="hljs-string">'dc'</span> =&gt; <span class="hljs-string">'east'</span> ],</code><code class="line language-php">    [ <span class="hljs-string">'dc'</span> =&gt; <span class="hljs-string">'west'</span> ],</code><code class="line language-php">    []</code><code class="line language-php">])]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="referencemany">
            <a id="attributes_reference_reference_many"></a>
            <h2 class="section-header ">
    <a href="#referencemany">
        #[ReferenceMany]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Defines that the annotated instance variable holds a collection of referenced
documents.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>targetDocument</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of the target document. A <code>targetDocument</code>
is required when using <code>storeAs: id</code>.</li>
    <li class="dash"><code>storeAs</code> - Indicates how to store the reference. <code>id</code> stores the
identifier, <code>ref</code> an embedded object containing the <code>id</code> field and
(optionally) a discriminator. <code>dbRef</code> and <code>dbRefWithDb</code> store a <a href="https://docs.mongodb.com/manual/reference/database-references/#dbrefs">DBRef</a>
object and are deprecated in favor of <code>ref</code>. Note that <code>id</code> references
are not compatible with the discriminators.</li>
    <li class="dash"><code>cascade</code> - Cascade Option</li>
    <li class="dash"><code>discriminatorField</code> - The field name to store the discriminator value within
the reference object.</li>
    <li class="dash"><code>discriminatorMap</code> - Map of discriminator values to class names.</li>
    <li class="dash"><code>defaultDiscriminatorValue</code> - A default value for <code>discriminatorField</code>
if no value has been set in the referenced document.</li>
    <li class="dash"><code>inversedBy</code> - The field name of the inverse side. Only allowed on owning side.</li>
    <li class="dash"><code>mappedBy</code> - The field name of the owning side. Only allowed on the
inverse side.</li>
    <li class="dash"><code>repositoryMethod</code> - The name of the repository method to call to populate
this reference.</li>
    <li class="dash"><code>sort</code> - The default sort for the query that loads the reference.</li>
    <li class="dash"><code>criteria</code> - Array of default criteria for the query that loads the
reference.</li>
    <li class="dash"><code>limit</code> - Limit for the query that loads the reference.</li>
    <li class="dash"><code>skip</code> - Skip for the query that loads the reference.</li>
    <li class="dash"><code>strategy</code> - The strategy used to persist changes to the collection.
Possible values are <code>addToSet</code>, <code>pushAll</code>, <code>set</code>, and <code>setArray</code>.
<code>pushAll</code> is the default. See <a href="storage-strategies.html#storage_strategies">Storage Strategies</a> for more
information.</li>
    <li class="dash"><code>collectionClass</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of class that implements <code>Collection</code>
interface and is used to hold documents. When typed properties
are used it is inherited from PHP type, otherwise Doctrine&#039;s <code>ArrayCollection</code> is
used by default</li>
    <li class="dash"><code>prime</code> - A list of references contained in the target document that will
be initialized when the collection is loaded. Only allowed for inverse
references.</li>
    <li class="dash"><code>notSaved</code> - The property is loaded if it exists in the database; however,
ODM will not save the property value back to the database.</li>
</ul>

                <pre class="code-block-table" id="51c8082cdaf7a82004a92437b2f8f6cbf015e9a0"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="51c8082cdaf7a82004a92437b2f8f6cbf015e9a0"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> Collection&lt;int, Item&gt; */</span></code><code class="line language-php">    <span class="hljs-comment">#[ReferenceMany(</span></code><code class="line language-php">        strategy: <span class="hljs-string">'set'</span>,</code><code class="line language-php">        targetDocument: Item::class,</code><code class="line language-php">        cascade: <span class="hljs-string">'all'</span>,</code><code class="line language-php">        sort: [<span class="hljs-string">'sort_field'</span> =&gt; <span class="hljs-string">'asc'</span>],</code><code class="line language-php">        discriminatorField: <span class="hljs-string">'type'</span>,</code><code class="line language-php">        discriminatorMap: [</code><code class="line language-php">            <span class="hljs-string">'book'</span> =&gt; BookItem::class,</code><code class="line language-php">            <span class="hljs-string">'song'</span> =&gt; SongItem::class,</code><code class="line language-php">        ],</code><code class="line language-php">        defaultDiscriminatorValue: <span class="hljs-string">'book'</span>,</code><code class="line language-php">    )]</code><code class="line language-php">    <span class="hljs-keyword">private</span> Collection $cart;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="referenceone">
            <a id="attributes_reference_reference_one"></a>
            <h2 class="section-header ">
    <a href="#referenceone">
        #[ReferenceOne]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Defines an instance variable holds a related document instance.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>targetDocument</code> - A <abbr title="Fully-Qualified Class Name">FQCN</abbr> of the target document. A <code>targetDocument</code>
is required when using <code>storeAs: id</code>. When typed properties are used
it is inherited from PHP type.</li>
    <li class="dash"><code>storeAs</code> - Indicates how to store the reference. <code>id</code> stores the
identifier, <code>ref</code> an embedded object containing the <code>id</code> field and
(optionally) a discriminator. <code>dbRef</code> and <code>dbRefWithDb</code> store a <a href="https://docs.mongodb.com/manual/reference/database-references/#dbrefs">DBRef</a>
object and are deprecated in favor of <code>ref</code>. Note that <code>id</code> references
are not compatible with the discriminators.</li>
    <li class="dash"><code>cascade</code> - Cascade Option</li>
    <li class="dash"><code>discriminatorField</code> - The field name to store the discriminator value
within the reference object.</li>
    <li class="dash"><code>discriminatorMap</code> - Map of discriminator values to class names.</li>
    <li class="dash"><code>defaultDiscriminatorValue</code> - A default value for <code>discriminatorField</code>
if no value has been set in the referenced document.</li>
    <li class="dash"><code>inversedBy</code> - The field name of the inverse side. Only allowed on owning
side.</li>
    <li class="dash"><code>mappedBy</code> - The field name of the owning side. Only allowed on the
inverse side.</li>
    <li class="dash"><code>repositoryMethod</code> - The name of the repository method to call to populate
this reference.</li>
    <li class="dash"><code>sort</code> - The default sort for the query that loads the reference.</li>
    <li class="dash"><code>criteria</code> - Array of default criteria for the query that loads the
reference.</li>
    <li class="dash"><code>limit</code> - Limit for the query that loads the reference.</li>
    <li class="dash"><code>skip</code> - Skip for the query that loads the reference.</li>
    <li class="dash"><code>notSaved</code> - The property is loaded if it exists in the database; however,
ODM will not save the property value back to the database.</li>
</ul>

                <pre class="code-block-table" id="fe9104efd0b440c3430f53c0d770833087da9d2b"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="fe9104efd0b440c3430f53c0d770833087da9d2b"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[ReferenceOne(</span></code><code class="line language-php">        targetDocument: Documents\Item::class,</code><code class="line language-php">        cascade: <span class="hljs-string">'all'</span>,</code><code class="line language-php">        discriminatorField: <span class="hljs-string">'type'</span>,</code><code class="line language-php">        discriminatorMap: [</code><code class="line language-php">            <span class="hljs-string">'book'</span> =&gt; Documents\BookItem::class,</code><code class="line language-php">            <span class="hljs-string">'song'</span> =&gt; Documents\SongItem::class,</code><code class="line language-php">        ],</code><code class="line language-php">        defaultDiscriminatorValue: <span class="hljs-string">'book'</span></code><code class="line language-php">    )]</code><code class="line language-php">    <span class="hljs-keyword">private</span> Item $cart;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="searchindex">
            <h2 class="section-header ">
    <a href="#searchindex">
        #[SearchIndex]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute is used to specify <a href="search-indexes.html#search_indexes">search indexes</a> for
<a href="https://www.mongodb.com/docs/atlas/atlas-search/">MongoDB Atlas Search</a>.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>For vector search indexes, see <a href="#vector_search_index">#[VectorSearchIndex]</a> below.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>The arguments correspond to arguments for
<a href="https://www.mongodb.com/docs/php-library/current/reference/method/MongoDBCollection-createSearchIndex/">MongoDB\Collection::createSearchIndex()</a>.
Excluding <code>name</code>, arguments are used to create the
<a href="https://www.mongodb.com/docs/manual/reference/command/createSearchIndexes/#search-index-definition-syntax">search index definition</a>.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>name</code> - Name of the search index to create, which must be unique to the
collection. Defaults to <code>&quot;default&quot;</code>.</li>
    <li class="dash"><code>dynamic</code> - Enables or disables dynamic field mapping for this index.
If <code>true</code>, the index will include all fields with
<a href="https://www.mongodb.com/docs/atlas/atlas-search/define-field-mappings/#std-label-bson-data-chart">supported data types</a>.
If <code>false</code>, the <code>fields</code> attribute must be specified. Defaults to <code>false</code>.</li>
    <li class="dash"><code>fields</code> - Associative array of <a href="https://www.mongodb.com/docs/atlas/atlas-search/define-field-mappings/">field mappings</a>
that specify the fields to index (keys). Required only if dynamic mapping is disabled.</li>
    <li class="dash"><code>analyzer</code> - Specifies the <a href="https://www.mongodb.com/docs/atlas/atlas-search/analyzers/">analyzer</a>
to apply to string fields when indexing. Defaults to the
<a href="https://www.mongodb.com/docs/atlas/atlas-search/analyzers/standard/">standard analyzer</a>.</li>
    <li class="dash"><code>searchAnalyzer</code> - Specifies the <a href="https://www.mongodb.com/docs/atlas/atlas-search/analyzers/">analyzer</a>
to apply to query text before the text is searched. Defaults to the
<code>analyzer</code> attribute, or the <a href="https://www.mongodb.com/docs/atlas/atlas-search/analyzers/standard/">standard analyzer</a>.
if both are unspecified.</li>
    <li class="dash"><code>analyzers</code> - Array of <a href="https://www.mongodb.com/docs/atlas/atlas-search/analyzers/custom/">custom analyzers</a>
to use in this index.</li>
    <li class="dash"><code>storedSource</code> - Specifies document fields to store for queries performed
using the <a href="https://www.mongodb.com/docs/atlas/atlas-search/return-stored-source/">returnedStoredSource</a>
option. Specify <code>true</code> to store all fields, <code>false</code> to store no fields,
or a <a href="https://www.mongodb.com/docs/atlas/atlas-search/stored-source-definition/#std-label-fts-stored-source-document">document</a>
to specify individual fields to include or exclude from storage. Defaults to <code>false</code>.</li>
    <li class="dash"><code>synonyms</code> - Array of <a href="https://www.mongodb.com/docs/atlas/atlas-search/synonyms/">synonym mapping definitions</a>
to use in this index.</li>
</ul>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Search indexes have some notable differences from <a href="#[Index]">#[Index]</a>. They may only
be defined on document classes. Definitions will not be incorporated from
embedded documents. Additionally, ODM will <strong>NOT</strong> translate field names in
search index definitions. Database field names must be used instead of
mapped field names (i.e. PHP property names).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="shardkey">
            <h2 class="section-header ">
    <a href="#shardkey">
        #[ShardKey]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute may be used at the class level to specify a shard key to be used
for sharding the document collection.</p>

                <pre class="code-block-table" id="0f9f46f993ed751000c4b25f8c33b6be341bdbac"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="0f9f46f993ed751000c4b25f8c33b6be341bdbac"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[ShardKey(keys: ['username' =&gt; 'asc'])]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="timeseries">
            <h2 class="section-header ">
    <a href="#timeseries">
        #[TimeSeries]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute may be used at the class level to mark a collection as containing
<a href="../cookbook/time-series-data.html">time-series data</a>.</p>

                <pre class="code-block-table" id="a7a57265310895ca6bbbccae080f7f5f1e3f5a84"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="a7a57265310895ca6bbbccae080f7f5f1e3f5a84"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">TimeSeries</span>\<span class="hljs-title">Granularity</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[TimeSeries(timeField: 'time', metaField: 'metadata', granularity: Granularity::Seconds)]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Measurements</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Id]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $id;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> DateTimeImmutable $time;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[EmbedOne(targetDocument: MeasurementMetadata)]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> MeasurementMetadata $metadata;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> int $measurement;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>The <code>timeField</code> attribute is required and denotes the field where the time of
a time series entry is stored. The following optional attributes may be set:</p>

            

<ul>
    <li class="dash"><code>metaField</code> -  The name of the field which contains metadata in each time
series document. The field can be of any data type.</li>
    <li class="dash"><code>granularity</code> - Set the granularity to the value that most closely matches
the time between consecutive incoming timestamps. This allows MongoDB to
optimize how data is stored. Note: this attribute cannot be combined with
<code>bucketMaxSpanSeconds</code> and <code>bucketRoundingSeconds</code>.</li>
    <li class="dash"><code>bucketMaxSpanSeconds</code> - Used with <code>bucketRoundingSeconds</code> as an
alternative to <code>granularity</code>. Sets the maximum time between timestamps
in the same bucket. Possible values are 1 - 31356000.</li>
    <li class="dash"><code>bucketRoundingSeconds</code> - Used with <code>bucketMaxSpanSeconds</code>, must be set
to the same value as <code>bucketMaxSpanSeconds</code>. When a document requires a
new bucket, MongoDB rounds down the document&#039;s timestamp value by this
interval to set the minimum time for the bucket.</li>
    <li class="dash"><code>expireAfterSeconds</code> - Enables the automatic deletion of documents in a
time series collection by specifying the number of seconds after which
documents expire. MongoDB deletes these expired documents automatically.</li>
</ul>

    </div>
            <div class="section" id="uniqueindex">
            <h2 class="section-header ">
    <a href="#uniqueindex">
        #[UniqueIndex]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Alias of <a href="#[Index]">#[Index]</a>, with the <code>unique</code> option set by default.</p>

                <pre class="code-block-table" id="d0fec30a64b759fc7f4afd61763153cd09200d3e"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="d0fec30a64b759fc7f4afd61763153cd09200d3e"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'string')]</span></code><code class="line language-php">    <span class="hljs-comment">#[UniqueIndex]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> string $email;</code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="validation">
            <a id="attributes_reference_version"></a>
            <h2 class="section-header ">
    <a href="#validation">
        #[Validation]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This attribute may be used at the class level to specify the validation schema
for the related collection.</p>

            

<ul>
    <li class="dash"><code>validator</code> - Specifies a schema that will be used by
MongoDB to validate data inserted or updated in the collection.
Please refer to the following
<a href="https://docs.mongodb.com/manual/core/schema-validation/">MongoDB documentation (Schema Validation ¶)</a>
for more details. The value should be a string representing a BSON document under the
<a href="https://github.com/mongodb/specifications/blob/master/source/extended-json.rst">Extended JSON specification</a>.
The recommended way to fill up this property is to create a class constant
(eg. <code>::VALIDATOR</code>) using the
<a href="https://www.php.net/language.types.string#language.types.string.syntax.nowdoc">HEREDOC/NOWDOC syntax</a>
for clarity and to reference it as the attribute value.</li>
    <li class="dash">
    <p><code>action</code> - Determines how MongoDB handles documents that violate
the validation rules. Please refer to the related
<a href="https://docs.mongodb.com/manual/core/schema-validation/#accept-or-reject-invalid-documents">MongoDB documentation (Accept or Reject Invalid Documents ¶)</a>
for more details. The allowed values are the following:</p>
<blockquote>

<ul>
    <li class="dash"><code>error</code></li>
    <li class="dash"><code>warn</code></li>
</ul>
</blockquote>
    <p>If it is not defined then the default behavior (<code>error</code>) will be used.
Those values are also declared as constants for convenience:</p>
<blockquote>

<ul>
    <li class="dash"><code>\Doctrine\ODM\MongoDB\Mapping\ClassMetadata::SCHEMA_VALIDATION_ACTION_ERROR</code></li>
    <li class="dash"><code>\Doctrine\ODM\MongoDB\Mapping\ClassMetadata::SCHEMA_VALIDATION_ACTION_WARN</code></li>
</ul>
</blockquote>
    <p>Import the <code>ClassMetadata</code> namespace to use those constants in your attribute.</p>
</li>
    <li class="dash">
    <p><code>level</code> - Determines which operations MongoDB applies the
validation rules. Please refer to the related
<a href="https://docs.mongodb.com/manual/core/schema-validation/#existing-documents">MongoDB documentation (Existing Documents ¶)</a>
for more details. The allowed values are the following:</p>
<blockquote>

<ul>
    <li class="dash"><code>off</code></li>
    <li class="dash"><code>strict</code></li>
    <li class="dash"><code>moderate</code></li>
</ul>
</blockquote>
    <p>If it is not defined then the default behavior (<code>strict</code>) will be used.
Those values are also declared as constants for convenience:</p>
<blockquote>

<ul>
    <li class="dash"><code>\Doctrine\ODM\MongoDB\Mapping\ClassMetadata::SCHEMA_VALIDATION_LEVEL_OFF</code></li>
    <li class="dash"><code>\Doctrine\ODM\MongoDB\Mapping\ClassMetadata::SCHEMA_VALIDATION_LEVEL_STRICT</code></li>
    <li class="dash"><code>\Doctrine\ODM\MongoDB\Mapping\ClassMetadata::SCHEMA_VALIDATION_LEVEL_MODERATE</code></li>
</ul>
</blockquote>
    <p>Import the <code>ClassMetadata</code> namespace to use those constants in your attribute.</p>
</li>
</ul>

                <pre class="code-block-table" id="d070c065710352151fab8f9743c7919ec5e1a644"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="d070c065710352151fab8f9743c7919ec5e1a644"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;</code><code class="line language-php"><span class="hljs-comment">// ... other imports</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document]</span></code><code class="line language-php"><span class="hljs-comment">#[Validation(</span></code><code class="line language-php">    validator: SchemaValidated::VALIDATOR,</code><code class="line language-php">    action: ClassMetadata::SCHEMA_VALIDATION_ACTION_WARN,</code><code class="line language-php">    level: ClassMetadata::SCHEMA_VALIDATION_LEVEL_MODERATE,</code><code class="line language-php">)]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SchemaValidated</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> VALIDATOR = <span class="hljs-string">&lt;&lt;&lt;'EOT'</span></code><code class="line language-php">        {</code><code class="line language-php">            <span class="hljs-string">"$jsonSchema"</span>: {</code><code class="line language-php">                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"name"</span>],</code><code class="line language-php">                <span class="hljs-string">"properties"</span>: {</code><code class="line language-php">                    <span class="hljs-string">"name"</span>: {</code><code class="line language-php">                        <span class="hljs-string">"bsonType"</span>: <span class="hljs-string">"string"</span>,</code><code class="line language-php">                        <span class="hljs-string">"description"</span>: <span class="hljs-string">"must be a string and is required"</span></code><code class="line language-php">                    }</code><code class="line language-php">                }</code><code class="line language-php">            },</code><code class="line language-php">            <span class="hljs-string">"$or"</span>: [</code><code class="line language-php">                { <span class="hljs-string">"phone"</span>: { <span class="hljs-string">"$type"</span>: <span class="hljs-string">"string"</span> } },</code><code class="line language-php">                { <span class="hljs-string">"email"</span>: { <span class="hljs-string">"$regularExpression"</span> : { <span class="hljs-string">"pattern"</span>: <span class="hljs-string">"@mongodb\\.com$"</span>, <span class="hljs-string">"options"</span>: <span class="hljs-string">""</span> } } },</code><code class="line language-php">                { <span class="hljs-string">"status"</span>: { <span class="hljs-string">"$in"</span>: [ <span class="hljs-string">"Unknown"</span>, <span class="hljs-string">"Incomplete"</span> ] } }</code><code class="line language-php">            ]</code><code class="line language-php">        }</code><code class="line language-php">        EOT;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// rest of the class code...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="vectorsearchindex">
            <h2 class="section-header ">
    <a href="#vectorsearchindex">
        #[VectorSearchIndex]
        <i class="fas fa-link"></i>
    </a>
</h2>
            <a id="vector_search_index"></a>
            
    <p>The <code>#[VectorSearchIndex]</code> attribute is used to define a vector search index
on a document class. This enables efficient similarity search on vector fields,
such as those used for machine learning embeddings.</p>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>name</code>: (optional) The name of the vector search index. If omitted, a default name is used.</li>
    <li class="dash">
    <p><code>fields</code> (required): A list of field definitions. Each field definition is an associative array describing a vector or filter field. For vector fields, the following keys are supported:</p>


<ul>
    <li class="dash"><code>type</code>: Must be set to <code>&#039;vector&#039;</code> for vector fields or <code>&#039;filter&#039;</code> for filter fields.</li>
    <li class="dash"><code>path</code>: The name of the field in the document to index.</li>
    <li class="dash"><code>numDimensions</code>: (vector fields only) The number of dimensions in the vector.</li>
    <li class="dash"><code>similarity</code>: (vector fields only) The vector similarity function to use. Supported values include <code>&#039;euclidean&#039;</code>, <code>&#039;cosine&#039;</code>, and <code>&#039;dotProduct&#039;</code>. Use the constants from <code>Doctrine\ODM\MongoDB\Mapping\ClassMetadata::VECTOR_SIMILARITY_*</code> for best compatibility.</li>
    <li class="dash"><code>quantization</code>: (vector fields only, optional) The quantization method, e.g., <code>&#039;scalar&#039;</code>.</li>
    <li class="dash"><code>hnswOptions</code>: (vector fields only, optional) Options for the HNSW algorithm: <code>maxEdges</code> and <code>numEdgeCandidates</code>.</li>
</ul>

    <p>For filter fields, only <code>type: &#039;filter&#039;</code> and <code>path</code> are required.</p>
</li>
</ul>

            
    <p>Example:</p>

                <pre class="code-block-table" id="bb9ee4e48e903eb419a5457c05c760c33fa1d549"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="bb9ee4e48e903eb419a5457c05c760c33fa1d549"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Document</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Field</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Id</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">VectorSearchIndex</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">ClassMetadata</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Types</span>\<span class="hljs-title">Type</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[Document(collection: 'vector_embeddings')]</span></code><code class="line language-php"><span class="hljs-comment">#[VectorSearchIndex(</span></code><code class="line language-php">    fields: [</code><code class="line language-php">        [</code><code class="line language-php">            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'vector'</span>,</code><code class="line language-php">            <span class="hljs-string">'path'</span> =&gt; <span class="hljs-string">'plotEmbeddingVoyage3Large'</span>,</code><code class="line language-php">            <span class="hljs-string">'numDimensions'</span> =&gt; <span class="hljs-number">2048</span>,</code><code class="line language-php">            <span class="hljs-string">'similarity'</span> =&gt; ClassMetadata::VECTOR_SIMILARITY_DOT_PRODUCT,</code><code class="line language-php">            <span class="hljs-string">'quantization'</span> =&gt; ClassMetadata::VECTOR_QUANTIZATION_SCALAR,</code><code class="line language-php">        ],</code><code class="line language-php">        [</code><code class="line language-php">            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'filter'</span>,</code><code class="line language-php">            <span class="hljs-string">'path'</span> =&gt; <span class="hljs-string">'category'</span>,</code><code class="line language-php">        ],</code><code class="line language-php">    ],</code><code class="line language-php">)]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VectorEmbedding</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Id]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> ?string $id = <span class="hljs-keyword">null</span>;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">/** <span class="hljs-doctag">@var</span> list&lt;float&gt; */</span></code><code class="line language-php">    <span class="hljs-comment">#[Field(type: Type::COLLECTION)]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">array</span> $plotEmbeddingVoyage3Large = [];</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Field]</span></code><code class="line language-php">    <span class="hljs-keyword">public</span> string $category;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>For more details, see the MongoDB documentation on <a href="https://www.mongodb.com/docs/atlas/atlas-vector-search/">Atlas Vector Search</a>.</p>

    </div>
            <div class="section" id="version">
            <h2 class="section-header ">
    <a href="#version">
        #[Version]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The annotated instance variable will be used to store version information for <a href="transactions-and-concurrency.html#transactions_and_concurrency_optimistic_locking">optimistic locking</a>.
This is only compatible with types implementing the <code>\Doctrine\ODM\MongoDB\Types\Versionable</code> interface and cannot be
combined with <a href="#[Id]">#[Id]</a>. Following ODM types can be used for versioning: <code>int</code>, <code>decimal128</code>, <code>date</code>, and
<code>date_immutable</code>.</p>

                <pre class="code-block-table" id="3068d4e7cc47519a773e0abc3778c3d1fe343ab5"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="3068d4e7cc47519a773e0abc3778c3d1fe343ab5"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thing</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[Field(type: 'int')]</span></code><code class="line language-php">    <span class="hljs-comment">#[Version]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> int $version;</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>By default, Doctrine ODM updates <a href="embedded-mapping.html#embed_many">embed-many</a> and
<a href="reference-mapping.html#reference_many">reference-many</a> collections in separate write operations,
which do not bump the document version. Users employing document versioning are
encouraged to use the <a href="storage-strategies.html#atomic_set">atomicSet</a> or
<a href="storage-strategies.html#atomic_set_array">atomicSetArray</a> strategies for such collections, which
will ensure that collections are updated in the same write operation as the
versioned parent document.</p>

    </div>
            <div class="section" id="view">
            <h2 class="section-header ">
    <a href="#view">
        #[View]
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Required attribute to mark a PHP class as a view. Views are created from
aggregation pipelines, which are returned from a special repository method.
Views can be used like collections for any read operations. Result documents are
not managed and cannot be referenced using the <a href="reference-mapping.html#reference_many">reference-many</a>
and <a href="reference-mapping.html#reference_one">reference-one</a> mappings.</p>

            
    <p>Required attributes:</p>

            

<ul>
    <li class="dash"><code>rootClass</code> - this is the base collection that the view is created from</li>
    <li class="dash"><code>repositoryClass</code> - a repository class is required. This repository must
implement the <code>MongoDB\ODM\MongoDB\Repository\ViewRepository</code> interface.</li>
</ul>

            
    <p>Optional arguments:</p>

            

<ul>
    <li class="dash"><code>db</code> - By default, the document manager will use the MongoDB database
defined in the configuration, but this option may be used to override the
database for a particular document class.</li>
    <li class="dash"><code>view</code> - By default, the view name is derived from the document&#039;s class
name, but this option may be used to override that behavior.</li>
</ul>

                <pre class="code-block-table" id="66561ad92a9a4006fd5cf5dcdcde19af2a56388a"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="66561ad92a9a4006fd5cf5dcdcde19af2a56388a"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-meta">&lt;?php</span></code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[View(</span></code><code class="line language-php">    db: <span class="hljs-string">'documents'</span>,</code><code class="line language-php">    rootClass: User::class,</code><code class="line language-php">    repositoryClass: UserNameRepository::class,</code><code class="line language-php">)]</code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserName</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">//...</span></code><code class="line language-php">}</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserNameRepository</span> <span class="hljs-keyword">implements</span> \<span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">ViewRepository</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createViewAggregation</span><span class="hljs-params">(Builder $builder)</span> : <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        $builder-&gt;project()</code><code class="line language-php">            -&gt;includeFields([<span class="hljs-string">'username'</span>]);</code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>The <code>createViewAggregation</code> method can add any aggregation pipeline stage,
except for the <code>$out</code> and <code>$merge</code> stages. The pipeline is created for the
root class specified in the view mapping.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Views must be created before they can be queried. This can be done using the
<code>odm:schema:create</code> command.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?4a831b"
                            integrity="sha384-ygNM6vWkqMgvV0Lrk5BeKUupSk4CidmuzVPL3OkdAxEVjZQDo9cgbfC+FXAfoAse"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'mongodb-odm';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search MongoDB ODM 2.15'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
