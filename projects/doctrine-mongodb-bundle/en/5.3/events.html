<!DOCTYPE html>
<html>
    <head>
        <title>        Registering Event Listeners and Subscribers - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine MongoDB Bundle Documentation: Registering Event Listeners and Subscribers ">

        <meta name="keywords" content="                    persistence,mongodb,symfony,documentation,registering,event,listeners,and,subscribers
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/events.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?6e5d9f"
                        integrity="sha384-1gHMA2pCh3C7C5PdanZqLyU+p0j9aNUSKdqMxyST9hhhoAcooEmUcqk0Rj7owse5"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/5.3/events.html" />
        <meta property="og:title" content="        Registering Event Listeners and Subscribers - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    " />
        <meta property="og:description" content="Doctrine Doctrine MongoDB Bundle Documentation: Registering Event Listeners and Subscribers " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine MongoDB Bundle",
            "description": "Registering Event Listeners and Subscribers",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/DoctrineMongoDBBundle/edit/5.3.x/docs/en/events.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="config.html#configuration">Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="config.html#sample-configuration">Sample Configuration</a>


</li>
            <li class="toc-item">
    <a href="config.html#mapping-configuration">Mapping Configuration</a>


</li>
            <li class="toc-item">
    <a href="config.html#custom-types">Custom Types</a>


</li>
            <li class="toc-item">
    <a href="config.html#filters">Filters</a>


</li>
            <li class="toc-item">
    <a href="config.html#multiple-connections">Multiple Connections</a>


</li>
            <li class="toc-item">
    <a href="config.html#connecting-to-a-pool-of-mongodb-servers-on-1-connection">Connecting to a pool of mongodb servers on 1 connection</a>


</li>
            <li class="toc-item">
    <a href="config.html#using-authentication-on-a-database-level">Using Authentication on a Database Level</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="config.html#specifying-a-context-service">Specifying a context service</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="config.html#full-default-configuration">Full Default Configuration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="console.html#console-commands">Console Commands</a>


</li>
    <li class="toc-item">
    <a href="cookbook/registration_form.html#creating-a-registration-form">Creating a Registration Form</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="cookbook/registration_form.html#the-user-model">The User Model</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#create-a-form-for-the-model">Create a Form for the Model</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#embedding-the-user-form-into-a-registration-form">Embedding the User form into a Registration Form</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#handling-the-form-submission">Handling the Form Submission</a>


</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#registering-event-listeners-and-subscribers">Registering Event Listeners and Subscribers</a>


</li>
    <li class="toc-item">
    <a href="first_steps.html#first-steps-using-the-odm">First steps using the ODM</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="first_steps.html#an-introductory-example-a-product">An Introductory Example: A Product</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="first_steps.html#creating-a-document-class">Creating a Document Class</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#add-mapping-information">Add Mapping Information</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#persisting-objects-to-mongodb">Persisting Objects to MongoDB</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetching-objects-from-mongodb">Fetching Objects from MongoDB</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#automatically-fetching-objects-documentvalueresolver">Automatically Fetching Objects (DocumentValueResolver)</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetch-automatically">Fetch Automatically</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetch-via-an-expression">Fetch via an Expression</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#mapdocument-options">MapDocument Options</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#updating-an-object">Updating an Object</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#deleting-an-object">Deleting an Object</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="first_steps.html#querying-for-objects">Querying for Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="first_steps.html#using-the-query-builder">Using the Query Builder</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#custom-repository-classes">Custom Repository Classes</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#service-repositories">Service Repositories</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="form_validation.html#form-validation">Form &amp; Validation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="form_validation.html#documenttype">DocumentType</a>


</li>
            <li class="toc-item">
    <a href="form_validation.html#unique-constraint">Unique constraint</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="installation.html#installation">Installation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="installation.html#install-the-bundle-with-symfony-flex">Install the bundle with Symfony Flex</a>


</li>
            <li class="toc-item">
    <a href="installation.html#install-the-bundle-with-composer">Install the bundle with Composer</a>


</li>
            <li class="toc-item">
    <a href="installation.html#enable-the-bundle">Enable the Bundle</a>


</li>
            <li class="toc-item">
    <a href="installation.html#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="installation.html#authentication">Authentication</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="messenger.html#messenger-integration">Messenger Integration</a>


</li>
    <li class="toc-item">
    <a href="security_bundle.html#securitybundle-integration">SecurityBundle integration</a>


</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "DoctrineMongoDBBundle",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/5.3/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Registering Event Listeners and Subscribers",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/5.3/events.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html">DoctrineMongoDBBundle</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/5.3/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Registering Event Listeners and Subscribers</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-bundle/en/5.3/events.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        5.3.1
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/latest/events.html">
                                                        5.5

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/latest/events.html">
                                                        5.4.0

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-mongodb-bundle/en/5.3/events.html">5.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/5.2/events.html">5.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/5.1/events.html">5.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/5.0/events.html">5.0</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                </div>
                            
                            

            <div class="section" id="registering-event-listeners-and-subscribers">
            <h1 class="section-header ">
    <a href="#registering-event-listeners-and-subscribers">
        Registering Event Listeners and Subscribers
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>Doctrine allows you to register listeners and subscribers that are notified
when different events occur inside Doctrine&#039;s ODM. For more information,
see Doctrine&#039;s <a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/events.html">Event Documentation</a>.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Each connection in Doctrine has its own event manager, which is shared with
document managers tied to that connection. Listeners and subscribers may be
registered with all event managers or just one (using the connection name).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Use the <code>doctrine_mongodb.odm.event_listener</code> tag to register a listener. The
<code>event</code> attribute is required and should denote the event on which to listen.
By default, listeners will be registered with event managers for all connections.
To restrict a listener to a single connection, specify its name in the tag&#039;s
<code>connection</code> attribute.</p>

            
    <p>The <code>priority</code> attribute, which defaults to <code>0</code> if omitted, may be used
to control the order in which listeners are registered. Much like Symfony&#039;s
<a href="https://symfony.com/doc/current/components/event_dispatcher.html">event dispatcher</a>, greater number will result in the listener executing
first and listeners with the same priority will be executed in the order that
they were registered with the event manager.</p>

            
    <p>Lastly, the <code>lazy</code> attribute, which defaults to <code>false</code> if omitted, may
be used to request that the listener be lazily loaded by the event manager
when its event is dispatched.</p>

            
    <p>Starting with DoctrineMongoDBBundle bundle 4.7, you can use the <code>#[AsDocumentListener]</code>
attribute to tag the service.</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="php-attributes"
                    aria-controls="configuration-block-tabpanel-a9a9b2d6b2278b27fe9a43036d15207b" aria-selected="true"
                    data-active="true" >
                <span>Php attributes</span>
            </button>
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-13359c61f3b260a3c80d97f7df13ceda" aria-selected="false"
                     tabindex="-1">
                <span>Yaml</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-c9f4b276706859e7e7df6ec69739d2fd" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-a9a9b2d6b2278b27fe9a43036d15207b" aria-label="Php attributes" class="configuration-codeblock" data-language="php-attributes" style="">
                <pre class="code-block-table" id="e6e8ff2f670a2b46b75104a99f29a47f0df657de"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e6e8ff2f670a2b46b75104a99f29a47f0df657de"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-comment">// src/App/EventListener/SearchIndexer.php</span></code><code class="line language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">EventListener</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">MongoDBBundle</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">AsDocumentListener</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">LifecycleEventArgs</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[AsDocumentListener('postPersist', priority: 500, connection: 'default')]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SearchIndexer</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postPersist</span><span class="hljs-params">(LifecycleEventArgs $event)</span>: <span class="hljs-title">void</span></span></code><code class="line language-php">    {</code><code class="line language-php">        <span class="hljs-comment">// ...</span></code><code class="line language-php">    }</code><code class="line language-php">}</code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-13359c61f3b260a3c80d97f7df13ceda" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="display: none">
                <pre class="code-block-table" id="2867a4860ba24fcc845fb037fdc9afe1c8a833b5"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="2867a4860ba24fcc845fb037fdc9afe1c8a833b5"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-comment"># config/services.yaml</span></code><code class="line language-yaml"><span class="hljs-attr">services:</span></code><code class="line language-yaml">    <span class="hljs-comment"># ...</span></code><code class="line language-yaml"></code><code class="line language-yaml">    <span class="hljs-string">App\EventListener\SearchIndexer:</span></code><code class="line language-yaml">        <span class="hljs-attr">tags:</span></code><code class="line language-yaml">            <span class="hljs-bullet">-</span></code><code class="line language-yaml">                <span class="hljs-attr">name:</span> <span class="hljs-string">'doctrine_mongodb.odm.event_listener'</span></code><code class="line language-yaml">                <span class="hljs-comment"># this is the only required option for the lifecycle listener tag</span></code><code class="line language-yaml">                <span class="hljs-attr">event:</span> <span class="hljs-string">'postPersist'</span></code><code class="line language-yaml"></code><code class="line language-yaml">                <span class="hljs-comment"># listeners can define their priority in case multiple subscribers or listeners are associated</span></code><code class="line language-yaml">                <span class="hljs-comment"># to the same event (default priority = 0; higher numbers = listener is run earlier)</span></code><code class="line language-yaml">                <span class="hljs-attr">priority:</span> <span class="hljs-number">500</span></code><code class="line language-yaml"></code><code class="line language-yaml">                <span class="hljs-comment"># you can also restrict listeners to a specific Doctrine connection</span></code><code class="line language-yaml">                <span class="hljs-attr">connection:</span> <span class="hljs-string">'default'</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-c9f4b276706859e7e7df6ec69739d2fd" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
                <pre class="code-block-table" id="da7b4b9ed43d5c4fe98d6039142f6182e4420e75"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="da7b4b9ed43d5c4fe98d6039142f6182e4420e75"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-xml"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span></code><code class="line language-xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></code><code class="line language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span></span></code><code class="line language-xml">    xmlns:doctrine="http://symfony.com/schema/dic/doctrine"&gt;</code><code class="line language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span></code><code class="line language-xml">        <span class="hljs-comment">&lt;!-- ... --&gt;</span></code><code class="line language-xml"></code><code class="line language-xml">        <span class="hljs-comment">&lt;!--</span></code><code class="line language-xml">            * 'event' is the only required option that defines the lifecycle listener</code><code class="line language-xml">            * 'priority': used when multiple subscribers or listeners are associated to the same event</code><code class="line language-xml">            *             (default priority = 0; higher numbers = listener is run earlier)</code><code class="line language-xml">            * 'connection': restricts the listener to a specific MongoDB connection</code><code class="line language-xml">        --&gt;</code><code class="line language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"App\EventListener\SearchIndexer"</span>&gt;</span></code><code class="line language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">tag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"doctrine_mongodb.odm.event_listener"</span></span></code><code class="line language-xml">                event="postPersist"</code><code class="line language-xml">                priority="500"</code><code class="line language-xml">                connection="default" /&gt;</code><code class="line language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span></code><code class="line language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></code><code class="empty"></code></pre>
        </div>
    </div>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>Unlike Symfony event listeners, Doctrine&#039;s event manager expects each
listener and subscriber to have a method name corresponding to the observed
event(s). For this reason, the aforementioned tags have no <code>method</code>
attribute.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine-mongodb-bundle';
            var versionSlug = '5.3';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search DoctrineMongoDBBundle 5.3'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
