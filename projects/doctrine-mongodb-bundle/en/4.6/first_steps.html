<!DOCTYPE html>
<html>
    <head>
        <title>        First steps using the ODM - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine MongoDB Bundle Documentation: First steps using the ODM ">

        <meta name="keywords" content="                    persistence,mongodb,symfony,documentation,first,steps,using,the,odm
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.4/first_steps.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?c68507"
                        integrity="sha384-5gjVrQLkxFYHnOPjhlHdZAIj+eUQJ1gHSCnQNl6G5BmKadWOX8CCuZfrsDUsY4oK"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.6/first_steps.html" />
        <meta property="og:title" content="        First steps using the ODM - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    " />
        <meta property="og:description" content="Doctrine Doctrine MongoDB Bundle Documentation: First steps using the ODM " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine MongoDB Bundle",
            "description": "First steps using the ODM",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/DoctrineMongoDBBundle/edit/4.6.x/Resources/doc/first_steps.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="config-html" class="toc-item"><a href="config.html">Configuration</a><ul><li id="config-html-sample-configuration" class="toc-item"><a href="config.html#sample-configuration">Sample Configuration</a></li><li id="config-html-mapping-configuration" class="toc-item"><a href="config.html#mapping-configuration">Mapping Configuration</a></li><li id="config-html-custom-types" class="toc-item"><a href="config.html#custom-types">Custom Types</a></li><li id="config-html-filters" class="toc-item"><a href="config.html#filters">Filters</a></li><li id="config-html-multiple-connections" class="toc-item"><a href="config.html#multiple-connections">Multiple Connections</a></li><li id="config-html-connecting-to-a-pool-of-mongodb-servers-on-1-connection" class="toc-item"><a href="config.html#connecting-to-a-pool-of-mongodb-servers-on-1-connection">Connecting to a pool of mongodb servers on 1 connection</a></li><li id="config-html-using-authentication-on-a-database-level" class="toc-item"><a href="config.html#using-authentication-on-a-database-level">Using Authentication on a Database Level</a><ul><li id="config-html-specifying-a-context-service" class="toc-item"><a href="config.html#specifying-a-context-service">Specifying a context service</a></li></ul></li><li id="config-html-full-default-configuration" class="toc-item"><a href="config.html#full-default-configuration">Full Default Configuration</a></li></ul></li><li id="console-html" class="toc-item"><a href="console.html">Console Commands</a></li><li id="cookbook-registration-form-html" class="toc-item"><a href="cookbook/registration_form.html">Creating a Registration Form</a><ul><li id="cookbook-registration-form-html-the-user-model" class="toc-item"><a href="cookbook/registration_form.html#the-user-model">The User Model</a></li><li id="cookbook-registration-form-html-create-a-form-for-the-model" class="toc-item"><a href="cookbook/registration_form.html#create-a-form-for-the-model">Create a Form for the Model</a></li><li id="cookbook-registration-form-html-embedding-the-user-form-into-a-registration-form" class="toc-item"><a href="cookbook/registration_form.html#embedding-the-user-form-into-a-registration-form">Embedding the User form into a Registration Form</a></li><li id="cookbook-registration-form-html-handling-the-form-submission" class="toc-item"><a href="cookbook/registration_form.html#handling-the-form-submission">Handling the Form Submission</a></li></ul></li><li id="events-html" class="toc-item"><a href="events.html">Registering Event Listeners and Subscribers</a><ul><li id="events-html-event-listeners" class="toc-item"><a href="events.html#event-listeners">Event Listeners</a></li><li id="events-html-event-subscribers" class="toc-item"><a href="events.html#event-subscribers">Event Subscribers</a></li></ul></li><li id="form-validation-html" class="toc-item"><a href="form_validation.html">Form & Validation</a><ul><li id="form-validation-html-documenttype" class="toc-item"><a href="form_validation.html#documenttype">DocumentType</a></li><li id="form-validation-html-unique-constraint" class="toc-item"><a href="form_validation.html#unique-constraint">Unique constraint</a></li></ul></li><li id="index-html" class="toc-item"><a href="index.html">DoctrineMongoDBBundle</a><ul><li id="index-html-doctrine-extensions-timestampable-sluggable-etc" class="toc-item"><a href="index.html#doctrine-extensions-timestampable-sluggable-etc">Doctrine Extensions: Timestampable, Sluggable, etc.</a></li></ul></li><li id="installation-html" class="toc-item"><a href="installation.html">Installation</a><ul><li id="installation-html-install-the-bundle-with-symfony-flex" class="toc-item"><a href="installation.html#install-the-bundle-with-symfony-flex">Install the bundle with Symfony Flex</a></li><li id="installation-html-install-the-bundle-with-composer" class="toc-item"><a href="installation.html#install-the-bundle-with-composer">Install the bundle with Composer</a></li><li id="installation-html-enable-the-bundle" class="toc-item"><a href="installation.html#enable-the-bundle">Enable the Bundle</a></li><li id="installation-html-configuration" class="toc-item"><a href="installation.html#configuration">Configuration</a></li><li id="installation-html-authentication" class="toc-item"><a href="installation.html#authentication">Authentication</a></li></ul></li><li id="messenger-html" class="toc-item"><a href="messenger.html">Messenger Integration</a></li><li id="security-bundle-html" class="toc-item"><a href="security_bundle.html">SecurityBundle integration</a></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "DoctrineMongoDBBundle",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.6/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "First steps using the ODM",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.6/first_steps.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html">DoctrineMongoDBBundle</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.6/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">First steps using the ODM</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-bundle/en/4.6/first_steps.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        4.6.1
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/latest/first_steps.html">
                                                        4.5.3

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.4/first_steps.html">
                                                        4.4.3

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-mongodb-bundle/en/4.6/first_steps.html">4.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.3/first_steps.html">4.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.2/first_steps.html">4.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.1/first_steps.html">4.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.0/first_steps.html">4.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.6</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.5</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.4</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">3.0</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">2.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="">2.0</a>
                                                                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="first-steps-using-the-odm" name="first-steps-using-the-odm"></a><h1 class="section-header"><a href="#first-steps-using-the-odm">First steps using the ODM<i class="fas fa-link"></i></a></h1>
<p>The best way to understand the Doctrine MongoDB ODM is to see it in action.
In this section, you'll walk through each step needed to start persisting
documents to and from MongoDB.</p>
<div class="section"><a class="section-anchor" id="an-introductory-example-a-product" name="an-introductory-example-a-product"></a><h2 class="section-header"><a href="#an-introductory-example-a-product">An Introductory Example: A Product<i class="fas fa-link"></i></a></h2>
<div class="section"><a class="section-anchor" id="creating-a-document-class" name="creating-a-document-class"></a><h3 class="section-header"><a href="#creating-a-document-class">Creating a Document Class<i class="fas fa-link"></i></a></h3>
<p>Suppose you're building an application where products need to be displayed.
Without even thinking about Doctrine or MongoDB, you already know that you
need a <code>Product</code> object to represent those products. Create this class
inside the <code>Document</code> subdirectory of your project's source code:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1b4ea5e5208b4710d826df76f9ca3f181bf4cb77"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1b4ea5e5208b4710d826df76f9ca3f181bf4cb77"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-1" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-1">1</a></td><td class="code-line" rowspan="9"><span class="hljs-comment">// src/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-keyword">protected</span> $price;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-2" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-3" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-4" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-5" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-6" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-7" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-8" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-9" class="line-number-anchor" /><a href="#line-number-1b4ea5e5208b4710d826df76f9ca3f181bf4cb77-9">9</a></td></tr></table></div></code></pre>
<p>The class - often called a document, meaning <em>a basic class that holds data</em> -
helps fulfill the business requirement of needing products in your application.
This class can't be persisted to Doctrine MongoDB yet - currently it's
only a plain PHP class.</p>
</div>
<div class="section"><a class="section-anchor" id="add-mapping-information" name="add-mapping-information"></a><h3 class="section-header"><a href="#add-mapping-information">Add Mapping Information<i class="fas fa-link"></i></a></h3>
<p>Doctrine allows you to work with MongoDB in a much more interesting way
than just fetching data back and forth as an array. Instead, Doctrine allows
you to persist entire <em>objects</em> to MongoDB and fetch entire objects out of
MongoDB. This works by mapping a PHP class and its properties to entries
of a MongoDB collection.</p>
<p>For Doctrine to be able to do this, you have to create metadata, or
configuration that tells Doctrine exactly how the <code>Product</code> class and its
properties should be <em>mapped</em> to MongoDB. This metadata can be specified
in a number of different formats including XML or directly inside the
<code>Product</code> class via annotations or PHP 8 attributes:</p>
<div class="alert version-added bg-info text-white"><p class="new-version font-weight-bold"><i class="fas fa-plus-square"></i> New in version 4.4</p></div><p>The attribute mapping support was added in Doctrine MongoDB ODM Bundle 4.4 and requires PHP 8.0 or newer.
</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="ae6a9c6ca23cad8db779d853e8619dacc8e4ec75"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="ae6a9c6ca23cad8db779d853e8619dacc8e4ec75"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-1" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-1">1</a></td><td class="code-line" rowspan="25"><span class="hljs-comment">// src/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@MongoDB</span>\Document
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\Id
     */</span>
    <span class="hljs-keyword">protected</span> $id;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\Field(type="string")
     */</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\Field(type="float")
     */</span>
    <span class="hljs-keyword">protected</span> $price;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-2" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-3" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-4" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-5" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-6" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-7" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-8" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-9" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-10" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-11" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-12" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-13" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-14" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-15" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-16" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-17" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-18" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-19" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-20" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-21" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-22" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-23" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-24" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-25" class="line-number-anchor" /><a href="#line-number-ae6a9c6ca23cad8db779d853e8619dacc8e4ec75-25">25</a></td></tr></table></div></code></pre></div></li><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a021c26e2203a01fc013f76f9b28bddbd8c18e83"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a021c26e2203a01fc013f76f9b28bddbd8c18e83"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-1" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-comment">// src/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">#[MongoDB\Document]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">#[MongoDB\Id]</span>
    <span class="hljs-keyword">protected</span> string $id;

    <span class="hljs-comment">#[MongoDB\Field(type: 'string')]</span>
    <span class="hljs-keyword">protected</span> string $name;

    <span class="hljs-comment">#[MongoDB\Field(type: 'float')]</span>
    <span class="hljs-keyword">protected</span> float $price;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-2" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-3" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-4" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-5" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-6" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-7" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-8" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-9" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-10" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-11" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-12" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-13" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-14" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-15" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-16" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-17" class="line-number-anchor" /><a href="#line-number-a021c26e2203a01fc013f76f9b28bddbd8c18e83-17">17</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="198a2479ed4c5d17f9e33fa36464cb65cbca599d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="198a2479ed4c5d17f9e33fa36464cb65cbca599d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-1" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-comment">&lt;!-- src/Resources/config/doctrine/Product.mongodb.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mongo-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping
                    https://doctrine-project.org/schemas/odm/doctrine-mongo-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Document\Product"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">field-name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">field-name</span>=<span class="hljs-string">"price"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"float"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mongo-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-2" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-3" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-4" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-5" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-6" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-7" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-8" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-9" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-10" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-11" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-12" class="line-number-anchor" /><a href="#line-number-198a2479ed4c5d17f9e33fa36464cb65cbca599d-12">12</a></td></tr></table></div></code></pre></div></li></ul></div>
<div class="alert seealso-admonition bg-light text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="far fa-flag mr-2"></i></td><td><p>You can also check out Doctrine's <a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/basic-mapping.html">Basic Mapping Documentation</a> for
all details about mapping information. If you use annotations, you'll
need to prepend all annotations with <code>MongoDB\</code> (e.g. <code>MongoDB\String</code>),
which is not shown in Doctrine's documentation. You'll also need to include
the <code>use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;</code> statement,
which <em>imports</em> the <code>MongoDB</code> annotations prefix.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="persisting-objects-to-mongodb" name="persisting-objects-to-mongodb"></a><h3 class="section-header"><a href="#persisting-objects-to-mongodb">Persisting Objects to MongoDB<i class="fas fa-link"></i></a></h3>
<p>Now that you have a mapped <code>Product</code> document complete with getter and
setter methods, you're ready to persist data to MongoDB. Let's try it from inside
a controller. Create new Controller class inside source directory of your project:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="429abff7ab8fbbc9749ef60e7c7e113a14157550"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="429abff7ab8fbbc9749ef60e7c7e113a14157550"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-1" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-comment">// src/App/Controller/ProductController.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">DocumentManager</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAction</span><span class="hljs-params">(DocumentManager $dm)</span>
</span>{
    $product = <span class="hljs-keyword">new</span> Product();
    $product-&gt;setName(<span class="hljs-string">'A Foo Bar'</span>);
    $product-&gt;setPrice(<span class="hljs-string">'19.99'</span>);

    $dm-&gt;persist($product);
    $dm-&gt;flush();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Response(<span class="hljs-string">'Created product id '</span> . $product-&gt;getId());
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-2" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-3" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-4" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-5" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-6" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-7" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-8" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-9" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-10" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-11" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-12" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-13" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-14" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-15" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-16" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-17" class="line-number-anchor" /><a href="#line-number-429abff7ab8fbbc9749ef60e7c7e113a14157550-17">17</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>If you're following along with this example, you'll need to create a
route that points to this action to see it in work.</p>
</td></tr></table></div>
<p>Let's walk through this example:</p>
<ul>
    <li><strong>lines 9-11</strong> In this section, you instantiate and work with the <code>$product</code>
object like you would with any other, normal PHP object;</li>
<li><strong>line 13</strong> The <code>persist()</code> method tells Doctrine to &quot;manage&quot; the <code>$product</code>
object. This does not actually cause a query to be made to MongoDB (yet);</li>
<li><strong>line 14</strong> When the <code>flush()</code> method is called, Doctrine looks through
all of the objects that it's managing to see if they need to be persisted
to MongoDB. In this example, the <code>$product</code> object has not been persisted yet,
so the document manager makes a query to MongoDB, which adds a new entry.</li>
</ul>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>In fact, since Doctrine is aware of all your managed objects, when you
call the <code>flush()</code> method, it calculates an overall changeset and executes
the most efficient operation possible.</p>
</td></tr></table></div>
<p>When creating or updating objects, the workflow is always the same. In the
next section, you'll see how Doctrine is smart enough to update entries if
they already exist in MongoDB.</p>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>Doctrine provides a library that allows you to programmatically load testing
data into your project (i.e. fixture data). For more information, see
<a href="https://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html">DoctrineFixturesBundle</a>.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="fetching-objects-from-mongodb" name="fetching-objects-from-mongodb"></a><h3 class="section-header"><a href="#fetching-objects-from-mongodb">Fetching Objects from MongoDB<i class="fas fa-link"></i></a></h3>
<p>Fetching an object back out of MongoDB is also possible. For example, suppose
that you've configured a route to display a specific <code>Product</code> based on its
<code>id</code> value:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="323dbe96d474bf3441e494ea4f44509cf30bdcfe"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="323dbe96d474bf3441e494ea4f44509cf30bdcfe"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-1" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showAction</span><span class="hljs-params">(DocumentManager $dm, $id)</span>
</span>{
    $product = $dm-&gt;getRepository(Product::class)-&gt;find($id);

    <span class="hljs-keyword">if</span> (! $product) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">$this</span>-&gt;createNotFoundException(<span class="hljs-string">'No product found for id '</span> . $id);
    }

    <span class="hljs-comment">// do something, like pass the $product object into a template</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-2" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-3" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-4" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-5" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-6" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-7" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-8" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-9" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-10" class="line-number-anchor" /><a href="#line-number-323dbe96d474bf3441e494ea4f44509cf30bdcfe-10">10</a></td></tr></table></div></code></pre>
<p>When you query for a particular type of object, you always use what's known
as its repository. You can think of a repository as a PHP class whose only
job is to help you fetch objects of a certain class. You can access the
repository object for a document class via:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c7475b63e972391946580e1d9bbdc90c691e0089"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c7475b63e972391946580e1d9bbdc90c691e0089"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c7475b63e972391946580e1d9bbdc90c691e0089-1" class="line-number-anchor" /><a href="#line-number-c7475b63e972391946580e1d9bbdc90c691e0089-1">1</a></td><td class="code-line" rowspan="1">$repository = $dm-&gt;getRepository(Product::class);</td></tr></table></div></code></pre>
<p>Once you have your repository, you have access to all sorts of helpful methods:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1e78d309e2fabf8289d645757873ee72bfe75c78"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1e78d309e2fabf8289d645757873ee72bfe75c78"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-1" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-comment">// query by the identifier (usually "id")</span>
$product = $repository-&gt;find($id);

<span class="hljs-comment">// find *all* products</span>
$products = $repository-&gt;findAll();

<span class="hljs-comment">// find a group of products based on an arbitrary field value</span>
$products = $repository-&gt;findBy([<span class="hljs-string">'price'</span> =&gt; <span class="hljs-number">19.99</span>]);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-2" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-3" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-4" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-5" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-6" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-7" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-8" class="line-number-anchor" /><a href="#line-number-1e78d309e2fabf8289d645757873ee72bfe75c78-8">8</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>You can also issue complex queries, you can learn more about them
in the <a href="first_steps.html#querying-for-objects">Querying for Objects</a> section.</p>
</td></tr></table></div>
<p>You can also take advantage of the useful <code>findBy()</code> and <code>findOneBy()</code> methods
to easily fetch objects based on multiple conditions:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="bd031a2e56132b01051f287cebb732288de41a81"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="bd031a2e56132b01051f287cebb732288de41a81"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-1" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-comment">// query for one product matching by name and price</span>
$product = $repository-&gt;findOneBy([<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'foo'</span>, <span class="hljs-string">'price'</span> =&gt; <span class="hljs-number">19.99</span>]);

<span class="hljs-comment">// query for all products matching the name, ordered by price</span>
$product = $repository-&gt;findBy(
    [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'foo'</span>],
    [<span class="hljs-string">'price'</span> =&gt; <span class="hljs-string">'ASC'</span>]
);</td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-2" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-3" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-4" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-5" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-6" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-7" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-bd031a2e56132b01051f287cebb732288de41a81-8" class="line-number-anchor" /><a href="#line-number-bd031a2e56132b01051f287cebb732288de41a81-8">8</a></td></tr></table></div></code></pre>
</div>
<div class="section"><a class="section-anchor" id="automatically-fetching-objects-documentvalueresolver" name="automatically-fetching-objects-documentvalueresolver"></a><h3 class="section-header"><a href="#automatically-fetching-objects-documentvalueresolver">Automatically Fetching Objects (DocumentValueResolver)<i class="fas fa-link"></i></a></h3>
<div class="alert version-added bg-info text-white"><p class="new-version font-weight-bold"><i class="fas fa-plus-square"></i> New in version 4.6</p></div><p>The support of this feature was added in Doctrine MongoDB ODM Bundle 4.6.
</p>
<p>In many cases, you can use the <code>DocumentValueResolver</code> to do the query for
you automatically! You can simplify the controller to:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c04f50def74eb73cff8645f791570759228d9f7b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c04f50def74eb73cff8645f791570759228d9f7b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-1" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-comment">// src/Controller/ProductController.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Routing</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Route</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">#[Route('/product/{id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showAction</span><span class="hljs-params">(Product $product)</span>: <span class="hljs-title">Response</span>
</span>{
    <span class="hljs-comment">// use the Product!</span>
    <span class="hljs-comment">// do something, like pass the $product object into a template</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-2" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-3" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-4" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-5" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-6" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-7" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-8" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-9" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-10" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-11" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-12" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-13" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c04f50def74eb73cff8645f791570759228d9f7b-14" class="line-number-anchor" /><a href="#line-number-c04f50def74eb73cff8645f791570759228d9f7b-14">14</a></td></tr></table></div></code></pre>
<p>That's it! The bundle uses the <code>{id}</code> from the route to query for the <code>Product</code>
by the <code>id</code> field. If it's not found, a 404 page is generated.</p>
<p>This behavior is enabled by default on all your controllers. You can
disable it by setting the <code>doctrine_mongodb.controller_resolver.auto_mapping</code>
config option to <code>false</code>.</p>
<p>When disabled, you can enable it individually on the desired controllers by
using the <code>MapDocument</code> attribute:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="de7772f46d404f6b32e20c24394303ac3d1306d2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="de7772f46d404f6b32e20c24394303ac3d1306d2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-1" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-1">1</a></td><td class="code-line" rowspan="20"><span class="hljs-comment">// src/Controller/ProductController.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">MongoDBBundle</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">MapDocument</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Routing</span>\<span class="hljs-title">Annotation</span>\<span class="hljs-title">Route</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractController</span>
</span>{
    <span class="hljs-comment">#[Route('/product/{id}')]</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
        #[MapDocument]
        Product $product
    )</span>: <span class="hljs-title">Response</span> </span>{
        <span class="hljs-comment">// use the Product!</span>
        <span class="hljs-comment">// ...</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-2" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-3" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-4" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-5" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-6" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-7" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-8" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-9" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-10" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-11" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-12" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-13" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-14" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-15" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-16" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-17" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-18" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-19" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-20" class="line-number-anchor" /><a href="#line-number-de7772f46d404f6b32e20c24394303ac3d1306d2-20">20</a></td></tr></table></div></code></pre>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>When enabled globally, it's possible to disable the behavior on a specific
controller, by using the <code>MapDocument</code> set to <code>disabled</code>:</p>
</td></tr></table></div>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fdc92858f818dd5ed32c76c586721b952f8ff93f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fdc92858f818dd5ed32c76c586721b952f8ff93f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-1" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[CurrentUser]
    #[MapDocument<span class="hljs-params">(disabled: true)</span>]
    User $user
)</span>: <span class="hljs-title">Response</span> </span>{
    <span class="hljs-comment">// User is not resolved by the DocumentValueResolver</span>
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-2" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-3" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-4" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-5" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-6" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-7" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-8" class="line-number-anchor" /><a href="#line-number-fdc92858f818dd5ed32c76c586721b952f8ff93f-8">8</a></td></tr></table></div></code></pre>
</div>
<div class="section"><a class="section-anchor" id="fetch-automatically" name="fetch-automatically"></a><h3 class="section-header"><a href="#fetch-automatically">Fetch Automatically<i class="fas fa-link"></i></a></h3>
<p>If your route wildcards match properties in your document, then the resolver
will automatically fetch them:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2659da6e473c3221ae68e2e6f42e88a92ab9545d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2659da6e473c3221ae68e2e6f42e88a92ab9545d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-1" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-comment">/**
 * Fetch via identifier because {id} is in the route.
 */</span>
<span class="hljs-comment">#[Route('/product/{id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showByIdentifier</span><span class="hljs-params">(Post $post)</span>: <span class="hljs-title">Response</span>
</span>{
}

<span class="hljs-comment">/**
 * Perform a findOneBy() where the slug property matches {slug}.
 */</span>
<span class="hljs-comment">#[Route('/product/{slug}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showBySlug</span><span class="hljs-params">(Post $post)</span>: <span class="hljs-title">Response</span>
</span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-2" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-3" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-4" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-5" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-6" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-7" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-8" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-9" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-10" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-11" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-12" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-13" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-14" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-15" class="line-number-anchor" /><a href="#line-number-2659da6e473c3221ae68e2e6f42e88a92ab9545d-15">15</a></td></tr></table></div></code></pre>
<p>Automatic fetching works in these situations:</p>
<ul>
    <li>If <code>{id}</code> is in your route, then this is used to fetch by
identifier via the <code>find()</code> method.</li>
<li>The resolver will attempt to do a <code>findOneBy()</code> fetch by using
<em>all</em> of the wildcards in your route that are actually properties
on your document (non-properties are ignored).</li>
</ul>
<p>You can control this behavior by actually <em>adding</em> the <code>MapDocument</code>
attribute and using the <a href="first_steps.html#mapdocument-options">MapDocument options</a>.</p>
</div>
<div class="section"><a class="section-anchor" id="fetch-via-an-expression" name="fetch-via-an-expression"></a><h3 class="section-header"><a href="#fetch-via-an-expression">Fetch via an Expression<i class="fas fa-link"></i></a></h3>
<p>If automatic fetching doesn't work, you can write an expression using the
<a href="https://symfony.com/doc/current/components/expression_language.html">ExpressionLanguage component</a>:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="436864faa860661b5f66c77d25ffd4b34199ed32"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="436864faa860661b5f66c77d25ffd4b34199ed32"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-1" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-comment">#[Route('/product/{product_id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[MapDocument<span class="hljs-params">(expr: <span class="hljs-string">'repository.find(product_id)'</span>)</span>]
    Product $product
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-2" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-3" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-4" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-5" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-436864faa860661b5f66c77d25ffd4b34199ed32-6" class="line-number-anchor" /><a href="#line-number-436864faa860661b5f66c77d25ffd4b34199ed32-6">6</a></td></tr></table></div></code></pre>
<p>In the expression, the <code>repository</code> variable will be your document's
Repository class and any route wildcards - like <code>{product_id}</code> are
available as variables.</p>
<p>This can also be used to help resolve multiple arguments:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2b4a2e1bd6c463695f3f35d164e9590428a6e488"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2b4a2e1bd6c463695f3f35d164e9590428a6e488"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-1" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-1">1</a></td><td class="code-line" rowspan="7"><span class="hljs-comment">#[Route('/product/{id}/comments/{comment_id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    Product $product,
    #[MapDocument<span class="hljs-params">(expr: <span class="hljs-string">'repository.find(comment_id)'</span>)</span>]
    Comment $comment
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-2" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-3" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-4" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-5" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-6" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-7" class="line-number-anchor" /><a href="#line-number-2b4a2e1bd6c463695f3f35d164e9590428a6e488-7">7</a></td></tr></table></div></code></pre>
<p>In the example above, the <code>$product</code> argument is handled automatically,
but <code>$comment</code> is configured with the attribute since they cannot both follow
the default convention.</p>
</div>
<div class="section"><a class="section-anchor" id="mapdocument-options" name="mapdocument-options"></a><h3 class="section-header"><a href="#mapdocument-options">MapDocument Options<i class="fas fa-link"></i></a></h3>
<p>A number of options are available on the <code>MapDocument</code> attribute to
control behavior:</p>
<dl>
                        <dt><code>id</code></dt>
        
        <dd>
                            If an <code>id</code> option is configured and matches a route parameter, then
the resolver will find by the identifier:
                    </dd>
    </dl>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="109d44d219c828c90c5c25c8a443a400e1d172e9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="109d44d219c828c90c5c25c8a443a400e1d172e9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-1" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-comment">#[Route('/product/{product_id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[MapDocument<span class="hljs-params">(id: <span class="hljs-string">'product_id'</span>)</span>]
    Product $product
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-2" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-3" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-4" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-5" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-6" class="line-number-anchor" /><a href="#line-number-109d44d219c828c90c5c25c8a443a400e1d172e9-6">6</a></td></tr></table></div></code></pre>
<dl>
                        <dt><code>mapping</code></dt>
        
        <dd>
                            Configures the properties and values to use with the <code>findOneBy()</code>
method: the key is the route placeholder name and the value is the Doctrine
property name:
                    </dd>
    </dl>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="111246b3273883e586dc456c700f328e34cd2a5b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="111246b3273883e586dc456c700f328e34cd2a5b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-1" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-comment">#[Route('/product/{category}/{slug}/comments/{comment_slug}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[MapDocument<span class="hljs-params">(mapping: [<span class="hljs-string">'category'</span> =&gt; <span class="hljs-string">'category'</span>, <span class="hljs-string">'slug'</span> =&gt; <span class="hljs-string">'slug'</span>])</span>]
    Product $product,
    #[MapDocument<span class="hljs-params">(mapping: [<span class="hljs-string">'comment_slug'</span> =&gt; <span class="hljs-string">'slug'</span>])</span>]
    Comment $comment
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-2" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-3" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-4" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-5" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-6" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-7" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-111246b3273883e586dc456c700f328e34cd2a5b-8" class="line-number-anchor" /><a href="#line-number-111246b3273883e586dc456c700f328e34cd2a5b-8">8</a></td></tr></table></div></code></pre>
<dl>
                        <dt><code>exclude</code></dt>
        
        <dd>
                            Configures the properties that should be used in the <code>findOneBy()</code>
method by <em>excluding</em> one or more properties so that not <em>all</em> are used:
                    </dd>
    </dl>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f6429fb3edf9c162822083843aea77e00a2c039c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f6429fb3edf9c162822083843aea77e00a2c039c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-1" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-1">1</a></td><td class="code-line" rowspan="7"><span class="hljs-comment">#[Route('/product/{slug}/{date}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[MapDocument<span class="hljs-params">(exclude: [<span class="hljs-string">'date'</span>])</span>]
    Product $product,
    \DateTime $date
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-2" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-3" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-4" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-5" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-6" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f6429fb3edf9c162822083843aea77e00a2c039c-7" class="line-number-anchor" /><a href="#line-number-f6429fb3edf9c162822083843aea77e00a2c039c-7">7</a></td></tr></table></div></code></pre>
<dl>
                        <dt><code>stripNull</code></dt>
        
        <dd>
                            If true, then when <code>findOneBy()</code> is used, any values that are
<code>null</code> will not be used for the query.
                    </dd>
                        <dt><code>objectManager</code></dt>
        
        <dd>
                            By default, the <code>DocumentValueResolver</code> will choose the document manager
that has the class registered for it, but you can configure this:
                    </dd>
    </dl>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-1" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-1">1</a></td><td class="code-line" rowspan="6"><span class="hljs-comment">#[Route('/product/{id}')]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">(
    #[MapDocument<span class="hljs-params">(objectManager: <span class="hljs-string">'foo'</span>)</span>]
    Product $product
)</span>: <span class="hljs-title">Response</span> </span>{
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-2" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-3" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-4" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-5" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-6" class="line-number-anchor" /><a href="#line-number-c3b2ff4e7afd0b4a7436ffe561657913e7e56ad5-6">6</a></td></tr></table></div></code></pre>
<dl>
                        <dt><code>disabled</code></dt>
        
        <dd>
                            If true, the <code>DoctrineValueResolver</code> will not try to replace the argument.
                    </dd>
    </dl>
</div>
<div class="section"><a class="section-anchor" id="updating-an-object" name="updating-an-object"></a><h3 class="section-header"><a href="#updating-an-object">Updating an Object<i class="fas fa-link"></i></a></h3>
<p>Once you've fetched an object from Doctrine, let's try to update it. Suppose
you have a route that maps a product id to an update action in a controller:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2d467e5d6f34700a61d42993362383c595eaa881"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2d467e5d6f34700a61d42993362383c595eaa881"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-1" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-1">1</a></td><td class="code-line" rowspan="14"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateAction</span><span class="hljs-params">(DocumentManager $dm, $id)</span>
</span>{
    $product = $dm-&gt;getRepository(Product::class)-&gt;find($id);

    <span class="hljs-keyword">if</span> (! $product) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">$this</span>-&gt;createNotFoundException(<span class="hljs-string">'No product found for id '</span> . $id);
    }

    $product-&gt;setName(<span class="hljs-string">'New product name!'</span>);

    $dm-&gt;flush();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;redirectToRoute(<span class="hljs-string">'homepage'</span>);
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-2" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-3" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-4" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-5" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-6" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-7" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-8" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-9" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-10" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-11" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-12" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-13" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-2d467e5d6f34700a61d42993362383c595eaa881-14" class="line-number-anchor" /><a href="#line-number-2d467e5d6f34700a61d42993362383c595eaa881-14">14</a></td></tr></table></div></code></pre>
<p>Updating an object involves three steps:</p>
<ol class="arabic">
    <li>Fetching the object from Doctrine;</li>
<li>Modifying the object;</li>
<li>Calling <code>flush()</code> on the document manager.</li>
</ol>
<p>Notice that calling <code>$dm-&gt;persist($product)</code> isn't necessary. Recall that
this method tells Doctrine to manage or watch the <code>$product</code> object.
In this case, since you fetched the <code>$product</code> object from Doctrine, it's
already managed.</p>
</div>
<div class="section"><a class="section-anchor" id="deleting-an-object" name="deleting-an-object"></a><h3 class="section-header"><a href="#deleting-an-object">Deleting an Object<i class="fas fa-link"></i></a></h3>
<p>Deleting an object is very similar, but requires a call to the <code>remove()</code>
method of the document manager:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="af85cee0abb3ef0cad8a2caeb197b1532e71c4f1"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="af85cee0abb3ef0cad8a2caeb197b1532e71c4f1"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-af85cee0abb3ef0cad8a2caeb197b1532e71c4f1-1" class="line-number-anchor" /><a href="#line-number-af85cee0abb3ef0cad8a2caeb197b1532e71c4f1-1">1</a></td><td class="code-line" rowspan="2">$dm-&gt;remove($product);
$dm-&gt;flush();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-af85cee0abb3ef0cad8a2caeb197b1532e71c4f1-2" class="line-number-anchor" /><a href="#line-number-af85cee0abb3ef0cad8a2caeb197b1532e71c4f1-2">2</a></td></tr></table></div></code></pre>
<p>The <code>remove()</code> method notifies Doctrine that you'd like to remove
the given document from the MongoDB. The actual delete operation
however, isn't executed until the <code>flush()</code> method is called.</p>
</div>
</div>
<div class="section"><a class="section-anchor" id="querying-for-objects" name="querying-for-objects"></a><h2 class="section-header"><a href="#querying-for-objects">Querying for Objects<i class="fas fa-link"></i></a></h2>
<p>As you saw above, the built-in repository class allows you to query for one
or many objects based on any number of different parameters. When this is
enough, this is the easiest way to query for documents. You can also create
more complex queries.</p>
<div class="section"><a class="section-anchor" id="using-the-query-builder" name="using-the-query-builder"></a><h3 class="section-header"><a href="#using-the-query-builder">Using the Query Builder<i class="fas fa-link"></i></a></h3>
<p>Doctrine's ODM ships with a query Builder object, which allows you to construct
a query for exactly which documents you want to return. If you use an IDE,
you can also take advantage of auto-completion as you type the method names.
From inside a controller:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-1" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-1">1</a></td><td class="code-line" rowspan="6">$products = $dm-&gt;createQueryBuilder(Product::class)
    -&gt;field(<span class="hljs-string">'name'</span>)-&gt;equals(<span class="hljs-string">'foo'</span>)
    -&gt;sort(<span class="hljs-string">'price'</span>, <span class="hljs-string">'ASC'</span>)
    -&gt;limit(<span class="hljs-number">10</span>)
    -&gt;getQuery()
    -&gt;execute();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-2" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-3" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-4" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-5" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-6" class="line-number-anchor" /><a href="#line-number-7065a90cf18f3f09dbc7843fbd0bdd8cbd1ea12f-6">6</a></td></tr></table></div></code></pre>
<p>In this case, 10 products with a name of foo, ordered from lowest price
to highest price are returned.</p>
<p>The <code>QueryBuilder</code> object contains every method necessary to build your
query. For more information on Doctrine's Query Builder, consult Doctrine's
<a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html">Query Builder</a> documentation. For a list of the available conditions you
can place on the query, see the <a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html#conditional-operators">Conditional Operators</a> documentation specifically.</p>
</div>
<div class="section"><a class="section-anchor" id="custom-repository-classes" name="custom-repository-classes"></a><h3 class="section-header"><a href="#custom-repository-classes">Custom Repository Classes<i class="fas fa-link"></i></a></h3>
<p>In the previous section, you began constructing and using more complex queries
from inside a controller. In order to isolate, test and reuse these queries,
it's a good idea to create a custom repository class for your document and
add methods with your query logic there.</p>
<p>To do this, add the name of the repository class to your mapping definition.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="04cac6dcfc54df51f321d603509afab31040133b"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="04cac6dcfc54df51f321d603509afab31040133b"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-1" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-comment">// src/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">ProductRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@MongoDB</span>\Document(repositoryClass=ProductRepository::class)
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-2" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-3" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-4" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-5" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-6" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-7" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-8" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-9" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-10" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-11" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-12" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-04cac6dcfc54df51f321d603509afab31040133b-13" class="line-number-anchor" /><a href="#line-number-04cac6dcfc54df51f321d603509afab31040133b-13">13</a></td></tr></table></div></code></pre></div></li><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b36924b2b8bb2457380f277aa4cade4da7e36529"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b36924b2b8bb2457380f277aa4cade4da7e36529"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-1" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-1">1</a></td><td class="code-line" rowspan="11"><span class="hljs-comment">// src/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">ProductRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">#[MongoDB\Document(repositoryClass: ProductRepository::class)]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">// ...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-2" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-3" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-4" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-5" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-6" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-7" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-8" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-9" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-10" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-11" class="line-number-anchor" /><a href="#line-number-b36924b2b8bb2457380f277aa4cade4da7e36529-11">11</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-1" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-comment">&lt;!-- src/Resources/config/doctrine/Product.mongodb.xml --&gt;</span>
<span class="hljs-comment">&lt;!-- ... --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mongo-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping
                    https://doctrine-project.org/schemas/odm/doctrine-mongo-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"App\Document\Product"</span>
            <span class="hljs-attr">repository-class</span>=<span class="hljs-string">"App\Repository\ProductRepository"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mongo-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-2" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-3" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-4" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-5" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-6" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-7" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-8" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-9" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-10" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-11" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-12" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-13" class="line-number-anchor" /><a href="#line-number-b418ea87a773334ba34439bc1cb5d5c5d2ebdbf4-13">13</a></td></tr></table></div></code></pre></div></li></ul></div>
<p>You have to create the repository in the namespace indicated above. Make sure it
extends the default <code>DocumentRepository</code>. Next, add a new method -
<code>findAllOrderedByName()</code> - to the new repository class. This method will query
for all of the <code>Product</code> documents, ordered alphabetically.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="05f8e0a68a5b01677b59847adc81e4cc3fddcb5d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="05f8e0a68a5b01677b59847adc81e4cc3fddcb5d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-1" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-comment">// src/Repository/ProductRepository.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Repository</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">DocumentRepository</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DocumentRepository</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findAllOrderedByName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;createQueryBuilder()
            -&gt;sort(<span class="hljs-string">'name'</span>, <span class="hljs-string">'ASC'</span>)
            -&gt;getQuery()
            -&gt;execute();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-2" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-3" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-4" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-5" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-6" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-7" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-8" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-9" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-10" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-11" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-12" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-13" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-14" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-15" class="line-number-anchor" /><a href="#line-number-05f8e0a68a5b01677b59847adc81e4cc3fddcb5d-15">15</a></td></tr></table></div></code></pre>
<p>You can use this new method like the default finder methods of the repository:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="2119626a0d843234f166b80bb46442c4644a1fcf"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="2119626a0d843234f166b80bb46442c4644a1fcf"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-2119626a0d843234f166b80bb46442c4644a1fcf-1" class="line-number-anchor" /><a href="#line-number-2119626a0d843234f166b80bb46442c4644a1fcf-1">1</a></td><td class="code-line" rowspan="2">$products = $dm-&gt;getRepository(Product::class)
    -&gt;findAllOrderedByName();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-2119626a0d843234f166b80bb46442c4644a1fcf-2" class="line-number-anchor" /><a href="#line-number-2119626a0d843234f166b80bb46442c4644a1fcf-2">2</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>When using a custom repository class, you still have access to the default
finder methods such as <code>find()</code> and <code>findAll()</code>.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="service-repositories" name="service-repositories"></a><h3 class="section-header"><a href="#service-repositories">Service Repositories<i class="fas fa-link"></i></a></h3>
<p>In the previous section, you learnt how to create custom repository classes and how
to get them using <code>DocumentManager</code>. Another way of obtaining a repository instance
is to use the repository as a service and inject it as a dependency into other services.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1075863b250912ab391ff1195bfe3df4da467861"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1075863b250912ab391ff1195bfe3df4da467861"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-1" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-comment">// src/App/Repository/ProductRepository.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Repository</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">MongoDBBundle</span>\<span class="hljs-title">ManagerRegistry</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">MongoDBBundle</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">ServiceDocumentRepository</span>;

<span class="hljs-comment">/**
 * Remember to map this repository in the corresponding document's repositoryClass.
 * For more information on this see the previous chapter.
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ServiceDocumentRepository</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ManagerRegistry $registry)</span>
    </span>{
        <span class="hljs-keyword">parent</span>::__construct($registry, Product::class);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-2" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-3" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-4" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-5" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-6" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-7" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-8" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-9" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-10" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-11" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-12" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-13" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-14" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-15" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-16" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-17" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1075863b250912ab391ff1195bfe3df4da467861-18" class="line-number-anchor" /><a href="#line-number-1075863b250912ab391ff1195bfe3df4da467861-18">18</a></td></tr></table></div></code></pre>
<p>The <code>ServiceDocumentRepository</code> class your custom repository is extending allows you to
leverage Symfony's <a href="https://symfony.com/doc/current/service_container/autowiring.html">autowiring</a> and <a href="https://symfony.com/doc/current/service_container.html#the-autoconfigure-option">autoconfiguration</a>. To register all of your
repositories as services you can use the following service configuration:</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>YAML</em><div class="highlight-yaml"><pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f616b7b6c5c5177a9b32360814e96cca9ad78d92"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f616b7b6c5c5177a9b32360814e96cca9ad78d92"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-1" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-1">1</a></td><td class="code-line" rowspan="8"><span class="hljs-comment"># config/services.yaml</span>
<span class="hljs-attr">services:</span>
    <span class="hljs-attr">_defaults:</span>
        <span class="hljs-attr">autowire:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">autoconfigure:</span> <span class="hljs-literal">true</span>

    <span class="hljs-string">App\Repository\:</span>
        <span class="hljs-attr">resource:</span> <span class="hljs-string">'../src/Repository/*'</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-2" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-3" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-4" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-5" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-6" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-7" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-8" class="line-number-anchor" /><a href="#line-number-f616b7b6c5c5177a9b32360814e96cca9ad78d92-8">8</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-1" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-comment">&lt;!-- config/services.xml --&gt;</span>
<span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services"</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">services</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">defaults</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">autoconfigure</span>=<span class="hljs-string">"true"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">prototype</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"App\Repository\"</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"../src/Repository/*"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">services</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-2" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-3" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-4" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-5" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-6" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-7" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-8" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-9" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-10" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-11" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-12" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-13" class="line-number-anchor" /><a href="#line-number-d9e410b2cdb29d4c6205b7dedcfb9ee113b2c232-13">13</a></td></tr></table></div></code></pre></div></li></ul></div>

</div>
</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?6ead21"
                            integrity="sha384-qytn31Z1hYimizxDH5YcB4dZvFUh7Hn8R95JkU0F9q/nSLx5tJRP9wyuSjG0Lhrm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine-mongodb-bundle';
            var versionSlug = '4.6';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search DoctrineMongoDBBundle 4.6'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
