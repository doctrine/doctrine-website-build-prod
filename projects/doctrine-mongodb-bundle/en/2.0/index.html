<!DOCTYPE html>
<html>
    <head>
        <title>        DoctrineMongoDBBundle - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine MongoDB Bundle Documentation: DoctrineMongoDBBundle ">

        <meta name="keywords" content="                    persistence,mongodb,symfony,documentation,doctrinemongodbbundle
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/4.4/index.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?15a855"
                        integrity="sha384-IVdylBzDQpFJ+EmdH6hsr98Htg0t1rrKj99U9d2vkDI1YrWNS7+OZ+Ti5KHXx+3r"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/2.0/index.html" />
        <meta property="og:title" content="        DoctrineMongoDBBundle - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    " />
        <meta property="og:description" content="Doctrine Doctrine MongoDB Bundle Documentation: DoctrineMongoDBBundle " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine MongoDB Bundle",
            "description": "DoctrineMongoDBBundle",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar stop-war-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                 <a href="/stop-war.html">ðŸ‡ºðŸ‡¦ UKRAINE NEEDS YOUR HELP NOW!</a>
            </nav>

            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/DoctrineMongoDBBundle/edit/2.0/Resources/doc/index.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="config-html-doctrinemongodbbundle-configuration" class="toc-item"><a href="config.html#doctrinemongodbbundle-configuration">DoctrineMongoDBBundle Configuration</a><ul><li id="config-html-sample-configuration" class="toc-item"><a href="config.html#sample-configuration">Sample Configuration</a><ul><li id="config-html-mapping-configuration" class="toc-item"><a href="config.html#mapping-configuration">Mapping Configuration</a></li><li id="config-html-multiple-connections" class="toc-item"><a href="config.html#multiple-connections">Multiple Connections</a></li><li id="config-html-retrying-connections-and-queries" class="toc-item"><a href="config.html#retrying-connections-and-queries">Retrying Connections and Queries</a></li><li id="config-html-full-default-configuration" class="toc-item"><a href="config.html#full-default-configuration">Full Default Configuration</a></li></ul></li></ul></li><li id="index-html-doctrinemongodbbundle" class="toc-item"><a href="index.html#doctrinemongodbbundle">DoctrineMongoDBBundle</a><ul><li id="index-html-installation" class="toc-item"><a href="index.html#installation">Installation</a></li><li id="index-html-configuration" class="toc-item"><a href="index.html#configuration">Configuration</a></li><li id="index-html-a-simple-example-a-product" class="toc-item"><a href="index.html#a-simple-example-a-product">A Simple Example: A Product</a><ul><li id="index-html-creating-a-document-class" class="toc-item"><a href="index.html#creating-a-document-class">Creating a Document Class</a></li><li id="index-html-add-mapping-information" class="toc-item"><a href="index.html#add-mapping-information">Add Mapping Information</a></li><li id="index-html-generating-getters-and-setters" class="toc-item"><a href="index.html#generating-getters-and-setters">Generating Getters and Setters</a></li><li id="index-html-persisting-objects-to-mongodb" class="toc-item"><a href="index.html#persisting-objects-to-mongodb">Persisting Objects to MongoDB</a></li><li id="index-html-fetching-objects-from-mongodb" class="toc-item"><a href="index.html#fetching-objects-from-mongodb">Fetching Objects from MongoDB</a></li><li id="index-html-updating-an-object" class="toc-item"><a href="index.html#updating-an-object">Updating an Object</a></li><li id="index-html-deleting-an-object" class="toc-item"><a href="index.html#deleting-an-object">Deleting an Object</a></li></ul></li><li id="index-html-querying-for-objects" class="toc-item"><a href="index.html#querying-for-objects">Querying for Objects</a><ul><li id="index-html-using-the-query-builder" class="toc-item"><a href="index.html#using-the-query-builder">Using the Query Builder</a></li><li id="index-html-custom-repository-classes" class="toc-item"><a href="index.html#custom-repository-classes">Custom Repository Classes</a></li></ul></li><li id="index-html-doctrine-extensions-timestampable-sluggable-etc" class="toc-item"><a href="index.html#doctrine-extensions-timestampable-sluggable-etc">Doctrine Extensions: Timestampable, Sluggable, etc.</a></li><li id="index-html-doctrine-field-types-reference" class="toc-item"><a href="index.html#doctrine-field-types-reference">Doctrine Field Types Reference</a></li><li id="index-html-console-commands" class="toc-item"><a href="index.html#console-commands">Console Commands</a></li><li id="index-html-configuration" class="toc-item"><a href="index.html#configuration">Configuration</a><ul><li id="index-html-registering-event-listeners-and-subscribers" class="toc-item"><a href="index.html#registering-event-listeners-and-subscribers">Registering Event Listeners and Subscribers</a></li></ul></li><li id="index-html-using-the-abstraction-layer" class="toc-item"><a href="index.html#using-the-abstraction-layer">Using the Abstraction Layer</a></li><li id="index-html-summary" class="toc-item"><a href="index.html#summary">Summary</a></li><li id="index-html-learn-more-from-the-cookbook" class="toc-item"><a href="index.html#learn-more-from-the-cookbook">Learn more from the Cookbook</a></li></ul></li><li id="form-html-how-to-implement-a-simple-registration-form-with-mongodb" class="toc-item"><a href="form.html#how-to-implement-a-simple-registration-form-with-mongodb">How to implement a simple Registration Form with MongoDB</a><ul><li id="form-html-the-simple-user-model" class="toc-item"><a href="form.html#the-simple-user-model">The simple User model</a></li><li id="form-html-create-a-form-for-the-model" class="toc-item"><a href="form.html#create-a-form-for-the-model">Create a Form for the Model</a></li><li id="form-html-embedding-the-user-form-into-a-registration-form" class="toc-item"><a href="form.html#embedding-the-user-form-into-a-registration-form">Embedding the User form into a Registration Form</a></li><li id="form-html-handling-the-form-submission" class="toc-item"><a href="form.html#handling-the-form-submission">Handling the Form Submission</a></li></ul></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "DoctrineMongoDBBundle",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/2.0/index.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html">DoctrineMongoDBBundle</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Documentation</li>
                        </ol>
</nav>
                    
                                                        </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-bundle/en/2.0/index.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.0.1
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/latest/index.html">
                                                    4.5.3

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.4/index.html">
                                                    4.4.3

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.6/index.html">4.6</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.3/index.html">4.3</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.2/index.html">4.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.1/index.html">4.1</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/4.0/index.html">4.0</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.6/index.html">3.6</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.5/index.html">3.5</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.4/index.html">3.4</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.3/index.html">3.3</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.2/index.html">3.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.1/index.html">3.1</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/3.0/index.html">3.0</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/2.2/index.html">2.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-mongodb-bundle/en/2.1/index.html">2.1</a>
                                                                                            
                                                <a class="dropdown-item active" href="/projects/doctrine-mongodb-bundle/en/2.0/index.html">2.0</a>
                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="doctrinemongodbbundle" name="doctrinemongodbbundle"></a><h1 class="section-header"><a href="#doctrinemongodbbundle">DoctrineMongoDBBundle<i class="fas fa-link"></i></a></h1>

<p>The <a href="http://www.mongodb.org/">MongoDB</a> Object Document Mapper (ODM) is much like the Doctrine2 ORM
in its philosophy and how it works. In other words, like the Doctrine2 ORM,
with the Doctrine ODM, you deal only with plain PHP objects, which are then
persisted transparently to and from MongoDB.</p>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>You can read more about the Doctrine MongoDB ODM via the project's <a href="http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/">documentation</a>.</p>
</td></tr></table></div>
<p>A bundle is available that integrates the Doctrine MongoDB ODM into Symfony,
making it easy to configure and use.</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>This chapter will feel a lot like the Doctrine2 ORM chapter,
which talks about how the Doctrine ORM can be used to persist data to
relational databases (e.g. MySQL). This is on purpose - whether you persist
to a relational database via the ORM or MongoDB via the ODM, the philosophies
are very much the same.</p>
</td></tr></table></div>
<div class="section"><a class="section-anchor" id="installation" name="installation"></a><h2 class="section-header"><a href="#installation">Installation<i class="fas fa-link"></i></a></h2>
<p>To use the MongoDB ODM, you'll need two libraries provided by Doctrine and
one bundle that integrates them into Symfony. If you're using the Symfony
Standard Distribution, add the following to the <code>deps</code> file at the root
of your project:</p>
<pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="6f54503b623e2ef00c6501dbb838f0c171ad6310"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="6f54503b623e2ef00c6501dbb838f0c171ad6310"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-1" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-1">1</a></td><td class="code-line" rowspan="12">[doctrine-mongodb]
    git=http://github.com/doctrine/mongodb.git
    version=1.0.0-BETA1

[doctrine-mongodb-odm]
    git=http://github.com/doctrine/mongodb-odm.git
    version=1.0.0-BETA5

[DoctrineMongoDBBundle]
    git=http://github.com/doctrine/DoctrineMongoDBBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMongoDBBundle
    version=v2.2.0</td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-2" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-3" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-4" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-5" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-6" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-7" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-8" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-9" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-10" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-11" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-12" class="line-number-anchor" /><a href="#line-number-6f54503b623e2ef00c6501dbb838f0c171ad6310-12">12</a></td></tr></table></div></code></pre>
<p>Additionally, ensure that the Doctrine Common version is at least <code>2.2.0</code>:</p>
<pre class="code-block-table"><code class="text"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="f7474541407dcdedb5a5ceca99761f8a63662afc"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="f7474541407dcdedb5a5ceca99761f8a63662afc"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-1" class="line-number-anchor" /><a href="#line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-1">1</a></td><td class="code-line" rowspan="3">[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.2.0</td></tr>
<tr><td class="line-number noselect"><a name="line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-2" class="line-number-anchor" /><a href="#line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-3" class="line-number-anchor" /><a href="#line-number-f7474541407dcdedb5a5ceca99761f8a63662afc-3">3</a></td></tr></table></div></code></pre>
<p>Now, update the vendor libraries by running:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php bin/vendors install</code></pre></div>
<p>Next, add the <code>Doctrine\ODM\MongoDB</code> and <code>Doctrine\MongoDB</code> namespaces
to the <code>app/autoload.php</code> file so that these libraries can be autoloaded.
Be sure to add them anywhere <em>above</em> the <code>Doctrine</code> namespace (shown here):</p>
<pre><code class="">// app/autoload.php
$loader-&gt;registerNamespaces(array(
    // ...
    &#039;Doctrine\\ODM\\MongoDB&#039;    =&gt; __DIR__.&#039;/../vendor/doctrine-mongodb-odm/lib&#039;,
    &#039;Doctrine\\MongoDB&#039;         =&gt; __DIR__.&#039;/../vendor/doctrine-mongodb/lib&#039;,
    &#039;Doctrine&#039;                  =&gt; __DIR__.&#039;/../vendor/doctrine/lib&#039;,
    // ...
));
</code></pre>
<p>Next, register the annotations library by adding the following to the autoloader
(below the existing <code>AnnotationRegistry::registerFile</code> line):</p>
<pre><code class="">// app/autoload.php
AnnotationRegistry::registerFile(
    __DIR__.&#039;/../vendor/doctrine-mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/Annotations/DoctrineAnnotations.php&#039;
);
</code></pre>
<p>Finally, enable the new bundle in the kernel:</p>
<pre><code class="">// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // ...
        new Symfony\Bundle\DoctrineMongoDBBundle\DoctrineMongoDBBundle(),
    );

    // ...
}
</code></pre>
<p>Congratulations! You're ready to get to work.</p>
</div>
<div class="section"><a class="section-anchor" id="configuration" name="configuration"></a><h2 class="section-header"><a href="#configuration">Configuration<i class="fas fa-link"></i></a></h2>
<p>To get started, you'll need some basic configuration that sets up the document
manager. The easiest way is to enable <code>auto_mapping</code>, which will activate
the MongoDB ODM across your application:</p>
<pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b37960a929a8fdda1f7ada7dbb808ef32628ff2c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b37960a929a8fdda1f7ada7dbb808ef32628ff2c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-1" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-1">1</a></td><td class="code-line" rowspan="10"><span class="hljs-comment"># app/config/config.yml</span>
<span class="hljs-attr">doctrine_mongodb:</span>
    <span class="hljs-attr">connections:</span>
        <span class="hljs-attr">default:</span>
            <span class="hljs-attr">server:</span> <span class="hljs-string">mongodb://localhost:27017</span>
            <span class="hljs-attr">options:</span> <span class="hljs-string">{}</span>
    <span class="hljs-attr">default_database:</span> <span class="hljs-string">test_database</span>
    <span class="hljs-attr">document_managers:</span>
        <span class="hljs-attr">default:</span>
            <span class="hljs-attr">auto_mapping:</span> <span class="hljs-literal">true</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-2" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-3" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-4" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-5" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-6" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-7" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-8" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-9" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-10" class="line-number-anchor" /><a href="#line-number-b37960a929a8fdda1f7ada7dbb808ef32628ff2c-10">10</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Of course, you'll also need to make sure that the MongoDB server is running
in the background. For more details, see the MongoDB <a href="http://www.mongodb.org/display/DOCS/Quickstart">Quick Start</a> guide.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="a-simple-example-a-product" name="a-simple-example-a-product"></a><h2 class="section-header"><a href="#a-simple-example-a-product">A Simple Example: A Product<i class="fas fa-link"></i></a></h2>
<p>The best way to understand the Doctrine MongoDB ODM is to see it in action.
In this section, you'll walk through each step needed to start persisting
documents to and from MongoDB.</p>
<div class="alert sidebar-admonition bg-light text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-arrow-alt-circle-right mr-2"></i></td><td><p>If you want to follow along with the example in this chapter, create
an <code>AcmeStoreBundle</code> via:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php app/console generate:bundle --namespace=Acme/StoreBundle
</code></pre></div>
</td></tr></table></div>
<div class="section"><a class="section-anchor" id="creating-a-document-class" name="creating-a-document-class"></a><h3 class="section-header"><a href="#creating-a-document-class">Creating a Document Class<i class="fas fa-link"></i></a></h3>
<p>Suppose you're building an application where products need to be displayed.
Without even thinking about Doctrine or MongoDB, you already know that you
need a <code>Product</code> object to represent those products. Create this class
inside the <code>Document</code> directory of your <code>AcmeStoreBundle</code>:</p>
<pre><code class="">// src/Acme/StoreBundle/Document/Product.php
namespace Acme\StoreBundle\Document;

class Product
{
    protected $name;

    protected $price;
}
</code></pre>
<p>The class - often called a document, meaning <em>a basic class that holds data</em> -
is simple and helps fulfill the business requirement of needing products
in your application. This class can't be persisted to Doctrine MongoDB yet -
it's just a simple PHP class.</p>
</div>
<div class="section"><a class="section-anchor" id="add-mapping-information" name="add-mapping-information"></a><h3 class="section-header"><a href="#add-mapping-information">Add Mapping Information<i class="fas fa-link"></i></a></h3>
<p>Doctrine allows you to work with MongoDB in a much more interesting way
than just fetching data back and forth as an array. Instead, Doctrine allows
you to persist entire <em>objects</em> to MongoDB and fetch entire objects out of
MongoDB. This works by mapping a PHP class and its properties to entries
of a MongoDB collection.</p>
<p>For Doctrine to be able to do this, you just have to create metadata, or
configuration that tells Doctrine exactly how the <code>Product</code> class and its
properties should be <em>mapped</em> to MongoDB. This metadata can be specified
in a number of different formats including YAML, XML or directly inside the
<code>Product</code> class via annotations:</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="b6621847fa05ae49bb21f4e951b510398c69633e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="b6621847fa05ae49bb21f4e951b510398c69633e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-1" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-1">1</a></td><td class="code-line" rowspan="25"><span class="hljs-comment">// src/Acme/StoreBundle/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">StoreBundle</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@MongoDB</span>\Document
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\Id
     */</span>
    <span class="hljs-keyword">protected</span> $id;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\String
     */</span>
    <span class="hljs-keyword">protected</span> $name;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@MongoDB</span>\Float
     */</span>
    <span class="hljs-keyword">protected</span> $price;
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-2" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-3" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-4" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-5" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-6" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-7" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-8" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-9" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-10" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-11" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-12" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-13" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-14" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-15" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-16" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-17" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-18" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-19" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-20" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-21" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-22" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-23" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-24" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-b6621847fa05ae49bb21f4e951b510398c69633e-25" class="line-number-anchor" /><a href="#line-number-b6621847fa05ae49bb21f4e951b510398c69633e-25">25</a></td></tr></table></div></code></pre></div></li><li><em>YAML</em><div class="highlight-yaml"><pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="aab2671e418bbed0f0c6508c44234bf7c946c7a4"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="aab2671e418bbed0f0c6508c44234bf7c946c7a4"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-1" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-1">1</a></td><td class="code-line" rowspan="9"><span class="hljs-comment"># src/Acme/StoreBundle/Resources/config/doctrine/Product.mongodb.yml</span>
<span class="hljs-string">Acme\StoreBundle\Document\Product:</span>
    <span class="hljs-attr">fields:</span>
        <span class="hljs-attr">id:</span>
            <span class="hljs-attr">id:</span>  <span class="hljs-literal">true</span>
        <span class="hljs-attr">name:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">price:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">float</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-2" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-3" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-4" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-5" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-6" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-7" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-8" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-9" class="line-number-anchor" /><a href="#line-number-aab2671e418bbed0f0c6508c44234bf7c946c7a4-9">9</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="8fa3a24ba036aeeb64baaadee7d265f3d6fb3144"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="8fa3a24ba036aeeb64baaadee7d265f3d6fb3144"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-1" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-comment">&lt;!-- src/Acme/StoreBundle/Resources/config/doctrine/Product.mongodb.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mongo-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping
                    http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Acme\StoreBundle\Document\Product"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">fieldName</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"true"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">fieldName</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">fieldName</span>=<span class="hljs-string">"price"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"float"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mongo-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-2" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-3" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-4" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-5" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-6" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-7" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-8" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-9" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-10" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-11" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-12" class="line-number-anchor" /><a href="#line-number-8fa3a24ba036aeeb64baaadee7d265f3d6fb3144-12">12</a></td></tr></table></div></code></pre></div></li></ul></div>
<p>Doctrine allows you to choose from a wide variety of different field types,
each with their own options. For information on the available field types,
see the <a href="index.html#cookbook-mongodb-field-types">DoctrineMongoDBBundle</a> section.</p>
<div class="alert seealso-admonition bg-light text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="far fa-flag mr-2"></i></td><td><p>You can also check out Doctrine's <a href="http://www.doctrine-project.org/docs/mongodb_odm/1.0/en/reference/basic-mapping.html">Basic Mapping Documentation</a> for
all details about mapping information. If you use annotations, you'll
need to prepend all annotations with <code>MongoDB\</code> (e.g. <code>MongoDB\String</code>),
which is not shown in Doctrine's documentation. You'll also need to include
the <code>use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;</code> statement,
which <em>imports</em> the <code>MongoDB</code> annotations prefix.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="generating-getters-and-setters" name="generating-getters-and-setters"></a><h3 class="section-header"><a href="#generating-getters-and-setters">Generating Getters and Setters<i class="fas fa-link"></i></a></h3>
<p>Even though Doctrine now knows how to persist a <code>Product</code> object to MongoDB
the class itself isn't really useful yet. Since <code>Product</code> is just a regular
PHP class, you need to create getter and setter methods (e.g. <code>getName()</code>,
<code>setName()</code>) in order to access its properties (since the properties are
<code>protected</code>). Fortunately, Doctrine can do this for you by running:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php app/console doctrine:mongodb:generate:documents AcmeStoreBundle
</code></pre></div>
<p>This command makes sure that all of the getters and setters are generated
for the <code>Product</code> class. This is a safe command - you can run it over and
over again: it only generates getters and setters that don't exist (i.e. it
doesn't replace your existing methods).</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Doctrine doesn't care whether your properties are <code>protected</code> or <code>private</code>,
or whether or not you have a getter or setter function for a property.
The getters and setters are generated here only because you'll need them
to interact with your PHP object.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="persisting-objects-to-mongodb" name="persisting-objects-to-mongodb"></a><h3 class="section-header"><a href="#persisting-objects-to-mongodb">Persisting Objects to MongoDB<i class="fas fa-link"></i></a></h3>
<p>Now that you have a mapped <code>Product</code> document complete with getter and
setter methods, you're ready to persist data to MongoDB. From inside a controller,
this is pretty easy. Add the following method to the <code>DefaultController</code>
of the bundle:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fb2486850890099891fe6b2657ec55f1aaa8f90e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fb2486850890099891fe6b2657ec55f1aaa8f90e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-1" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-1">1</a></td><td class="code-line" rowspan="17"><span class="hljs-comment">// src/Acme/StoreBundle/Controller/DefaultController.php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">StoreBundle</span>\<span class="hljs-title">Document</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Response</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAction</span><span class="hljs-params">()</span>
</span>{
    $product = <span class="hljs-keyword">new</span> Product();
    $product-&gt;setName(<span class="hljs-string">'A Foo Bar'</span>);
    $product-&gt;setPrice(<span class="hljs-string">'19.99'</span>);

    $dm = <span class="hljs-keyword">$this</span>-&gt;get(<span class="hljs-string">'doctrine.odm.mongodb.document_manager'</span>);
    $dm-&gt;persist($product);
    $dm-&gt;flush();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Response(<span class="hljs-string">'Created product id '</span>.$product-&gt;getId());
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-2" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-3" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-4" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-5" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-6" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-7" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-8" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-9" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-10" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-11" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-12" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-13" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-14" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-15" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-16" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-17" class="line-number-anchor" /><a href="#line-number-fb2486850890099891fe6b2657ec55f1aaa8f90e-17">17</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>If you're following along with this example, you'll need to create a
route that points to this action to see it in work.</p>
</td></tr></table></div>
<p>Let's walk through this example:</p>
<ul><li><strong>lines 8-10</strong> In this section, you instantiate and work with the <code>$product</code>
  object like any other, normal PHP object;</li>
<li><strong>line 12</strong> This line fetches Doctrine's <em>document manager</em> object, which is
  responsible for handling the process of persisting and fetching objects
  to and from MongoDB;</li>
<li><strong>line 13</strong> The <code>persist()</code> method tells Doctrine to &quot;manage&quot; the <code>$product</code>
  object. This does not actually cause a query to be made to MongoDB (yet).</li>
<li><strong>line 14</strong> When the <code>flush()</code> method is called, Doctrine looks through
  all of the objects that it's managing to see if they need to be persisted
  to MongoDB. In this example, the <code>$product</code> object has not been persisted yet,
  so the document manager makes a query to MongoDB, which adds a new entry.</li>
</ul>

<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>In fact, since Doctrine is aware of all your managed objects, when you
call the <code>flush()</code> method, it calculates an overall changeset and executes
the most efficient operation possible.</p>
</td></tr></table></div>
<p>When creating or updating objects, the workflow is always the same. In the
next section, you'll see how Doctrine is smart enough to update entries if
they already exist in MongoDB.</p>
<div class="alert tip-admonition bg-success text-light border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-question-circle mr-2"></i></td><td><p>Doctrine provides a library that allows you to programmatically load testing
data into your project (i.e. fixture data). For information, see
.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="fetching-objects-from-mongodb" name="fetching-objects-from-mongodb"></a><h3 class="section-header"><a href="#fetching-objects-from-mongodb">Fetching Objects from MongoDB<i class="fas fa-link"></i></a></h3>
<p>Fetching an object back out of MongoDB is even easier. For example, suppose
you've configured a route to display a specific <code>Product</code> based on its
<code>id</code> value:</p>
<pre><code class="">public function showAction($id)
{
    $product = $this-&gt;get(&#039;doctrine.odm.mongodb.document_manager&#039;)
        -&gt;getRepository(&#039;AcmeStoreBundle:Product&#039;)
        -&gt;find($id);

    if (!$product) {
        throw $this-&gt;createNotFoundException(&#039;No product found for id &#039;.$id);
    }

    // do something, like pass the $product object into a template
}
</code></pre>
<p>When you query for a particular type of object, you always use what's known
as its repository. You can think of a repository as a PHP class whose only
job is to help you fetch objects of a certain class. You can access the
repository object for a document class via:</p>
<pre><code class="">$repository = $this-&gt;get(&#039;doctrine.odm.mongodb.document_manager&#039;)
    -&gt;getRepository(&#039;AcmeStoreBundle:Product&#039;);
</code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>The <code>AcmeStoreBundle:Product</code> string is a shortcut you can use anywhere
in Doctrine instead of the full class name of the document (i.e. <code>Acme\StoreBundle\Document\Product</code>).
As long as your document lives under the <code>Document</code> namespace of your bundle,
this will work.</p>
</td></tr></table></div>
<p>Once you have your repository, you have access to all sorts of helpful methods:</p>
<pre><code class="">// query by the primary key (usually &quot;id&quot;)
$product = $repository-&gt;find($id);

// dynamic method names to find based on a column value
$product = $repository-&gt;findOneById($id);
$product = $repository-&gt;findOneByName(&#039;foo&#039;);

// find *all* products
$products = $repository-&gt;findAll();

// find a group of products based on an abitrary column value
$products = $repository-&gt;findByPrice(19.99);
</code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>Of course, you can also issue complex queries, which you'll learn more
about in the  section.</p>
</td></tr></table></div>
<p>You can also take advantage of the useful <code>findBy</code> and <code>findOneBy</code> methods
to easily fetch objects based on multiple conditions:</p>
<pre><code class="">// query for one product matching be name and price
$product = $repository-&gt;findOneBy(array(&#039;name&#039; =&gt; &#039;foo&#039;, &#039;price&#039; =&gt; 19.99));

// query for all prdocuts matching the name, ordered by price
$product = $repository-&gt;findBy(
    array(&#039;name&#039; =&gt; &#039;foo&#039;),
    array(&#039;price&#039;, &#039;ASC&#039;)
);
</code></pre>
</div>
<div class="section"><a class="section-anchor" id="updating-an-object" name="updating-an-object"></a><h3 class="section-header"><a href="#updating-an-object">Updating an Object<i class="fas fa-link"></i></a></h3>
<p>Once you've fetched an object from Doctrine, updating it is easy. Suppose
you have a route that maps a product id to an update action in a controller:</p>
<pre><code class="">public function updateAction($id)
{
    $dm = $this-&gt;get(&#039;doctrine.odm.mongodb.document_manager&#039;);
    $product = $dm-&gt;getRepository(&#039;AcmeStoreBundle:Product&#039;)-&gt;find($id);

    if (!$product) {
        throw $this-&gt;createNotFoundException(&#039;No product found for id &#039;.$id);
    }

    $product-&gt;setName(&#039;New product name!&#039;);
    $dm-&gt;flush();

    return $this-&gt;redirect($this-&gt;generateUrl(&#039;homepage&#039;));
}
</code></pre>
<p>Updating an object involves just three steps:</p>
<ol><li>fetching the object from Doctrine;</li>
<li>modifying the object;</li>
<li>calling <code>flush()</code> on the document manager</li>
</ol>

<p>Notice that calling <code>$dm-&gt;persist($product)</code> isn't necessary. Recall that
this method simply tells Doctrine to manage or watch the <code>$product</code> object.
In this case, since you fetched the <code>$product</code> object from Doctrine, it's
already managed.</p>
</div>
<div class="section"><a class="section-anchor" id="deleting-an-object" name="deleting-an-object"></a><h3 class="section-header"><a href="#deleting-an-object">Deleting an Object<i class="fas fa-link"></i></a></h3>
<p>Deleting an object is very similar, but requires a call to the <code>remove()</code>
method of the document manager:</p>
<pre><code class="">$dm-&gt;remove($product);
$dm-&gt;flush();
</code></pre>
<p>As you might expect, the <code>remove()</code> method notifies Doctrine that you'd
like to remove the given document from the MongoDB. The actual delete operation
however, isn't actually executed until the <code>flush()</code> method is called.</p>
</div>
</div>
</div>
<div class="section"><a class="section-anchor" id="querying-for-objects" name="querying-for-objects"></a><h2 class="section-header"><a href="#querying-for-objects">Querying for Objects<i class="fas fa-link"></i></a></h2>
<p>As you saw above, the built-in repository class allows you to query for one
or many objects based on an number of different parameters. When this is
enough, this is the easiest way to query for documents. Of course, you can
also create more complex queries.</p>
<div class="section"><a class="section-anchor" id="using-the-query-builder" name="using-the-query-builder"></a><h3 class="section-header"><a href="#using-the-query-builder">Using the Query Builder<i class="fas fa-link"></i></a></h3>
<p>Doctrine's ODM ships with a query Builder object, which allows you to construct
a query for exactly which documents you want to return. If you use an IDE,
you can also take advantage of auto-completion as you type the method names.
From inside a controller:</p>
<pre><code class="">$products = $this-&gt;get(&#039;doctrine.odm.mongodb.document_manager&#039;)
    -&gt;createQueryBuilder(&#039;AcmeStoreBundle:Product&#039;)
    -&gt;field(&#039;name&#039;)-&gt;equals(&#039;foo&#039;)
    -&gt;limit(10)
    -&gt;sort(&#039;price&#039;, &#039;ASC&#039;)
    -&gt;getQuery()
    -&gt;execute()
</code></pre>
<p>In this case, 10 products with a name of foo, ordered from lowest price
to highest price are returned.</p>
<p>The <code>QueryBuilder</code> object contains every method necessary to build your
query. For more information on Doctrine's Query Builder, consult Doctrine's
<a href="http://www.doctrine-project.org/docs/mongodb_odm/1.0/en/reference/query-builder-api.html">Query Builder</a> documentation. For a list of the available conditions you
can place on the query, see the <a href="http://www.doctrine-project.org/docs/mongodb_odm/1.0/en/reference/query-builder-api.html#conditional-operators">Conditional Operators</a> documentation specifically.</p>
</div>
<div class="section"><a class="section-anchor" id="custom-repository-classes" name="custom-repository-classes"></a><h3 class="section-header"><a href="#custom-repository-classes">Custom Repository Classes<i class="fas fa-link"></i></a></h3>
<p>In the previous section, you began constructing and using more complex queries
from inside a controller. In order to isolate, test and reuse these queries,
it's a good idea to create a custom repository class for your document and
add methods with your query logic there.</p>
<p>To do this, add the name of the repository class to your mapping definition.</p>
<div class="configuration-block jsactive clearfix"><ul class="simple"><li><em>PHP</em><div class="highlight-php"><pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="88fa8369f0b249c1657163314dbac69a52b60b6d"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="88fa8369f0b249c1657163314dbac69a52b60b6d"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-1" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-1">1</a></td><td class="code-line" rowspan="12"><span class="hljs-comment">// src/Acme/StoreBundle/Document/Product.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">StoreBundle</span>\<span class="hljs-title">Document</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">MongoDB</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@MongoDB</span>\Document(repositoryClass="Acme\StoreBundle\Repository\ProductRepository")
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
</span>{
    <span class="hljs-comment">//...</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-2" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-3" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-4" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-5" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-6" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-7" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-8" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-9" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-10" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-11" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-12" class="line-number-anchor" /><a href="#line-number-88fa8369f0b249c1657163314dbac69a52b60b6d-12">12</a></td></tr></table></div></code></pre></div></li><li><em>YAML</em><div class="highlight-yaml"><pre class="code-block-table"><code class="yaml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-1" class="line-number-anchor" /><a href="#line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-1">1</a></td><td class="code-line" rowspan="4"><span class="hljs-comment"># src/Acme/StoreBundle/Resources/config/doctrine/Product.mongodb.yml</span>
<span class="hljs-string">Acme\StoreBundle\Document\Product:</span>
    <span class="hljs-attr">repositoryClass:</span> <span class="hljs-string">Acme\StoreBundle\Repository\ProductRepository</span>
    <span class="hljs-comment"># ...</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-2" class="line-number-anchor" /><a href="#line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-3" class="line-number-anchor" /><a href="#line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-4" class="line-number-anchor" /><a href="#line-number-1d0c0cec5ac4b97ec9b45ed177a0c65264f5f6c2-4">4</a></td></tr></table></div></code></pre></div></li><li><em>XML</em><div class="highlight-xml"><pre class="code-block-table"><code class="xml"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fb2a20343afc842b712b9b4676b985999a951ee9"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fb2a20343afc842b712b9b4676b985999a951ee9"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-1" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-1">1</a></td><td class="code-line" rowspan="13"><span class="hljs-comment">&lt;!-- src/Acme/StoreBundle/Resources/config/doctrine/Product.mongodb.xml --&gt;</span>
<span class="hljs-comment">&lt;!-- ... --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">doctrine-mongo-mapping</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping"</span>
      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping
                    http://doctrine-project.org/schemas/odm/doctrine-mongo-mapping.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">document</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Acme\StoreBundle\Document\Product"</span>
            <span class="hljs-attr">repository-class</span>=<span class="hljs-string">"Acme\StoreBundle\Repository\ProductRepository"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">doctrine-mong-mapping</span>&gt;</span></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-2" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-3" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-4" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-5" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-6" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-7" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-8" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-9" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-10" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-11" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-12" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fb2a20343afc842b712b9b4676b985999a951ee9-13" class="line-number-anchor" /><a href="#line-number-fb2a20343afc842b712b9b4676b985999a951ee9-13">13</a></td></tr></table></div></code></pre></div></li></ul></div>
<p>Doctrine can generate the repository class for you by running :</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php app/console doctrine:mongodb:generate:repositories AcmeStoreBundle
</code></pre></div>
<p>Next, add a new method - <code>findAllOrderedByName()</code> - to the newly generated
repository class. This method will query for all of the <code>Product</code> documents,
ordered alphabetically.</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="fa5f8b2534ffa4e223731e3fc98349ae0486df79"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="fa5f8b2534ffa4e223731e3fc98349ae0486df79"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-1" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-comment">// src/Acme/StoreBundle/Repository/ProductRepository.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Acme</span>\<span class="hljs-title">StoreBundle</span>\<span class="hljs-title">Repository</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">DocumentRepository</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DocumentRepository</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findAllOrderedByName</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;createQueryBuilder()
            -&gt;sort(<span class="hljs-string">'name'</span>, <span class="hljs-string">'ASC'</span>)
            -&gt;getQuery()
            -&gt;execute();
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-2" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-3" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-4" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-5" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-6" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-7" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-8" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-9" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-10" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-11" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-12" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-13" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-14" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-15" class="line-number-anchor" /><a href="#line-number-fa5f8b2534ffa4e223731e3fc98349ae0486df79-15">15</a></td></tr></table></div></code></pre>
<p>You can use this new method just like the default finder methods of the repository:</p>
<pre><code class="">$product = $this-&gt;get(&#039;doctrine.odm.mongodb.document_manager&#039;)
    -&gt;getRepository(&#039;AcmeStoreBundle:Product&#039;)
    -&gt;findAllOrderedByName();

</code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>When using a custom repository class, you still have access to the default
finder methods such as <code>find()</code> and <code>findAll()</code>.</p>
</td></tr></table></div>
</div>
</div>
<div class="section"><a class="section-anchor" id="doctrine-extensions-timestampable-sluggable-etc" name="doctrine-extensions-timestampable-sluggable-etc"></a><h2 class="section-header"><a href="#doctrine-extensions-timestampable-sluggable-etc">Doctrine Extensions: Timestampable, Sluggable, etc.<i class="fas fa-link"></i></a></h2>
<p>Doctrine is quite flexible, and a number of third-party extensions are available
that allow you to easily perform repeated and common tasks on your entities.
These include thing such as <em>Sluggable</em>, <em>Timestampable</em>, <em>Loggable</em>, <em>Translatable</em>,
and <em>Tree</em>.</p>
<p>For more information on how to find and use these extensions, see the cookbook
article about using common Doctrine extensions.</p>
<a id="cookbook-mongodb-field-types"></a>
</div>
<div class="section"><a class="section-anchor" id="doctrine-field-types-reference" name="doctrine-field-types-reference"></a><h2 class="section-header"><a href="#doctrine-field-types-reference">Doctrine Field Types Reference<i class="fas fa-link"></i></a></h2>
<p>Doctrine comes with a large number of field types available. Each of these
maps a PHP data type to a specific <a href="http://us.php.net/manual/en/mongo.types.php">MongoDB type</a>. The following are just <em>some</em>
of the types supported by Doctrine:</p>
<ul><li><code>string</code></li>
<li><code>int</code></li>
<li><code>float</code></li>
<li><code>date</code></li>
<li><code>timestamp</code></li>
<li><code>boolean</code></li>
<li><code>file</code></li>
</ul>

<p>For more information, see Doctrine's <a href="http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/basic-mapping.html#doctrine-mapping-types">Mapping Types documentation</a>.</p>
</div>
<div class="section"><a class="section-anchor" id="console-commands" name="console-commands"></a><h2 class="section-header"><a href="#console-commands">Console Commands<i class="fas fa-link"></i></a></h2>
<p>The Doctrine2 ODM integration offers several console commands under the
<code>doctrine:mongodb</code> namespace. To view the command list you can run the console
without any arguments:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php app/console
</code></pre></div>
<p>A list of available command will print out, many of which start with the
<code>doctrine:mongodb</code> prefix. You can find out more information about any
of these commands (or any Symfony command) by running the <code>help</code> command.
For example, to get details about the <code>doctrine:mongodb:query</code> task, run:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>php app/console help doctrine:mongodb:query
</code></pre></div>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>To be able to load data fixtures into MongoDB, you will need to have the
<code>DoctrineFixturesBundle</code> bundle installed. To learn how to do it, read
the  entry of the
documentation.</p>
</td></tr></table></div>
</div>
<div class="section"><a class="section-anchor" id="configuration" name="configuration"></a><h2 class="section-header"><a href="#configuration">Configuration<i class="fas fa-link"></i></a></h2>
<p>For detailed information on configuration options available when using the
Doctrine ODM, see the MongoDB Reference section.</p>
<div class="section"><a class="section-anchor" id="registering-event-listeners-and-subscribers" name="registering-event-listeners-and-subscribers"></a><h3 class="section-header"><a href="#registering-event-listeners-and-subscribers">Registering Event Listeners and Subscribers<i class="fas fa-link"></i></a></h3>
<p>Doctrine allows you to register listeners and subscribers that are notified
when different events occur inside Doctrine's ODM. For more information,
see Doctrine's <a href="http://www.doctrine-project.org/docs/mongodb_odm/1.0/en/reference/events.html">Event Documentation</a>.</p>
<p>In Symfony, you can register a listener or subscriber by creating a service
and then tagging it with a specific tag.</p>
<ul><li>  <strong>event listener</strong>: Use the <code>doctrine.odm.mongodb.&lt;connection&gt;_event_listener</code>
    tag, where <code>&lt;connection&gt;</code> name is replaced by the name of your connection
    (usually <code>default</code>). Also, be sure to add an <code>event</code> key to the tag
    specifying which event to listen to. Assuming your connection is called
    <code>default</code>, then:
    .. configuration-block::
        .. code-block:: yaml
            services:
                my_doctrine_listener:
                    class:   Acme\HelloBundle\Listener\MyDoctrineListener
                    # ...
                    tags:</li>
<ul><li class="dash"> { name: doctrine.odm.mongodb.default_event_listener, event: postPersist }
        .. code-block:: xml
            &lt;service id=&quot;my_doctrine_listener&quot; class=&quot;Acme\HelloBundle\Listener\MyDoctrineListener&quot;&gt;
                &lt;!-- ... --&gt;
                &lt;tag name=&quot;doctrine.odm.mongodb.default_event_listener&quot; event=&quot;postPersist&quot; /&gt;
            &lt;/service&gt;.
        .. code-block:: php
            $definition = new Definition('Acme\HelloBundle\Listener\MyDoctrineListener');
            // ...
            $definition-&gt;addTag('doctrine.odm.mongodb.default_event_listener');
            $container-&gt;setDefinition('my_doctrine_listener', $definition);</li>
</ul>
<li>  <strong>event subscriber</strong>: Use the <code>doctrine.odm.mongodb.&lt;connection&gt;_event_subscriber</code>
    tag. No other keys are needed in the tag.</li>
</ul>

</div>
</div>
<div class="section"><a class="section-anchor" id="using-the-abstraction-layer" name="using-the-abstraction-layer"></a><h2 class="section-header"><a href="#using-the-abstraction-layer">Using the Abstraction Layer<i class="fas fa-link"></i></a></h2>
<p>Doctrine provides a thin wrapper for the PHP MongoDB client class which can conveniently
be fetched from the Symfony2 service container. A similar example like the tutorial in the
<a href="http://www.php.net/manual/en/mongo.tutorial.php">PHP Documentation</a> might look something like this:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="adf328236d8c23f8ad7bf58808d541054d4c1579"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="adf328236d8c23f8ad7bf58808d541054d4c1579"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-1" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-1">1</a></td><td class="code-line" rowspan="15"><span class="hljs-comment">// connect</span>
$m = <span class="hljs-keyword">$this</span>-&gt;container-&gt;get(<span class="hljs-string">'doctrine_mongodb.odm.default_connection'</span>);

<span class="hljs-comment">// select a database</span>
$db = $m-&gt;selectDatabase(<span class="hljs-string">'comedy'</span>);

<span class="hljs-comment">// select a collection (analogous to a relational database's table)</span>
$collection = $db-&gt;createCollection(<span class="hljs-string">'cartoons'</span>);

<span class="hljs-comment">// add a record</span>
$document = <span class="hljs-keyword">array</span>( <span class="hljs-string">"title"</span> =&gt; <span class="hljs-string">"Calvin and Hobbes"</span>, <span class="hljs-string">"author"</span> =&gt; <span class="hljs-string">"Bill Watterson"</span> );
$collection-&gt;insert($document);

<span class="hljs-comment">// find everything in the collection</span>
$cursor = $collection-&gt;find();</td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-2" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-3" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-4" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-5" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-6" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-7" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-8" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-9" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-10" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-11" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-12" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-13" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-14" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-15" class="line-number-anchor" /><a href="#line-number-adf328236d8c23f8ad7bf58808d541054d4c1579-15">15</a></td></tr></table></div></code></pre>
</div>
<div class="section"><a class="section-anchor" id="summary" name="summary"></a><h2 class="section-header"><a href="#summary">Summary<i class="fas fa-link"></i></a></h2>
<p>With Doctrine, you can focus on your objects and how they're useful in your
application and worry about persisting to MongoDB second. This is because
Doctrine allows you to use any PHP object to hold your data and relies on
mapping metadata information to map an object's data to a MongoDB collection.</p>
<p>And even though Doctrine revolves around a simple concept, it's incredibly
powerful, allowing you to create complex queries and subscribe to events
that allow you to take different actions as objects go through their persistence
lifecycle.</p>
</div>
<div class="section"><a class="section-anchor" id="learn-more-from-the-cookbook" name="learn-more-from-the-cookbook"></a><h2 class="section-header"><a href="#learn-more-from-the-cookbook">Learn more from the Cookbook<i class="fas fa-link"></i></a></h2>
<ul><li></li>
</ul>


</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?161e55"
                            integrity="sha384-ZQ6qlvTBtfiU76YxxALyPv3/HvMipQbIgpk6risK+vIGd/IMwfA2/e+ztgwPiLOj"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine-mongodb-bundle';
            var versionSlug = '2.0';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search DoctrineMongoDBBundle 2.0'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
