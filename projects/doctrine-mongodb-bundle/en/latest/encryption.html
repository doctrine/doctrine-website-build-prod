<!DOCTYPE html>
<html>
    <head>
        <title>        Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE) - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine MongoDB Bundle Documentation: Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE) ">

        <meta name="keywords" content="                    persistence,mongodb,symfony,documentation,client-side,field-level,encryption,(csfle),and,queryable,encryption,(qe)
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/encryption.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?e935b6"
                        integrity="sha384-0+XwQ7PUNkbj10v4XDjjp7VJzfahtyhEtNyFDNmWQaR7ohGXNow7qYgClWx6rQoS"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/encryption.html" />
        <meta property="og:title" content="        Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE) - Doctrine Doctrine MongoDB Bundle (DoctrineMongoDBBundle)
    " />
        <meta property="og:description" content="Doctrine Doctrine MongoDB Bundle Documentation: Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE) " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine MongoDB Bundle",
            "description": "Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE)",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/DoctrineMongoDBBundle/edit/5.4.x/docs/en/encryption.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="config.html#configuration">Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="config.html#sample-configuration">Sample Configuration</a>


</li>
            <li class="toc-item">
    <a href="config.html#mapping-configuration">Mapping Configuration</a>


</li>
            <li class="toc-item">
    <a href="config.html#custom-types">Custom Types</a>


</li>
            <li class="toc-item">
    <a href="config.html#filters">Filters</a>


</li>
            <li class="toc-item">
    <a href="config.html#multiple-connections">Multiple Connections</a>


</li>
            <li class="toc-item">
    <a href="config.html#connecting-to-a-pool-of-mongodb-servers-on-1-connection">Connecting to a pool of mongodb servers on 1 connection</a>


</li>
            <li class="toc-item">
    <a href="config.html#using-authentication-on-a-database-level">Using Authentication on a Database Level</a>


</li>
            <li class="toc-item">
    <a href="config.html#using-queryable-encryption">Using Queryable Encryption</a>


</li>
            <li class="toc-item">
    <a href="config.html#full-default-configuration">Full Default Configuration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="console.html#console-commands">Console Commands</a>


</li>
    <li class="toc-item">
    <a href="cookbook/registration_form.html#creating-a-registration-form">Creating a Registration Form</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="cookbook/registration_form.html#the-user-model">The User Model</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#create-a-form-for-the-model">Create a Form for the Model</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#embedding-the-user-form-into-a-registration-form">Embedding the User form into a Registration Form</a>


</li>
            <li class="toc-item">
    <a href="cookbook/registration_form.html#handling-the-form-submission">Handling the Form Submission</a>


</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#client-side-field-level-encryption-csfle-and-queryable-encryption-qe">Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE)</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="#supported-kms-providers">Supported KMS Providers</a>


</li>
            <li class="toc-item">
    <a href="#encrypted-fields-configuration">Encrypted Fields Configuration</a>


</li>
            <li class="toc-item">
    <a href="#encrypted-fields-map-optional">Encrypted Fields Map (optional)</a>


</li>
            <li class="toc-item">
    <a href="#automatic-encryption-shared-library">Automatic Encryption Shared Library</a>


</li>
            <li class="toc-item">
    <a href="#tls-options">TLS Options</a>


</li>
            <li class="toc-item">
    <a href="#further-reading">Further Reading</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="events.html#registering-event-listeners-and-subscribers">Registering Event Listeners and Subscribers</a>


</li>
    <li class="toc-item">
    <a href="first_steps.html#first-steps-using-the-odm">First steps using the ODM</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="first_steps.html#an-introductory-example-a-product">An Introductory Example: A Product</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="first_steps.html#creating-a-document-class">Creating a Document Class</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#add-mapping-information">Add Mapping Information</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#persisting-objects-to-mongodb">Persisting Objects to MongoDB</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetching-objects-from-mongodb">Fetching Objects from MongoDB</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#automatically-fetching-objects-documentvalueresolver">Automatically Fetching Objects (DocumentValueResolver)</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetch-automatically">Fetch Automatically</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#fetch-via-an-expression">Fetch via an Expression</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#mapdocument-options">MapDocument Options</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#updating-an-object">Updating an Object</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#deleting-an-object">Deleting an Object</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="first_steps.html#querying-for-objects">Querying for Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="first_steps.html#using-the-query-builder">Using the Query Builder</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#custom-repository-classes">Custom Repository Classes</a>


</li>
            <li class="toc-item">
    <a href="first_steps.html#service-repositories">Service Repositories</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="form_validation.html#form-validation">Form &amp; Validation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="form_validation.html#documenttype">DocumentType</a>


</li>
            <li class="toc-item">
    <a href="form_validation.html#unique-constraint">Unique constraint</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="installation.html#installation">Installation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="installation.html#install-the-bundle-with-symfony-flex">Install the bundle with Symfony Flex</a>


</li>
            <li class="toc-item">
    <a href="installation.html#install-the-bundle-with-composer">Install the bundle with Composer</a>


</li>
            <li class="toc-item">
    <a href="installation.html#enable-the-bundle">Enable the Bundle</a>


</li>
            <li class="toc-item">
    <a href="installation.html#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="installation.html#authentication">Authentication</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="messenger.html#messenger-integration">Messenger Integration</a>


</li>
    <li class="toc-item">
    <a href="security_bundle.html#securitybundle-integration">SecurityBundle integration</a>


</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "DoctrineMongoDBBundle",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE)",
            "item": "https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/encryption.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle.html">DoctrineMongoDBBundle</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-bundle/en/latest/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE)</li>
                        </ol>
</nav>
                                    </div>

                

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-mongodb-bundle/en/latest/encryption.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        5.4.3
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-mongodb-bundle/en/5.5/encryption.html">
                                                        5.5

                                                        
                                                                                                                    (upcoming)
                                                                                                            </a>
                                                                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-mongodb-bundle/en/latest/encryption.html">
                                                        5.4.3

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">5.3</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">5.2</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">5.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item disabled" href="">5.0</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                </div>
                            
                            

            <div class="section" id="client-side-field-level-encryption-csfle-and-queryable-encryption-qe">
            <h1 class="section-header ">
    <a href="#client-side-field-level-encryption-csfle-and-queryable-encryption-qe">
        Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE)
        <i class="fas fa-link"></i>
    </a>
</h1>
            
    <p>This page documents how to configure and use MongoDB Client-Side Field-Level Encryption (CSFLE) and Queryable Encryption (QE) in DoctrineMongoDBBundle.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>CSFLE and QE are advanced MongoDB features that allow you to encrypt specific fields in your documents, with optional support for searching encrypted data (Queryable Encryption).</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            <div class="section" id="configuration">
            <h2 class="section-header ">
    <a href="#configuration">
        Configuration
        <i class="fas fa-link"></i>
    </a>
</h2>
            <div class="alert -admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas   mr-2"></i></td>
            <td>
                                                
    <p>For a general overview of configuration options, see <a href="config.html">Configuration</a>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>To enable CSFLE or QE, you need to configure the <code>autoEncryption</code> option under
your connection&#039;s configuration. At a minimum, you must specify the <code>kmsProvider</code>
and the <code>masterKey</code> for KMS provider other than &quot;local&quot;.
Additional options are available for advanced use cases.</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-2">
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-412340ef84ab8237a1c7313682fd22c1" aria-selected="true"
                    data-active="true" >
                <span>Yaml</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                    aria-controls="configuration-block-tabpanel-82bf4ab3ad989eb5ab038a3faf627daa" aria-selected="false"
                     tabindex="-1">
                <span>Php</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-412340ef84ab8237a1c7313682fd22c1" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="">
                <pre class="code-block-table" id="1808f42bfb75f638087b4d87b598b8f29db72fa7"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="1808f42bfb75f638087b4d87b598b8f29db72fa7"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-attr">doctrine_mongodb:</span></code><code class="line language-yaml">    <span class="hljs-attr">connections:</span></code><code class="line language-yaml">        <span class="hljs-attr">default:</span></code><code class="line language-yaml">            <span class="hljs-attr">server:</span> <span class="hljs-string">"mongodb://localhost:27017"</span></code><code class="line language-yaml">            <span class="hljs-attr">autoEncryption:</span></code><code class="line language-yaml">                <span class="hljs-attr">kmsProvider:</span></code><code class="line language-yaml">                    <span class="hljs-attr">type:</span> <span class="hljs-string">local</span></code><code class="line language-yaml">                    <span class="hljs-attr">key:</span> <span class="hljs-string">"YOUR_BASE64_KEY"</span></code><code class="line language-yaml">                <span class="hljs-comment"># See below for more optional configuration</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-82bf4ab3ad989eb5ab038a3faf627daa" aria-label="Php" class="configuration-codeblock" data-language="php" style="display: none">
                <pre class="code-block-table" id="664945469ae669e60f71c20498834491e67bdd8c"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="664945469ae669e60f71c20498834491e67bdd8c"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">DoctrineMongodbConfig</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(DoctrineMongodbConfig $config)</span>: <span class="hljs-title">void</span> </span>{</code><code class="line language-php">    $config-&gt;connection(<span class="hljs-string">'default'</span>)</code><code class="line language-php">        -&gt;server(<span class="hljs-string">'mongodb://localhost:27017'</span>)</code><code class="line language-php">        -&gt;autoEncryption([</code><code class="line language-php">            <span class="hljs-string">'kmsProvider'</span> =&gt; [</code><code class="line language-php">                <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'local'</span>,</code><code class="line language-php">                <span class="hljs-string">'key'</span> =&gt; <span class="hljs-string">'YOUR_BASE64_KEY'</span>,</code><code class="line language-php">            ],</code><code class="line language-php">            <span class="hljs-comment">// See below for more optional configuration</span></code><code class="line language-php">        ]);</code><code class="line language-php">};</code><code class="empty"></code></pre>
        </div>
    </div>
    </div>
            <div class="section" id="supported-kms-providers">
            <h2 class="section-header ">
    <a href="#supported-kms-providers">
        Supported KMS Providers
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The <code>kmsProvider</code> option specifies a single <a href="https://www.mongodb.com/docs/manual/core/queryable-encryption/fundamentals/kms-providers/">KMS provider</a> that will be used for encryption.
The type of KMS provider is specified with the <code>type</code> property along with its options.</p>

            
    <p>The configuration for each KMS provider varies and is described in the
<code>MongoDB Manager constructor documentation &lt;https://www.php.net/manual/en/mongodb-driver-manager.construct.php&gt;</code>.</p>

            
    <p>Example of configuration for AWS</p>

                <pre class="code-block-table" id="e8f90996d3dac8a921bdfec001ee28e876bf6dfa"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e8f90996d3dac8a921bdfec001ee28e876bf6dfa"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-attr">doctrine_mongodb:</span></code><code class="line language-yaml">    <span class="hljs-attr">connections:</span></code><code class="line language-yaml">        <span class="hljs-attr">default:</span></code><code class="line language-yaml">            <span class="hljs-attr">autoEncryption:</span></code><code class="line language-yaml">                <span class="hljs-attr">kmsProvider:</span></code><code class="line language-yaml">                    <span class="hljs-attr">type:</span> <span class="hljs-string">aws</span></code><code class="line language-yaml">                    <span class="hljs-attr">accessKeyId:</span> <span class="hljs-string">YOUR_AWS_ACCESS_KEY_ID</span></code><code class="line language-yaml">                    <span class="hljs-attr">secretAccessKey:</span> <span class="hljs-string">YOUR_AWS_SECRET_ACCESS_KEY</span></code><code class="line language-yaml">                <span class="hljs-attr">masterKey:</span></code><code class="line language-yaml">                    <span class="hljs-attr">region:</span> <span class="hljs-string">"eu-west-1"</span></code><code class="line language-yaml">                    <span class="hljs-attr">key:</span> <span class="hljs-string">"arn:aws:kms:eu-west-1:123456789012:key/abcd1234-12ab-34cd-56ef-1234567890ab"</span></code><code class="empty"></code></pre>
    </div>
            <div class="section" id="encrypted-fields-configuration">
            <h2 class="section-header ">
    <a href="#encrypted-fields-configuration">
        Encrypted Fields Configuration
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The encrypted fields are configured per document class using the <code>#[Encrypt]</code>
attribute or the equivalent XML mapping.</p>

                <pre class="code-block-table" id="c4079c28a690e755048d5b05bd3c41a88eeb60fd"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="c4079c28a690e755048d5b05bd3c41a88eeb60fd"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">Encrypt</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span>\<span class="hljs-title">EncryptQuery</span>;</code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ODM</span>\<span class="hljs-title">MongoDB</span>\<span class="hljs-title">Mapping</span>\<span class="hljs-title">Annotations</span> <span class="hljs-title">as</span> <span class="hljs-title">ODM</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-comment">#[ODM\Document]</span></code><code class="line language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span></code><code class="line language-php">{</code><code class="line language-php">    <span class="hljs-comment">#[ODM\Id]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> $id;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">#[Encrypt(queryType: EncryptQuery::Equality)]</span></code><code class="line language-php">    <span class="hljs-comment">#[ODM\Field(type: 'string')]</span></code><code class="line language-php">    <span class="hljs-keyword">private</span> $sensitiveField;</code><code class="line language-php"></code><code class="line language-php">    <span class="hljs-comment">// ...</span></code><code class="line language-php">}</code><code class="empty"></code></pre>
            
    <p>Read more about it in the <a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/queryable-encryption.html">MongoDB ODM documentation on Queryable Encryption</a></p>

    </div>
            <div class="section" id="encrypted-fields-map-optional">
            <h2 class="section-header ">
    <a href="#encrypted-fields-map-optional">
        Encrypted Fields Map (optional)
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>The encrypted fields are set to the collection when you create it, and the MongoDB
client will query the server for the collection schema before performing any
operations. For <strong>additional security</strong>, you <strong>can</strong> also specify the encrypted fields
in the connection configuration, which allows the client to use local rules
instead of downloading the remote schema from the server, that could potentially
be tampered with if an attacker compromises the server. Read more about it in the
<a href="https://www.mongodb.com/docs/manual/core/queryable-encryption/about-qe-csfle/#std-label-qe-csfle-security-considerations">Security Considerations</a>.</p>

            
    <p>The Encrypted Fields Map is a list of all encrypted fields associated with all
the collection namespaces that has encryption enabled. To configure it, you
can run a command that extract the encrypted fields from the server and generate
the <code>encryptedFieldsMap</code> configuration.</p>

                <div class="console">
        <pre><code class="console">php bin/console doctrine:mongodb:encryption:dump-fields-map --format yaml</code></pre>
    </div>

            
    <p>The output of the command will be a YAML configuration for the
<code>autoEncryption.encryptedFieldsMap</code> option in the connection configuration.</p>

            

<ul>
    <li class="dash">If the connection <code>encryptedFieldsMap</code> object contains a key for the specified
collection namespace, the client uses that object to perform automatic
Queryable Encryption, rather than using the remote schema. At minimum, the
local rules must encrypt all fields that the remote schema does.</li>
    <li class="dash">If the connection <code>encryptedFieldsMap</code> object doesn&#039;t contain a key for the
specified collection namespace, the client downloads the server-side remote
schema for the collection and uses it instead.</li>
</ul>

            
    <p>For more details, see the official MongoDB documentation:
<a href="https://www.mongodb.com/docs/manual/core/queryable-encryption/fundamentals/encrypt-and-query/">Encrypted Fields and Enabled Queries</a>.</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-4e6876251745752e20dfe0e97d51fe0d" aria-selected="true"
                    data-active="true" >
                <span>Yaml</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-f41d6a12efbdbdef8c9f0395421f304e" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                    aria-controls="configuration-block-tabpanel-5363b6af38d2de7163ee8067b6fd975d" aria-selected="false"
                     tabindex="-1">
                <span>Php</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-4e6876251745752e20dfe0e97d51fe0d" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="">
                <pre class="code-block-table" id="a945f828e8cd9131ffbab923cf309c2ba9aa17b2"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="a945f828e8cd9131ffbab923cf309c2ba9aa17b2"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-attr">doctrine_mongodb:</span></code><code class="line language-yaml">    <span class="hljs-attr">connections:</span></code><code class="line language-yaml">        <span class="hljs-attr">default:</span></code><code class="line language-yaml">            <span class="hljs-attr">autoEncryption:</span></code><code class="line language-yaml">                <span class="hljs-attr">encryptedFieldsMap:</span></code><code class="line language-yaml">                    <span class="hljs-attr">"app.users":</span></code><code class="line language-yaml">                        <span class="hljs-attr">fields:</span></code><code class="line language-yaml">                            <span class="hljs-bullet">-</span> <span class="hljs-attr">keyId:</span> <span class="hljs-string">{</span> <span class="hljs-string">$binary:</span> <span class="hljs-string">{</span> <span class="hljs-attr">base64:</span> <span class="hljs-string">2CSosXLSTEKaYphcSnUuCw==,</span> <span class="hljs-attr">subType:</span> <span class="hljs-string">'04'</span> <span class="hljs-string">}</span> <span class="hljs-string">}</span></code><code class="line language-yaml">                              <span class="hljs-attr">path:</span> <span class="hljs-string">"sensitive_field"</span></code><code class="line language-yaml">                              <span class="hljs-attr">bsonType:</span> <span class="hljs-string">"string"</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-f41d6a12efbdbdef8c9f0395421f304e" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
                <pre class="code-block-table" id="cdb1e15dd5f8a807efafa957a80b8df22cdf3b0b"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="cdb1e15dd5f8a807efafa957a80b8df22cdf3b0b"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:encryptedFieldsMap</span>&gt;</span></code><code class="line language-xml">            <span class="hljs-comment">&lt;!-- Use JSON in a CDATA to avoid XML escaping issues --&gt;</span></code><code class="line language-xml">            &lt;![CDATA[</code><code class="line language-xml">                {</code><code class="line language-xml">                    "app.users": {</code><code class="line language-xml">                        fields: [</code><code class="line language-xml">                            "keyId": { "$binary": { "base64": "2CSosXLSTEKaYphcSnUuCw==", "subType": "04" } },</code><code class="line language-xml">                            "path": "sensitive_field",</code><code class="line language-xml">                            "bsonType": "string"</code><code class="line language-xml">                        ]</code><code class="line language-xml">                    }</code><code class="line language-xml">                }</code><code class="line language-xml">            ]]&gt;</code><code class="line language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:encryptedFieldsMap</span>&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-5363b6af38d2de7163ee8067b6fd975d" aria-label="Php" class="configuration-codeblock" data-language="php" style="display: none">
                <pre class="code-block-table" id="48dd7132bf71f4ed51d1287375b5479f88c69f90"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="48dd7132bf71f4ed51d1287375b5479f88c69f90"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">DoctrineMongodbConfig</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(DoctrineMongodbConfig $config)</span>: <span class="hljs-title">void</span> </span>{</code><code class="line language-php">    $config-&gt;connection(<span class="hljs-string">'default'</span>)</code><code class="line language-php">        -&gt;autoEncryption([</code><code class="line language-php">            <span class="hljs-string">'encryptedFieldsMap'</span> =&gt; [</code><code class="line language-php">                <span class="hljs-string">'mydatabase.mycollection'</span> =&gt; [</code><code class="line language-php">                    <span class="hljs-string">'fields'</span> =&gt; [</code><code class="line language-php">                        [</code><code class="line language-php">                            <span class="hljs-string">'path'</span> =&gt; <span class="hljs-string">'sensitive_field'</span>,</code><code class="line language-php">                            <span class="hljs-comment">// Extended JSON representation of a BSON binary type</span></code><code class="line language-php">                            <span class="hljs-comment">// The MongoDB\BSON\Binary class cannot be used here</span></code><code class="line language-php">                            <span class="hljs-string">'keyId'</span> =&gt; [<span class="hljs-string">'$binary'</span> =&gt; [<span class="hljs-string">'base64'</span> =&gt; <span class="hljs-string">'2CSosXLSTEKaYphcSnUuCw=='</span>, <span class="hljs-string">'subType'</span> =&gt; <span class="hljs-string">'04'</span> ] ],</code><code class="line language-php">                            <span class="hljs-string">'bsonType'</span> =&gt; <span class="hljs-string">'string'</span>,</code><code class="line language-php">                        ],</code><code class="line language-php">                    ],</code><code class="line language-php">                ],</code><code class="line language-php">            ],</code><code class="line language-php">        ]);</code><code class="line language-php">};</code><code class="empty"></code></pre>
        </div>
    </div>
    </div>
            <div class="section" id="automatic-encryption-shared-library">
            <h2 class="section-header ">
    <a href="#automatic-encryption-shared-library">
        Automatic Encryption Shared Library
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>To use automatic encryption, the MongoDB PHP driver requires the <a href="https://www.mongodb.com/docs/manual/core/queryable-encryption/install-library/">Automatic Encryption Shared Library</a>.</p>

            
    <p>If the driver is not able to find the library, you can specify its path using the <code>cryptSharedLibPath</code> extra option in your connection configuration.</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-512e0d722d004e016d5f91035f453703" aria-selected="true"
                    data-active="true" >
                <span>Yaml</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-023f3044d381d5f438a8dfb5b9f0a8a0" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                    aria-controls="configuration-block-tabpanel-a776f542032faf24882249387ff74375" aria-selected="false"
                     tabindex="-1">
                <span>Php</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-512e0d722d004e016d5f91035f453703" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="">
                <pre class="code-block-table" id="e19afe1b0a6c3a4e282c99aff5c66724ab97cd84"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="e19afe1b0a6c3a4e282c99aff5c66724ab97cd84"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-attr">doctrine_mongodb:</span></code><code class="line language-yaml">    <span class="hljs-attr">connections:</span></code><code class="line language-yaml">        <span class="hljs-attr">default:</span></code><code class="line language-yaml">            <span class="hljs-attr">autoEncryption:</span></code><code class="line language-yaml">                <span class="hljs-attr">extraOptions:</span></code><code class="line language-yaml">                    <span class="hljs-attr">cryptSharedLibPath:</span> <span class="hljs-string">'%kernel.project_dir%/bin/mongo_crypt_v1.so'</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-023f3044d381d5f438a8dfb5b9f0a8a0" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
                <pre class="code-block-table" id="a363db759cd1e2fbaec52c9c6a1899abd1b55f52"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="a363db759cd1e2fbaec52c9c6a1899abd1b55f52"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:extraOptions</span> <span class="hljs-attr">cryptSharedLibPath</span>=<span class="hljs-string">"%kernel.project_dir%/bin/mongo_crypt_v1.so"</span> /&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-a776f542032faf24882249387ff74375" aria-label="Php" class="configuration-codeblock" data-language="php" style="display: none">
                <pre class="code-block-table" id="8c53097ba2c4ea4c25927196c903ab7db037740d"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="8c53097ba2c4ea4c25927196c903ab7db037740d"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">DoctrineMongodbConfig</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(DoctrineMongodbConfig $config)</span>: <span class="hljs-title">void</span> </span>{</code><code class="line language-php">    $config-&gt;connection(<span class="hljs-string">'default'</span>)</code><code class="line language-php">        -&gt;autoEncryption([</code><code class="line language-php">            <span class="hljs-string">'extraOptions'</span> =&gt; [</code><code class="line language-php">                <span class="hljs-string">'cryptSharedLibPath'</span> =&gt; <span class="hljs-string">'%kernel.project_dir%/bin/mongo_crypt_v1.so'</span>,</code><code class="line language-php">            ],</code><code class="line language-php">        ]);</code><code class="line language-php">};</code><code class="empty"></code></pre>
        </div>
    </div>
    </div>
            <div class="section" id="tls-options">
            <h2 class="section-header ">
    <a href="#tls-options">
        TLS Options
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>If you are not specifying a custom <code>keyVaultClient</code> service, you can configure
TLS settings for the internal key vault client using the <code>tlsOptions</code> key:</p>

            <div class="configuration-block">
    <div role="tablist" aria-label="Configuration formats" class="configuration-tabs configuration-tabs-length-3">
                    <button role="tab" type="button" data-language="yaml"
                    aria-controls="configuration-block-tabpanel-201e0e970b242ef5ec695e1225b455b1" aria-selected="true"
                    data-active="true" >
                <span>Yaml</span>
            </button>
                    <button role="tab" type="button" data-language="xml"
                    aria-controls="configuration-block-tabpanel-85f49ba6b3e58183981ab4e5e398de28" aria-selected="false"
                     tabindex="-1">
                <span>Xml</span>
            </button>
                    <button role="tab" type="button" data-language="php"
                    aria-controls="configuration-block-tabpanel-92cf8f6e4eb09c116de073ec36a00c0e" aria-selected="false"
                     tabindex="-1">
                <span>Php</span>
            </button>
            </div>

            <div role="tabpanel" id="configuration-block-tabpanel-201e0e970b242ef5ec695e1225b455b1" aria-label="Yaml" class="configuration-codeblock" data-language="yaml" style="">
                <pre class="code-block-table" id="3f0be6b898f94dc7f1b5ee324cbd603cf92ba262"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="3f0be6b898f94dc7f1b5ee324cbd603cf92ba262"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-yaml"><span class="hljs-attr">doctrine_mongodb:</span></code><code class="line language-yaml">    <span class="hljs-attr">connections:</span></code><code class="line language-yaml">        <span class="hljs-attr">default:</span></code><code class="line language-yaml">            <span class="hljs-attr">autoEncryption:</span></code><code class="line language-yaml">                <span class="hljs-attr">tlsOptions:</span></code><code class="line language-yaml">                    <span class="hljs-attr">tlsCAFile:</span> <span class="hljs-string">"/path/to/key-vault-ca.pem"</span></code><code class="line language-yaml">                    <span class="hljs-attr">tlsCertificateKeyFile:</span> <span class="hljs-string">"/path/to/key-vault-client.pem"</span></code><code class="line language-yaml">                    <span class="hljs-attr">tlsCertificateKeyFilePassword:</span> <span class="hljs-string">"keyvaultclientpassword"</span></code><code class="line language-yaml">                    <span class="hljs-attr">tlsDisableOCSPEndpointCheck:</span> <span class="hljs-literal">false</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-85f49ba6b3e58183981ab4e5e398de28" aria-label="Xml" class="configuration-codeblock" data-language="xml" style="display: none">
                <pre class="code-block-table" id="bc16c84eadfdae83389e4496605636d51f0cadf6"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="bc16c84eadfdae83389e4496605636d51f0cadf6"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="line language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">doctrine:tlsOptions</span></span></code><code class="line language-xml">            tlsCAFile="/path/to/key-vault-ca.pem"</code><code class="line language-xml">            tlsCertificateKeyFile="/path/to/key-vault-client.pem"</code><code class="line language-xml">            tlsCertificateKeyFilePassword="keyvaultclientpassword"</code><code class="line language-xml">            tlsDisableOCSPEndpointCheck="false"</code><code class="line language-xml">        /&gt;</code><code class="line language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:autoEncryption</span>&gt;</span></code><code class="line language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">doctrine:connection</span>&gt;</span></code><code class="empty"></code></pre>
        </div>
            <div role="tabpanel" id="configuration-block-tabpanel-92cf8f6e4eb09c116de073ec36a00c0e" aria-label="Php" class="configuration-codeblock" data-language="php" style="display: none">
                <pre class="code-block-table" id="b0329105742360abc2060702009915976fbcf9e7"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="b0329105742360abc2060702009915976fbcf9e7"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">DoctrineMongodbConfig</span>;</code><code class="line language-php"></code><code class="line language-php"><span class="hljs-keyword">return</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(DoctrineMongodbConfig $config)</span>: <span class="hljs-title">void</span> </span>{</code><code class="line language-php">    $config-&gt;connection(<span class="hljs-string">'default'</span>)</code><code class="line language-php">        -&gt;autoEncryption([</code><code class="line language-php">            <span class="hljs-string">'tlsOptions'</span> =&gt; [</code><code class="line language-php">                <span class="hljs-string">'tlsCAFile'</span> =&gt; <span class="hljs-string">'/path/to/key-vault-ca.pem'</span>,</code><code class="line language-php">                <span class="hljs-string">'tlsCertificateKeyFile'</span> =&gt; <span class="hljs-string">'/path/to/key-vault-client.pem'</span>,</code><code class="line language-php">                <span class="hljs-string">'tlsCertificateKeyFilePassword'</span> =&gt; <span class="hljs-string">'keyvaultclientpassword'</span>,</code><code class="line language-php">                <span class="hljs-string">'tlsDisableOCSPEndpointCheck'</span> =&gt; <span class="hljs-keyword">false</span>,</code><code class="line language-php">            ],</code><code class="line language-php">        ]);</code><code class="line language-php">};</code><code class="empty"></code></pre>
        </div>
    </div>
    </div>
            <div class="section" id="further-reading">
            <h2 class="section-header ">
    <a href="#further-reading">
        Further Reading
        <i class="fas fa-link"></i>
    </a>
</h2>
            

<ul>
    <li class="dash"><a href="https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/queryable-encryption.html">MongoDB ODM documentation on Queryable Encryption</a></li>
    <li class="dash"><a href="https://www.mongodb.com/docs/manual/core/csfle/">MongoDB CSFLE documentation</a></li>
    <li class="dash"><a href="https://www.php.net/manual/en/mongodb-driver-manager.construct.php">MongoDB PHP driver Manager::__construct</a></li>
    <li class="dash"><a href="config.html">Configuration</a></li>
</ul>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?4a831b"
                            integrity="sha384-ygNM6vWkqMgvV0Lrk5BeKUupSk4CidmuzVPL3OkdAxEVjZQDo9cgbfC+FXAfoAse"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine-mongodb-bundle';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search DoctrineMongoDBBundle 5.4'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
