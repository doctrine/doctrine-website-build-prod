<!DOCTYPE html>
<html>
    <head>
        <title>Refactoring Multilanguage Documents - PHPCR ODM - Doctrine</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine PHPCR ODM Documentation: Refactoring Multilanguage Documents ">

        <meta name="keywords" content="php,content,odm,data,mapper,mapping,object,documentation,refactoring,multilanguage,documents">

                    <meta name="robots" content="index, follow">
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/latest/cookbook/refactoring-multilang.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?5d5a0a"
                        integrity="sha384-Xzr/v5w+HPuzJFzOgqItAYaps3nGH9QvzcBNbBXvPFLz8L2TdKtR1Mgg04mT/s7X"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/latest/cookbook/refactoring-multilang.html" />
        <meta property="og:title" content="Refactoring Multilanguage Documents - PHPCR ODM - Doctrine" />
        <meta property="og:description" content="Doctrine PHPCR ODM Documentation: Refactoring Multilanguage Documents " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine PHPCR ODM",
            "description": "Refactoring Multilanguage Documents",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?c1fd47" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item notranslate" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/team/maintainers.html" id="navbarTeamDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Team</a>

                            <div class="dropdown-menu" aria-labelledby="navbarTeamDropdown">
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/phpcr-odm/edit/master/docs/en/cookbook/refactoring-multilang.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="reference-xml-mapping-html-xml-mapping" class="toc-item"><a href="../reference/xml-mapping.html#xml-mapping">XML Mapping</a></li><li id="reference-tools-html-tools" class="toc-item"><a href="../reference/tools.html#tools">Tools</a><ul><li id="reference-tools-html-doctrine-console" class="toc-item"><a href="../reference/tools.html#doctrine-console">Doctrine Console</a><ul><li id="reference-tools-html-command-overview" class="toc-item"><a href="../reference/tools.html#command-overview">Command Overview</a></li><li id="reference-tools-html-getting-documentation-of-a-command" class="toc-item"><a href="../reference/tools.html#getting-documentation-of-a-command">Getting documentation of a command</a></li><li id="reference-tools-html-phpcr-implementation-specific-commands" class="toc-item"><a href="../reference/tools.html#phpcr-implementation-specific-commands">PHPCR implementation specific commands</a></li></ul></li><li id="reference-tools-html-register-system-node-types" class="toc-item"><a href="../reference/tools.html#register-system-node-types">Register system node types</a></li><li id="reference-tools-html-adding-your-own-commands" class="toc-item"><a href="../reference/tools.html#adding-your-own-commands">Adding your own commands</a></li></ul></li><li id="reference-query-html-the-query-object" class="toc-item"><a href="../reference/query.html#the-query-object">The Query Object</a><ul><li id="reference-query-html-getting-single-results" class="toc-item"><a href="../reference/query.html#getting-single-results">Getting single results</a><ul><li id="reference-query-html-getsingleresult" class="toc-item"><a href="../reference/query.html#getsingleresult">getSingleResult</a></li><li id="reference-query-html-getoneornullresult" class="toc-item"><a href="../reference/query.html#getoneornullresult">getOneOrNullResult</a></li></ul></li><li id="reference-query-html-getting-multiple-results" class="toc-item"><a href="../reference/query.html#getting-multiple-results">Getting multiple results</a><ul><li id="reference-query-html-getresult" class="toc-item"><a href="../reference/query.html#getresult">getResult</a></li><li id="reference-query-html-getphpcrnoderesult" class="toc-item"><a href="../reference/query.html#getphpcrnoderesult">getPhpcrNodeResult</a></li><li id="reference-query-html-execute" class="toc-item"><a href="../reference/query.html#execute">execute</a></li></ul></li><li id="reference-query-html-hydration-modes" class="toc-item"><a href="../reference/query.html#hydration-modes">Hydration modes</a></li><li id="reference-query-html-limiting-results" class="toc-item"><a href="../reference/query.html#limiting-results">Limiting results</a></li></ul></li><li id="reference-association-mapping-html-association-mapping" class="toc-item"><a href="../reference/association-mapping.html#association-mapping">Association Mapping</a><ul><li id="reference-association-mapping-html-hierarchy-mappings" class="toc-item"><a href="../reference/association-mapping.html#hierarchy-mappings">Hierarchy mappings</a><ul><li id="reference-association-mapping-html-child-restriction" class="toc-item"><a href="../reference/association-mapping.html#child-restriction">Child restriction</a></li></ul></li><li id="reference-association-mapping-html-references" class="toc-item"><a href="../reference/association-mapping.html#references">References</a><ul><li id="reference-association-mapping-html-referenceable-documents" class="toc-item"><a href="../reference/association-mapping.html#referenceable-documents">Referenceable documents</a></li><li id="reference-association-mapping-html-reference-other-documents" class="toc-item"><a href="../reference/association-mapping.html#reference-other-documents">Reference other documents</a></li><li id="reference-association-mapping-html-referrers-to-inverse-the-reference-relation" class="toc-item"><a href="../reference/association-mapping.html#referrers-to-inverse-the-reference-relation">Referrers to inverse the reference relation</a></li><li id="reference-association-mapping-html-mixedreferrers" class="toc-item"><a href="../reference/association-mapping.html#mixedreferrers">MixedReferrers</a></li></ul></li><li id="reference-association-mapping-html-transitive-persistence-cascade-operations" class="toc-item"><a href="../reference/association-mapping.html#transitive-persistence-cascade-operations">Transitive persistence / Cascade Operations</a><ul><li id="reference-association-mapping-html-persistence-by-reachability-cascade-persist" class="toc-item"><a href="../reference/association-mapping.html#persistence-by-reachability-cascade-persist">Persistence by Reachability: Cascade Persist</a></li></ul></li><li id="reference-association-mapping-html-collections" class="toc-item"><a href="../reference/association-mapping.html#collections">Collections</a><ul><li id="reference-association-mapping-html-initializing-collections" class="toc-item"><a href="../reference/association-mapping.html#initializing-collections">Initializing Collections</a></li><li id="reference-association-mapping-html-new-collections-after-flushing" class="toc-item"><a href="../reference/association-mapping.html#new-collections-after-flushing">New Collections after Flushing</a></li></ul></li></ul></li><li id="reference-installation-configuration-html-installation" class="toc-item"><a href="../reference/installation-configuration.html#installation">Installation</a><ul><li id="reference-installation-configuration-html-composer" class="toc-item"><a href="../reference/installation-configuration.html#composer">Composer</a></li><li id="reference-installation-configuration-html-phpcr-provider" class="toc-item"><a href="../reference/installation-configuration.html#phpcr-provider">PHPCR provider</a><ul><li id="reference-installation-configuration-html-install-jackalope-jackrabbit-phcpr-provider" class="toc-item"><a href="../reference/installation-configuration.html#install-jackalope-jackrabbit-phcpr-provider">Install Jackalope-Jackrabbit PHCPR provider</a></li><li id="reference-installation-configuration-html-install-jackalope-doctrine-dbal-phpcr-provider" class="toc-item"><a href="../reference/installation-configuration.html#install-jackalope-doctrine-dbal-phpcr-provider">Install Jackalope Doctrine DBAL PHPCR provider</a></li><li id="reference-installation-configuration-html-install-midgard2-phpcr-provider" class="toc-item"><a href="../reference/installation-configuration.html#install-midgard2-phpcr-provider">Install Midgard2 PHPCR provider</a></li></ul></li></ul></li><li id="reference-installation-configuration-html-configuration" class="toc-item"><a href="../reference/installation-configuration.html#configuration">Configuration</a><ul><li id="reference-installation-configuration-html-class-loading-with-composer" class="toc-item"><a href="../reference/installation-configuration.html#class-loading-with-composer">Class loading with composer</a></li><li id="reference-installation-configuration-html-obtaining-an-objectmanager" class="toc-item"><a href="../reference/installation-configuration.html#obtaining-an-objectmanager">Obtaining an ObjectManager</a><ul><li id="reference-installation-configuration-html-prepare-the-mapping-driver" class="toc-item"><a href="../reference/installation-configuration.html#prepare-the-mapping-driver">Prepare the mapping driver</a></li><li id="reference-installation-configuration-html-quick-configuration-example" class="toc-item"><a href="../reference/installation-configuration.html#quick-configuration-example">Quick Configuration Example</a></li></ul></li><li id="reference-installation-configuration-html-configuration-options" class="toc-item"><a href="../reference/installation-configuration.html#configuration-options">Configuration Options</a><ul><li id="reference-installation-configuration-html-proxy-directory-required" class="toc-item"><a href="../reference/installation-configuration.html#proxy-directory-required">Proxy Directory (***REQUIRED***)</a></li><li id="reference-installation-configuration-html-proxy-namespace-required" class="toc-item"><a href="../reference/installation-configuration.html#proxy-namespace-required">Proxy Namespace (***REQUIRED***)</a></li><li id="reference-installation-configuration-html-metadata-driver-required" class="toc-item"><a href="../reference/installation-configuration.html#metadata-driver-required">Metadata Driver (***REQUIRED***)</a></li><li id="reference-installation-configuration-html-metadata-cache-recommended" class="toc-item"><a href="../reference/installation-configuration.html#metadata-cache-recommended">Metadata Cache (***RECOMMENDED***)</a></li><li id="reference-installation-configuration-html-auto-generating-proxy-classes-optional" class="toc-item"><a href="../reference/installation-configuration.html#auto-generating-proxy-classes-optional">Auto-generating Proxy Classes (***OPTIONAL***)</a></li></ul></li><li id="reference-installation-configuration-html-development-vs-production-configuration" class="toc-item"><a href="../reference/installation-configuration.html#development-vs-production-configuration">Development vs Production Configuration</a></li><li id="reference-installation-configuration-html-connection-options" class="toc-item"><a href="../reference/installation-configuration.html#connection-options">Connection Options</a></li><li id="reference-installation-configuration-html-proxy-objects" class="toc-item"><a href="../reference/installation-configuration.html#proxy-objects">Proxy Objects</a><ul><li id="reference-installation-configuration-html-reference-proxies" class="toc-item"><a href="../reference/installation-configuration.html#reference-proxies">Reference Proxies</a></li><li id="reference-installation-configuration-html-generating-proxy-classes" class="toc-item"><a href="../reference/installation-configuration.html#generating-proxy-classes">Generating Proxy classes</a></li><li id="reference-installation-configuration-html-autoloading-proxies" class="toc-item"><a href="../reference/installation-configuration.html#autoloading-proxies">Autoloading Proxies</a></li><li id="reference-installation-configuration-html-multiple-metadata-sources" class="toc-item"><a href="../reference/installation-configuration.html#multiple-metadata-sources">Multiple Metadata Sources</a></li><li id="reference-installation-configuration-html-default-repository-optional" class="toc-item"><a href="../reference/installation-configuration.html#default-repository-optional">Default Repository (***OPTIONAL***)</a></li></ul></li><li id="reference-installation-configuration-html-setting-up-the-console" class="toc-item"><a href="../reference/installation-configuration.html#setting-up-the-console">Setting up the Console</a><ul><li id="reference-installation-configuration-html-register-system-node-types" class="toc-item"><a href="../reference/installation-configuration.html#register-system-node-types">Register system node types</a></li></ul></li></ul></li><li id="reference-query-builder-html-the-querybuilder" class="toc-item"><a href="../reference/query-builder.html#the-querybuilder">The QueryBuilder</a><ul><li id="reference-query-builder-html-concepts" class="toc-item"><a href="../reference/query-builder.html#concepts">Concepts</a><ul><li id="reference-query-builder-html-leaf-and-factory-nodes" class="toc-item"><a href="../reference/query-builder.html#leaf-and-factory-nodes">Leaf and Factory Nodes</a></li><li id="reference-query-builder-html-fluent-interface" class="toc-item"><a href="../reference/query-builder.html#fluent-interface">Fluent Interface</a></li><li id="reference-query-builder-html-types-and-cardinality" class="toc-item"><a href="../reference/query-builder.html#types-and-cardinality">Types and Cardinality</a></li><li id="reference-query-builder-html-aliases-and-fields" class="toc-item"><a href="../reference/query-builder.html#aliases-and-fields">Aliases and fields</a></li></ul></li><li id="reference-query-builder-html-retrieving-a-query-builder-instance" class="toc-item"><a href="../reference/query-builder.html#retrieving-a-query-builder-instance">Retrieving a query builder instance</a><ul><li id="reference-query-builder-html-via-the-document-manager" class="toc-item"><a href="../reference/query-builder.html#via-the-document-manager">Via the document manager</a></li><li id="reference-query-builder-html-via-a-document-repository" class="toc-item"><a href="../reference/query-builder.html#via-a-document-repository">Via a document repository</a></li></ul></li><li id="reference-query-builder-html-working-with-the-querybuilder" class="toc-item"><a href="../reference/query-builder.html#working-with-the-querybuilder">Working with the QueryBuilder</a><ul><li id="reference-query-builder-html-specifying-the-document-source-from" class="toc-item"><a href="../reference/query-builder.html#specifying-the-document-source-from">Specifying the document source - from</a></li><li id="reference-query-builder-html-selecting-specific-properties-select" class="toc-item"><a href="../reference/query-builder.html#selecting-specific-properties-select">Selecting specific properties - select</a></li><li id="reference-query-builder-html-limiting-the-number-of-results" class="toc-item"><a href="../reference/query-builder.html#limiting-the-number-of-results">Limiting the number of results</a></li><li id="reference-query-builder-html-specifying-selection-criteria" class="toc-item"><a href="../reference/query-builder.html#specifying-selection-criteria">Specifying selection criteria</a></li><li id="reference-query-builder-html-ordering-results" class="toc-item"><a href="../reference/query-builder.html#ordering-results">Ordering results</a></li><li id="reference-query-builder-html-querying-translated-documents" class="toc-item"><a href="../reference/query-builder.html#querying-translated-documents">Querying translated documents</a></li></ul></li><li id="reference-query-builder-html-additional-notes" class="toc-item"><a href="../reference/query-builder.html#additional-notes">Additional notes</a><ul><li id="reference-query-builder-html-querying-multivalue-fields" class="toc-item"><a href="../reference/query-builder.html#querying-multivalue-fields">Querying multivalue fields</a></li><li id="reference-query-builder-html-using-the-query-builder-in-tests" class="toc-item"><a href="../reference/query-builder.html#using-the-query-builder-in-tests">Using the Query Builder in Tests</a></li></ul></li></ul></li><li id="reference-annotations-mapping-html-annotation-mapping" class="toc-item"><a href="../reference/annotations-mapping.html#annotation-mapping">Annotation Mapping</a><ul><li id="reference-annotations-mapping-html-note-on-usage" class="toc-item"><a href="../reference/annotations-mapping.html#note-on-usage">Note on usage</a></li><li id="reference-annotations-mapping-html-document" class="toc-item"><a href="../reference/annotations-mapping.html#document">Document</a><ul><li id="reference-annotations-mapping-html-document" class="toc-item"><a href="../reference/annotations-mapping.html#document">@Document</a></li><li id="reference-annotations-mapping-html-mappedsuperclass" class="toc-item"><a href="../reference/annotations-mapping.html#mappedsuperclass">@MappedSuperclass</a></li></ul></li><li id="reference-annotations-mapping-html-mapping-fields" class="toc-item"><a href="../reference/annotations-mapping.html#mapping-fields">Mapping Fields</a><ul><li id="reference-annotations-mapping-html-field" class="toc-item"><a href="../reference/annotations-mapping.html#field">@Field</a></li></ul></li><li id="reference-annotations-mapping-html-hierarchy" class="toc-item"><a href="../reference/annotations-mapping.html#hierarchy">Hierarchy</a><ul><li id="reference-annotations-mapping-html-child" class="toc-item"><a href="../reference/annotations-mapping.html#child">@Child</a></li><li id="reference-annotations-mapping-html-children" class="toc-item"><a href="../reference/annotations-mapping.html#children">@Children</a></li><li id="reference-annotations-mapping-html-depth" class="toc-item"><a href="../reference/annotations-mapping.html#depth">@Depth</a></li><li id="reference-annotations-mapping-html-parentdocument" class="toc-item"><a href="../reference/annotations-mapping.html#parentdocument">@ParentDocument</a></li></ul></li><li id="reference-annotations-mapping-html-identification" class="toc-item"><a href="../reference/annotations-mapping.html#identification">Identification</a><ul><li id="reference-annotations-mapping-html-id" class="toc-item"><a href="../reference/annotations-mapping.html#id">@Id</a></li><li id="reference-annotations-mapping-html-nodename" class="toc-item"><a href="../reference/annotations-mapping.html#nodename">@Nodename</a></li><li id="reference-annotations-mapping-html-uuid" class="toc-item"><a href="../reference/annotations-mapping.html#uuid">@Uuid</a></li></ul></li><li id="reference-annotations-mapping-html-lifcycle-callbacks" class="toc-item"><a href="../reference/annotations-mapping.html#lifcycle-callbacks">Lifcycle callbacks</a><ul><li id="reference-annotations-mapping-html-postload" class="toc-item"><a href="../reference/annotations-mapping.html#postload">@PostLoad</a></li><li id="reference-annotations-mapping-html-postpersist" class="toc-item"><a href="../reference/annotations-mapping.html#postpersist">@PostPersist</a></li><li id="reference-annotations-mapping-html-postremove" class="toc-item"><a href="../reference/annotations-mapping.html#postremove">@PostRemove</a></li><li id="reference-annotations-mapping-html-postupdate" class="toc-item"><a href="../reference/annotations-mapping.html#postupdate">@PostUpdate</a></li><li id="reference-annotations-mapping-html-prepersist" class="toc-item"><a href="../reference/annotations-mapping.html#prepersist">@PrePersist</a></li><li id="reference-annotations-mapping-html-preremove" class="toc-item"><a href="../reference/annotations-mapping.html#preremove">@PreRemove</a></li><li id="reference-annotations-mapping-html-preupdate" class="toc-item"><a href="../reference/annotations-mapping.html#preupdate">@PreUpdate</a></li></ul></li><li id="reference-annotations-mapping-html-phpcr" class="toc-item"><a href="../reference/annotations-mapping.html#phpcr">PHPCR</a><ul><li id="reference-annotations-mapping-html-node" class="toc-item"><a href="../reference/annotations-mapping.html#node">@Node</a></li></ul></li><li id="reference-annotations-mapping-html-references" class="toc-item"><a href="../reference/annotations-mapping.html#references">References</a><ul><li id="reference-annotations-mapping-html-referencemany" class="toc-item"><a href="../reference/annotations-mapping.html#referencemany">@ReferenceMany</a></li><li id="reference-annotations-mapping-html-referenceone" class="toc-item"><a href="../reference/annotations-mapping.html#referenceone">@ReferenceOne</a></li><li id="reference-annotations-mapping-html-referrers" class="toc-item"><a href="../reference/annotations-mapping.html#referrers">@Referrers</a></li><li id="reference-annotations-mapping-html-mixedreferrers" class="toc-item"><a href="../reference/annotations-mapping.html#mixedreferrers">@MixedReferrers</a></li></ul></li><li id="reference-annotations-mapping-html-translation" class="toc-item"><a href="../reference/annotations-mapping.html#translation">Translation</a><ul><li id="reference-annotations-mapping-html-locale" class="toc-item"><a href="../reference/annotations-mapping.html#locale">@Locale</a></li></ul></li><li id="reference-annotations-mapping-html-versioning" class="toc-item"><a href="../reference/annotations-mapping.html#versioning">Versioning</a><ul><li id="reference-annotations-mapping-html-versioncreated" class="toc-item"><a href="../reference/annotations-mapping.html#versioncreated">@VersionCreated</a></li><li id="reference-annotations-mapping-html-versionname" class="toc-item"><a href="../reference/annotations-mapping.html#versionname">@VersionName</a></li></ul></li></ul></li><li id="reference-query-builder-reference-html-query-builder-reference" class="toc-item"><a href="../reference/query-builder-reference.html#query-builder-reference">Query Builder Reference</a><ul><li id="reference-query-builder-reference-html-reference" class="toc-item"><a href="../reference/query-builder-reference.html#reference">Reference</a><ul><li id="reference-query-builder-reference-html-node-constraintandx" class="toc-item"><a href="../reference/query-builder-reference.html#node-constraintandx">Node: ConstraintAndx</a></li><li id="reference-query-builder-reference-html-node-constraintcomparison" class="toc-item"><a href="../reference/query-builder-reference.html#node-constraintcomparison">Node: ConstraintComparison</a></li><li id="reference-query-builder-reference-html-node-constraintfactory" class="toc-item"><a href="../reference/query-builder-reference.html#node-constraintfactory">Node: ConstraintFactory</a></li><li id="reference-query-builder-reference-html-node-constraintnot" class="toc-item"><a href="../reference/query-builder-reference.html#node-constraintnot">Node: ConstraintNot</a></li><li id="reference-query-builder-reference-html-node-constraintorx" class="toc-item"><a href="../reference/query-builder-reference.html#node-constraintorx">Node: ConstraintOrx</a></li><li id="reference-query-builder-reference-html-node-from" class="toc-item"><a href="../reference/query-builder-reference.html#node-from">Node: From</a></li><li id="reference-query-builder-reference-html-node-operanddynamicfactory" class="toc-item"><a href="../reference/query-builder-reference.html#node-operanddynamicfactory">Node: OperandDynamicFactory</a></li><li id="reference-query-builder-reference-html-node-operanddynamiclowercase" class="toc-item"><a href="../reference/query-builder-reference.html#node-operanddynamiclowercase">Node: OperandDynamicLowerCase</a></li><li id="reference-query-builder-reference-html-node-operanddynamicuppercase" class="toc-item"><a href="../reference/query-builder-reference.html#node-operanddynamicuppercase">Node: OperandDynamicUpperCase</a></li><li id="reference-query-builder-reference-html-node-operandfactory" class="toc-item"><a href="../reference/query-builder-reference.html#node-operandfactory">Node: OperandFactory</a></li><li id="reference-query-builder-reference-html-node-operandstaticfactory" class="toc-item"><a href="../reference/query-builder-reference.html#node-operandstaticfactory">Node: OperandStaticFactory</a></li><li id="reference-query-builder-reference-html-node-orderby" class="toc-item"><a href="../reference/query-builder-reference.html#node-orderby">Node: OrderBy</a></li><li id="reference-query-builder-reference-html-node-orderbyadd" class="toc-item"><a href="../reference/query-builder-reference.html#node-orderbyadd">Node: OrderByAdd</a></li><li id="reference-query-builder-reference-html-node-ordering" class="toc-item"><a href="../reference/query-builder-reference.html#node-ordering">Node: Ordering</a></li><li id="reference-query-builder-reference-html-node-querybuilder" class="toc-item"><a href="../reference/query-builder-reference.html#node-querybuilder">Node: QueryBuilder</a></li><li id="reference-query-builder-reference-html-node-select" class="toc-item"><a href="../reference/query-builder-reference.html#node-select">Node: Select</a></li><li id="reference-query-builder-reference-html-node-selectadd" class="toc-item"><a href="../reference/query-builder-reference.html#node-selectadd">Node: SelectAdd</a></li><li id="reference-query-builder-reference-html-node-sourcejoin" class="toc-item"><a href="../reference/query-builder-reference.html#node-sourcejoin">Node: SourceJoin</a></li><li id="reference-query-builder-reference-html-node-sourcejoinconditionfactory" class="toc-item"><a href="../reference/query-builder-reference.html#node-sourcejoinconditionfactory">Node: SourceJoinConditionFactory</a></li><li id="reference-query-builder-reference-html-node-sourcejoinleft" class="toc-item"><a href="../reference/query-builder-reference.html#node-sourcejoinleft">Node: SourceJoinLeft</a></li><li id="reference-query-builder-reference-html-node-sourcejoinright" class="toc-item"><a href="../reference/query-builder-reference.html#node-sourcejoinright">Node: SourceJoinRight</a></li><li id="reference-query-builder-reference-html-node-where" class="toc-item"><a href="../reference/query-builder-reference.html#node-where">Node: Where</a></li><li id="reference-query-builder-reference-html-node-whereand" class="toc-item"><a href="../reference/query-builder-reference.html#node-whereand">Node: WhereAnd</a></li><li id="reference-query-builder-reference-html-node-whereor" class="toc-item"><a href="../reference/query-builder-reference.html#node-whereor">Node: WhereOr</a></li></ul></li></ul></li><li id="reference-events-html-events" class="toc-item"><a href="../reference/events.html#events">Events</a><ul><li id="reference-events-html-lifecycle-events" class="toc-item"><a href="../reference/events.html#lifecycle-events">Lifecycle Events</a></li><li id="reference-events-html-event-order-when-moving" class="toc-item"><a href="../reference/events.html#event-order-when-moving">Event order when moving</a></li><li id="reference-events-html-event-order-when-handling-with-translations" class="toc-item"><a href="../reference/events.html#event-order-when-handling-with-translations">Event order when handling with translations</a></li><li id="reference-events-html-listening-to-events" class="toc-item"><a href="../reference/events.html#listening-to-events">Listening to events</a></li><li id="reference-events-html-lifecycle-callbacks" class="toc-item"><a href="../reference/events.html#lifecycle-callbacks">Lifecycle Callbacks</a></li><li id="reference-events-html-listening-to-lifecycle-events" class="toc-item"><a href="../reference/events.html#listening-to-lifecycle-events">Listening to Lifecycle Events</a></li></ul></li><li id="reference-architecture-html-architecture" class="toc-item"><a href="../reference/architecture.html#architecture">Architecture</a><ul><li id="reference-architecture-html-doctrine-phpcr-odm-packages" class="toc-item"><a href="../reference/architecture.html#doctrine-phpcr-odm-packages">Doctrine PHPCR-ODM Packages</a><ul><li id="reference-architecture-html-content-tree-not-tables" class="toc-item"><a href="../reference/architecture.html#content-tree-not-tables">Content tree, not tables</a></li><li id="reference-architecture-html-additional-core-features" class="toc-item"><a href="../reference/architecture.html#additional-core-features">Additional core features</a></li></ul></li></ul></li><li id="reference-inheritance-mapping-html-inheritance-mapping" class="toc-item"><a href="../reference/inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a><ul><li id="reference-inheritance-mapping-html-document-class-inheritance" class="toc-item"><a href="../reference/inheritance-mapping.html#document-class-inheritance">Document class inheritance</a></li></ul></li><li id="reference-multilang-html-multilanguage-support" class="toc-item"><a href="../reference/multilang.html#multilanguage-support">Multilanguage support</a><ul><li id="reference-multilang-html-philosophy" class="toc-item"><a href="../reference/multilang.html#philosophy">Philosophy</a></li><li id="reference-multilang-html-mapping" class="toc-item"><a href="../reference/multilang.html#mapping">Mapping</a></li><li id="reference-multilang-html-interacting-with-translations" class="toc-item"><a href="../reference/multilang.html#interacting-with-translations">Interacting with translations</a></li><li id="reference-multilang-html-choosing-the-right-translation-strategy" class="toc-item"><a href="../reference/multilang.html#choosing-the-right-translation-strategy">Choosing the right translation strategy</a><ul><li id="reference-multilang-html-implementing-your-own-translation-strategy" class="toc-item"><a href="../reference/multilang.html#implementing-your-own-translation-strategy">Implementing your own translation strategy</a></li></ul></li><li id="reference-multilang-html-configure-the-locale-chooser-strategy" class="toc-item"><a href="../reference/multilang.html#configure-the-locale-chooser-strategy">Configure the locale chooser strategy</a></li><li id="reference-multilang-html-full-example" class="toc-item"><a href="../reference/multilang.html#full-example">Full Example</a></li><li id="reference-multilang-html-querying-translated-properties" class="toc-item"><a href="../reference/multilang.html#querying-translated-properties">Querying Translated Properties</a></li><li id="reference-multilang-html-limitations" class="toc-item"><a href="../reference/multilang.html#limitations">Limitations</a><ul><li id="reference-multilang-html-translations-and-references-hierarchy" class="toc-item"><a href="../reference/multilang.html#translations-and-references-hierarchy">Translations and references / hierarchy</a></li></ul></li></ul></li><li id="reference-transactions-html-transactions" class="toc-item"><a href="../reference/transactions.html#transactions">Transactions</a><ul><li id="reference-transactions-html-transactional" class="toc-item"><a href="../reference/transactions.html#transactional">transactional()</a></li></ul></li><li id="reference-fetch-depth-html-tuning-the-node-preloading" class="toc-item"><a href="../reference/fetch-depth.html#tuning-the-node-preloading">Tuning the node preloading</a></li><li id="reference-working-with-objects-html-working-with-objects" class="toc-item"><a href="../reference/working-with-objects.html#working-with-objects">Working with Objects</a><ul><li id="reference-working-with-objects-html-documents-and-the-identity-map" class="toc-item"><a href="../reference/working-with-objects.html#documents-and-the-identity-map">Documents and the Identity Map</a></li><li id="reference-working-with-objects-html-document-graph-traversal" class="toc-item"><a href="../reference/working-with-objects.html#document-graph-traversal">Document Graph Traversal</a></li><li id="reference-working-with-objects-html-persisting-documents" class="toc-item"><a href="../reference/working-with-objects.html#persisting-documents">Persisting documents</a></li><li id="reference-working-with-objects-html-removing-documents" class="toc-item"><a href="../reference/working-with-objects.html#removing-documents">Removing documents</a></li><li id="reference-working-with-objects-html-detaching-documents" class="toc-item"><a href="../reference/working-with-objects.html#detaching-documents">Detaching documents</a></li><li id="reference-working-with-objects-html-merging-documents" class="toc-item"><a href="../reference/working-with-objects.html#merging-documents">Merging documents</a></li><li id="reference-working-with-objects-html-synchronization-with-the-repository" class="toc-item"><a href="../reference/working-with-objects.html#synchronization-with-the-repository">Synchronization with the Repository</a><ul><li id="reference-working-with-objects-html-effects-of-repository-and-unitofwork-being-out-of-sync" class="toc-item"><a href="../reference/working-with-objects.html#effects-of-repository-and-unitofwork-being-out-of-sync">Effects of Repository and UnitOfWork being Out-Of-Sync</a></li><li id="reference-working-with-objects-html-synchronizing-new-and-managed-documents" class="toc-item"><a href="../reference/working-with-objects.html#synchronizing-new-and-managed-documents">Synchronizing New and Managed Documents</a></li><li id="reference-working-with-objects-html-synchronizing-removed-documents" class="toc-item"><a href="../reference/working-with-objects.html#synchronizing-removed-documents">Synchronizing Removed Documents</a></li><li id="reference-working-with-objects-html-the-size-of-a-unit-of-work" class="toc-item"><a href="../reference/working-with-objects.html#the-size-of-a-unit-of-work">The size of a Unit of Work</a></li><li id="reference-working-with-objects-html-the-cost-of-flushing" class="toc-item"><a href="../reference/working-with-objects.html#the-cost-of-flushing">The cost of flushing</a></li><li id="reference-working-with-objects-html-direct-access-to-a-unit-of-work" class="toc-item"><a href="../reference/working-with-objects.html#direct-access-to-a-unit-of-work">Direct Access to a Unit of Work</a></li><li id="reference-working-with-objects-html-document-state" class="toc-item"><a href="../reference/working-with-objects.html#document-state">Document State</a></li></ul></li><li id="reference-working-with-objects-html-querying" class="toc-item"><a href="../reference/working-with-objects.html#querying">Querying</a><ul><li id="reference-working-with-objects-html-by-primary-key" class="toc-item"><a href="../reference/working-with-objects.html#by-primary-key">By Primary Key</a></li><li id="reference-working-with-objects-html-by-simple-conditions" class="toc-item"><a href="../reference/working-with-objects.html#by-simple-conditions">By Simple Conditions</a></li><li id="reference-working-with-objects-html-by-lazy-loading" class="toc-item"><a href="../reference/working-with-objects.html#by-lazy-loading">By Lazy Loading</a></li><li id="reference-working-with-objects-html-by-query-builder" class="toc-item"><a href="../reference/working-with-objects.html#by-query-builder">By Query Builder</a></li><li id="reference-working-with-objects-html-by-native-queries" class="toc-item"><a href="../reference/working-with-objects.html#by-native-queries">By Native Queries</a></li><li id="reference-working-with-objects-html-custom-repositories" class="toc-item"><a href="../reference/working-with-objects.html#custom-repositories">Custom Repositories</a></li></ul></li></ul></li><li id="reference-versioning-html-versioning-support" class="toc-item"><a href="../reference/versioning.html#versioning-support">Versioning support</a><ul><li id="reference-versioning-html-philosophy" class="toc-item"><a href="../reference/versioning.html#philosophy">Philosophy</a><ul><li id="reference-versioning-html-phpcr-odm" class="toc-item"><a href="../reference/versioning.html#phpcr-odm">PHPCR-ODM</a></li></ul></li><li id="reference-versioning-html-mappings" class="toc-item"><a href="../reference/versioning.html#mappings">Mappings</a></li><li id="reference-versioning-html-interacting-with-versions" class="toc-item"><a href="../reference/versioning.html#interacting-with-versions">Interacting with versions</a></li><li id="reference-versioning-html-full-example" class="toc-item"><a href="../reference/versioning.html#full-example">Full Example</a></li></ul></li><li id="reference-basic-mapping-html-basic-mapping" class="toc-item"><a href="../reference/basic-mapping.html#basic-mapping">Basic Mapping</a><ul><li id="reference-basic-mapping-html-mapping-drivers" class="toc-item"><a href="../reference/basic-mapping.html#mapping-drivers">Mapping Drivers</a></li><li id="reference-basic-mapping-html-introduction-to-docblock-annotations" class="toc-item"><a href="../reference/basic-mapping.html#introduction-to-docblock-annotations">Introduction to Docblock Annotations</a></li><li id="reference-basic-mapping-html-persistent-classes" class="toc-item"><a href="../reference/basic-mapping.html#persistent-classes">Persistent classes</a><ul><li id="reference-basic-mapping-html-specify-a-node-type" class="toc-item"><a href="../reference/basic-mapping.html#specify-a-node-type">Specify a node type</a></li><li id="reference-basic-mapping-html-specify-a-repository-class" class="toc-item"><a href="../reference/basic-mapping.html#specify-a-repository-class">Specify a repository class</a></li></ul></li><li id="reference-basic-mapping-html-doctrine-mapping-types" class="toc-item"><a href="../reference/basic-mapping.html#doctrine-mapping-types">Doctrine Mapping Types</a></li><li id="reference-basic-mapping-html-property-mapping" class="toc-item"><a href="../reference/basic-mapping.html#property-mapping">Property Mapping</a><ul><li id="reference-basic-mapping-html-mapping-to-a-differently-named-phpcr-property" class="toc-item"><a href="../reference/basic-mapping.html#mapping-to-a-differently-named-phpcr-property">Mapping to a differently named PHPCR property</a></li><li id="reference-basic-mapping-html-mapping-multivalue-properties" class="toc-item"><a href="../reference/basic-mapping.html#mapping-multivalue-properties">Mapping multivalue properties</a></li><li id="reference-basic-mapping-html-summary" class="toc-item"><a href="../reference/basic-mapping.html#summary">Summary</a></li></ul></li><li id="reference-basic-mapping-html-identifiers" class="toc-item"><a href="../reference/basic-mapping.html#identifiers">Identifiers</a><ul><li id="reference-basic-mapping-html-identifier-generation-strategies" class="toc-item"><a href="../reference/basic-mapping.html#identifier-generation-strategies">Identifier Generation Strategies</a></li></ul></li><li id="reference-basic-mapping-html-symfony-bundle" class="toc-item"><a href="../reference/basic-mapping.html#symfony-bundle">Symfony bundle</a></li></ul></li><li id="reference-phpcr-access-html-accessing-the-underlying-phpcr-session" class="toc-item"><a href="../reference/phpcr-access.html#accessing-the-underlying-phpcr-session">Accessing the underlying PHPCR session</a><ul><li id="reference-phpcr-access-html-getting-the-phpcr-session" class="toc-item"><a href="../reference/phpcr-access.html#getting-the-phpcr-session">Getting the PHPCR Session</a></li><li id="reference-phpcr-access-html-the-node-field-mapping" class="toc-item"><a href="../reference/phpcr-access.html#the-node-field-mapping">The Node field mapping</a></li></ul></li><li id="reference-introduction-html-getting-started" class="toc-item"><a href="../reference/introduction.html#getting-started">Getting Started</a><ul><li id="reference-introduction-html-what-are-documents" class="toc-item"><a href="../reference/introduction.html#what-are-documents">What are Documents?</a></li><li id="reference-introduction-html-an-example-model-document-management" class="toc-item"><a href="../reference/introduction.html#an-example-model-document-management">An Example Model: Document Management</a></li><li id="reference-introduction-html-setup-project" class="toc-item"><a href="../reference/introduction.html#setup-project">Setup Project</a></li><li id="reference-introduction-html-building-the-model" class="toc-item"><a href="../reference/introduction.html#building-the-model">Building the model</a></li><li id="reference-introduction-html-initialize-the-repository" class="toc-item"><a href="../reference/introduction.html#initialize-the-repository">Initialize the repository</a></li><li id="reference-introduction-html-storing-documents" class="toc-item"><a href="../reference/introduction.html#storing-documents">Storing documents</a></li><li id="reference-introduction-html-reading-documents" class="toc-item"><a href="../reference/introduction.html#reading-documents">Reading documents</a></li><li id="reference-introduction-html-tree-traversal" class="toc-item"><a href="../reference/introduction.html#tree-traversal">Tree traversal</a></li><li id="reference-introduction-html-add-references" class="toc-item"><a href="../reference/introduction.html#add-references">Add references</a></li><li id="reference-introduction-html-removing-documents" class="toc-item"><a href="../reference/introduction.html#removing-documents">Removing documents</a></li><li id="reference-introduction-html-other-helpful-methods-on-the-documentmanager" class="toc-item"><a href="../reference/introduction.html#other-helpful-methods-on-the-documentmanager">Other helpful methods on the DocumentManager</a></li><li id="reference-introduction-html-conclusion" class="toc-item"><a href="../reference/introduction.html#conclusion">Conclusion</a></li></ul></li><li id="index-html-doctrine-php-content-repository-odm-documentation" class="toc-item"><a href="../index.html#doctrine-php-content-repository-odm-documentation">Doctrine PHP Content Repository ODM documentation</a><ul><li id="index-html-getting-help" class="toc-item"><a href="../index.html#getting-help">Getting Help</a></li><li id="index-html-getting-started" class="toc-item"><a href="../index.html#getting-started">Getting Started</a></li><li id="index-html-mapping-objects-onto-a-document-repository" class="toc-item"><a href="../index.html#mapping-objects-onto-a-document-repository">Mapping Objects onto a Document Repository</a></li><li id="index-html-working-with-objects" class="toc-item"><a href="../index.html#working-with-objects">Working with Objects</a></li><li id="index-html-advanced-topics" class="toc-item"><a href="../index.html#advanced-topics">Advanced Topics</a></li><li id="index-html-cookbook" class="toc-item"><a href="../index.html#cookbook">Cookbook</a></li></ul></li><li id="last-modified-html-last-modification-timestamp" class="toc-item"><a href="last-modified.html#last-modification-timestamp">Last modification timestamp</a><ul><li id="last-modified-html-using-the-build-in-support" class="toc-item"><a href="last-modified.html#using-the-build-in-support">Using the build-in support</a></li><li id="last-modified-html-a-lastmodified-listener-for-custom-behaviour" class="toc-item"><a href="last-modified.html#a-lastmodified-listener-for-custom-behaviour">A lastModified listener for custom behaviour</a></li></ul></li><li id="refactoring-multilang-html-refactoring-multilanguage-documents" class="toc-item"><a href="refactoring-multilang.html#refactoring-multilanguage-documents">Refactoring Multilanguage Documents</a><ul><li id="refactoring-multilang-html-procedure" class="toc-item"><a href="refactoring-multilang.html#procedure">Procedure</a></li><li id="refactoring-multilang-html-converting-untranslated-fields-to-be-translated" class="toc-item"><a href="refactoring-multilang.html#converting-untranslated-fields-to-be-translated">Converting Untranslated Fields to be Translated</a></li><li id="refactoring-multilang-html-removing-translation-from-a-field" class="toc-item"><a href="refactoring-multilang.html#removing-translation-from-a-field">Removing Translation from a Field</a></li><li id="refactoring-multilang-html-changing-the-translation-strategy" class="toc-item"><a href="refactoring-multilang.html#changing-the-translation-strategy">Changing the Translation Strategy</a></li></ul></li><li id="custom-documentclass-mapper-html-using-a-custom-document-class-mapper-with-phpcr-odm" class="toc-item"><a href="custom_documentclass_mapper.html#using-a-custom-document-class-mapper-with-phpcr-odm">Using a Custom Document Class Mapper with PHPCR-ODM</a><ul><li id="custom-documentclass-mapper-html-symfony2-integration" class="toc-item"><a href="custom_documentclass_mapper.html#symfony2-integration">Symfony2 integration</a></li></ul></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a></li>
                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/latest/">Documentation</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Refactoring Multilanguage Documents</li>
                            </ol>
                        </nav>
                                    </div>

                

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-phpcr-odm/en/latest/cookbook/refactoring-multilang.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        master
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-phpcr-odm/en/latest/cookbook/refactoring-multilang.html">
                                                    master

                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="refactoring-multilanguage-documents" name="refactoring-multilanguage-documents"></a><h1 class="section-header"><a href="#refactoring-multilanguage-documents">Refactoring Multilanguage Documents<i class="fas fa-link"></i></a></h1>
<p>Documents that are <a href="../reference/multilang.html">multilanguage</a> store a copy
of their translated fields for each locale. When you refactor documents and
to change fields to become translated or no longer translated, the data in PHPCR
needs to be migrated.</p>
<p>A command line tool and a class are provided to help with this task.</p>
<div class="alert version-added bg-info text-white"><p class="new-version font-weight-bold"><i class="fas fa-plus-square"></i> New in version 1.3</p><p><blockquote><p>The command and helper class where introduced in PHPCR-ODM 1.3.</p>
</blockquote></p></div>
<div class="section"><a class="section-anchor" id="procedure" name="procedure"></a><h2 class="section-header"><a href="#procedure">Procedure<i class="fas fa-link"></i></a></h2>
<div class="alert warning-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td><td><p>As always with data migrations, create a backup before you attempt to
migrate the live data. If there is a bug or you make a mistake, data
could be destroyed otherwise.</p>
</td></tr></table></div>
<p>The first step is to update the translation metadata (add or remove the
translated attribute of a field mapping, or change the translation strategy
declaration on the class mapping). The conversion tool converts to the current
state. Sometimes it can guess the previous state, sometimes you will need to
provide that information.</p>
<p>Once this is done, use the command line
tool <code>doctrine:phpcr:document:convert-translation</code>. If you need additional
logic, you can also write your own PHP code that instantiates
<code>Doctrine\ODM\PHPCR\Tools\Helper\TranslationConverter</code> and calls its
<code>convert</code> method. If you do the later, make sure to read the phpdoc on the
<code>convert</code> method.</p>
</div>
<div class="section"><a class="section-anchor" id="converting-untranslated-fields-to-be-translated" name="converting-untranslated-fields-to-be-translated"></a><h2 class="section-header"><a href="#converting-untranslated-fields-to-be-translated">Converting Untranslated Fields to be Translated<i class="fas fa-link"></i></a></h2>
<p>First, add the <code>translated</code> mapping attribute for the fields that should
become translated. If the document had no translated fields previously, you
also need to define a translator strategy on the class mapping, as explained
in <a href="../reference/multilang.html">multilanguage support</a>.</p>
<p>Now you can run the command to make fields translated. It will copy the
current untranslated value of the fields into all locales specified in the
<code>--locales</code> option. From this, editors can adjust translations in specific
languages.</p>
<p>Assuming you have a <code>Acme\Document\Article</code> with the fields <code>title</code> and
<code>body</code> that was previously not translated at all, the command looks as
follows:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpcrodm doctrine:phpcr:document:convert-translation "Acme\\Document\\Article" --locales=en</code></pre></div>
<p>If a document is already translated but new fields become translated, you can
limit which fields to convert using the <code>fields</code> option to the command.</p>
<p>To continue with the previous example, lets assume you had a field
<code>furtherInfo</code> that you did not translate but now realize needs being
translated as well. Add the translated attribute and then run:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpcrodm doctrine:phpcr:document:convert-translation "Acme\\Document\\Article" --locales=en --fields=furtherInfo</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="removing-translation-from-a-field" name="removing-translation-from-a-field"></a><h2 class="section-header"><a href="#removing-translation-from-a-field">Removing Translation from a Field<i class="fas fa-link"></i></a></h2>
<p>To remove translation from a field, adjust the field mapping to not provide the
translated attribute anymore. As long as the class mapping specifies the
translation strategy, you can just specify what field to update. Assume you
have a field <code>furtherInfo</code> that you changed from translated to untranslated:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpcrodm doctrine:phpcr:document:convert-translation "Acme\\Document\\Article" --fields=furtherInfo</code></pre></div>
<p>The command will request the translation of the field in the current locale,
with fallback order as configured.</p>
<p>If your whole document should no longer be translated, you can remove the
document translator configuration and the translated attribute from all fields.
You then need to specify all fields that need to be converted back, as well as
the translation strategy that was used:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpcrodm doctrine:phpcr:document:convert-translation "Acme\\Document\\Article" --fields=furtherInfo,title,body --previous-strategy=attribute</code></pre></div>
</div>
<div class="section"><a class="section-anchor" id="changing-the-translation-strategy" name="changing-the-translation-strategy"></a><h2 class="section-header"><a href="#changing-the-translation-strategy">Changing the Translation Strategy<i class="fas fa-link"></i></a></h2>
<p>To convert from one translation strategy to another, update the document to
specify the new strategy, and pass the old strategy on the command line:</p>
<div class="console"><pre><code class="console"><span class="noselect">$ </span>./vendor/bin/phpcrodm doctrine:phpcr:document:convert-translation "Acme\\Document\\Article" --locales=en --previous-strategy=attribute</code></pre></div>

</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?5ba1ea"
                            integrity="sha384-ArnFIITzhi7elU12/UzD1TuArRYje4tTd6vMTdU2VwVWgWe8fSugWtLpjg57h5TY"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'phpcr-odm';
            var versionSlug = 'latest';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search PHPCR ODM master'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
