<!DOCTYPE html>
<html>
    <head>
        <title>        Getting Started - Doctrine PHPCR ODM
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine PHPCR ODM Documentation: Getting Started ">

        <meta name="keywords" content="                    php,content,odm,data,mapper,mapping,object,documentation,getting,started
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/latest/reference/introduction.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?6e5d9f"
                        integrity="sha384-1gHMA2pCh3C7C5PdanZqLyU+p0j9aNUSKdqMxyST9hhhoAcooEmUcqk0Rj7owse5"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/2.1/reference/introduction.html" />
        <meta property="og:title" content="        Getting Started - Doctrine PHPCR ODM
    " />
        <meta property="og:description" content="Doctrine PHPCR ODM Documentation: Getting Started " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine PHPCR ODM",
            "description": "Getting Started",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/sponsorship.html">Sponsorship</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/phpcr-odm/edit/2.1.x/docs/en/reference/introduction.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>
                </div>
                <div class="nav-outbound">
                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        

            <div class="toc">
    <ul class="menu-level">
    <li class="toc-item">
    <a href="architecture.html#architecture">Architecture</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="architecture.html#doctrine-phpcr-odm-packages">Doctrine PHPCR-ODM Packages</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="architecture.html#content-tree-not-tables">Content tree, not tables</a>


</li>
            <li class="toc-item">
    <a href="architecture.html#additional-core-features">Additional core features</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="association-mapping.html#association-mapping">Association Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="association-mapping.html#hierarchy-mappings">Hierarchy mappings</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="association-mapping.html#child-restriction">Child restriction</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="association-mapping.html#references">References</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="association-mapping.html#referenceable-documents">Referenceable documents</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#reference-other-documents">Reference other documents</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#referrers-to-inverse-the-reference-relation">Referrers to inverse the reference relation</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#mixedreferrers">MixedReferrers</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="association-mapping.html#transitive-persistence-cascade-operations">Transitive persistence / Cascade Operations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="association-mapping.html#persistence-by-reachability-cascade-persist">Persistence by Reachability: Cascade Persist</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="association-mapping.html#collections">Collections</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="association-mapping.html#initializing-collections">Initializing Collections</a>


</li>
            <li class="toc-item">
    <a href="association-mapping.html#new-collections-after-flushing">New Collections after Flushing</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="attributes-mapping.html#attributes-mapping">Attributes Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="attributes-mapping.html#note-on-usage">Note on usage</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#document">Document</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#document">#[Document]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#mappedsuperclass">#[MappedSuperclass]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#mapping-fields">Mapping Fields</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#field">#[Field]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#hierarchy">Hierarchy</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#child">#[Child]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#children">#[Children]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#depth">#[Depth]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#parentdocument">#[ParentDocument]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#identification">Identification</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#id">#[Id]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#nodename">#[Nodename]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#uuid">#[Uuid]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#lifcycle-callbacks">Lifcycle callbacks</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#postload">#[PostLoad]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#postpersist">#[PostPersist]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#postremove">#[PostRemove]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#postupdate">#[PostUpdate]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#prepersist">#[PrePersist]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#preremove">#[PreRemove]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#preupdate">#[PreUpdate]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#phpcr">PHPCR</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#node">#[Node]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#references">References</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#referencemany">#[ReferenceMany]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#referenceone">#[ReferenceOne]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#referrers">#[Referrers]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#mixedreferrers">#[MixedReferrers]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#translation">Translation</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#locale">#[Locale]</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#versioning">Versioning</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="attributes-mapping.html#versioncreated">#[VersionCreated]</a>


</li>
            <li class="toc-item">
    <a href="attributes-mapping.html#versionname">#[VersionName]</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="basic-mapping.html#basic-mapping">Basic Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="basic-mapping.html#mapping-drivers">Mapping Drivers</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#introduction-to-php-attributes">Introduction to PHP Attributes</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#persistent-classes">Persistent classes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#specify-a-node-type">Specify a node type</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#specify-a-repository-class">Specify a repository class</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#doctrine-mapping-types">Doctrine Mapping Types</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#property-mapping">Property Mapping</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#mapping-to-a-differently-named-phpcr-property">Mapping to a differently named PHPCR property</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#mapping-multivalue-properties">Mapping multivalue properties</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#summary">Summary</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#identifiers">Identifiers</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#identifier-generation-strategies">Identifier Generation Strategies</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="basic-mapping.html#parent-and-name-strategy-recommended">Parent and name strategy (recommended)</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#assigned-id">Assigned Id</a>


</li>
            <li class="toc-item">
    <a href="basic-mapping.html#repository-strategy">Repository strategy</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="basic-mapping.html#symfony-bundle">Symfony bundle</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="events.html#events">Events</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="events.html#lifecycle-events">Lifecycle Events</a>


</li>
            <li class="toc-item">
    <a href="events.html#event-order-when-moving">Event order when moving</a>


</li>
            <li class="toc-item">
    <a href="events.html#event-order-when-handling-with-translations">Event order when handling with translations</a>


</li>
            <li class="toc-item">
    <a href="events.html#listening-to-events">Listening to events</a>


</li>
            <li class="toc-item">
    <a href="events.html#lifecycle-callbacks">Lifecycle Callbacks</a>


</li>
            <li class="toc-item">
    <a href="events.html#listening-to-lifecycle-events">Listening to Lifecycle Events</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="fetch-depth.html#tuning-the-node-preloading">Tuning the node preloading</a>


</li>
    <li class="toc-item">
    <a href="inheritance-mapping.html#inheritance-mapping">Inheritance Mapping</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="inheritance-mapping.html#document-class-inheritance">Document class inheritance</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="installation-configuration.html#installation">Installation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="installation-configuration.html#composer">Composer</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#phpcr-provider">PHPCR provider</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#install-jackalope-jackrabbit-phpcr-provider">Install Jackalope-Jackrabbit PHPCR provider</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#install-jackalope-doctrine-dbal-phpcr-provider">Install Jackalope Doctrine DBAL PHPCR provider</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#install-midgard2-phpcr-provider">Install Midgard2 PHPCR provider</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="installation-configuration.html#class-loading-with-composer">Class loading with composer</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#obtaining-an-objectmanager">Obtaining an ObjectManager</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#prepare-the-mapping-driver">Prepare the mapping driver</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#attributes-mapping-driver">Attributes Mapping Driver</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#xml-mapping-driver">XML Mapping Driver</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#yml-mapping-driver">YML Mapping Driver</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="installation-configuration.html#quick-configuration-example">Quick Configuration Example</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="installation-configuration.html#configuration-options">Configuration Options</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#proxy-directory-required">Proxy Directory (*REQUIRED*)</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#proxy-namespace-required">Proxy Namespace (*REQUIRED*)</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#metadata-driver-required">Metadata Driver (*REQUIRED*)</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#metadata-cache-recommended">Metadata Cache (*RECOMMENDED*)</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#auto-generating-proxy-classes-optional">Auto-generating Proxy Classes (*OPTIONAL*)</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="installation-configuration.html#development-vs-production-configuration">Development vs Production Configuration</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#connection-options">Connection Options</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#proxy-objects">Proxy Objects</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#reference-proxies">Reference Proxies</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#generating-proxy-classes">Generating Proxy classes</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#multiple-metadata-sources">Multiple Metadata Sources</a>


</li>
            <li class="toc-item">
    <a href="installation-configuration.html#default-repository-optional">Default Repository (*OPTIONAL*)</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="installation-configuration.html#setting-up-the-console">Setting up the Console</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="installation-configuration.html#register-system-node-types">Register system node types</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item opened">
    <a href="#getting-started">Getting Started</a>

        <ul class="section-level-1 opened-ul ">
            <li class="toc-item">
    <a href="#what-are-documents">What are Documents?</a>


</li>
            <li class="toc-item">
    <a href="#an-example-model-document-management">An Example Model: Document Management</a>


</li>
            <li class="toc-item">
    <a href="#setup-project">Setup Project</a>


</li>
            <li class="toc-item">
    <a href="#building-the-model">Building the model</a>


</li>
            <li class="toc-item">
    <a href="#initialize-the-repository">Initialize the repository</a>


</li>
            <li class="toc-item">
    <a href="#storing-documents">Storing documents</a>


</li>
            <li class="toc-item">
    <a href="#reading-documents">Reading documents</a>


</li>
            <li class="toc-item">
    <a href="#tree-traversal">Tree traversal</a>


</li>
            <li class="toc-item">
    <a href="#add-references">Add references</a>


</li>
            <li class="toc-item">
    <a href="#removing-documents">Removing documents</a>


</li>
            <li class="toc-item">
    <a href="#other-helpful-methods-on-the-documentmanager">Other helpful methods on the DocumentManager</a>


</li>
            <li class="toc-item">
    <a href="#conclusion">Conclusion</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="multilang.html#multilanguage-support">Multilanguage support</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="multilang.html#philosophy">Philosophy</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#mapping">Mapping</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#interacting-with-translations">Interacting with translations</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#choosing-the-right-translation-strategy">Choosing the right translation strategy</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="multilang.html#implementing-your-own-translation-strategy">Implementing your own translation strategy</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="multilang.html#configure-the-locale-chooser-strategy">Configure the locale chooser strategy</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#full-example">Full Example</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#querying-translated-properties">Querying Translated Properties</a>


</li>
            <li class="toc-item">
    <a href="multilang.html#limitations">Limitations</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="multilang.html#translations-and-references-hierarchy">Translations and references / hierarchy</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="phpcr-access.html#accessing-the-underlying-phpcr-session">Accessing the underlying PHPCR session</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="phpcr-access.html#getting-the-phpcr-session">Getting the PHPCR Session</a>


</li>
            <li class="toc-item">
    <a href="phpcr-access.html#the-node-field-mapping">The Node field mapping</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="query.html#the-query-object">The Query Object</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="query.html#getting-single-results">Getting single results</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query.html#getsingleresult">getSingleResult</a>


</li>
            <li class="toc-item">
    <a href="query.html#getoneornullresult">getOneOrNullResult</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query.html#getting-multiple-results">Getting multiple results</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query.html#getresult">getResult</a>


</li>
            <li class="toc-item">
    <a href="query.html#getphpcrnoderesult">getPhpcrNodeResult</a>


</li>
            <li class="toc-item">
    <a href="query.html#execute">execute</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query.html#hydration-modes">Hydration modes</a>


</li>
            <li class="toc-item">
    <a href="query.html#limiting-results">Limiting results</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="query-builder.html#the-querybuilder">The QueryBuilder</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="query-builder.html#concepts">Concepts</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#leaf-and-factory-nodes">Leaf and Factory Nodes</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#fluent-interface">Fluent Interface</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#types-and-cardinality">Types and Cardinality</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#aliases-and-fields">Aliases and fields</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder.html#retrieving-a-query-builder-instance">Retrieving a query builder instance</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#via-the-document-manager">Via the document manager</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#via-a-document-repository">Via a document repository</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder.html#working-with-the-querybuilder">Working with the QueryBuilder</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#specifying-the-document-source-from">Specifying the document source - from</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#from-single-source">From Single Source</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#from-joined-source">From Joined Source</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#joining-with-an-association">Joining with an Association</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder.html#selecting-specific-properties-select">Selecting specific properties - select</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#limiting-the-number-of-results">Limiting the number of results</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#specifying-selection-criteria">Specifying selection criteria</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#ordering-results">Ordering results</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#querying-translated-documents">Querying translated documents</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder.html#additional-notes">Additional notes</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder.html#querying-multivalue-fields">Querying multivalue fields</a>


</li>
            <li class="toc-item">
    <a href="query-builder.html#using-the-query-builder-in-tests">Using the Query Builder in Tests</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="query-builder-reference.html#query-builder-reference">Query Builder Reference</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="query-builder-reference.html#reference">Reference</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#node-constraintandx">Node: ConstraintAndx</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-constraintcomparison">Node: ConstraintComparison</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-constraintfactory">Node: ConstraintFactory</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#andx">-&gt;andX</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#orx">-&gt;orX</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#fieldisset">-&gt;fieldIsset</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#fulltextsearch">-&gt;fullTextSearch</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#same">-&gt;same</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#descendant">-&gt;descendant</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#child">-&gt;child</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#eq">-&gt;eq</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#neq">-&gt;neq</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#lt">-&gt;lt</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#lte">-&gt;lte</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#gt">-&gt;gt</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#gte">-&gt;gte</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#like">-&gt;like</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-constraintnot">Node: ConstraintNot</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-constraintorx">Node: ConstraintOrx</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-from">Node: From</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-operanddynamicfactory">Node: OperandDynamicFactory</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#fulltextsearchscore">-&gt;fullTextSearchScore</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#length">-&gt;length</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#lowercase">-&gt;lowerCase</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#uppercase">-&gt;upperCase</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#localname">-&gt;localName</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#name">-&gt;name</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#field">-&gt;field</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-operanddynamiclowercase">Node: OperandDynamicLowerCase</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-operanddynamicuppercase">Node: OperandDynamicUpperCase</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-operandfactory">Node: OperandFactory</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#parameter">-&gt;parameter</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#literal">-&gt;literal</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-operandstaticfactory">Node: OperandStaticFactory</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-orderby">Node: OrderBy</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#asc">-&gt;asc</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#desc">-&gt;desc</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-orderbyadd">Node: OrderByAdd</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-ordering">Node: Ordering</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-querybuilder">Node: QueryBuilder</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#where">-&gt;where</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#andwhere">-&gt;andWhere</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#orwhere">-&gt;orWhere</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#from">-&gt;from</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#fromdocument">-&gt;fromDocument</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#addjoinleftouter">-&gt;addJoinLeftOuter</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#addjoinrightouter">-&gt;addJoinRightOuter</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#addjoininner">-&gt;addJoinInner</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#select">-&gt;select</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#addselect">-&gt;addSelect</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#orderby">-&gt;orderBy</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#addorderby">-&gt;addOrderBy</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-select">Node: Select</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-selectadd">Node: SelectAdd</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-sourcejoin">Node: SourceJoin</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-sourcejoinconditionfactory">Node: SourceJoinConditionFactory</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="query-builder-reference.html#descendant">-&gt;descendant</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#equi">-&gt;equi</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#child">-&gt;child</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#same">-&gt;same</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-sourcejoinleft">Node: SourceJoinLeft</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-sourcejoinright">Node: SourceJoinRight</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-where">Node: Where</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-whereand">Node: WhereAnd</a>


</li>
            <li class="toc-item">
    <a href="query-builder-reference.html#node-whereor">Node: WhereOr</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="tools.html#tools">Tools</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="tools.html#doctrine-console">Doctrine Console</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="tools.html#command-overview">Command Overview</a>


</li>
            <li class="toc-item">
    <a href="tools.html#getting-documentation-of-a-command">Getting documentation of a command</a>


</li>
            <li class="toc-item">
    <a href="tools.html#phpcr-implementation-specific-commands">PHPCR implementation specific commands</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="tools.html#jackrabbit-specific-commands">Jackrabbit specific commands</a>


</li>
            <li class="toc-item">
    <a href="tools.html#doctrine-dbal-specific-commands">Doctrine DBAL specific commands</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="tools.html#register-system-node-types">Register system node types</a>


</li>
            <li class="toc-item">
    <a href="tools.html#adding-your-own-commands">Adding your own commands</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="transactions.html#transactions-1">Transactions</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="transactions.html#transactional">transactional()</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="versioning.html#versioning-support">Versioning support</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="versioning.html#philosophy">Philosophy</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="versioning.html#phpcr-odm">PHPCR-ODM</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="versioning.html#mappings">Mappings</a>


</li>
            <li class="toc-item">
    <a href="versioning.html#interacting-with-versions">Interacting with versions</a>


</li>
            <li class="toc-item">
    <a href="versioning.html#full-example">Full Example</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="working-with-objects.html#working-with-objects">Working with Objects</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="working-with-objects.html#documents-and-the-identity-map">Documents and the Identity Map</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#document-graph-traversal">Document Graph Traversal</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#persisting-documents">Persisting documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#removing-documents">Removing documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#detaching-documents">Detaching documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#merging-documents">Merging documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#synchronization-with-the-repository">Synchronization with the Repository</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-objects.html#effects-of-repository-and-unitofwork-being-out-of-sync">Effects of Repository and UnitOfWork being Out-Of-Sync</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#synchronizing-new-and-managed-documents">Synchronizing New and Managed Documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#synchronizing-removed-documents">Synchronizing Removed Documents</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#the-size-of-a-unit-of-work">The size of a Unit of Work</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#the-cost-of-flushing">The cost of flushing</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#direct-access-to-a-unit-of-work">Direct Access to a Unit of Work</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#document-state">Document State</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="working-with-objects.html#querying">Querying</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="working-with-objects.html#by-primary-key">By Primary Key</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-simple-conditions">By Simple Conditions</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-lazy-loading">By Lazy Loading</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-query-builder">By Query Builder</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#by-native-queries">By Native Queries</a>


</li>
            <li class="toc-item">
    <a href="working-with-objects.html#custom-repositories">Custom Repositories</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="xml-mapping.html#xml-mapping">XML Mapping</a>


</li>
    </ul>
</div>
    

                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "PHPCR ODM",
            "item": "https://www.doctrine-project.org/projects/phpcr-odm.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/2.1/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Getting Started",
            "item": "https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/2.1/reference/introduction.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-phpcr-odm/en/2.1/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Getting Started</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that is no longer maintained.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-phpcr-odm/en/2.1/reference/introduction.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        2.1.0
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                                                                                
                                                    <a class="project-version-switcher dropdown-item" href="/projects/doctrine-phpcr-odm/en/latest/reference/introduction.html">
                                                        2.0.1

                                                                                                                    (current)
                                                        
                                                                                                            </a>
                                                                                                                                                                                                                                
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                                                                                
                                                    <a class="dropdown-item active" href="/projects/doctrine-phpcr-odm/en/2.1/reference/introduction.html">2.1</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-phpcr-odm/en/1.8/reference/introduction.html">1.8</a>
                                                                                                                                                                                                
                                                    <a class="dropdown-item" href="/projects/doctrine-phpcr-odm/en/1.7/reference/introduction.html">1.7</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                </div>
                            
                            

            <div class="section" id="getting-started">
            <h1 class="section-header ">
    <a href="#getting-started">
        Getting Started
        <i class="fas fa-link"></i>
    </a>
</h1>
                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p><strong>Difference from the ORM</strong></p>

    <p>Doctrine ORM knows several models of developing. If you know the ORM, please note that
with PHPCR-ODM you can only develop &quot;Code First&quot;. We do not (yet) have any generator to
build model classes from a content repository.</p>

    <p>As PHPCR allows NoSQL like data storage, we speak of Documents rather than Entities
to stress the fact that there need not be a rigid database model.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>Doctrine PHPCR-ODM is an object-document mapper (ODM) for PHP 5.3.0+. It uses
the Data Mapper pattern to transparently map PHPCR nodes to standard PHP
objects allowing the programmer to easily build a domain model for their
application instead of dealing with raw data.</p>

            
    <p>Starting with the object-oriented model is called the &quot;Code First&quot; approach.</p>

            <div class="section" id="what-are-documents">
            <h2 class="section-header ">
    <a href="#what-are-documents">
        What are Documents?
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Documents are lightweight PHP Objects that don&#039;t need to extend any
abstract base class or interface. A document class must not be final
or contain final methods. Additionally it must not implement
<strong>clone</strong> nor <strong>wakeup</strong>.</p>

            
    <p>See the <a href="architecture.html">architecture chapter</a> for a full list of the restrictions
that your entities need to comply with.</p>

            
    <p>A document contains persistable properties. A persistable property
is an instance variable of the document that is saved into and retrieved from the content repository
by Doctrine&#039;s data mapping capabilities.</p>

    </div>
            <div class="section" id="an-example-model-document-management">
            <h2 class="section-header ">
    <a href="#an-example-model-document-management">
        An Example Model: Document Management
        <i class="fas fa-link"></i>
    </a>
</h2>
            

<ul>
    <li>Documents have a title and a content</li>
    <li>Documents are arranged in a tree</li>
    <li>Documents can reference other documents</li>
</ul>

            
    <p>We do not build a web interface but simple run scripts on the command line to keep this example simple.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>This is a simplistic document manage to illustrate the PHPCR-ODM features. If you want to build a
custom Web Content Management System, we recommend looking into the <a href="http://cmf.symfony.com">Symfony CMF</a>
which is a content management framework built on top of Doctrine PHPCR-ODM and Symfony.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="setup-project">
            <h2 class="section-header ">
    <a href="#setup-project">
        Setup Project
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Use composer to install PHPCR-ODM and a PHPCR implementation:</p>

                <pre class="code-block-table" id="01c47f8ccfcf678042a0457c6c8ef2a50bef5d58"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="01c47f8ccfcf678042a0457c6c8ef2a50bef5d58"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-bash">composer require doctrine/phpcr-odm jackalope/jackalope-doctrine-dbal</code><code class="empty"></code></pre>
            
    <p>See <a href="../cookbook/choosing-phpcr-implementation.html">Choosing a PHPCR Implementation</a> for alternatives to the Jackalope Doctrine-DBAL implementation.</p>

            <a id="intro-bootstrap"></a>
            
    <p>Now we bootstrap Doctrine PHPCR-ODM. Create a file called <code>bootstrap.php</code> in
your project root directory:</p>

                <div class="console">
        <pre><code class="console">// bootstrap.php

$vendorDir = __DIR__.&#039;/vendor&#039;;

$file = $vendorDir.&#039;/autoload.php&#039;;
if (file_exists($file)) {
    $autoload = require_once $file;
} else {
    throw new RuntimeException(&#039;Install dependencies with composer.&#039;);
}

$params = [
    &#039;driver&#039;    =&gt; &#039;pdo_mysql&#039;,
    &#039;host&#039;      =&gt; &#039;localhost&#039;,
    &#039;user&#039;      =&gt; &#039;root&#039;,
    &#039;password&#039;  =&gt; &#039;&#039;,
    &#039;dbname&#039;    =&gt; &#039;phpcr_odm_tutorial&#039;,
    &#039;charset&#039;   =&gt; &#039;utf8mb4&#039;,
];

$workspace = &#039;default&#039;;
$user = &#039;admin&#039;;
$pass = &#039;admin&#039;;

/* --- transport implementation specific code begin --- */
// for more options, see https://github.com/jackalope/jackalope-doctrine-dbal#bootstrapping
$dbConn = \Doctrine\DBAL\DriverManager::getConnection($params);
$parameters = [&#039;jackalope.doctrine_dbal_connection&#039; =&gt; $dbConn];
$repository = \Jackalope\RepositoryFactoryDoctrineDBAL::getRepository($parameters);
$credentials = new \PHPCR\SimpleCredentials(null, null);
/* --- transport implementation specific code  ends --- */

$session = $repository-&gt;login($credentials, $workspace);

/* prepare the doctrine configuration */
use Doctrine\ODM\PHPCR\Mapping\Driver\AttributeDriver;
use Doctrine\ODM\PHPCR\Configuration;
use Doctrine\ODM\PHPCR\DocumentManager;

$driver = new AttributeDriver([
    // this is a list of all folders containing document classes
    &#039;vendor/doctrine/phpcr-odm/lib/Doctrine/ODM/PHPCR/Document&#039;,
    &#039;src/Demo&#039;,
]);

$config = new Configuration();
$config-&gt;setMetadataDriverImpl($driver);

$documentManager = DocumentManager::create($session, $config);

return $autoload;
</code></pre>
    </div>

            
    <p>To enable the command line, copy the cli-config.&lt;implementation&gt;.php.dist
to cli-config.php in your vendor directory and adjust it to match your
bootstrap.php. Or better, remove the duplicate code and include cli-config.php
from your bootstrap.php file.</p>

            
    <p>If you want it in the root directory, configure the composer bin-dir to <code>bin</code>:</p>

                <pre class="code-block-table" id="f4b25ad08c4a8e3030b4322eee9238868b968286"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="f4b25ad08c4a8e3030b4322eee9238868b968286"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-javascript"><span class="hljs-string">"config"</span>: {</code><code class="line language-javascript">    <span class="hljs-string">"bin-dir"</span>: <span class="hljs-string">"bin"</span></code><code class="line language-javascript">}</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="building-the-model">
            <h2 class="section-header ">
    <a href="#building-the-model">
        Building the model
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>Models are plain PHP classes. Note that you have several ways to define the mapping.
For easy readability, we use the attribute mapping with PHPCR namespace in this tutorial:</p>

                <div class="console">
        <pre><code class="console">// src/Demo/Document.php
namespace Demo;

use Doctrine\ODM\PHPCR\Mapping\Attributes as PHPCR;
use Doctrine\ODM\PHPCR\ChildrenCollection;

#[PHPCR\Document]
class MyDocument
{
    #[PHPCR\Id]
    private string $id;

    #[PHPCR\ParentDocument]
    private object $parent;

    #[PHPCR\Nodename]
    private string $name;

    #[PHPCR\Children]
    private ChildrenCollection $children;

    #[PHPCR\Field(type: &#039;string&#039;)]
    private string $title;

    #[PHPCR\Field(type: &#039;string&#039;)]
    private string $content;

    public function getId(): string
    {
        return $this-&gt;id;
    }
    public function getChildren(): ChildrenCollection
    {
        return $this-&gt;children;
    }
    public function setParent(object $parent): void
    {
        $this-&gt;parent = $parent;
    }
    public function setName(string $name): void
    {
        $this-&gt;name = $name;
    }

    public function setTitle(string $title): void
    {
        $this-&gt;title = $title;
    }
    public function getTitle(): string
    {
        return $this-&gt;title;
    }
    public function setContent(string $content): void
    {
        $this-&gt;content = $content;
    }
    public function getContent(): string
    {
        return $this-&gt;content;
    }
}
</code></pre>
    </div>

            
    <p>If you are familiar with Doctrine ORM, this code should look pretty familiar to you. The
only important difference are the hierarchy related mappings <code>ParentDocument</code>, <code>Name</code> and <code>Children</code>.
In PHPCR, data is stored in trees. Every document has a parent and its own name. The id is
built from this structure, resulting in path strings. The recommended way to generate the
id is by assigning a name and a parent to the document. See the section on identifier
strategies in the reference chapter <a href="basic-mapping.html">Objects and Fields</a>
for other possibilities.</p>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>PHPCR-ODM provides default classes for the standard PHPCR node types <code>nt:file</code>,
<code>nt:folder</code> and <code>nt:resource</code>, as well as a GenericDocument for when a PHPCR node
can not be mapped to a specific document. See the classes in lib/Doctrine/ODM/PHPCR/Document/</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="initialize-the-repository">
            <h2 class="section-header ">
    <a href="#initialize-the-repository">
        Initialize the repository
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>With jackalope-doctrine-dbal, you need to run the following command to
init the database:</p>

                <pre class="code-block-table" id="7ac73989d7bd096c94ef09801a43d7067f7759fb"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="7ac73989d7bd096c94ef09801a43d7067f7759fb"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-bash">./vendor/bin/phpcrodm jackalope:init:dbal</code><code class="empty"></code></pre>
            
    <p>Then, regardless of the PHPCR implementation you use, you need to run
another command to let Doctrine set up the repository for using it:</p>

                <pre class="code-block-table" id="ccd693c40923139e9cb8478dbc988e4803363c12"><button
                type="button"
                class="copy-to-clipboard"
                data-copy-element-id="ccd693c40923139e9cb8478dbc988e4803363c12"
                title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><code class="empty"></code><code class="line language-bash">./vendor/bin/phpcrodm doctrine:phpcr:register-system-node-types</code><code class="empty"></code></pre>
    </div>
            <div class="section" id="storing-documents">
            <h2 class="section-header ">
    <a href="#storing-documents">
        Storing documents
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>We write a simple PHP script to generate some sample data:</p>

                <div class="console">
        <pre><code class="console">// src/generate.php

require_once &#039;../bootstrap.php&#039;;

// get the root node to add our data to it
$rootDocument = $documentManager-&gt;find(null, &#039;/&#039;);

// create a new document
$doc = new \Demo\Document();
$doc-&gt;setParent($rootDocument);
$doc-&gt;setName(&#039;doc&#039;);
$doc-&gt;setTitle(&#039;My first document&#039;);
$doc-&gt;setContent(&#039;The document content&#039;);

// create a second document
$childDocument = new \Demo\Document();
$childDocument-&gt;setParent($doc);
$childDocument-&gt;setName(&#039;child&#039;);
$childDocument-&gt;setTitle(&#039;My child document&#039;);
$childDocument-&gt;setContent(&#039;The child document content&#039;);


// make the documents known to the document manager
$documentManager-&gt;persist($doc);
$documentManager-&gt;persist($childDocument);

// store all changes, insertions, etc. with the storage backend
$documentManager-&gt;flush();
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                                
    <p>In real projects, you should look into the <a href="https://github.com/doctrine/data-fixtures">doctrine fixtures</a>
to script generating content.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="reading-documents">
            <h2 class="section-header ">
    <a href="#reading-documents">
        Reading documents
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This script will simply echo the data to the console:</p>

                <div class="console">
        <pre><code class="console">// src/read.php

require_once &#039;../bootstrap.php&#039;;

$doc = $documentManager-&gt;find(null, &#039;/doc&#039;);

echo &#039;Found &#039;.$doc-&gt;getId() .&quot;\n&quot;;
echo &#039;Title: &#039;.$doc-&gt;getTitle().&quot;\n&quot;;
echo &#039;Content: &#039;.$doc-&gt;getContent().&quot;\n&quot;;
</code></pre>
    </div>

            
    <p>The DocumentManager will automatically determine the document class when
you pass <code>null</code> as first argument to <code>find()</code>.</p>

    </div>
            <div class="section" id="tree-traversal">
            <h2 class="section-header ">
    <a href="#tree-traversal">
        Tree traversal
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>PHPCR is a tree based store. Every document must have a parent, and
can have children. We already used this when creating the document.
The <code>ParentDocument</code> maps the parent of a document and is used
to determine the position in the tree, together with <code>Nodename</code>.</p>

            
    <p>As the children of our sample document are mapped with <code>Children</code>,
we can traverse them:</p>

                <div class="console">
        <pre><code class="console">use Demo\MyDocument;

$doc = $documentManager-&gt;find(null, &#039;/doc&#039;);

foreach($doc-&gt;getChildren() as $child) {
    if ($child instanceof MyDocument) {
        echo &#039;Has child &#039;.$child-&gt;getId() . &quot;\n&quot;;
    } else {
        echo &#039;Unexpected child &#039;.get_class($child).&quot;\n&quot;;
    }
}
</code></pre>
    </div>

                        <div class="alert warning-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-exclamation-circle text-warning mr-2"></i></td>
            <td>
                                                
    <p>Children can be of any class. Be careful when looping over children
to be sure they are of the expected class.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
            
    <p>The children collection supports iterating over the children and also direct
access by index or child name. To get a segment of the collection, you have the
normal <code>slice()</code> that works on indexes. Additionally, the
<code>ChildrenCollection</code> offers the <code>sliceByChildName()</code> method, where you can
specify the child name from which to start the slice.</p>

            
    <p>Even if children are not mapped, you can use the document manager to get all
flushed children of a document:</p>

                <div class="console">
        <pre><code class="console">$children = $documentManager-&gt;getChildren($parent);
</code></pre>
    </div>

                        <div class="alert note-admonition bg-light-yellow text-dark border ">
    <table width="100%">
        <tbody>
        <tr>
            <td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td>
            <td>
                                <p><em>Difference from ORM</em></p>                
    <p>While with the ORM, the natural thing to get data is to query, with
PHPCR-ODM the natural way is to use the hierarchy, that is parent-child
relations.</p>

    <p>If you need to query, see <a href="working-with-objects.html#workingobjects-query">Querying in the Working with Objects section</a>.</p>

            </td>
        </tr>
        </tbody>
    </table>
</div>
    </div>
            <div class="section" id="add-references">
            <h2 class="section-header ">
    <a href="#add-references">
        Add references
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>PHPCR-ODM supports arbitrary links between documents. The referring
document does not need to know what class it links to. Use
<code>ReferenceOne</code> resp. <code>ReferenceMany</code> to map the link
to a document or a collection of links to documents.</p>

            
    <p>You can also map the inverse relation. <code>Referrers</code> needs the
referring class but can be used to add referencing documents.
<code>MixedReferrers</code> maps all documents referencing this document,
but is readonly.</p>

            
    <p>Lets look at an example of document <code>A</code> referencing <code>B</code>:</p>

                <div class="console">
        <pre><code class="console">// src/Demo/A.php

namespace Demo;

use Doctrine\ODM\PHPCR\Mapping\Attributes as PHPCR;
use Doctrine\ODM\PHPCR\ReferrersCollection;

#[PHPCR\Document]
class A
{
    #[PHPCR\ReferenceOne]
    private object $ref;

    ...
}

#[PHPCR\Document]
class B
{
    #[PHPCR\Referrers(referringDocument: A::class, referencedBy: &#039;ref&#039;)]
    private ReferrersCollection $referrers;
}
</code></pre>
    </div>

            
    <p>We can now create a reference with the following code:</p>

                <div class="console">
        <pre><code class="console">$parent = $dm-&gt;find(null, &#039;/&#039;);
$a = new A();
$a-&gt;setParent($parent);
$a-&gt;setNodename(&#039;a&#039;);
$dm-&gt;persist($a);
$b = new B();
$b-&gt;setParent($parent);
$b-&gt;setNodename(&#039;b&#039;);

$a-&gt;setRef($b);

$dm-&gt;flush();
$dm-&gt;clear();

$b = $dm-&gt;find(null, &#039;/b&#039;);

// output Demo\A
var_dump(get_class($b-&gt;getReferrers()));
</code></pre>
    </div>

            
    <p>If referrers are not mapped on a document, you can use the document
manager to get all flushed referrers of a document:</p>

                <div class="console">
        <pre><code class="console">$referrers = $documentManager-&gt;getReferrers($b);

</code></pre>
    </div>

    </div>
            <div class="section" id="removing-documents">
            <h2 class="section-header ">
    <a href="#removing-documents">
        Removing documents
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>To delete a document, call the <code>remove</code> method on the <code>DocumentManager</code>:</p>

                <div class="console">
        <pre><code class="console">// src/manipulate.php

require_once &#039;../bootstrap.php&#039;;

// remove a document
$doc = $documentManager-&gt;find(null, &#039;/doc&#039;);
$documentManager-&gt;remove($doc);

// persist all operations
$documentManager-&gt;flush();

</code></pre>
    </div>

    </div>
            <div class="section" id="other-helpful-methods-on-the-documentmanager">
            <h2 class="section-header ">
    <a href="#other-helpful-methods-on-the-documentmanager">
        Other helpful methods on the DocumentManager
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>You can move a document to a different path with the <code>move</code> method.
Alternatively, you can assign a different Parent and/or Nodename to move
by assignment. The latter is for example handy with Symfony forms:</p>

                <div class="console">
        <pre><code class="console">// src/manipulate.php

require_once &#039;../bootstrap.php&#039;;

// we move a node
$child = $documentManager-&gt;find(null, &#039;/doc/child&#039;);
$documentManager-&gt;move($child, &#039;/newpath&#039;);

// persist all operations
$documentManager-&gt;flush();

</code></pre>
    </div>

    </div>
            <div class="section" id="conclusion">
            <h2 class="section-header ">
    <a href="#conclusion">
        Conclusion
        <i class="fas fa-link"></i>
    </a>
</h2>
            
    <p>This tutorial is over here, I hope you had fun.</p>

            
    <p>Additional details on all the topics discussed here can be found in
the respective manual chapters.</p>

    </div>
    </div>
        

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?1546fc"
                            integrity="sha384-ix9eb2EZyp9uayYpxmCQoylbz8msHl5wOg/aqZnD/3cxszNUGePN656MRg5GEgbm"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'phpcr-odm';
            var versionSlug = '2.1';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search PHPCR ODM 2.1'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
