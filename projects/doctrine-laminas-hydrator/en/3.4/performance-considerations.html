<!DOCTYPE html>
<html>
    <head>
        <title>        Performance Considerations - Doctrine Doctrine Laminas Hydrators
    </title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Doctrine Doctrine Laminas Hydrators Documentation: Performance Considerations ">

        <meta name="keywords" content="                    doctrine,hydrator,laminas,documentation,performance,considerations
    ">

                    <meta name="robots" content="index, follow">
        
        
                    <link rel="canonical" href="https://www.doctrine-project.org/projects/doctrine-laminas-hydrator/en/3.3/performance-considerations.html" />
    
        <link
            rel="stylesheet"
            type="text/css"
            href="https://www.doctrine-project.org/frontend/css/index.css?8f3a63"
                        integrity="sha384-sFoEj4FQQOycYV8NnmXPYaj8iI/e8OPkSyKMCYKof/JHBSdiizJO+xQIhV5bb2RA"
                        crossorigin="anonymous"
        />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineproject" />
        <meta name="twitter:creator" content="@doctrineproject" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/projects/doctrine-laminas-hydrator/en/3.4/performance-considerations.html" />
        <meta property="og:title" content="        Performance Considerations - Doctrine Doctrine Laminas Hydrators
    " />
        <meta property="og:description" content="Doctrine Doctrine Laminas Hydrators Documentation: Performance Considerations " />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/logos/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineproject"
            ]
        }
        </script>

                    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Course",
            "name": "Doctrine Doctrine Laminas Hydrators",
            "description": "Performance Considerations",
            "provider": {
                "@type": "Organization",
                "name": "Doctrine",
                "sameAs": "https://www.doctrine-project.org"
            }
        }
        </script>
    
        
            </head>
    <body>
                    
            <nav class="doctrine-navbar stop-war-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                 <a href="/stop-war.html">ðŸ‡ºðŸ‡¦ UKRAINE NEEDS YOUR HELP NOW!</a>
            </nav>

            <nav class="doctrine-navbar navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="/index.html"><img src="https://www.doctrine-project.org/logos/doctrine-logo.svg?1a5b7c" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown active">
                            <a class="nav-link dropdown-toggle" href="/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item" href="/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item" href="/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item" href="/projects/coding-standard.html">Coding Standard</a>
                                                                    <a class="dropdown-item" href="/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item" href="/projects/common.html">Common</a>
                                                                    <a class="dropdown-item" href="/projects/data-fixtures.html">Data fixtures</a>
                                                                    <a class="dropdown-item" href="/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item" href="/projects/event-manager.html">Event Manager</a>
                                                                    <a class="dropdown-item" href="/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item" href="/projects/instantiator.html">Instantiator</a>
                                                                    <a class="dropdown-item" href="/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item" href="/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item" href="/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item" href="/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item" href="/projects/persistence.html">Persistence</a>
                                                                    <a class="dropdown-item" href="/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                    <a class="dropdown-item" href="/projects/reflection.html">Reflection</a>
                                                                    <a class="dropdown-item" href="/projects/rst-parser.html">RST Parser</a>
                                                                    <a class="dropdown-item" href="/projects/skeleton-mapper.html">Skeleton Mapper</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="/contribute/index.html" id="navbarDevelopmentDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="/community/index.html">Community</a>
                                <a class="dropdown-item" href="/contribute/index.html">Contributor Workflow</a>
                                <a class="dropdown-item" href="/contribute/maintainer/index.html">Maintainer Workflow</a>
                                <a class="dropdown-item" href="/contribute/website/index.html">Contribute to Website</a>
                                <a class="dropdown-item" href="/team/maintainers.html">Maintainers</a>
                                <a class="dropdown-item" href="/team/contributors.html">Contributors</a>
                                <a class="dropdown-item" href="/policies.html">Policies</a>
                                <a class="dropdown-item" href="https://github.com/doctrine" target="_blank" rel="noopener noreferrer">GitHub</a>
                                <a class="dropdown-item" href="/styleguide.html">Styleguide</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/events.html">Events</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/consulting.html">Consulting</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/partners.html">Partners</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/blog/index.html">Blog</a>
                        </li>
                    </ul>

                    <div class="layout-edit-button d-inline-block mr-2">
                                                    <a href="https://github.com/doctrine/doctrine-laminas-hydrator/edit/3.4.x/docs/en/performance-considerations.rst" class="btn btn-light" target="_blank" rel="noopener noreferrer">Edit</a>
                                            </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>
            </nav>

            <div class="search-results rounded">
                <div id="hits">
                    <!-- Hits widget will appear here -->
                </div>

                <a href="https://www.algolia.com" target="_blank" rel="noopener noreferrer"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
            </div>
        
            <div class="container-wrapper container">
        <div class="row row-offcanvas row-offcanvas-right">
                            <nav class="col-md-3 d-sm-block bg-light sidebar sidebar-offcanvas" id="sidebar">
                    <div class="sidebar-sticky">
                        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7D553W&placement=wwwdoctrine-projectorg" id="_carbonads_js"></script>

                        <div class="toc"><ul><li id="index-html-introduction" class="toc-item"><a href="index.html#introduction">Introduction</a><ul><li id="index-html-installation" class="toc-item"><a href="index.html#installation">Installation</a></li><li id="index-html-next-steps" class="toc-item"><a href="index.html#next-steps">Next Steps</a></li></ul></li><li id="basic-usage-html-basic-usage" class="toc-item"><a href="basic-usage.html#basic-usage">Basic Usage</a><ul><li id="basic-usage-html-create-a-hydrator" class="toc-item"><a href="basic-usage.html#create-a-hydrator">Create a Hydrator</a></li><li id="basic-usage-html-example-1-simple-entity-with-no-associations" class="toc-item"><a href="basic-usage.html#example-1-simple-entity-with-no-associations">Example 1: Simple Entity with no Associations</a></li><li id="basic-usage-html-example-2-onetoone-manytoone-associations" class="toc-item"><a href="basic-usage.html#example-2-onetoone-manytoone-associations">Example 2: OneToOne/ManyToOne Associations</a><ul><li id="basic-usage-html-existing-entity-in-the-association" class="toc-item"><a href="basic-usage.html#existing-entity-in-the-association">Existing Entity in the Association</a></li><li id="basic-usage-html-non-existing-entity-in-the-association" class="toc-item"><a href="basic-usage.html#non-existing-entity-in-the-association">Non-existing Entity in the Association</a></li></ul></li><li id="basic-usage-html-example-3-onetomany-association" class="toc-item"><a href="basic-usage.html#example-3-onetomany-association">Example 3: OneToMany Association</a><ul><li id="basic-usage-html-example-4-embedded-entities" class="toc-item"><a href="basic-usage.html#example-4-embedded-entities">Example 4: Embedded Entities</a></li><li id="basic-usage-html-existing-entity-in-the-association" class="toc-item"><a href="basic-usage.html#existing-entity-in-the-association">Existing Entity in the Association</a></li><li id="basic-usage-html-non-existing-entity-in-the-association" class="toc-item"><a href="basic-usage.html#non-existing-entity-in-the-association">Non-existing Entity in the Association</a></li><li id="basic-usage-html-handling-of-null-values" class="toc-item"><a href="basic-usage.html#handling-of-null-values">Handling of Null Values</a></li></ul></li></ul></li><li id="collections-strategy-html-collections-strategy" class="toc-item"><a href="collections-strategy.html#collections-strategy">Collections Strategy</a><ul><li id="collections-strategy-html-changing-the-strategy" class="toc-item"><a href="collections-strategy.html#changing-the-strategy">Changing the Strategy</a></li></ul></li><li id="by-value-by-reference-html-by-value-and-by-reference" class="toc-item"><a href="by-value-by-reference.html#by-value-and-by-reference">By Value and by Reference</a></li><li id="laminas-form-html-a-complete-example-using-laminas-form" class="toc-item"><a href="laminas-form.html#a-complete-example-using-laminas-form">A Complete Example using Laminas\\Form</a><ul><li id="laminas-form-html-the-entities" class="toc-item"><a href="laminas-form.html#the-entities">The Entities</a></li><li id="laminas-form-html-fieldsets" class="toc-item"><a href="laminas-form.html#fieldsets">Fieldsets</a></li><li id="laminas-form-html-form" class="toc-item"><a href="laminas-form.html#form">Form</a></li><li id="laminas-form-html-controller" class="toc-item"><a href="laminas-form.html#controller">Controller</a><ul><li id="laminas-form-html-creation" class="toc-item"><a href="laminas-form.html#creation">Creation</a></li></ul></li></ul></li><li id="enum-strategy-html-using-enums-with-php-8-1" class="toc-item"><a href="enum-strategy.html#using-enums-with-php-8-1">Using Enums with PHP 8.1</a><ul><li id="enum-strategy-html-the-enum-and-entity" class="toc-item"><a href="enum-strategy.html#the-enum-and-entity">The Enum and Entity</a></li><li id="enum-strategy-html-custom-hydration-strategy" class="toc-item"><a href="enum-strategy.html#custom-hydration-strategy">Custom Hydration Strategy</a></li><li id="enum-strategy-html-usage-example" class="toc-item"><a href="enum-strategy.html#usage-example">Usage Example</a></li></ul></li><li id="performance-considerations-html-performance-considerations" class="toc-item"><a href="performance-considerations.html#performance-considerations">Performance Considerations</a><ul><li id="performance-considerations-html-unwanted-side-effects" class="toc-item"><a href="performance-considerations.html#unwanted-side-effects">Unwanted Side-Effects</a></li></ul></li></ul></div>
                    </div>
                </nav>
            
            <main role="main" class="col-md-9 ml-sm-auto col-lg-9 pt-3 px-4">
                <div class="row">
                                        
                                                                <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
                {
            "@type": "ListItem",
            "position": 1,
            "name": "Projects",
            "item": "https://www.doctrine-project.org/projects.html"
        },                {
            "@type": "ListItem",
            "position": 2,
            "name": "Doctrine Laminas Hydrators",
            "item": "https://www.doctrine-project.org/projects/doctrine-laminas-hydrator.html"
        },                {
            "@type": "ListItem",
            "position": 3,
            "name": "Documentation",
            "item": "https://www.doctrine-project.org/projects/doctrine-laminas-hydrator/en/3.4/index.html"
        },                {
            "@type": "ListItem",
            "position": 4,
            "name": "Performance Considerations",
            "item": "https://www.doctrine-project.org/projects/doctrine-laminas-hydrator/en/3.4/performance-considerations.html"
        }            ]
}
</script>

<nav class="breadcrumbs d-none d-sm-block d-md-block d-lg-block d-xl-block" aria-label="breadcrumb">
    <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects.html">Projects</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-laminas-hydrator.html">Doctrine Laminas Hydrators</a></li>
                                                <li class="breadcrumb-item"><a href="https://www.doctrine-project.org/projects/doctrine-laminas-hydrator/en/3.4/index.html">Documentation</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Performance Considerations</li>
                        </ol>
</nav>
                                    </div>

                    
    <div class="alert caution bg-light-yellow text-dark border">
    <table width="100%">
        <tr>
            <td width="10" class="align-top">
                <i class="fas fa-exclamation-circle text-warning mr-2"></i>
            </td>
            <td><p>You are browsing a version that has not yet been released.</p></td>
        </tr>
    </table>
</div>

                <div class="row">
                    <div class="col-12">
                                                    <button type="button" class="btn btn-primary btn-sm float-right toc-toggle" data-toggle="offcanvas" id="toc-toggle">Table of Contents</button>

                                                            
                                <div class="dropdown show d-inline-block">
                                    <a class="project-version-switcher btn btn-secondary btn-sm dropdown-toggle" href="/projects/doctrine-laminas-hydrator/en/3.4/performance-considerations.html" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        3.4
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                                                                    <h6 class="dropdown-header">Maintained</h6>

                                                                                            
                                                <a class="project-version-switcher dropdown-item active" href="/projects/doctrine-laminas-hydrator/en/3.4/performance-considerations.html">
                                                    3.4

                                                    
                                                                                                            (upcoming)
                                                                                                    </a>
                                                                                            
                                                <a class="project-version-switcher dropdown-item" href="/projects/doctrine-laminas-hydrator/en/3.3/performance-considerations.html">
                                                    3.3.0

                                                                                                            (current)
                                                    
                                                                                                    </a>
                                                                                    
                                                                                    <h6 class="dropdown-header">Unmaintained</h6>

                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-laminas-hydrator/en/3.2/performance-considerations.html">3.2</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-laminas-hydrator/en/3.1/performance-considerations.html">3.1</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-laminas-hydrator/en/3.0/performance-considerations.html">3.0</a>
                                                                                            
                                                <a class="dropdown-item" href="/projects/doctrine-laminas-hydrator/en/2.2/performance-considerations.html">2.2</a>
                                                                                                                        </div>
                                </div>
                            
                            
<div class="section"><a class="section-anchor" id="performance-considerations" name="performance-considerations"></a><h1 class="section-header"><a href="#performance-considerations">Performance Considerations<i class="fas fa-link"></i></a></h1>
<p>Using this hydrator abstracts most of the tedious tasks, but be
aware that it can lead to performance issues in some situations.</p>
<div class="section"><a class="section-anchor" id="unwanted-side-effects" name="unwanted-side-effects"></a><h2 class="section-header"><a href="#unwanted-side-effects">Unwanted Side-Effects<i class="fas fa-link"></i></a></h2>
<p>Be careful when using Doctrine hydrator with
complex entities that contain a lot of associations because a lot of
unnecessary calls to the database may be made if you are not aware
of what is happening under the hood. To explain this problem,
take the following entity:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="91d6cfefc98592d2002a9adabe84fc65416fa620"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="91d6cfefc98592d2002a9adabe84fc65416fa620"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-1" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-1">1</a></td><td class="code-line" rowspan="18"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Entity</span>;

<span class="hljs-comment">#[ORM\Entity]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
    <span class="hljs-comment">#[ORM\Id]</span>
    <span class="hljs-comment">#[ORM\Column(type: 'integer')]</span>
    <span class="hljs-comment">#[ORM\GeneratedValue(strategy: 'AUTO')]</span>
    <span class="hljs-keyword">private</span> ?int $id = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">#[ORM\Column(type: 'string', length=48)]</span>
    <span class="hljs-keyword">private</span> ?string $name = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">#[ORM\OneToOne(targetEntity: 'City')]</span>
    <span class="hljs-keyword">private</span> ?City $city = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">// â€¦ getter and setters are defined â€¦</span>
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-2" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-3" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-4" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-5" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-6" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-7" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-8" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-9" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-10" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-11" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-12" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-13" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-14" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-15" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-16" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-17" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-18" class="line-number-anchor" /><a href="#line-number-91d6cfefc98592d2002a9adabe84fc65416fa620-18">18</a></td></tr></table></div></code></pre>
<p>This simple entity contains an id, a string property, and a OneToOne
relationship.  When using Laminas forms the correct way, There may be
a fieldset for every entity; so a 1:1 mapping
between entities and fieldsets.  Here are fieldsets for User and
and City entities:</p>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>More information on Laminas fieldsets may be found in
<a href="https://docs.laminas.dev/laminas-form/collections/">the Laminas documentation</a>.</p>
</td></tr></table></div>
<p>First, the User fieldset:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="a3202081065fd40054ae30be2dfcf1539f39a63e"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="a3202081065fd40054ae30be2dfcf1539f39a63e"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-1" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-1">1</a></td><td class="code-line" rowspan="44"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Form</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">User</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Laminas</span>\<span class="hljs-title">Hydrator</span>\<span class="hljs-title">DoctrineObject</span> <span class="hljs-title">as</span> <span class="hljs-title">DoctrineHydrator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Persistence</span>\<span class="hljs-title">ObjectManager</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Element</span>\<span class="hljs-title">Text</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Fieldset</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">InputFilter</span>\<span class="hljs-title">InputFilterProviderInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserFieldset</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Fieldset</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InputFilterProviderInterface</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ObjectManager $objectManager)</span>
    </span>{
        <span class="hljs-keyword">parent</span>::__construct(<span class="hljs-string">'user'</span>);

        <span class="hljs-keyword">$this</span>-&gt;setHydrator(<span class="hljs-keyword">new</span> DoctrineHydrator($objectManager))
             -&gt;setObject(<span class="hljs-keyword">new</span> User());

        <span class="hljs-keyword">$this</span>-&gt;add([
            <span class="hljs-string">'type'</span>    =&gt; Text::class,
            <span class="hljs-string">'name'</span>    =&gt; <span class="hljs-string">'name'</span>,
            <span class="hljs-string">'options'</span> =&gt; [
                <span class="hljs-string">'label'</span> =&gt; <span class="hljs-string">'Your name'</span>,
            ],
            <span class="hljs-string">'attributes'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-string">'required'</span>,
            ],
        ]);

        $cityFieldset = <span class="hljs-keyword">new</span> CityFieldset($objectManager);
        $cityFieldset-&gt;setLabel(<span class="hljs-string">'Your city'</span>);
        $cityFieldset-&gt;setName(<span class="hljs-string">'city'</span>);
        <span class="hljs-keyword">$this</span>-&gt;add($cityFieldset);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInputFilterSpecification</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'name'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-keyword">true</span>,
            ],
        ];
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-2" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-3" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-4" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-5" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-6" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-7" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-8" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-9" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-10" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-11" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-12" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-13" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-14" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-15" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-16" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-17" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-18" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-19" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-20" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-21" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-22" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-23" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-24" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-25" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-26" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-27" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-28" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-29" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-30" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-31" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-32" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-33" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-34" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-35" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-36" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-37" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-38" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-39" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-40" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-41" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-42" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-43" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-44" class="line-number-anchor" /><a href="#line-number-a3202081065fd40054ae30be2dfcf1539f39a63e-44">44</a></td></tr></table></div></code></pre>
<p>And, now, the City fieldset:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="0c84d87611ddbd769877d3f3fb365e6be662fd36"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="0c84d87611ddbd769877d3f3fb365e6be662fd36"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-1" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-1">1</a></td><td class="code-line" rowspan="53"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Form</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">City</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Laminas</span>\<span class="hljs-title">Hydrator</span>\<span class="hljs-title">DoctrineObject</span> <span class="hljs-title">as</span> <span class="hljs-title">DoctrineHydrator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Persistence</span>\<span class="hljs-title">ObjectManager</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Element</span>\<span class="hljs-title">Text</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Fieldset</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">InputFilter</span>\<span class="hljs-title">InputFilterProviderInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CityFieldset</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Fieldset</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InputFilterProviderInterface</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ObjectManager $objectManager)</span>
    </span>{
        <span class="hljs-keyword">parent</span>::__construct(<span class="hljs-string">'city'</span>);

        <span class="hljs-keyword">$this</span>-&gt;setHydrator(<span class="hljs-keyword">new</span> DoctrineHydrator($objectManager))
             -&gt;setObject(<span class="hljs-keyword">new</span> City());

        <span class="hljs-keyword">$this</span>-&gt;add([
            <span class="hljs-string">'type'</span>    =&gt; Text::class,
            <span class="hljs-string">'name'</span>    =&gt; <span class="hljs-string">'name'</span>,
            <span class="hljs-string">'options'</span> =&gt; [
                <span class="hljs-string">'label'</span> =&gt; <span class="hljs-string">'Name of your city'</span>,
            ],
            <span class="hljs-string">'attributes'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-string">'required'</span>,
            ],
        ]);

        <span class="hljs-keyword">$this</span>-&gt;add([
            <span class="hljs-string">'type'</span>    =&gt; Text::clas,
            <span class="hljs-string">'name'</span>    =&gt; <span class="hljs-string">'postCode'</span>,
            <span class="hljs-string">'options'</span> =&gt; [
                <span class="hljs-string">'label'</span> =&gt; <span class="hljs-string">'Postcode of your city'</span>,
            ],
            <span class="hljs-string">'attributes'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-string">'required'</span>,
            ],
        ]);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getInputFilterSpecification</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'name'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-keyword">true</span>,
            ],
            <span class="hljs-string">'postCode'</span> =&gt; [
                <span class="hljs-string">'required'</span> =&gt; <span class="hljs-keyword">true</span>,
            ],
        ];
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-2" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-3" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-4" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-5" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-6" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-7" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-8" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-9" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-10" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-11" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-12" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-13" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-14" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-15" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-16" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-17" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-18" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-19" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-20" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-21" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-22" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-23" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-24" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-25" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-26" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-27" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-28" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-29" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-30" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-31" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-31">31</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-32" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-32">32</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-33" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-33">33</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-34" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-34">34</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-35" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-35">35</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-36" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-36">36</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-37" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-37">37</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-38" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-38">38</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-39" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-39">39</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-40" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-40">40</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-41" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-41">41</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-42" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-42">42</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-43" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-43">43</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-44" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-44">44</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-45" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-45">45</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-46" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-46">46</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-47" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-47">47</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-48" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-48">48</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-49" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-49">49</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-50" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-50">50</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-51" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-51">51</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-52" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-52">52</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-53" class="line-number-anchor" /><a href="#line-number-0c84d87611ddbd769877d3f3fb365e6be662fd36-53">53</a></td></tr></table></div></code></pre>
<p>For a form where an authenticated user may only change their name,
and it does not allow the user to change the city,
and the fields of the city are not rendered in the form,
the form would look like this:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="4404a89692f453982f0c7bf0e473403f43eca951"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="4404a89692f453982f0c7bf0e473403f43eca951"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-1" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-1">1</a></td><td class="code-line" rowspan="31"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Form</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Laminas</span>\<span class="hljs-title">Hydrator</span>\<span class="hljs-title">DoctrineObject</span> <span class="hljs-title">as</span> <span class="hljs-title">DoctrineHydrator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Persistence</span>\<span class="hljs-title">ObjectManager</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Form</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EditNameForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Form</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ObjectManager $objectManager)</span>
    </span>{
        <span class="hljs-keyword">parent</span>::__construct(<span class="hljs-string">'edit-name-form'</span>);

        <span class="hljs-keyword">$this</span>-&gt;setHydrator(<span class="hljs-keyword">new</span> DoctrineHydrator($objectManager));

        <span class="hljs-comment">// Add the user fieldset, and set it as the base fieldset</span>
        $userFieldset = <span class="hljs-keyword">new</span> UserFieldset($objectManager);
        $userFieldset-&gt;setName(<span class="hljs-string">'user'</span>);
        $userFieldset-&gt;setUseAsBaseFieldset(<span class="hljs-keyword">true</span>);
        <span class="hljs-keyword">$this</span>-&gt;add($userFieldset);

        <span class="hljs-comment">// â€¦ add CSRF and submit elements â€¦</span>

        <span class="hljs-comment">// Set the validation group so that we don't care about city</span>
        <span class="hljs-keyword">$this</span>-&gt;setValidationGroup([
            <span class="hljs-string">'csrf'</span>, <span class="hljs-comment">// assume we added a CSRF element</span>
            <span class="hljs-string">'user'</span> =&gt; [
                <span class="hljs-string">'name'</span>,
            ],
        ]);
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-2" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-3" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-4" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-5" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-6" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-7" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-8" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-9" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-10" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-11" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-12" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-13" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-14" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-15" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-16" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-17" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-18" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-19" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-20" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-21" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-22" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-23" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-24" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-25" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-26" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-27" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-28" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-29" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-30" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-30">30</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-4404a89692f453982f0c7bf0e473403f43eca951-31" class="line-number-anchor" /><a href="#line-number-4404a89692f453982f0c7bf0e473403f43eca951-31">31</a></td></tr></table></div></code></pre>
<div class="alert note-admonition bg-light-yellow text-dark border"><table width="100%"><tr><td width="10" class="align-top"><i class="fas fa-sticky-note text-primary mr-2"></i></td><td><p>For more information on Laminas Form and collections, please
read the <a href="https://docs.laminas.dev/laminas-form/collections/">Laminas documentation</a>.</p>
</td></tr></table></div>
<p>Next, we create a simple form called <code>EditSimpleForm</code>. Because we set
the validation group, all the inputs related to city (postCode and name
of the city) wonâ€™t be validated, which is exactly what we want. The
action will look something like this:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="5b332799caad0efc10d6672af001d342a071e01c"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="5b332799caad0efc10d6672af001d342a071e01c"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-1" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-1">1</a></td><td class="code-line" rowspan="21"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editNameAction</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// Create the form and inject the Entity Manager</span>
    $form = <span class="hljs-keyword">new</span> EditNameForm(<span class="hljs-keyword">$this</span>-&gt;entityManager);

    <span class="hljs-comment">// Get the logged user (for more informations about userIdentity(), please read the Authentication doc)</span>
    $loggedUser = <span class="hljs-keyword">$this</span>-&gt;userIdentity();

    <span class="hljs-comment">// We bind the logged user to the form, so that the name is pre-filled with previous data</span>
    $form-&gt;bind($loggedUser);

    $request = <span class="hljs-keyword">$this</span>-&gt;request;
    <span class="hljs-keyword">if</span> ($request-&gt;isPost()) {
        <span class="hljs-comment">// Set data from post</span>
        $form-&gt;setData($request-&gt;getPost());

        <span class="hljs-keyword">if</span> ($form-&gt;isValid()) {
            <span class="hljs-comment">// You can now safely save $loggedUser</span>
        }
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-2" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-3" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-4" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-5" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-6" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-7" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-8" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-9" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-10" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-11" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-12" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-13" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-14" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-15" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-16" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-17" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-18" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-19" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-20" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-5b332799caad0efc10d6672af001d342a071e01c-21" class="line-number-anchor" /><a href="#line-number-5b332799caad0efc10d6672af001d342a071e01c-21">21</a></td></tr></table></div></code></pre>
<p>This looks good, yes? But, a check for the queries that are
made (for instance using the
<a href="https://github.com/laminas/laminas-developer-tools">Laminas\\DeveloperTools module</a>),
shows that a request is made to fetch data for the City
relationship of the user, and we have an unneeded
database call because this information is not rendered by the form.</p>
<p><em>Why?</em> We set the validation group, <em>but</em> the problem
happens during the extracting phase. When an
object is bound to the form, the form iterates through all its
fields and tries to extract the data from the object that is bound.
From this example:</p>
<ol><li>It first arrives at the UserFieldset. The inputs are &quot;name&quot; (which is
   a string field), and &quot;city&quot; which is another fieldset (in our User
   entity, this is a OneToOne relationship to another entity). The
   hydrator will extract both the name and the city.  The city will be a
   Doctrine 2 Proxy object.</li>
<li>Because the UserFieldset contains a reference to another Fieldset (in
   this case, a CityFieldset), it will, in turn, try to extract the
   values of the City to populate the values of the CityFieldset. And
   here is the problem: City is a Proxy, and hence because the hydrator
   tries to extract its values (the name and postcode field), Doctrine
   will automatically fetch the object from the database in order to
   please the hydrator.</li>
</ol>

<p>This is absolutely normal; this is how Laminas forms work and what make them
so useful, but in this specific case it can leads to disastrous
consequences. When you have complex entities with many
OneToMany collections, imagine how many unnecessary calls may be made
(e.g. after discovering this problem, the author realized that their
application was doing 10 unnecessary database calls).</p>
<p>The fix is simple: if you donâ€™t need specific fieldsets
in a form, remove them. Here is a fixed EditUserForm:</p>
<pre class="code-block-table"><code class="php"><button
            type="button"
            class="copy-to-clipboard"
            data-copy-element-id="7d02988f71007943e0018770d3c1b6f09b355eb2"
            title="Copy to Clipboard"
        ><i class="fas fa-copy"></i></button><div id="7d02988f71007943e0018770d3c1b6f09b355eb2"><table class="code-block-table"><tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-1" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-1">1</a></td><td class="code-line" rowspan="30"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Application</span>\<span class="hljs-title">Form</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Laminas</span>\<span class="hljs-title">Hydrator</span>\<span class="hljs-title">DoctrineObject</span> <span class="hljs-title">as</span> <span class="hljs-title">DoctrineHydrator</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">Persistence</span>\<span class="hljs-title">ObjectManager</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Laminas</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Form</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EditNameForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Form</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ObjectManager $objectManager)</span>
    </span>{
        <span class="hljs-keyword">parent</span>::__construct(<span class="hljs-string">'edit-name-form'</span>);

        <span class="hljs-keyword">$this</span>-&gt;setHydrator(<span class="hljs-keyword">new</span> DoctrineHydrator($objectManager));

        <span class="hljs-comment">// Add the user fieldset, and set it as the base fieldset</span>
        $userFieldset = <span class="hljs-keyword">new</span> UserFieldset($objectManager);
        $userFieldset-&gt;setName(<span class="hljs-string">'user'</span>);
        $userFieldset-&gt;setUseAsBaseFieldset(<span class="hljs-keyword">true</span>);

        <span class="hljs-comment">// We don't want City relationship, so remove it!!</span>
        $userFieldset-&gt;remove(<span class="hljs-string">'city'</span>);

        <span class="hljs-keyword">$this</span>-&gt;add($userFieldset);

        <span class="hljs-comment">// â€¦ add CSRF and submit elements â€¦</span>

        <span class="hljs-comment">// We don't even need the validation group as the City fieldset does not</span>
        <span class="hljs-comment">// exist anymore</span>
    }
}</td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-2" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-2">2</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-3" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-3">3</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-4" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-4">4</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-5" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-5">5</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-6" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-6">6</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-7" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-7">7</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-8" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-8">8</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-9" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-9">9</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-10" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-10">10</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-11" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-11">11</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-12" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-12">12</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-13" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-13">13</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-14" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-14">14</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-15" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-15">15</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-16" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-16">16</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-17" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-17">17</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-18" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-18">18</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-19" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-19">19</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-20" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-20">20</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-21" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-21">21</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-22" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-22">22</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-23" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-23">23</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-24" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-24">24</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-25" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-25">25</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-26" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-26">26</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-27" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-27">27</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-28" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-28">28</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-29" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-29">29</a></td></tr>
<tr><td class="line-number noselect"><a name="line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-30" class="line-number-anchor" /><a href="#line-number-7d02988f71007943e0018770d3c1b6f09b355eb2-30">30</a></td></tr></table></div></code></pre>
<p>Because the UserFieldset no longer contains the CityFieldset
relation, it wonâ€™t be extracted.</p>
<p>As a rule of thumb, try to remove any unnecessary fieldset relationships,
and always look at which database calls are made.</p>

</div>
</div>

                                                </div>
                </div>
            </main>
        </div>
    </div>

        <button id="back-to-top" title="Go to top">Top</button>

                    <footer class="footer">
                <div class="container">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a href="/projects.html">Projects</a></li>
                        <li class="list-inline-item"><a href="/partners.html">Partners</a></li>
                        <li class="list-inline-item"><a href="/sponsorship.html">Sponsorship</a></li>
                        <li class="list-inline-item"><a href="/community/index.html">Community</a></li>
                        <li class="list-inline-item"><a href="/blog/index.html">Blog</a></li>
                        <li class="list-inline-item"><a href="/events.html">Events</a></li>
                        <li class="list-inline-item"><a href="/consulting.html">Consulting</a></li>
                    </ul>
                </div>
            </footer>
        
        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script
            src="https://www.doctrine-project.org/frontend/js/bundle.js?5d0fd0"
                            integrity="sha384-TnaYDKY9cY88DXYXY7rU1IVke3HynvLXOMGgtQIgQ07BiIc7Do6FkF/nvsbUS9Xn"
                        crossorigin="anonymous">
        </script>

                
        <script type="text/javascript">
            var projectSlug = 'doctrine-laminas-hydrator';
            var versionSlug = '3.4';

            var searchBoxSettings = {
                container: '#search-box',
                placeholder: 'Search Doctrine Laminas Hydrators 3.4'
            };

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }
        </script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
            </body>
</html>
