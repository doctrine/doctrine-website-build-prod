<!DOCTYPE html>
<html>
    <head>
        <title>Blog - Doctrine - PHP Database Tools</title>

        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
">

        <meta name="keywords" content="php,mysql,orm,dbal,database,mongodb,odm,annotations,migrations,cache,couchdb">

                    <meta name="robots" content="index, follow">
        
        
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

        <link href="https://www.doctrine-project.org/css/style.css?a4b3e9" rel="stylesheet" type="text/css" />

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

        <link rel="stylesheet" href="https://www.doctrine-project.org/components/highlightjs/styles/railscasts.css?b4f8ae" />

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.doctrine-project.org/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.doctrine-project.org/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.doctrine-project.org/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.doctrine-project.org/images/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.doctrine-project.org/images/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.doctrine-project.org/images/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.doctrine-project.org/images/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.doctrine-project.org/images/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://www.doctrine-project.org/images/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Doctrine"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://www.doctrine-project.org/images/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://www.doctrine-project.org/images/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://www.doctrine-project.org/images/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://www.doctrine-project.org/images/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://www.doctrine-project.org/images/mstile-310x310.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@doctrineorm" />
        <meta name="twitter:creator" content="@doctrineorm" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.doctrine-project.org/blog/page/64.html" />
        <meta property="og:title" content="Blog - Doctrine - PHP Database Tools" />
        <meta property="og:description" content="The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.
" />
        <meta property="og:image" content="https://www.doctrine-project.org/images/og.png" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="1200" />

        <link rel="alternate" type="application/atom+xml" href="https://www.doctrine-project.org/atom.xml" title="Doctrine activity feed" />

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "url": "https://www.doctrine-project.org",
            "logo": "https://www.doctrine-project.org/images/doctrine-logo.svg"
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://www.doctrine-project.org",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://www.doctrine-project.org?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>

        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "Doctrine",
            "url": "https://www.doctrine-project.org",
            "sameAs": [
                "https://twitter.com/doctrineorm"
            ]
        }
        </script>

        
        
            </head>
    <body>
                    <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap">
                <a class="navbar-brand text-hide" href="https://www.doctrine-project.org/"><img src="https://www.doctrine-project.org/images/doctrine-logo.svg?335f0f" />Doctrine</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/projects.html" id="navbarProjectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projects
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProjectsDropdown">
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/annotations.html">Annotations</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/cache.html">Cache</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/collections.html">Collections</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/common.html">Common</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/dbal.html">DBAL</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/inflector.html">Inflector</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/lexer.html">Lexer</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/migrations.html">Migrations</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/mongodb.html">MongoDB</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/mongodb-odm.html">MongoDB ODM</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/orm.html">ORM</a>
                                                                    <a class="dropdown-item notranslate" href="https://www.doctrine-project.org/projects/phpcr-odm.html">PHPCR ODM</a>
                                                                <a class="dropdown-item bg-secondary text-white font-weight-bold" href="https://www.doctrine-project.org/projects.html">View All</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/about/">About</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="https://www.doctrine-project.org/contribute/" id="navbarContributeDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contribute</a>

                            <div class="dropdown-menu" aria-labelledby="navbarContributeDropdown">
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/">Contributor Workflow</a>
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/maintainer/">Maintainer Workflow</a>
                                <a class="dropdown-item" href="https://www.doctrine-project.org/contribute/website/">Contribute to Website</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/community/">Community</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="https://www.doctrine-project.org/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.doctrine-project.org/team/">Team</a>
                        </li>
                    </ul>

                    <div class="google-translate-dropdown dropdown show d-inline-block mr-2">
                        <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="translateDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Translate
                        </a>

                        <div class="dropdown-menu" aria-labelledby="translateDropdown">
                            <div class="dropdown-item" id="google_translate_element">Loading...</div>
                        </div>
                    </div>

                    <div id="search-box">
                        <!-- SearchBox widget will appear here -->
                    </div>
                </div>

                <div class="search-results rounded">
                    <div id="hits">
                        <!-- Hits widget will appear here -->
                    </div>

                    <a href="https://www.algolia.com" target="_blank"><img src="https://www.doctrine-project.org/images/search-by-algolia.png" class="float-right" style="width: 150px;" /></a>
                </div>
            </nav>
        
            <main role="main" class="container-wrapper container">
                        <article>
        <header>
            <h2><a href="https://www.doctrine-project.org/2009/06/21/website-updates.html">Website Updates</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-06-21
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>Today I have deployed some updates to the Doctrine website. Some of the
updates all of you will enjoy, but another specific one might upset some
of you.</p>

<p>I have decided to remove the Doctrine Forum forever and consolidate the
user discussions in to the
<a href="http://groups.google.com/group/doctrine-user">doctrine-user</a> mailing
list which is hosted on Google Groups. I chose to do this for a few
reasons.</p>

<ul>
<li>Consolidate discussions in to one area so the community is not
split.</li>
<li>phpBB is horrible and is proving to be a lot of work for me to
maintain</li>
<li>I don't want to have to spend countless hours maintaining something
that google groups can do for me, for free</li>
</ul>

<p>I know this will upset some of you, but I hope you understand and are
happy that the Doctrine developers will now be able to spend more
time...<strong>developing Doctrine</strong>..instead of maintaining the forum.</p>

<p>Some other changes I have made/fixed.</p>

<ul>
<li>Change Logs are now fixed from the move</li>
<li>The <a href="http://www.doctrine-project.org/blog">blog</a> has been enhanced
and tags fixed</li>
<li><a href="http://www.doctrine-project.org/Doctrine_Record/1_1">API
Documentation</a>
Enhanced to include browse code links so you can see the code for
each class, function, etc.</li>
<li>A bunch of other small little things tweaked and fixed.</li>
</ul>

<p>If you find anything wrong with the website or something you'd like to
see different please let me know via the comments below or by e-mail at
jonwage [at] gmail.com</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://www.doctrine-project.org/2009/06/21/doctrine-future-roadmap.html">Doctrine Future Roadmap</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-06-21
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>So, lately we've been discussing and getting a lot of questions about
the future roadmap of Doctrine, specifically 2.0. If you are following
PHP 5.3 you will have noticed that PHP 5.3 RC4 was released last week.
This means that the stable release of 5.3 is very near.</p>

<p>Below you will find a schedule of the roadmap we have planned for the
upcoming months/years.</p>

<p>| Date | Item | | -------------- |
------------------------------------------------ | | 06/22/2009 | Branch
Doctrine 1.2 | | 06/24/2009 | PHP 5.3.0 Stable Release (YES!!!) | |
09/2009 | Begin 1.2 release cycle. Alpha, Beta, RC, Stable | | 09/2009 |
Final 6 months of 1.0 Support | | 09/2009 | Launch 2.0 Alpha 1 | |
11/2009 | Launch 1.2.0 with Long Term Support (18 months) | | 11/2009 |
Symfony 1.3 + Doctrine 1.2 | | 11/2009 | End Doctrine 1.1 Support | |
03/2010 | End Doctrine 1.0 Support | | 03/2010 | Continue 2.0 release
cycle | | ??/2010 | Release 2.0.0 with Long Term Support (18 months) | |
06/2011 | End Doctrine 1.2 Support |</p>

<p>We hope that the above timeline gives PHP 5.3 plenty of time to be
adopted before we officially stop support for the Doctrine 1.x series.
We think it will be plenty of time but depending how things play out, we
can always add more time to the support life cycle of the 1.x series,
but we hope to not have to. So, this Wednesday when PHP 5.3 is released,
please switch to it if you can and help with the adoption.</p>

        </div>

            </article>
    <article>
        <header>
            <h2><a href="https://www.doctrine-project.org/2009/06/19/using-views-with-doctrine.html">Using Views with Doctrine</a></h2>
        </header>

        <p class="lead">
            Posted on 2009-06-19
                            by
                                    jwage
                                    </p>

        <hr />

        <div>
            <p>I've seen a few requests recently on how you can use a view with
Doctrine. This is very easy and I've also learned a few neat tricks that
you can do to accomplish abnormal things while writing this article.</p>

<h1 id="creating-the-view">Creating the View</h1>

<p>First I will demonstrate how you can turn a normal <code>Doctrine_Query</code>
instance in to a view. This is just as easy as creating an instance of
<code>Doctrine_View</code> and setting a reference between the query and the view.</p>

<pre><code class="sourceCode php">&lt;?php
$q = Doctrine::getTable('BlogPost')
  -&gt;createQuery('p')
  -&gt;select('p.*, COUNT(c.id) as num_comments')
  -&gt;leftJoin('p.Comments c')
  -&gt;orderBy('p.id DESC')
  -&gt;groupBy('p.id');

$view = new Doctrine_View($q, 'test_view');
</code></pre>

<p>To create the view in the database you can call the
<code>Doctrine_View::create()</code> method.</p>

<pre><code class="sourceCode php">&lt;?php
$view-&gt;create();

**TIP** You can drop the view just the same by calling the
``Doctrine_View::drop()`` method.
</code></pre>

<pre><code class="sourceCode php">&lt;?php
    $view-&gt;drop();
</code></pre>

<h1 id="executing-the-view">Executing the View</h1>

<p>Now when the <code>Doctrine_Query</code> instance above is executed, it will
execute the SQL for the view instead of parsing the DQL, generating the
SQL and executing it.</p>

<pre><code class="sourceCode php">&lt;?php
$blogPosts = $q-&gt;execute();
</code></pre>

<p>Executing the above would execute the following SQL query.</p>

<pre><code>[sql]
SELECT * FROM test_view
</code></pre>

<h1 id="tweaking-the-view">Tweaking the View</h1>

<p>Now here is where things get interesting. Say we wanted to take the SQL
that the above <code>Doctrine_Query</code> generates, and modify it slightly with
some custom SQL that otherwise could not make it through the DQL parser.</p>

<p>We can get the SQL from the query, modify it, then manually create the
view in our database.</p>

<pre><code class="sourceCode php">&lt;?php
echo $q-&gt;getSql();
</code></pre>

<p>The above would output the following SQL.</p>

<pre><code>[sql]
SELECT b.id AS b__id, b.title AS b__title, b.excerpt AS b__excerpt, b.body AS b__body, COUNT(c.id) AS c__0 FROM blog_post b LEFT JOIN comment c ON b.id = c.blog_post_id GROUP BY b.id ORDER BY b.id DESC
</code></pre>

<p>Now lets say we wanted to add something to the SQL that is proprietary
to your DBMS, or is some complex SQL that won't make it through the DQL
parser. We can modify the above SQL then re-create the view with that
SQL manually. Let's make a simple change and add the <code>USE INDEX</code> keyword
to force MySQL to use a certain index for the query.</p>

<blockquote>
  <p><strong>NOTE</strong> The example I have chosen is a very simple one only to
  demonstrate the capabilities. This example may not be a real world
  scenario for you. The only purpose of me showing this is to open a
  door for you to solve potential problems for you in the future.</p>
</blockquote>

<pre><code>[sql]
SELECT b.id AS b__id, b.title AS b__title, b.excerpt AS b__excerpt, b.body AS b__body, COUNT(c.id) AS c__0 FROM blog_post b LEFT JOIN comment c USE INDEX (blog_post_id_idx) ON b.id = c.blog_post_id GROUP BY b.id ORDER BY b.id DESC;
</code></pre>

<p>Now lets take this query and manually create the view with it.</p>

<blockquote>
  <p><strong>NOTE</strong> We must first drop the view as we already created it once in
  a previous step. This is just as easy as issuing the DROP VIEW command
  to MySQL. Afterward, re-create the view again with the modified SQL.</p>
</blockquote>

<pre><code>[sql]
DROP VIEW test_view;
CREATE VIEW test_view AS SELECT b.id AS b__id, b.title AS b__title, b.excerpt AS b__excerpt, b.body AS b__body, COUNT(c.id) AS c__0 FROM blog_post b LEFT JOIN comment c USE INDEX (blog_post_id_idx) ON b.id = c.blog_post_id GROUP BY b.id ORDER BY b.id DESC;
</code></pre>

<p>Now when we execute the code in the first part of this article it will
execute the view which contains the customized SQL.</p>

<pre><code class="sourceCode php">&lt;?php
$blogPosts = $q-&gt;execute();

**CAUTION** If you customize the SQL, it must maintain the same
structure, aliases, etc. in order for Doctrine to be able to
hydrate the data in to the object graph.
</code></pre>

<p>That is it! Now you can easily use some custom SQL in your queries as
views. The benefit of using a view is that it is easily reusable and it
is much faster than executing a normal query in most cases.</p>

        </div>

            </article>

    <nav class="mt-4">
        <ul class="pagination">
            <li class="page-item"><a class="page-link" href="https://www.doctrine-project.org/blog/page/63.html">Newer Posts</a></li><br />
            <li class="page-item"><a class="page-link" href="https://www.doctrine-project.org/blog/page/65.html">Older Posts</a></li>        </ul>
    </nav>
            </main>

        
        <button id="back-to-top" title="Go to top">Top</button>

        <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

        <script src="https://www.doctrine-project.org/components/highlightjs/highlight.pack.js?3970aa"></script>

        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0"></script>

        <script id="instantsearch-template" type="text/template">
            
    <a href="{{url}}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{{_highlightResult.projectName.value}}}: {{{_highlightResult.h1.value}}}</h5>
        </div>

        {{#h2}}
            <p class="mb-1">
                <i class="far fa-arrow-alt-circle-right text-primary"></i>

                {{{_highlightResult.h2.value}}}

                {{#h3}}
                    > {{{_highlightResult.h3.value}}}
                {{/h3}}

                {{#h4}}
                    > {{{_highlightResult.h4.value}}}
                {{/h4}}

                {{#h5}}
                    > {{{_highlightResult.h5.value}}}
                {{/h5}}
            </p>
        {{/h2}}

        {{#content}}
            <div class="content p-2 rounded" style="background-color: rgba(0,0,0,.125);">
                {{{_highlightResult.content.value}}}
            </div>
        {{/content}}
    </a>

        </script>

        <script src="https://cdn.ravenjs.com/3.24.2/raven.min.js" crossorigin="anonymous"></script>

        <script type="text/javascript">
            Raven.config('https://09ce137590054cfd8f0b7e9324d6ec14@sentry.io/1197701').install()
        </script>

        <script src="https://www.doctrine-project.org/js/main.js?2a2af0"></script>
        <script src="https://www.doctrine-project.org/js/search.js?21d569"></script>

        <script type="text/javascript">
            var projectSlug = '';
            var versionSlug = 'latest';

            new Main();

            new Search(projectSlug, versionSlug);

            function googleAnalyticsEvent(eventCategory, eventAction, eventLabel, eventValue, fieldsObject) {
                                ga('send', 'event', eventCategory, eventAction, eventLabel, eventValue, fieldsObject);
                            }

            function googleTranslateElementInit() {
                $('#google_translate_element').html('');

                new google.translate.TranslateElement(
                    {pageLanguage: 'en'}, 'google_translate_element'
                );

                $('#google_translate_element select').on('change', function() {
                    var language = $('#google_translate_element select option:selected').text();

                    googleAnalyticsEvent('Translate', 'click', language);
                });
            }
        </script>

        <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>

        
                    <script type="text/javascript">
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-288343-7', 'auto');
                ga('send', 'pageview');
            </script>
        
        
            </body>
</html>
